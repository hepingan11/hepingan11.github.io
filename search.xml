<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ç‹çš„æ•…äº‹ï¼ˆå¤§å››ä¸Šï¼‰</title>
      <link href="/2026/02/14/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E5%9B%9B%E4%B8%8A%EF%BC%89/"/>
      <url>/2026/02/14/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E5%9B%9B%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/177272427d53abd2b7025ba83384f0d5_720.jpg" style="zoom:50%;" /><p>åƒæ¢¦ä¸€èˆ¬çš„å¤§å››ä¸Šä¹Ÿæ˜¯ç»“æŸäº†ï¼Œè¿™å­¦æœŸå…ˆå»å­¦æ ¡ä¸Šäº†åŠä¸ªæœˆçš„å­¦ç„¶åå°±è·‘å‡ºæ¥ä¸Šç­äº†ï¼Œé¦–å…ˆå°±æ˜¯æˆ‘ä»¬çš„ æŸé±¼ç§‘æŠ€æœ‰é™å…¬å¸ï¼Œè€æ¿æˆ‘åˆšå…¥èŒé‚£ä¼šå„¿è¿˜æŒºå¥½çš„ï¼Œæ²¡åŠ ç­å‹åŠ›ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œè¿˜å¸¦æˆ‘ä»¬å‘˜å·¥ä»æˆéƒ½ä¸€è·¯è‡ªé©¾åˆ°æ·±åœ³ï¼Œè·¯ä¸Šçš„è´¹ç”¨éƒ½æ˜¯è€æ¿åŒ…çš„ï¼Œé‚£æ—¶å€™æˆ‘è§‰å¾—æˆ‘çœŸçš„å†ç´¯ä¹Ÿèƒ½å¹²ä¸‹å»ï¼Œåœ¨æ·±åœ³å¾…çš„é‚£æ®µæ—¶é—´çœŸçš„æ˜¯æˆ‘åœ¨è¿™ä¸ªå…¬å¸çš„èœœæœˆï¼›å½“æ—¶ç™½å¤©å°±å»æ·±åœ³é‚£è¾¹å‚åŠ æ™ºå…ƒæœºå™¨äººçš„æ´»åŠ¨ï¼Œæ™šä¸Šæˆ‘ä»¬ä¸‰å°åª(å‘˜å·¥)å°±æ£é¼“æœºå™¨äººï¼Œçœ¼é‡Œåªæœ‰å¯¹æœªæ¥çš„ç¾å¥½æ†§æ†¬ï¼Œæ„Ÿè§‰èƒ½å’Œè€æ¿ä¸€èµ·å¹²å‡ºä¸€ç•ªå¤§äº‹ä¸šï¼Œé‚£å‡ å¤©çœŸçš„æ˜¯å„ç§è¯¯é—¯å¤©å®¶ï¼›å½“æ—¶ä¸¤å°æ—¶ç ”ç©¶å‡ºæœºå™¨ç‹—çš„ä»£ç åº“ï¼Œè¿˜è‡ªå·±å†™å‡ºä¸ªè·³èˆçš„æ‰§è¡Œè„šæœ¬ï¼Œè¿˜æ¥äº†ä¸ªç ”å‘å‡€åœ°æœºå™¨ç‹—çš„20wå¤§å•å­ã€‚<br>ä½†å¥½æ™¯ä¸é•¿ï¼Œåé¢å›é‡åº†åè€æ¿å°±å¼€å§‹å„ç§ä¸Šå¼ºåº¦å’Œè¶…ç¦»è°±çš„PUAï¼Œè¿›æ¥çš„æ—¶å€™æ˜¯ä»¥å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆçš„èŒä½é¢è¯•è¿›æ¥çš„ï¼Œä½†æ²¡æƒ³åˆ°çœŸç»™æˆ‘å¹²æˆâ€å…¨å¹²â€å·¥ç¨‹å¸ˆäº†ï¼è½¯ä»¶å¼€å‘ï¼Œæœºå™¨äººè¾…åŠ©ç ”å‘ï¼Œæœºå™¨äººæœºå™¨ç‹—ç®¡ç†ï¼ŒHR+é¢è¯•(è¿˜è®©æˆ‘å»é¢åµŒå…¥å¼çš„)ï¼Œç§Ÿæˆ¿ï¼Œå½“å¯¼æ¸¸ä»‹ç»äº§å“ï¼Œ996ï¼Œç®¡ç†ä¸¤ä¸ªå®ä¹ ç”Ÿï¼Œå…¬å¸ç‰©å“ç®¡ç†â€¦.åæ­£å°±æ˜¯ä¸€å †äº‹æƒ…ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿæ˜¯å¿è¿‡å»çš„ï¼Œåé¢è€æ¿ç›´æ¥é™å·¥èµ„äº†ï¼Œæˆ‘æ‹¿å®Œé‚£ä¸ªæœˆå·¥èµ„å°±ç›´æ¥èµ°äººäº†ğŸ˜¡å¦¥å¦¥çš„ä¸€ä¸ªèµ„æœ¬å®¶ï¼Œæƒ³æ¦¨å¹²å‘˜å·¥çš„å…¨éƒ¨ç²¾åŠ›ï¼Œæ„Ÿè§‰è€æ¿å¼€å…¬å¸å°±æ˜¯å•çº¯å›¾ä¸€ä¹ï¼›ç¦»å¼€è¿™å®¶å…¬å¸é‚£å‡ å¤©ï¼Œæ»¡è„‘å­çš„å¤é£DJï¼Œæœ‰ç§ä¸€æ— æ‰€æœ‰çš„æ„Ÿè§‰â€¦â€¦æˆ‘è¯•ç€æŠŠæˆ‘ä¹‹å‰çš„SuperPasså°ç¨‹åºæ›´æ–°ä¸€ä¸‹ï¼Œåˆ†åˆ«åœ¨è¶…çŸ­æ—¶é—´å†…ç‹¬ç«‹å¼€å‘å‡ºäº†ä¼—åˆ›æ­å’Œå®…å®¿é€ä¸¤æ¬¾å°ç¨‹åºï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¹‹å‰æ¥å•é”»ç‚¼å‡ºæ¥çš„å¼€å‘ä¸Šçº¿é€Ÿåº¦ğŸ˜ï¼Œä½†ä¹Ÿåªæ˜¯å¼€å‘å‡ºæ¥äº†ï¼Œå¹¶æ²¡æœ‰å®é™…çš„è¿è¥ï¼Œåœ¨è¢«è¾çš„é‚£æ®µæ—¶é—´é‡Œæˆ‘ä¹Ÿå»é¢è¯•äº†å…¶ä»–å…¬å¸ï¼Œå·¥èµ„é«˜çš„é¢è¯•æœºä¼šéƒ½ä¸ç»™ï¼Œé¢è¯•é€šè¿‡çš„å®ä¹ å°±4kï¼Œç§‹æ‹›ä¹Ÿç»“æŸäº†ï¼Œæˆ‘ç”šè‡³è€ƒè™‘æ¢è¡Œäº†ï¼Œå½“æ—¶ä¹Ÿæ˜¯è§‰å¾—æˆ‘å°±è¿™æ ·äº†â€¦â€¦<br>ä½†ä¸Šå¸åˆç»™æˆ‘æ‰“å¼€äº†ä¸€æ‰‡çª—ï¼Œæœ‰å¤©æˆ‘åœ¨bç«™ç›´æ’­æ•²æˆ‘çš„ä¼—åˆ›æ­é¡¹ç›®ï¼Œæœ‰ä¸ªäººçœ‹æˆ‘æ•²å¾—ä¸é”™ï¼Œå°±æƒ³æŠŠæˆ‘æ‹‰è¿›ä»–ä»¬å…¬å¸ï¼Œè€Œä»–å°±æ˜¯æˆ‘ç°åœ¨çš„ä¸»ç®¡ï¼›å½“æ—¶æˆ‘å°±æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€å»è·Ÿä»–èŠäº†èŠï¼Œå·¥ä½œåœ°ç‚¹åœ¨ä¸Šæµ·ï¼Œæˆ‘éœ€è¦ä»é•¿æ±Ÿå°¾è·‘åˆ°é•¿æ±Ÿå¤´ï¼Œè€Œä¸”è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªæ™®é€šçš„ç›´æ’­èŠå¤©è®¤è¯†çš„ç½‘å‹ï¼Œè¿™å¯¹æˆ‘æ˜¯ä¸ªéå¸¸å¤§çš„æŠ‰æ‹©ï¼Œä½†åé¢æˆ‘ä¹Ÿä¸‹å®šå†³å¿ƒå»é—¯ä¸€é—¯ï¼Œå¤§ä¸äº†å°±å½“å»ä¸Šæµ·ç©ä¸€ä¸ªæœˆäº†ã€‚<br>äºæ˜¯æ²ªæ¼‚æ—…ç¨‹å¼€å¯ï¼Œæ€€ç€ç´§å¼ åˆæ†§æ†¬çš„å¿ƒæ€æ¥åˆ°å…¬å¸æŠ¥é“çš„ç¬¬ä¸€å¤©ï¼Œé‚£ç§å‘¨å›´äººéƒ½ä¸ç†Ÿçš„æ„Ÿè§‰è®©æˆ‘è¿™ä¸ªæœ¬å°±ç¤¾æçš„äººéš¾å—ï¼Œå¯¹äºæˆ‘æ¥è¯´å¤„ç†äººé™…å…³ç³»æ¯”å†™ä»£ç è¦éš¾100å€ï¼Œæˆ‘å°±æƒ³ç€ï¼Œå…ˆæŠŠæ´»å¹²å¥½ï¼Œåé¢å†æ…¢æ…¢å¤„ç†å…³ç³»ï¼›ä½†æ²¡æƒ³åˆ°è¿™åç«¯æŠ€æœ¯æ ˆæœ‰äº›ä¸åŒ¹é…ï¼Œæ¯”å¦‚ç”¨gradleæ›¿ä»£mavenæ„å»ºï¼Œç”¨eurekaæ›¿ä»£nacosåšæ³¨å†Œï¼Œéƒ¨ç½²è¿ç»´ä½¿ç”¨k8sï¼Œ100å¤šä¸ªæ•°æ®åº“è¡¨ï¼Œè¿˜æœ‰é‚£å±å±±åç«¯æ¶æ„è®¾è®¡ï¼ŒæŠŠç½‘å…³å­˜æ•°æ®åº“é‡Œè¿˜æ²¡ç®¡ç†ç½‘å…³çš„è®¾è®¡ï¼Œå†™ä¸€ä¸ªæ¥å£æœ‰å¤šéº»çƒ¦ï¼Ÿå…ˆåœ¨serviceæ¨¡å—å†™å¥½é€»è¾‘ï¼Œå†åœ¨webå±‚åšç†”æ–­é™çº§ï¼Œç„¶åå†æ‰‹åŠ¨insertç½‘å…³é…ç½®åˆ°æ•°æ®åº“ï¼›ä¸è¿‡åœ¨è®¡ç®—æœºå¤©æ‰å°‘å¹´é¢å‰è¿™äº›å±å±±ä»£ç è¢«æˆ‘ä¸€ä¸¤å¤©å°±ç†Ÿæ‚‰å®Œäº†ğŸ˜è¿™æœŸé—´ä¹Ÿæ˜¯å­¦äº†å¾ˆå¤šçŸ¥è¯†ï¼Œå·¥èµ„ä¹Ÿæ‹¿äº†ï¼Œå·¥ä½œå¼ºåº¦ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œåœ¨è¿™é‡ŒåŠ ç­ä½ éœ€è¦ç”³è¯·ï¼ŒåŠ ç­åå¯ä»¥è°ƒä¼‘ã€‚<br>ä¹‹åå°±æ˜¯æˆ‘å·¥ä½œä¹‹ä½™é¢å¯¹ä¸€ä¸ªäººçš„æ— èŠï¼Œæˆ‘åœ¨ç½‘ä¸Šè®¤è¯†äº†è®¸å¤šæœ‹å‹ï¼Œä¸€èµ·è·¨å¹´å»é‡‘å±±çœ‹çƒŸèŠ±ï¼Œä¸€èµ·å‡ºæ¥åƒç«é”…åƒçƒ¤è‚‰å•¥çš„ã€‚å…¬å¸é‡Œé¢çš„äººä¹Ÿæ²¡æœ‰é‚£ä¹ˆéš¾ç›¸å¤„ï¼Œåªæ˜¯æˆ‘çš„è¯­è¨€æ¨¡å—å¤ªä½çº§äº†ä¸çŸ¥é“æ€ä¹ˆè¡¨è¾¾ğŸ˜‚ç»å¸¸èƒ½æ”¶åˆ°å¥¶èŒ¶å–ï¼Œæˆ‘æ„Ÿè§‰æˆ‘å¿«è¢«è¯·äº†10æ¯å¥¶èŒ¶äº†ï¼ŒåŒ…æ‹¬å…¬å¸å¹´ä¼šè¿˜å»è«å¹²å±±ç©äº†ä¸€åœˆâ€¦..<br>åœ¨2æœˆä¸Šæ—¬ä¹Ÿæ˜¯æˆåŠŸä¸Šçº¿äº†å°ç¨‹åºï¼Œä¸€èµ·è§£å†³è¿™ä¸ªå±å±±é¡¹ç›®ä¹Ÿæ˜¯å¾ˆæœ‰æˆå°±æ„Ÿçš„(è™½ç„¶ä½†æ˜¯è¿˜æ˜¯æä¸€å˜´ï¼Œè¿™32G&#x2F;16æ ¸+16G&#x2F;8æ ¸åŒæœåŠ¡å™¨+K8Sæ¶æ„+3ä¸ªè´Ÿè½½å‡è¡¡+RDSæ•°æ®åº“+RedisæœåŠ¡+NATç½‘å…³æœåŠ¡+OSSåªæ‹¿æ¥éƒ¨ç½²ä¸€ä¸ªå°ç¨‹åºæ˜¯ä¸æ˜¯æœ‰ç‚¹å„¿æµªè´¹äº†ğŸ˜‚)<br>æœ‰é’±æ²¡é’±å›å®¶è¿‡å¹´ï¼Œæœ¬æ¬¡çš„æ¢¦å¹»ç»å†ä¹Ÿæ˜¯ç»“æŸäº†</p><p>å¯¹äº†æœ‰æ—¶é—´å¯ä»¥æ¥çœ‹çœ‹æˆ‘é©¬ä¸Šä¸Šçº¿çš„æ–°é¡¹ç›®ã€Šæ¨¡æ™ºç›’ã€‹ï¼Œå°†æˆ‘çš„Pass Assistantå’Œä¼—åˆ›æ­é›†åˆåœ¨ä¸€èµ·å¼€å‘äº†ä¸€ä¸ªåŒç«¯(PC+å°ç¨‹åº)çš„é¡¹ç›®ï¼Œæœ€è¿‘æ­£åœ¨ç ”ç©¶RagçŸ¥è¯†å›¾è°±å’Œè‡ªå·±çš„workflow</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringcloudAlibabaå…¨å®¶æ¡¶é¡¹ç›®æ¶æ„æ­å»ºæ•™ç¨‹ï¼Œä»é›¶è®¾è®¡å¾®æœåŠ¡æ¶æ„(åŒ…å«Nacos+RabbitMQ+Sentinel)</title>
      <link href="/2025/10/08/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/SpringcloudAlibaba%E5%85%A8%E5%AE%B6%E6%A1%B6%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%8C%E4%BB%8E%E9%9B%B6%E8%AE%BE%E8%AE%A1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84-%E5%8C%85%E5%90%ABNacos-RabbitMQ-Sentinel-Seata/"/>
      <url>/2025/10/08/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/SpringcloudAlibaba%E5%85%A8%E5%AE%B6%E6%A1%B6%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B%EF%BC%8C%E4%BB%8E%E9%9B%B6%E8%AE%BE%E8%AE%A1%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84-%E5%8C%85%E5%90%ABNacos-RabbitMQ-Sentinel-Seata/</url>
      
        <content type="html"><![CDATA[<p><strong>è‡ªå·±å­¦äº†ä¸‰å¹´Javaæ€»ç»“å‡ºæ¥çš„Springcloud-alibabaå¾®æœåŠ¡æ¶æ„æ¨¡æ¿</strong></p><h1 id="æ¨¡æ¿ä»‹ç»"><a href="#æ¨¡æ¿ä»‹ç»" class="headerlink" title="æ¨¡æ¿ä»‹ç»"></a>æ¨¡æ¿ä»‹ç»</h1><p>å…¶ä¸­ç›¸å…³æŠ€æœ¯å’Œä¸­é—´ä»¶åŒ…å«ï¼š</p><ul><li>Mysql 8</li><li>Redis</li><li>Sa-token</li><li>Mybatis-plus</li><li>Ali Oss</li><li>Nacos</li><li>RabbitMQ</li><li>Sentinel</li><li>Docker</li><li>ä»¥åŠä¸€äº›å°æ‚ä»¶(fastjson,Druidè¿æ¥æ± ,lombokâ€¦..)</li></ul><p>ä¸ç”¨å…¨éƒ¨äº†è§£ï¼Œæ¯”å¦‚ä½ ä¸æƒ³ç”¨rabbitmqç›´æ¥åœ¨ä»£ç é‡Œé¢åˆ é™¤å¯¹åº”ä¾èµ–å’Œä»£ç ä»¥åŠymlé…ç½®å°±è¡Œ</p><p><strong>SpringCloudç‰ˆæœ¬ç»„ä»¶ä¹‹é—´æœ‰ä¸¥æ ¼çš„ä¾èµ–ï¼Œæœ¬æ¬¡é‡‡ç”¨çš„ç‰ˆæœ¬å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</strong></p><table><thead><tr><th>Spring Cloud Alibaba Version</th><th>Sentinel Version</th><th>Nacos Version</th><th>RocketMQ Version</th><th>Seata Version</th></tr></thead><tbody><tr><td>2023.0.1.0</td><td>1.8.6</td><td>2.3.2</td><td>5.1.4</td><td>2.0.0</td></tr></tbody></table><table><thead><tr><th>Spring Cloud Alibaba Version</th><th>Spring Cloud Version</th><th>Spring Boot Version</th></tr></thead><tbody><tr><td>2023.0.1.0</td><td>Spring Cloud 2023.0.1</td><td>3.2.4</td></tr></tbody></table><p>(æ”¹æ¨¡æ¿ä¸­æ²¡æœ‰ä½¿ç”¨RocketMQ,è€Œæ˜¯RabbiitMQ-3-management)</p><h1 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h1><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>ä½¿ç”¨äº†ä¸¤ä¸ªè¡¨ä½œä¸ºæµ‹è¯•ï¼Œç›´æ¥åˆ›å»ºè¡¨å°±è¡Œï¼ˆæ•°æ®åº“é»˜è®¤ä½¿ç”¨çš„åå­—æ˜¯â€™cloud-mubanâ€™ï¼‰ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> orders</span><br><span class="line">(</span><br><span class="line">    order_id     <span class="type">bigint</span> auto_increment</span><br><span class="line">        <span class="keyword">primary</span> key,</span><br><span class="line">    order_name   <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    amount       <span class="keyword">double</span>       <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    user_id      <span class="type">bigint</span>       <span class="keyword">null</span>,</span><br><span class="line">    username     <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">null</span>,</span><br><span class="line">    created_time datetime     <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)</span><br><span class="line">    comment <span class="string">&#x27;è®¢å•&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">    user_id  <span class="type">bigint</span> auto_increment</span><br><span class="line">        <span class="keyword">primary</span> key,</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">200</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">250</span>) <span class="keyword">null</span>,</span><br><span class="line">    role     <span class="type">varchar</span>(<span class="number">10</span>)  <span class="keyword">not</span> <span class="keyword">null</span> comment <span class="string">&#x27;è§’è‰²&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="Nacos"><a href="#Nacos" class="headerlink" title="Nacos"></a>Nacos</h2><p>å¦‚æœä½ è¦ä½¿ç”¨nacos,æˆ‘ä½¿ç”¨çš„æ˜¯dockerå®‰è£…ï¼ŒæŒä¹…åŒ–ä½¿ç”¨çš„mysql,ä¸€é”®å®‰è£…æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker run -d ^</span><br><span class="line">  --name nacos-mysql ^</span><br><span class="line">  -p 8848:8848 ^</span><br><span class="line">  -p 9848:9848 ^</span><br><span class="line">  -e MODE=standalone ^</span><br><span class="line">  -e SPRING_DATASOURCE_PLATFORM=mysql ^</span><br><span class="line">  -e MYSQL_SERVICE_HOST=host.docker.internal ^</span><br><span class="line">  -e MYSQL_SERVICE_PORT=3306 ^</span><br><span class="line">  -e MYSQL_SERVICE_DB_NAME=nacos_config ^</span><br><span class="line">  -e MYSQL_SERVICE_USER=root ^</span><br><span class="line">  -e MYSQL_SERVICE_PASSWORD=123456 ^</span><br><span class="line">  -e MYSQL_DATABASE_NUM=1 ^</span><br><span class="line">  -e JVM_XMS=512m ^</span><br><span class="line">  -e JVM_XMX=512m ^</span><br><span class="line">  nacos/nacos-server:v2.3.2</span><br></pre></td></tr></table></figure><p>å½“ç„¶å¯åŠ¨åä½ ä¼šå‘ç°æŠ¥é”™ï¼Œé‚£æ˜¯å› ä¸ºä½ æ²¡æœ‰åˆå§‹åŒ–mysqlæ•°æ®åº“è¡¨ï¼Œä¸‹è½½æˆ‘ä¸‹é¢çš„sqlè¯­å¥æˆ–ç›´æ¥å¤åˆ¶ï¼Œç„¶åæ–°å»ºä¸€ä¸ªnacos_configæ•°æ®åº“è¿è¡Œå°±è¡Œï¼š</p><p>sqlæ–‡ä»¶ä¸‹è½½åœ°å€ï¼š<a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/mysql-schema.sql%EF%BC%88%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80%E5%A4%B1%E6%95%88%E4%BA%86%E5%8F%AF%E4%BB%A5%E5%8E%BB%E5%AE%98%E6%96%B9%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%89%88%E6%9C%AC%E7%9A%84%E6%96%87%E4%BB%B6%E6%89%BE%E5%88%B0mysql-schema.sql%E6%88%96%E7%A7%81%E6%88%91%EF%BC%89">https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/mysql-schema.sqlï¼ˆæ–‡ä»¶ä¸‹è½½åœ°å€å¤±æ•ˆäº†å¯ä»¥å»å®˜æ–¹ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„æ–‡ä»¶æ‰¾åˆ°mysql-schema.sqlæˆ–ç§æˆ‘ï¼‰</a></p><ul><li><strong>Nacosç½‘å…³æ¨¡å—é…ç½®ï¼š</strong></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9000</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">http://127.0.0.1:8080</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8719</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">globalcors:</span></span><br><span class="line">        <span class="attr">cors-configurations:</span></span><br><span class="line">          <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOriginPatterns:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;http://localhost:8080&quot;</span>  <span class="comment">#å…è®¸å‰ç«¯è·¨åŸŸçš„åœ°å€</span></span><br><span class="line">            <span class="attr">allowedMethods:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;GET&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;POST&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;PUT&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;DELETE&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;OPTIONS&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;HEAD&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;cloudTCH&quot;</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">maxAge:</span> <span class="number">360000</span></span><br><span class="line">        <span class="comment"># è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªçš„é—®é¢˜</span></span><br><span class="line">        <span class="attr">add-to-simple-url-handler-mapping:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">locator:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#å¼€å¯æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cloud-system</span> <span class="comment">#è·¯ç”±IDï¼Œéšä¾¿å†™åªè¦æ˜¯å”¯ä¸€çš„å°±è¡Œ</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://cloud-system</span> <span class="comment">#åŒ¹é…æœåŠ¡çš„è·¯ç”±åœ°å€</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/auth/**</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">cloud-order</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://cloud-order</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/order/**</span></span><br><span class="line">  <span class="attr">codec:</span></span><br><span class="line">    <span class="attr">max-in-memory-size:</span> <span class="number">1048576</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">max-file-size:</span> <span class="string">10240MB</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">10240MB</span></span><br></pre></td></tr></table></figure><ul><li><strong>Nacos cloud-commonæ¨¡å—é…ç½®ï¼š</strong></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é˜¿é‡ŒOSS</span></span><br><span class="line"><span class="attr">ali-oss:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">&#x27;oss-cn-hangzhou.aliyuncs.com&#x27;</span></span><br><span class="line">  <span class="attr">accessKey:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">bucketName:</span> <span class="string">&#x27;img-&#x27;</span></span><br><span class="line">  <span class="attr">domain:</span> <span class="string">&#x27;https://img-.oss-cn-hangzhou.aliyuncs.com&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><strong>Nacos cloud-orderæ¨¡å—é…ç½®ï¼š</strong></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9002</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">1234</span></span><br></pre></td></tr></table></figure><ul><li><strong>cloud-systemï¼š</strong></li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9001</span></span><br></pre></td></tr></table></figure><ul><li><strong>cloud-parentçˆ¶é…ç½®ï¼ˆå³æ‰€æœ‰æ¨¡å—éƒ½å¼•ç”¨äº†ï¼‰ï¼š</strong></li></ul><p>è®°å¾—ä¿®æ”¹ä¸ºè‡ªå·±çš„mysqlâ€™å’Œrediså¯†ç å’Œæ•°æ®åº“è¿æ¥</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">cache-enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">jdbc-type-for-null:</span> <span class="string">&#x27;null&#x27;</span></span><br><span class="line"><span class="attr">spring:</span>  <span class="comment"># mysqlé…ç½®</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/cloud_muban?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="comment"># redisé…ç½®</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">lettuce:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">200</span></span><br><span class="line">          <span class="attr">max-wait:</span> <span class="string">-1ms</span></span><br><span class="line">          <span class="attr">max-idle:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">min-idle:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">database:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure><h2 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h2><p>ä¾ç„¶æ˜¯dockerå®‰è£…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name rabbitmq -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=1234 -p 15672:15672 -p 5672:5672 rabbitmq:3-management</span><br></pre></td></tr></table></figure><p>è´¦å¯†ä¸ºadmin&#x2F;1234</p><p>åœ¨cloud-orderæ¨¡å—çš„testé‡Œæœ‰ä¸ªMQTestç±»å¯ä»¥æµ‹è¯•ä½ çš„mqå¼„å¥½æ²¡ï¼Œè®°å¾—æ–°å»ºä¸ªsimple.queueé˜Ÿåˆ—ï¼›</p><h2 id="Sentinel"><a href="#Sentinel" class="headerlink" title="Sentinel"></a>Sentinel</h2><p>å®˜ç½‘ï¼š<a href="https://sentinelguard.io/zh-cn/index.html">home | Sentinel</a></p><p>æœ¬æ¬¡ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯1.8.6ï¼Œå®˜ç½‘ä¸‹è½½åœ°å€:<a href="https://github.com/alibaba/Sentinel/releases/download/1.8.6/sentinel-dashboard-1.8.6.jar">https://github.com/alibaba/Sentinel/releases/download/1.8.6/sentinel-dashboard-1.8.6.jar</a></p><p>ä¸‹è½½å¥½åç›´æ¥åœ¨å½“å‰æ–‡ä»¶å¤¹cmdè¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar sentinel-dashboard-1.8.6.jar</span><br></pre></td></tr></table></figure><p>é»˜è®¤å¯†ç ä¸ºsentinel&#x2F;sentinel</p><h1 id="å…¶å®ƒè¯´æ˜"><a href="#å…¶å®ƒè¯´æ˜" class="headerlink" title="å…¶å®ƒè¯´æ˜"></a>å…¶å®ƒè¯´æ˜</h1><p>commonä¸­ä¸€äº›ç±»çš„æ•™ç¨‹å‚è€ƒè§†é¢‘ï¼š<a href="https://gitee.com/link?target=https://www.bilibili.com/video/BV1a9nGz4EwE/?spm_id_from=333.1387.homepage.video_card.click&vd_source=190aa40e29cf9c29c0ec0fe896bdef1f">https://www.bilibili.com/video/BV1a9nGz4EwE/?spm_id_from&#x3D;333.1387.homepage.video_card.click&amp;vd_source&#x3D;190aa40e29cf9c29c0ec0fe896bdef1f</a></p><p>é¡¹ç›®å‘ç°é—®é¢˜äº†æ¬¢è¿+q1973016127ç§èŠæˆ‘å“¦~</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> springcloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringAiè‡ªå®šä¹‰Mcpå®¢æˆ·ç«¯é€‰æ‹©å·¥å…·è°ƒç”¨</title>
      <link href="/2025/08/21/SpringAi%E8%87%AA%E5%AE%9A%E4%B9%89Mcp%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%89%E6%8B%A9%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8/"/>
      <url>/2025/08/21/SpringAi%E8%87%AA%E5%AE%9A%E4%B9%89Mcp%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%80%89%E6%8B%A9%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>æ€»æ‰€å‘¨çŸ¥åœ¨SpringAiä¸­MCP Clienté»˜è®¤çš„mcpæ¥å…¥æ–¹å¼æ˜¯åœ¨application.ymlé‡Œé¢é…ç½®mcpæœåŠ¡åˆ—è¡¨åï¼Œå¯¹è¯æ¯æ¬¡éƒ½ä¼šè°ƒç”¨æ‰€æœ‰çš„mcpæœåŠ¡ï¼Œè¿™æ˜¯éå¸¸æ…¢åˆéå¸¸ä¸è‡ªå®šä¹‰çš„ä¸€ç§æ–¹æ³•ï¼›æœ‰æ²¡æœ‰æ–¹å¼å¯ä»¥åœ¨æ¯æ¬¡å¯¹è¯æ—¶æˆ‘å¯ä»¥è‡ªå·±é€‰æ‹©æˆ‘è¦ç”¨çš„mcpæœåŠ¡å‘¢ï¼Ÿæœ‰çš„å…„å¼Ÿï¼Œæœ‰çš„ï¼›</p><p>é¦–å…ˆåˆ æ‰åŸæ¥applicationé…ç½®çš„mcp clientï¼Œæ–°å»ºä¸€ä¸ªMcpåˆ—è¡¨é…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">McpListConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//sse</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ToolCallback&gt; <span class="title function_">baiduMap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">McpClientTransport</span> <span class="variable">transport</span> <span class="operator">=</span> HttpClientSseClientTransport</span><br><span class="line">                .builder(<span class="string">&quot;https://mcp.map.baidu.com&quot;</span>)</span><br><span class="line">                .sseEndpoint(<span class="string">&quot;/sse?ak=&quot;</span>)</span><br><span class="line">                .objectMapper(<span class="keyword">new</span> <span class="title class_">ObjectMapper</span>())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">McpAsyncClient</span> <span class="variable">client</span> <span class="operator">=</span> McpClient.async(transport).initializationTimeout(Duration.ofSeconds(<span class="number">30</span>)).build();</span><br><span class="line">        client.initialize().block();</span><br><span class="line">        <span class="keyword">return</span> McpToolUtils.getToolCallbacksFromAsyncClients(client);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//stdio</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ToolCallback&gt; <span class="title function_">zhiPuAi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ServerParameters</span> <span class="variable">serverParameters</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerParameters</span>.Builder(<span class="string">&quot;cmd&quot;</span>)</span><br><span class="line">                .arg(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">                .env(<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">McpClientTransport</span> <span class="variable">transport</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StdioClientTransport</span>(serverParameters);</span><br><span class="line">        <span class="type">McpAsyncClient</span> <span class="variable">client</span> <span class="operator">=</span> McpClient.async(transport).initializationTimeout(Duration.ofSeconds(<span class="number">30</span>)).build();</span><br><span class="line">        client.initialize().block();</span><br><span class="line">        <span class="keyword">return</span> McpToolUtils.getToolCallbacksFromAsyncClients(client);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•å¼•å…¥ï¼Œåˆ†åˆ«æ˜¯sseå’Œstdioæ¨¡å¼ï¼›å…·ä½“æ„å»ºæ–¹æ³•å¯ä»¥å‚è€ƒç« æœ«å°¾æºç ;å…¶å®å°±æ˜¯è°ƒç”¨äº†ä¸€ä¸ªå·¥å…·ç±»å°†McpAsyncClientè½¬ä¸ºäº†List<ToolCallback></p><p>è¿™é‡Œä¸ºä»€ä¹ˆè¦åœ¨ç¬¬ä¸€ä¸ªåŠ ä¸ŠPrimaryæ³¨è§£å‘¢ï¼Ÿå› ä¸ºå®ƒä¸¤ä¸ªè¿”å›çš„ç±»å‹éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒåŠ ä¸ªPrimaryå°±å¯ä»¥é»˜è®¤åŠ è½½ç¬¬ä¸€ä¸ªï¼Œè¯¦ç»†è¯·é˜…è¯»Springä¸­å¼ºå¤§çš„@Beanæ³¨è§£</p><p>ç„¶åå†åœ¨å¯¹è¯ä¸­å¯¼å…¥ä½ éœ€è¦ç”¨åˆ°çš„mcpï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> AiConfig aiConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼å…¥å¯¹åº”çš„æ–¹æ³•å</span></span><br><span class="line">List&lt;ToolCallback&gt; toolCallbacksFromAsyncClients = mcpListConfig.baiduMap();</span><br><span class="line"></span><br><span class="line">ChatClient.builder(model).defaultSystem(role)</span><br><span class="line">                   .defaultAdvisors(MessageChatMemoryAdvisor.builder(chatMemory).build())</span><br><span class="line">                        .defaultToolCallbacks(toolCallbackProvider)</span><br><span class="line">                        .build()</span><br><span class="line">                        .prompt()</span><br><span class="line">                .user(messageDto.getMessage())</span><br><span class="line">                .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br></pre></td></tr></table></figure><hr><p><strong>HttpClientSseClientTransportçš„æ„é€ æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String baseUri;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">sseEndpoint</span> <span class="operator">=</span> <span class="string">&quot;/sse&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> HttpClient.Builder clientBuilder;</span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line">    <span class="keyword">private</span> HttpRequest.Builder requestBuilder;</span><br><span class="line"></span><br><span class="line">    Builder() &#123;</span><br><span class="line">        <span class="built_in">this</span>.clientBuilder = HttpClient.newBuilder().version(Version.HTTP_1_1).connectTimeout(Duration.ofSeconds(<span class="number">10L</span>));</span><br><span class="line">        <span class="built_in">this</span>.objectMapper = <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="built_in">this</span>.requestBuilder = HttpRequest.newBuilder().header(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** <span class="doctag">@deprecated</span> */</span></span><br><span class="line">    <span class="meta">@Deprecated(</span></span><br><span class="line"><span class="meta">        forRemoval = true</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">(String baseUri)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.clientBuilder = HttpClient.newBuilder().version(Version.HTTP_1_1).connectTimeout(Duration.ofSeconds(<span class="number">10L</span>));</span><br><span class="line">        <span class="built_in">this</span>.objectMapper = <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="built_in">this</span>.requestBuilder = HttpRequest.newBuilder().header(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        Assert.hasText(baseUri, <span class="string">&quot;baseUri must not be empty&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.baseUri = baseUri;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Builder <span class="title function_">baseUri</span><span class="params">(String baseUri)</span> &#123;</span><br><span class="line">        Assert.hasText(baseUri, <span class="string">&quot;baseUri must not be empty&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.baseUri = baseUri;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">sseEndpoint</span><span class="params">(String sseEndpoint)</span> &#123;</span><br><span class="line">        Assert.hasText(sseEndpoint, <span class="string">&quot;sseEndpoint must not be empty&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.sseEndpoint = sseEndpoint;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">clientBuilder</span><span class="params">(HttpClient.Builder clientBuilder)</span> &#123;</span><br><span class="line">        Assert.notNull(clientBuilder, <span class="string">&quot;clientBuilder must not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.clientBuilder = clientBuilder;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">customizeClient</span><span class="params">(<span class="keyword">final</span> Consumer&lt;HttpClient.Builder&gt; clientCustomizer)</span> &#123;</span><br><span class="line">        Assert.notNull(clientCustomizer, <span class="string">&quot;clientCustomizer must not be null&quot;</span>);</span><br><span class="line">        clientCustomizer.accept(<span class="built_in">this</span>.clientBuilder);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">requestBuilder</span><span class="params">(HttpRequest.Builder requestBuilder)</span> &#123;</span><br><span class="line">        Assert.notNull(requestBuilder, <span class="string">&quot;requestBuilder must not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.requestBuilder = requestBuilder;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">customizeRequest</span><span class="params">(<span class="keyword">final</span> Consumer&lt;HttpRequest.Builder&gt; requestCustomizer)</span> &#123;</span><br><span class="line">        Assert.notNull(requestCustomizer, <span class="string">&quot;requestCustomizer must not be null&quot;</span>);</span><br><span class="line">        requestCustomizer.accept(<span class="built_in">this</span>.requestBuilder);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">objectMapper</span><span class="params">(ObjectMapper objectMapper)</span> &#123;</span><br><span class="line">        Assert.notNull(objectMapper, <span class="string">&quot;objectMapper must not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.objectMapper = objectMapper;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> HttpClientSseClientTransport <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HttpClientSseClientTransport</span>(<span class="built_in">this</span>.clientBuilder.build(), <span class="built_in">this</span>.requestBuilder, <span class="built_in">this</span>.baseUri, <span class="built_in">this</span>.sseEndpoint, <span class="built_in">this</span>.objectMapper);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ServerParametersçš„æ„é€ æ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String command;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; args = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; env = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">(String command)</span> &#123;</span><br><span class="line">        Assert.notNull(command, <span class="string">&quot;The command can not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.command = command;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">args</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">        Assert.notNull(args, <span class="string">&quot;The args can not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.args = Arrays.asList(args);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">args</span><span class="params">(List&lt;String&gt; args)</span> &#123;</span><br><span class="line">        Assert.notNull(args, <span class="string">&quot;The args can not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.args = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(args);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">arg</span><span class="params">(String arg)</span> &#123;</span><br><span class="line">        Assert.notNull(arg, <span class="string">&quot;The arg can not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.args.add(arg);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">env</span><span class="params">(Map&lt;String, String&gt; env)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (env != <span class="literal">null</span> &amp;&amp; !env.isEmpty()) &#123;</span><br><span class="line">            <span class="built_in">this</span>.env.putAll(env);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Builder <span class="title function_">addEnvVar</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line">        Assert.notNull(key, <span class="string">&quot;The key can not be null&quot;</span>);</span><br><span class="line">        Assert.notNull(value, <span class="string">&quot;The value can not be null&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.env.put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ServerParameters <span class="title function_">build</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ServerParameters</span>(<span class="built_in">this</span>.command, <span class="built_in">this</span>.args, <span class="built_in">this</span>.env);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringAi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringAié«˜åº¦è‡ªå®šä¹‰Mysqlæ•°æ®åº“æŒä¹…åŒ–æ•™ç¨‹</title>
      <link href="/2025/08/19/SpringAi%E9%AB%98%E5%BA%A6%E8%87%AA%E5%AE%9A%E4%B9%89Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%81%E4%B9%85%E5%8C%96%E6%95%99%E7%A8%8B/"/>
      <url>/2025/08/19/SpringAi%E9%AB%98%E5%BA%A6%E8%87%AA%E5%AE%9A%E4%B9%89Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8C%81%E4%B9%85%E5%8C%96%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>æ€»æ‰€å‘¨çŸ¥SpringAiæä¾›çš„Mysql JDBCæ•°æ®åº“è®°å¿†å­˜å‚¨çš„è¡¨åªæœ‰å››ä¸ªå­—æ®µï¼Œè¿™éå¸¸é™åˆ¶äº†æˆ‘ä»¬çš„å‘æŒ¥ï¼Œæƒ³è¦å®ç°é«˜åº¦è‡ªå®šä¹‰å¯ä»¥å‚è€ƒæˆ‘çš„æ–¹æ³•ï¼›</p><p>åˆ›å»ºMysqlChatMemoryç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MysqlChatMemory</span> <span class="keyword">implements</span> <span class="title class_">ChatMemory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringAiChatMemoryMapper springAiChatMemoryMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String conversationId, Message message)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String conversationId, List&lt;Message&gt; messages)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Message&gt; <span class="title function_">get</span><span class="params">(String conversationId)</span> &#123;</span><br><span class="line">        List&lt;SpringAiChatMemory&gt; springAiChatMemories = springAiChatMemoryMapper.selectList(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SpringAiChatMemory&gt;().lambda()</span><br><span class="line">                .eq(SpringAiChatMemory::getConversationId, conversationId)</span><br><span class="line">                .orderByDesc(SpringAiChatMemory::getId)</span><br><span class="line">                .last(<span class="string">&quot;LIMIT 10&quot;</span>));<span class="comment">//æœ€å¤§è®°å¿†æ¡æ•°</span></span><br><span class="line">        List&lt;Message&gt; messages = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (SpringAiChatMemory springAiChatMemory : springAiChatMemories)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> springAiChatMemory.getType();</span><br><span class="line">            <span class="keyword">switch</span> (type)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;USER&quot;</span> -&gt; messages.add(<span class="keyword">new</span> <span class="title class_">UserMessage</span>(springAiChatMemory.getContent()));</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;ASSISTANT&quot;</span> -&gt; messages.add(<span class="keyword">new</span> <span class="title class_">AssistantMessage</span>(springAiChatMemory.getContent()));</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;SYSTEM&quot;</span> -&gt; messages.add(<span class="keyword">new</span> <span class="title class_">SystemMessage</span>(springAiChatMemory.getContent()));</span><br><span class="line">                <span class="keyword">default</span> -&gt; <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Unknown message type:&quot;</span>+type);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> messages;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">(String conversationId)</span> &#123;</span><br><span class="line">        springAiChatMemoryMapper.delete(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;SpringAiChatMemory&gt;().lambda()</span><br><span class="line">                .eq(SpringAiChatMemory::getConversationId, conversationId));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ChatMemoryæœ‰å››ä¸ªæ–¹æ³•å¯ä»¥å®ç°ï¼Œgetå°±æ˜¯è·å–æ•°æ®åˆ—è¡¨ï¼Œå…¶ä¸­last(â€œlimit 10â€)å°±æ˜¯é™åˆ¶10æ¡å¯¹è¯è®°å¿†ä¸Šä¸‹æ–‡ï¼ŒåŒç­‰äºMessageWindowChatMemory.builder().chatMemoryRepository(chatMemoryRepository).maxMessages(15).build();</p><ul><li><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘çš„<strong>addæ–¹æ³•æ²¡æœ‰å®ç°</strong>ï¼Œå› ä¸ºå®ƒä¼ å…¥çš„Messageåªèƒ½è·å–å¯¹è¯è§’è‰²ï¼Œæ–‡æœ¬ï¼Œåª’ä½“ä¸‰ä¸ªå‚æ•°ï¼›æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦åœ¨å¯¹è¯å®Œåè‡ªå·±å»æ·»åŠ æ•°æ®åº“ï¼Œå‚è€ƒæˆ‘çš„å¯¹è¯ä»£ç ï¼šã€</p></li><li><pre><code class="java">Flux&lt;String&gt; content = chatClient.prompt()        .user(messageDto.getMessage())        .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))        .stream()        .content();content.doOnNext(chunk -&gt; &#123;&#125;).reduce((s1, s2) -&gt; s1 + s2).subscribe(        result -&gt; &#123;            // æµå¼ç»“æŸåï¼Œ            springAiChatMemoryMapper.insert(new SpringAiChatMemory()                    .setContent(messageDto.getMessage())                    .setType(&quot;USER&quot;)                    .setModel(modelName)                    .setConversationId(messageDto.getChatId())                    .setTimestamp(LocalDateTime.now()));            springAiChatMemoryMapper.insert(new SpringAiChatMemory()                    .setContent(result)                    .setModel(modelName)                    .setType(&quot;ASSISTANT&quot;)                    .setConversationId(messageDto.getChatId())                    .setTimestamp(LocalDateTime.now()));        &#125;);return content;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æˆ‘çš„SpringAiChatMemoryï¼š</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">@Data</span><br><span class="line">@Accessors(chain = true)</span><br><span class="line">@TableName(value = &quot;spring_ai_chat_memory&quot;)</span><br><span class="line">public class SpringAiChatMemory &#123;</span><br><span class="line"></span><br><span class="line">    private Long id;</span><br><span class="line"></span><br><span class="line">    private String conversationId;</span><br><span class="line"></span><br><span class="line">    private String content;</span><br><span class="line"></span><br><span class="line">    private String type;</span><br><span class="line"></span><br><span class="line">    private LocalDateTime timestamp;</span><br><span class="line"></span><br><span class="line">    private String model;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul><p>æˆ‘åœ¨è¿™é‡Œå°±å®ç°äº†å¯¹è¯æ¨¡å‹æ•°æ®çš„æ·»åŠ ï¼ŒåŸæ¥çš„JdbcChatMemoryRepositoryæ˜¯æ²¡æœ‰è¿™ä¸ªå­—æ®µçš„;</p><hr><p>åœ¨çº¿ä½“éªŒæˆ‘çš„ä½œå“: <a href="https://hepingan.top/">https://hepingan.top</a></p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringAi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‹çš„æ•…äº‹ï¼ˆå¤§ä¸‰ä¸‹ï¼‰</title>
      <link href="/2025/08/10/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%89%E4%B8%8B%EF%BC%89/"/>
      <url>/2025/08/10/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%89%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ç‹åˆæ¥å†™æ•…äº‹äº†ï¼Œè¿™æ¬¡åé«˜é“å›æ¥äº†ï¼›è¿™å­¦æœŸç®—æ˜¯çœŸæ­£å¼€å§‹å®æˆ˜çš„ä¸€å­¦æœŸï¼Œå¾€å¹´éƒ½æ˜¯å­¦çŸ¥è¯†æŠ€èƒ½æˆ–è€…æ‰¾å·¥ä½œå…¼èŒçš„è·¯ä¸Šï¼Œè¿™å­¦æœŸ3æœˆä»½æˆ‘å¼€å§‹å’Œæœ‹å‹åœ¨é—²é±¼ä¸Šæ¥å•ï¼Œè™½ç„¶ä»·æ ¼éå¸¸çš„é»‘å¥´ä½†æ˜¯ä¸€å¼€å§‹æ¥çš„éƒ½æ¯”è¾ƒä½ï¼Œç¬¬ä¸€ä¸ªå•å­æ€»å…±ç”¨äº†1å‘¨å¤šæå®Œæ‰æ‹¿åˆ°100å¤šå…ƒï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡å¤šäººåˆä½œå¼€å‘é¡¹ç›®æ‰€ä»¥æ•ˆç‡ä½æ˜¯æ­£å¸¸çš„ï¼ŒåŠ ä¸Šæœ¬æ¥å†…å®¹å°±å¤šè¿˜è¦æ–‡æ¡£ä»€ä¹ˆçš„ï¼›ä½†åé¢æ¥å°±æ¸æ¸å¥½èµ·æ¥äº†ï¼Œæ¥äº†ä¸ª800ï¼Œ2000çš„ï¼ˆè™½ç„¶ä½†æ˜¯ä¹Ÿä¸æ˜¯å¾ˆå¥½å°¤å…¶æ˜¯é‚£ä¸ª2000çš„å•è´¼éº»çƒ¦ï¼Œçº¯ç‰›é©¬ï¼‰åé¢æˆ‘æŠŠæˆ‘åšçš„æ¯ä¸€å•å‰ªæˆè§†é¢‘åˆ†äº«åˆ°bç«™ï¼Œä¸€å¼€å§‹åªæ˜¯éšä¾¿å‰ªå‰ªå‘å‡ºå»ç»“æœè¿˜æœ‰è›®å¤šäººçœ‹çš„ï¼Œæˆ‘å°±ç»§ç»­å‘ä¸‹å»ï¼Œç°åœ¨ç²‰ä¸ä¹Ÿæ¶¨åˆ°4000å¤šäº†ï¼Œå¾ˆå¤šå•å­ä¹Ÿæ˜¯bç«™æ¥çš„ã€‚åé¢æˆ‘å‘ç°å•å­è¶Šæ¥è¶Šå¤šåšä¸å®Œäº†ï¼Œæˆ‘å°±æ‰“ç®—ä»¥æˆ‘ä¸ªäººåä¹‰å¼€ä¸ªæ¥å•ç¾¤ï¼Œå¹¶åˆ›å»ºäº†æµ©åŸç§‘æŠ€å·¥ä½œå®¤ï¼Œå…¶å®å°±æ˜¯æ–¹ä¾¿æˆ‘æˆ‘æ›´å¥½çš„è¥ä¸šå’Œæ³¨å†Œä¸œè¥¿ã€‚åˆ°ç°åœ¨æˆ‘çš„æ¥å•ç¾¤æœ‰60ä½™äººï¼Œæ€»æ¥å–å•å­æ•°ç›®20å•ï¼Œæ€»è¥ä¸šé¢1.5wå·¦å³ï¼Œè™½ç„¶æ•°å­—ä¸å¤§ï¼Œä½†å¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯å°†å°±çš„äº†ã€‚åé¢5æœˆä»½æˆ‘ä¸€ä¸ªäººåˆæ¥äº†ä¸ªå¤§å•å­ï¼Œæ€»å…±3w+å…ƒï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è¿™ä¹ˆå¤§ä¸ªå•å­å¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ç§è€ƒéªŒï¼Œä¸è¿‡è¿˜æ˜¯åšä¸‹æ¥äº†è€Œä¸”æ•ˆæœä¸é”™ã€‚åœ¨è¾¹ä¸Šå­¦çš„æƒ…å†µä¸‹æ¯ä¸ªæœˆå¹³å‡ä¸‹æ¥6k+çš„ç±³ï¼Œè¿™å­¦æœŸçš„ç”Ÿæ´»è´¹ä¹Ÿæ²¡æ‰¾å®¶é‡Œäººè¦äº†ï¼Œå®¶é‡Œäººä¹Ÿæ˜¯å¯¹æˆ‘çš„è¿›æ­¥éå¸¸è‚¯å®šæ”¯æŒï¼Œè¿˜æ‰“äº†å †æ¯”èµ›æ‹¿äº†äº›å¥–ã€‚æˆ‘è¿™å­¦æœŸä¸‹æ¥èµšçš„æœ‰4wå¤šå§ï¼Œä½†æ˜¯å¤©å¤©æ¥å•æ„Ÿè§‰è¿˜æ˜¯å¥½ç‰›é©¬å•Šï¼Œè€Œä¸”æœ€è¿‘å•å­æ•°ä¹Ÿå°‘äº†åšä¸èµ·æ¥äº†ï¼Œæš‘å‡æ‰“ç®—çœ‹çœ‹èƒ½ä¸èƒ½é‡æ–°åšèµ·æ¥æˆ–è€…å¾€Agentæ–¹å‘å‘å±•ï¼Œå‰æ™¯ä¸å¥½å•Šè¿˜æ˜¯å¾—ç»§ç»­åŠªåŠ›ï¼Œè¿™ä¸ªä¸èƒ½åƒä¸€è¾ˆå­çš„é¥­ã€‚</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/17a1e8e987f1fa9abf91ae3abd9f623a_720.jpg"></p><p>äº‰å–è¿›ä¸ªå¥½å…¬å¸æ¯”è¿™äº›éƒ½å¼º. â€”â€“2025.8.10</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‹çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springcloud alibabaå¾®æœåŠ¡æ¶æ„è®¾è®¡ä¸æ­å»º(å•ä½“é¡¹ç›®æ‹†è§£)</title>
      <link href="/2025/08/05/IT%E7%AC%94%E8%AE%B0/java/springcloud-alibaba%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%90%AD%E5%BB%BA-%E5%8D%95%E4%BD%93%E9%A1%B9%E7%9B%AE%E6%8B%86%E8%A7%A3/"/>
      <url>/2025/08/05/IT%E7%AC%94%E8%AE%B0/java/springcloud-alibaba%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%90%AD%E5%BB%BA-%E5%8D%95%E4%BD%93%E9%A1%B9%E7%9B%AE%E6%8B%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>è¿™å‡ å¤©æ‰“ç®—æŠŠæˆ‘çš„Pass Assistantæ‹†æˆå¾®æœåŠ¡ï¼Œä¸‹é¢å…¨æ˜¯æˆ‘è¸©è¿‡çš„å‘</p><h2 id="ç‰ˆæœ¬å¯¹åº”ä¸pomé…ç½®"><a href="#ç‰ˆæœ¬å¯¹åº”ä¸pomé…ç½®" class="headerlink" title="ç‰ˆæœ¬å¯¹åº”ä¸pomé…ç½®"></a>ç‰ˆæœ¬å¯¹åº”ä¸pomé…ç½®</h2><p>SpringCloudä¸Springbootç‰ˆæœ¬å¯¹åº”å…³ç³»,å‚è€ƒé˜¿é‡Œå®˜æ–¹çš„ç‰ˆæœ¬å¯¹åº”å…³ç³»ï¼š<a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E">ç‰ˆæœ¬è¯´æ˜ Â· alibaba&#x2F;spring-cloud-alibaba Wiki</a></p><table><thead><tr><th>Spring Cloud Alibaba Version</th><th>Spring Cloud Version</th><th>Spring Boot Version</th></tr></thead><tbody><tr><td>2022.0.0.0*</td><td>Spring Cloud 2022.0.0</td><td>3.0.2</td></tr><tr><td>2022.0.0.0-RC2</td><td>Spring Cloud 2022.0.0</td><td>3.0.2</td></tr><tr><td>2022.0.0.0-RC1</td><td>Spring Cloud 2022.0.0</td><td>3.0.0</td></tr></tbody></table><table><thead><tr><th>Spring Cloud Alibaba Version</th><th>Spring Cloud Version</th><th>Spring Boot Version</th></tr></thead><tbody><tr><td>2021.0.5.0*</td><td>Spring Cloud 2021.0.5</td><td>2.6.13</td></tr><tr><td>2021.0.4.0</td><td>Spring Cloud 2021.0.4</td><td>2.6.11</td></tr><tr><td>2021.0.1.0</td><td>Spring Cloud 2021.0.1</td><td>2.6.3</td></tr><tr><td>2021.1</td><td>Spring Cloud 2020.0.1</td><td>2.4.2</td></tr></tbody></table><p>æˆ–è€…ä½¿ç”¨äº‘åŸç”Ÿåº”ç”¨è„šæ‰‹æ¶è¿›è¡Œæ„å»ºï¼š<a href="https://start.aliyun.com/">https://start.aliyun.com/</a></p><p>å¯ä»¥å‚è€ƒæˆ‘çš„dependencyManagementé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.hepingan<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Pass_Assistant_Cloud<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring Cloud 2022.0.x é€‚é… Spring Boot 3.0 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2022.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- 2022.0.x ç³»åˆ—çš„æœ€æ–°ç¨³å®šç‰ˆ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring Cloud Alibaba 2022.0.x é€‚é… Spring Boot 3.x --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2022.0.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- æˆ– 2022.0.0.0 æ­£å¼ç‰ˆ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.hepingan<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>PA-ai-service<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°åŠ è½½é…ç½®ï¼Œå¦‚æœsrcä¸‹çš„ç±»æœ‰.classåç¼€è¯´æ˜å·²ç»æ˜¯ä¸ªå¾®æœåŠ¡é¡¹ç›®äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åˆ›å»ºå­æ¨¡å—äº†ï¼›</p><p>åˆ›å»ºå¥½åä¿®æ”¹<parent></parent>é…ç½®ï¼Œåˆ›å‡ºæ¥é»˜è®¤æ˜¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŠŠå®ƒä¿®æ”¹æˆä¸Šé¢é‚£ç§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.hepingan<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Pass_Assistant_Cloud<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½é›†æˆçˆ¶å·¥ç¨‹çš„dependenciesé…ç½®äº†</p><h2 id="NacosæœåŠ¡æ³¨å†Œä¸å‘ç°"><a href="#NacosæœåŠ¡æ³¨å†Œä¸å‘ç°" class="headerlink" title="NacosæœåŠ¡æ³¨å†Œä¸å‘ç°"></a>NacosæœåŠ¡æ³¨å†Œä¸å‘ç°</h2><p>dockerå¯åŠ¨nacosåè¾“å…¥ ip&#x2F;8848&#x2F;nacos å°±å¯ä»¥è®¿é—®äº†</p><p>æ¨èæ·»åŠ ä¸ªbootstrap.ymlå¯¹nacosåœ°å€å€¼è¿›è¡Œé…ç½®ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><p>è™½ç„¶åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨ application.yml ä¸­é…ç½®ä¹Ÿèƒ½å·¥ä½œï¼Œä½†ä½¿ç”¨ bootstrap.yml æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ul><li>æ ‡å‡†å®è·µï¼šè¿™æ˜¯ Spring Cloud åº”ç”¨çš„æ ‡å‡†åšæ³•ï¼Œå…¶ä»–å¼€å‘è€…æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤</li><li>å¯åŠ¨é¡ºåºï¼šç¡®ä¿åœ¨åº”ç”¨å®Œå…¨å¯åŠ¨å‰å°±è¿æ¥åˆ°é…ç½®ä¸­å¿ƒ</li><li>åˆ†ç¦»å…³æ³¨ç‚¹ï¼šå°†åŸºç¡€è®¾æ–½é…ç½®ä¸åº”ç”¨é…ç½®åˆ†ç¦»</li></ul><p>å¦‚æœé‡åˆ°å¯åŠ¨æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Description:</span><br><span class="line"></span><br><span class="line">No spring.config.import property has been defined</span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Add a spring.config.import=nacos: property to your configuration.</span><br><span class="line">If configuration is not required add spring.config.import=optional:nacos: instead.</span><br><span class="line">To disable this check, set spring.cloud.nacos.config.import-check.enabled=false.</span><br></pre></td></tr></table></figure><p><strong>Spring Cloud 2022.0.x</strong> åŠä»¥ä¸Šç‰ˆæœ¬å¼•å…¥äº† <code>spring.config.import</code> æœºåˆ¶ï¼Œè¦æ±‚æ‰€æœ‰é…ç½®ä¸­å¿ƒï¼ˆå¦‚ Nacosã€Apollo ç­‰ï¼‰å¿…é¡»æ˜¾å¼å£°æ˜åœ¨è¯¥é…ç½®ä¸­ï¼Œç›®çš„æ˜¯ï¼š</p><p>Nacosç‰ˆæœ¬é€‰æ‹©<strong>2.2.1</strong>å› ä¸ºspringcloud ablibaba2022.0.0ç‰ˆæœ¬å¯¹åº”çš„å°±æ˜¯è¿™ä¸ªç‰ˆæœ¬</p><p>nacosé•œåƒæºä¸‹è½½ï¼š<a href="https://github.com/alibaba/nacos/releases?page=3">Releases Â· alibaba&#x2F;nacos</a></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://nacos.io/docs/latest/quickstart/quick-start-docker/?spm=5238cd80.2ef5001f.0.0.3f613b7cBpvLmS">Nacos Docker å¿«é€Ÿå¼€å§‹ | Nacos å®˜ç½‘</a></p><hr><p>ï¼ˆå°Tipsï¼‰ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æœä½ åˆ é™¤äº†ä¸€ä¸ªæ¨¡å—ï¼Œé‡æ–°åŠ è½½çˆ¶pomæ–‡ä»¶ä¼šæŠ¥é”™æç¤ºåŸæ¥çš„æ¨¡å—è¿˜åœ¨ï¼Œè¿™ä¸ªæ—¶å€™æ¸…é™¤æœ¬åœ°ç¼“å­˜( æ–‡ä»¶ â€”&gt;æ¸…é™¤ç¼“å­˜); </p><p>Spring Cloud Alibaba ä¸åŒç‰ˆæœ¬å¯¹ Nacos Config çš„é…ç½®æ–¹å¼æœ‰å·®å¼‚ï¼š</p><ul><li><strong>2021.0.1.0 åŠä»¥ä¸Šç‰ˆæœ¬</strong>ï¼šæ¨èä½¿ç”¨ <code>spring.config.import</code> å¼•å…¥ Nacos é…ç½®ï¼ˆä½ ç›®å‰ç”¨çš„æ–¹å¼ï¼‰ã€‚</li><li><strong>æ—§ç‰ˆæœ¬ï¼ˆå¦‚ 2.2.xï¼‰</strong>ï¼šéœ€é€šè¿‡ <code>bootstrap.yml</code> é…ç½®ï¼Œä¸”ä¾èµ– <code>spring-cloud-starter-bootstrap</code>ã€‚</li></ul><hr><p><strong>2025å¹´ç›®å‰è¿˜å¯ç”¨çš„dockeré•œåƒæºï¼š</strong></p><ul><li>docker.1ms.run</li><li>docker.domys.cc</li><li>docker.imgdb.de</li><li>docker-0.unsee.tech</li><li>docker.hlmirror.com</li><li>cjie.eu.org</li><li>docker.m.daocloud.io</li><li>hub.rat.dev</li><li>docker.1panel.live</li><li>docker.rainbond.cc</li></ul><p>æˆ‘è¯•äº†å¾ˆå¤šåŠæ³•ä¿®æ”¹é•œåƒæºå’Œå®å¡”æ·»åŠ éƒ½ä¸è¡Œï¼Œæˆ‘è¿˜è‡ªå·±ä¸‹äº†æºé•œåƒè¿˜æ˜¯åŠ è½½ä¸èµ·ï¼Œåæ¥åŠ ä¸Šé•œåƒæºåå°±è¡Œäº†ï¼Œä¾‹å¦‚æ‹‰å–nacos2.2.1ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.1ms.run/nacos/nacos-server:v2.2.1</span><br></pre></td></tr></table></figure><p>ä¸€é”®å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nacos-standalone-derby \</span><br><span class="line">    -e MODE=standalone \</span><br><span class="line">    -e NACOS_AUTH_TOKEN=VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg= \</span><br><span class="line">    -e NACOS_AUTH_IDENTITY_KEY=hepingan \</span><br><span class="line">    -e NACOS_AUTH_IDENTITY_VALUE=1234 \</span><br><span class="line">    -p 8848:8848 \</span><br><span class="line">    -p 9848:9848 \</span><br><span class="line">    -d nacos/nacos-server:v2.2.1</span><br></pre></td></tr></table></figure><p>ç„¶åé…ç½®è¿æ¥ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">pa-system-service</span></span><br></pre></td></tr></table></figure><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250808041625.png"></p><p>å†æ—¶3å¤©ç»ˆäºç ”ç©¶å®Œnacosâ€¦â€¦ä»€ä¹ˆç‰ˆæœ¬å¯¹åº”ä¸ä¸€æ ·ï¼Œdockerä¸‹è½½é•œåƒè€å‡ºæ¯›ç—…ï¼Œä»¥ä¸ºspringcloudé—®é¢˜ï¼Œåæ­£å°±æ˜¯èµ°è¿‡çš„bugä»¥åä¸ä¼šèµ°ç¬¬äºŒæ¬¡äº†,çˆ¶pomå¼•å…¥ä¸è¿›æ¥â€¦æ¶æ„å¸ˆçš„ç—›</p><p><strong>æ–°ç‰ˆæœ¬ä¸å†æ”¯æŒbootstrap</strong>ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯application.ymlï¼Œå¦‚æœä½ çš„springcloudçš„ç‰ˆæœ¬è¾ƒè€ï¼ˆå¥½åƒæ˜¯2021ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨bootstrap.ymlï¼ˆå› ä¸ºç‰ˆæœ¬çš„é—®é¢˜å¯¼è‡´çš„å‘çœŸä¸å°‘å‘€<img src="https://i1.hdslb.com/bfs/emote/3195714219c4b582a4fb02033dd1519913d0246d.png@40w_40h.avif" alt="[ç”Ÿæ°”]">)</p><h2 id="å¸¸è§æŠ¥é”™"><a href="#å¸¸è§æŠ¥é”™" class="headerlink" title="å¸¸è§æŠ¥é”™"></a>å¸¸è§æŠ¥é”™</h2><p>å¹¶ä¸ä¸€å®šå¸¸è§ï¼Œåæ­£æˆ‘é‡åˆ°çš„</p><hr><ul><li>å¼•å…¥äº†Mysqlä¾èµ–ä½†æ²¡é…ç½®æ•°æ®åº“è¿æ¥,æˆ–è€…æš´åŠ›è§£å†³ï¼šåœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ @SpringBootApplication(exclude &#x3D; {DataSourceAutoConfiguration.class})</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Failed to configure a DataSource: &#x27;url&#x27; attribute is not specified and no embedded datasource could be configured.</span><br><span class="line"></span><br><span class="line">Reason: Failed to determine a suitable driver class</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Consider the following:</span><br><span class="line">If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.</span><br><span class="line">If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).</span><br></pre></td></tr></table></figure><hr><ul><li>è¯·æ±‚æ—¶StringæŠ¥é”™Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection. Ensure that the compiler uses the â€˜-parametersâ€™ flag.</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalArgumentException: Name for argument of type [java.lang.String] not specified, and parameter name information not available via reflection. Ensure that the compiler uses the &#x27;-parameters&#x27; flag.</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šåœ¨çˆ¶pom.xmlä¸‹æ·»åŠ ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">parameters</span>&gt;</span>true<span class="tag">&lt;/<span class="name">parameters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><ul><li>å¯åŠ¨æç¤ºæ— æ³•æ³¨å…¥mapper bean</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">Parameter 0 of constructor in top.hepingan.pagatewayservice.config.AuthInterfaceFilter required a bean of type &#x27;top.hepingan.pacommon.mapper.UserMapper&#x27; that could not be found.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Consider defining a bean of type &#x27;top.hepingan.pacommon.mapper.UserMapper&#x27; in your configuration.</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼šåœ¨å¯¹åº”å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">@MapperScan(&quot;top.hepingan.pacommon.mapper&quot;)</span><br><span class="line">@ComponentScan(basePackages = &#123;&quot;top.hepingan.pagatewayservice&quot;, &quot;top.hepingan.pacommon&quot;&#125;)</span><br></pre></td></tr></table></figure><h2 id="OpenFeignä¸è´Ÿè½½å‡è¡¡"><a href="#OpenFeignä¸è´Ÿè½½å‡è¡¡" class="headerlink" title="OpenFeignä¸è´Ÿè½½å‡è¡¡"></a>OpenFeignä¸è´Ÿè½½å‡è¡¡</h2><p>OpenFeign æ˜¯ Spring Cloud ç”Ÿæ€ä¸­çš„ä¸€ä¸ªå£°æ˜å¼ HTTP å®¢æˆ·ç«¯å·¥å…·ï¼Œå®ƒåŸºäº Netflix Feign è¿›è¡Œäº†å¢å¼ºï¼Œä¸“é—¨ç”¨äºç®€åŒ–å¾®æœåŠ¡ä¹‹é—´çš„ HTTP é€šä¿¡ã€‚</p><p>å…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯<strong>å£°æ˜å¼ç¼–ç¨‹</strong>ï¼šå¼€å‘è€…åªéœ€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå¹¶é€šè¿‡æ³¨è§£ï¼ˆå¦‚ <code>@FeignClient</code>ï¼‰å£°æ˜è¦è°ƒç”¨çš„æœåŠ¡åç§°å’Œæ¥å£è·¯å¾„ï¼ŒOpenFeign ä¼šè‡ªåŠ¨ç”Ÿæˆå®ç°ç±»ï¼Œå®Œæˆåº•å±‚çš„ HTTP è¯·æ±‚æ„å»ºã€å‘é€å’Œå“åº”è§£æï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ HttpClient ç›¸å…³ä»£ç ï¼ˆå¦‚ URL æ‹¼æ¥ã€å‚æ•°å¤„ç†ã€ç»“æœè½¬æ¢ç­‰ï¼‰ã€‚</p><ol><li><h3 id="ä¸»è¦ä½œç”¨ä¸ä¼˜åŠ¿"><a href="#ä¸»è¦ä½œç”¨ä¸ä¼˜åŠ¿" class="headerlink" title="ä¸»è¦ä½œç”¨ä¸ä¼˜åŠ¿"></a>ä¸»è¦ä½œç”¨ä¸ä¼˜åŠ¿</h3><ol><li><p><strong>ç®€åŒ–è¿œç¨‹è°ƒç”¨</strong><br>æ— éœ€æ‰‹åŠ¨ä½¿ç”¨ RestTemplate æˆ– OkHttp ç­‰å·¥å…·ï¼Œé€šè¿‡æ¥å£ + æ³¨è§£å³å¯å®ç°æœåŠ¡é—´è°ƒç”¨ï¼Œä»£ç æ›´ç®€æ´ã€‚ç¤ºä¾‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜è¦è°ƒç”¨çš„æœåŠ¡ï¼ˆæœåŠ¡ååœ¨æ³¨å†Œä¸­å¿ƒæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="meta">@FeignClient(name = &quot;user-service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserFeignClient</span> &#123;</span><br><span class="line">    <span class="comment">// å£°æ˜è¦è°ƒç”¨çš„æ¥å£è·¯å¾„å’Œå‚æ•°</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/users/&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">getUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ—¶ç›´æ¥æ³¨å…¥æ¥å£è°ƒç”¨</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserFeignClient userFeignClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> OrderInfo <span class="title function_">getOrderWithUser</span><span class="params">(Long orderId)</span> &#123;</span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderMapper.getById(orderId);</span><br><span class="line">        <span class="comment">// è°ƒç”¨è¿œç¨‹æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userFeignClient.getUserById(order.getUserId());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OrderInfo</span>(order, user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>é›†æˆ Spring MVC æ³¨è§£</strong><br>æ”¯æŒ <code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@PathVariable</code> ç­‰ Spring MVC å¸¸ç”¨æ³¨è§£ï¼Œå¼€å‘è€…æ— éœ€é¢å¤–å­¦ä¹ æ–°çš„æ³¨è§£è§„èŒƒã€‚</p></li><li><p><strong>ä¸ Spring Cloud ç”Ÿæ€æ— ç¼æ•´åˆ</strong></p><ul><li>è‡ªåŠ¨é›†æˆ Ribbon æˆ– LoadBalancer å®ç°è´Ÿè½½å‡è¡¡ã€‚</li><li>è‡ªåŠ¨é›†æˆ Hystrix æˆ– Resilience4j å®ç°æœåŠ¡ç†”æ–­ä¸é™çº§ã€‚</li><li>æ”¯æŒæœåŠ¡å‘ç°ï¼ˆå¦‚é…åˆ Eurekaã€Nacos ç­‰æ³¨å†Œä¸­å¿ƒï¼Œè‡ªåŠ¨è§£ææœåŠ¡åå¯¹åº”çš„åœ°å€ï¼‰ã€‚</li></ul></li><li><p><strong>æ”¯æŒè¯·æ±‚å‹ç¼©ã€è¶…æ—¶æ§åˆ¶ç­‰é…ç½®</strong><br>å¯é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰è¿œç¨‹è°ƒç”¨çš„è¶…æ—¶æ—¶é—´ã€æ•°æ®å‹ç¼©ç­‰å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span>  <span class="comment"># å…¨å±€é…ç½®</span></span><br><span class="line">        <span class="attr">connect-timeout:</span> <span class="number">5000</span>  <span class="comment"># è¿æ¥è¶…æ—¶</span></span><br><span class="line">        <span class="attr">read-timeout:</span> <span class="number">5000</span>     <span class="comment"># è¯»å–è¶…æ—¶</span></span><br><span class="line">  <span class="attr">compression:</span></span><br><span class="line">    <span class="attr">request:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># å¼€å¯è¯·æ±‚å‹ç¼©</span></span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>ç®€å•çš„è®²å°±æ˜¯æ€•ä½ ä¸€ä¸ªæœåŠ¡æŒ‚äº†æˆ–è€…å‹åŠ›å¤ªå¤§ï¼Œå°±å¤šæä¸ªæœåŠ¡å‡ºæ¥ï¼›</p><p>åƒè¿™æ ·æ–°å»ºä¸€ä¸ªå°±è¡Œï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250810015350.png"></p><h2 id="GateWay"><a href="#GateWay" class="headerlink" title="GateWay"></a>GateWay</h2><p>æ–°å»ºä¸€ä¸ªç½‘å…³æ¨¡å—ï¼Œé‡Œé¢å¼•å…¥å¦‚ä¸‹è¿˜æœ‰nacos</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>application.ymlç½‘å…³é…ç½®ï¼Œå…¶ä¸­predicatesä¸ºåŒ¹é…çš„è·¯å¾„</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">import:</span> <span class="string">nacos:pa-gateway-service-prod.yml</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8848</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">globalcors:</span></span><br><span class="line">        <span class="attr">cors-configurations:</span></span><br><span class="line">          <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOriginPatterns:</span> </span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;http://localhost:8080&quot;</span>  <span class="comment">#å…è®¸å‰ç«¯è·¨åŸŸçš„åœ°å€</span></span><br><span class="line">            <span class="attr">allowedMethods:</span> </span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;GET&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;POST&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;PUT&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;DELETE&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;OPTIONS&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;HEAD&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;PATCH&quot;</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span></span><br><span class="line">            <span class="attr">maxAge:</span> <span class="number">360000</span></span><br><span class="line">        <span class="comment"># è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªçš„é—®é¢˜</span></span><br><span class="line">        <span class="attr">add-to-simple-url-handler-mapping:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">locator:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">pa-system-service</span></span><br><span class="line">            <span class="attr">uri:</span> <span class="string">lb://pa-system-service</span></span><br><span class="line">            <span class="attr">predicates:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">Path=/admin/**,/auth/**,/user/**</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">pa-ai-service</span></span><br><span class="line">            <span class="attr">uri:</span> <span class="string">lb://pa-ai-service</span></span><br><span class="line">            <span class="attr">predicates:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">Path=/chat/**</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="sa-tokenæ‹¦æˆªå™¨é…ç½®"><a href="#sa-tokenæ‹¦æˆªå™¨é…ç½®" class="headerlink" title="sa-tokenæ‹¦æˆªå™¨é…ç½®"></a>sa-tokenæ‹¦æˆªå™¨é…ç½®</h3><p>Spring Cloud Gateway æ˜¯åŸºäº <strong>Netty å“åº”å¼æ¶æ„</strong> çš„ç½‘å…³ï¼Œå®ƒä¸æ”¯æŒ Spring MVC ä¸­çš„ <code>WebMvcConfigurer</code> å’Œ <code>Interceptor</code>ï¼ˆMVC æ‹¦æˆªå™¨ä¾èµ– Servlet ç¯å¢ƒï¼Œè€Œ Gateway æ˜¯é Servlet ç¯å¢ƒï¼‰ã€‚</p><p>ä½¿ç”¨ <code>WebMvcConfigurer</code> å’Œ <code>InterceptorRegistry</code>ï¼Œè¿™æ˜¯ <strong>Spring MVC çš„æ‹¦æˆªå™¨é…ç½®æ–¹å¼</strong>ï¼Œä»…é€‚ç”¨äºä¼ ç»Ÿ MVC é¡¹ç›®ï¼ˆå¦‚ Spring Boot Web é¡¹ç›®ï¼‰ï¼Œä½†åœ¨ Gateway ä¸­å®Œå…¨ä¸ç”Ÿæ•ˆã€‚</p><p><strong>æ­£ç¡®ä½œæ³•ï¼šä½¿ç”¨ Gateway å…¨å±€è¿‡æ»¤å™¨ + Sa-Token å“åº”å¼é€‚é…</strong></p><p>å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://sa-token.cc/doc.html#/micro/gateway-auth">ç½‘å…³ç»Ÿä¸€é‰´æƒ</a></p><p>ç›´æ¥ä¸Šä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.dev33.satoken.reactor.filter.SaReactorFilter;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.router.SaRouter;</span><br><span class="line"><span class="keyword">import</span> cn.dev33.satoken.stp.StpUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> top.hepingan.pacommon.exceptions.ExceptionMessages;</span><br><span class="line"><span class="keyword">import</span> top.hepingan.pacommon.msg.Result;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·¯ç”±æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> <span class="doctag">@github</span> dulaiduwang003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoutePathFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SaReactorFilter <span class="title function_">getSaReactorFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SaReactorFilter</span>()</span><br><span class="line">                <span class="comment">// æ‹¦æˆªåœ°å€</span></span><br><span class="line">                .addInclude(<span class="string">&quot;/**&quot;</span>)    <span class="comment">/* æ‹¦æˆªå…¨éƒ¨path */</span></span><br><span class="line">                <span class="comment">// å¼€æ”¾åœ°å€</span></span><br><span class="line">                .addExclude(<span class="string">&quot;/favicon.ico&quot;</span>)</span><br><span class="line">                <span class="comment">// é‰´æƒæ–¹æ³•ï¼šæ¯æ¬¡è®¿é—®è¿›å…¥</span></span><br><span class="line">                .setAuth(obj -&gt; &#123;</span><br><span class="line">                    <span class="comment">// ç™»å½•æ ¡éªŒ -- æ‹¦æˆªæ‰€æœ‰è·¯ç”±ï¼Œå¹¶æ’é™¤/auth/** ç”¨äºå¼€æ”¾ç™»å½•</span></span><br><span class="line">                    SaRouter.match(<span class="string">&quot;/**&quot;</span>).notMatch(<span class="string">&quot;/auth/**&quot;</span>)</span><br><span class="line">                            .check(saRouterStaff -&gt; StpUtil.checkLogin());</span><br><span class="line">                    <span class="comment">// æƒé™è®¤è¯ -- ä¸åŒæ¨¡å—, æ ¡éªŒä¸åŒæƒé™</span></span><br><span class="line">                    SaRouter.match(<span class="string">&quot;/admin/**&quot;</span>, r -&gt; StpUtil.checkPermission(<span class="string">&quot;admin&quot;</span>));</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// å¼‚å¸¸å¤„ç†æ–¹æ³•ï¼šæ¯æ¬¡setAuthå‡½æ•°å‡ºç°å¼‚å¸¸æ—¶è¿›å…¥</span></span><br><span class="line">                .setError(e -&gt;</span><br><span class="line">                    Result.error(ExceptionMessages.TOKEN_LAPSE, <span class="number">401</span>)</span><br><span class="line">                ).setBeforeAuth(r -&gt; &#123;</span><br><span class="line">                    SaHolder.getResponse()</span><br><span class="line">                            .setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;*&quot;</span>)</span><br><span class="line">                            .setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;*&quot;</span>)</span><br><span class="line">                            .setHeader(<span class="string">&quot;Access-Control-Max-Age&quot;</span>, <span class="string">&quot;3600&quot;</span>)</span><br><span class="line">                            .setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;*&quot;</span>)</span><br><span class="line">                            .setServer(<span class="string">&quot;Zeus&quot;</span>);</span><br><span class="line">                    <span class="comment">// ç¡®ä¿OPTIONSé¢„æ£€è¯·æ±‚æ€»æ˜¯è¢«æ”¾è¡Œ</span></span><br><span class="line">                    <span class="keyword">if</span> (SaHolder.getRequest().getMethod().equals(HttpMethod.OPTIONS.toString())) &#123;</span><br><span class="line">                        SaRouter.back();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Sa-Token Redis å’Œ Jackson é›†æˆ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-redis-jackson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.35.0.RC<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Sa-Token Spring Boot Starter --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-spring-boot3-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.35.0.RC<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æä¾›Redisè¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®å‚è€ƒï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sa-token:</span></span><br><span class="line">  <span class="attr">token-name:</span> <span class="string">token</span></span><br><span class="line">  <span class="attr">active-timeout:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">is-concurrent:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">is-share:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">is-log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># token é£æ ¼ï¼ˆé»˜è®¤å¯å–å€¼ï¼šuuidã€simple-uuidã€random-32ã€random-64ã€random-128ã€tikï¼‰</span></span><br><span class="line">  <span class="attr">token-style:</span> <span class="string">uuid</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå¯åŠ¨ç½‘å…³æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Description:</span><br><span class="line">The bean &#x27;saTokenContextFilterForServlet&#x27;, defined in class path resource [cn/dev33/satoken/spring/SaTokenContextRegister.class], could not be registered. A bean with that name has already been defined in class path resource [cn/dev33/satoken/reactor/spring/SaTokenContextRegister.class] and overriding is disabled.</span><br><span class="line">Action:</span><br><span class="line">Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true</span><br></pre></td></tr></table></figure><p>åˆ™åœ¨ç½‘å…³é…ç½®æ–‡ä»¶é‡Œæ·»åŠ ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">web-application-type:</span> <span class="string">reactive</span></span><br><span class="line">    <span class="attr">allow-bean-definition-overriding:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="Sentinel"><a href="#Sentinel" class="headerlink" title="Sentinel"></a>Sentinel</h2><p>ä»–æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250811014420.png"></p><p>ä¸€å¥è¯è®²å°±æ˜¯å¯ä»¥è‡ªå®šä¹‰ç†”æ–­è§„åˆ™ä»¥ä¿è¯æœåŠ¡å™¨æµé‡è¯·æ±‚å®‰å…¨</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250811014830.png"></p><p>å…ˆåœ¨gatewayä¸‹å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-sentinel-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨gateway.ymlé‡Œæ·»åŠ é…ç½®:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">cloud:</span></span><br><span class="line"><span class="attr">sentinel:</span></span><br><span class="line"><span class="attr">transport:</span></span><br><span class="line"><span class="attr">dashboard:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8080</span> <span class="comment">#sentinelé¢æ¿åœ°å€</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">8719</span> <span class="comment">#åå°æœåŠ¡åœ°å€</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springcloud </tag>
            
            <tag> å¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Uniappç»™æˆ‘æ°”åˆ°äº†,å»å­¦æ— æ•Œçš„flutter~ ä¹‹å­¦ä¹ ç¬”è®°</title>
      <link href="/2025/08/03/IT%E7%AC%94%E8%AE%B0/Uniapp%E7%BB%99%E6%88%91%E6%B0%94%E5%88%B0%E4%BA%86-%E5%8E%BB%E5%AD%A6%E6%97%A0%E6%95%8C%E7%9A%84flutter-%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/08/03/IT%E7%AC%94%E8%AE%B0/Uniapp%E7%BB%99%E6%88%91%E6%B0%94%E5%88%B0%E4%BA%86-%E5%8E%BB%E5%AD%A6%E6%97%A0%E6%95%8C%E7%9A%84flutter-%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>å‰å‡ å¤©ç”¨uniappå†™é¡¹ç›®å†™å‡ºæ¥å¾ˆå¤šåŠŸèƒ½åœ¨app,å°ç¨‹åº,H5é‡Œé¢éƒ½ä¸ä¸€æ ·ï¼Œæ°”åˆ°æˆ‘äº†uniappå°è£…æ€§è¿‡å¼ºï¼Œäºæ˜¯æˆ‘æ¥çœ‹çœ‹å¤§å‚éƒ½åœ¨ç”¨çš„flutteræ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œåœ¨aiçš„åŠ æŒä¸‹æ‰“ç®—5å¤©å†…ç²¾é€š~</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.flutter.cn/get-started/install/">å®‰è£…å’Œç¯å¢ƒé…ç½® | Flutter ä¸­æ–‡æ–‡æ¡£ - Flutter ä¸­æ–‡å¼€å‘è€…ç½‘ç«™ - Flutter</a></p><h1 id="å®‰è£…é…ç½®ç¯å¢ƒ"><a href="#å®‰è£…é…ç½®ç¯å¢ƒ" class="headerlink" title="å®‰è£…é…ç½®ç¯å¢ƒ"></a>å®‰è£…é…ç½®ç¯å¢ƒ</h1><p>æˆ‘å®‰è£…é…ç½®æ˜¯è·Ÿç€å®˜æ–¹æ–‡æ¡£èµ°çš„ï¼Œéœ€è¦æ³¨æ„ä¸‹ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ul><li><p>è¦ä½¿ç”¨ Flutter åˆ›å»º Android åº”ç”¨ï¼Œè¯·ç¡®è®¤å·²ç»å®‰è£…ä»¥ä¸‹ Android ç»„ä»¶ã€‚</p><ul><li><strong>Android SDK Platform, API 35</strong>+</li><li><strong>Android SDK Command-line Tools</strong></li><li><strong>Android SDK Build-Tools</strong></li><li><strong>Android SDK Platform-Tools</strong></li><li><strong>Android Emulator</strong></li></ul></li><li><h3 id="Windows-PATH-ç¯å¢ƒå˜é‡"><a href="#Windows-PATH-ç¯å¢ƒå˜é‡" class="headerlink" title="Windows PATH ç¯å¢ƒå˜é‡"></a>Windows PATH ç¯å¢ƒå˜é‡</h3><p>å°†flutter sdkç›®å½•ä¸‹çš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°Pathé‡Œ</p></li><li><h4 id="å›½å†…ç¯å¢ƒé…ç½®"><a href="#å›½å†…ç¯å¢ƒé…ç½®" class="headerlink" title="å›½å†…ç¯å¢ƒé…ç½®"></a>å›½å†…ç¯å¢ƒé…ç½®</h4><p><a href="https://github.com/cfug">China Flutter User Group</a> (CFUG) ç»´æŠ¤ç€ä¸€ä¸ª Flutter ç®€ä½“ä¸­æ–‡ç½‘ç«™ <a href="https://flutter.cn/">https://flutter.cn</a> ä»¥åŠé•œåƒã€‚å…¶ä»–é•œåƒå¯åœ¨ <a href="https://docs.flutter.cn/community/china/#known-trusted-community-run-mirror-sites">æœ¬æ–‡æœ«å°¾</a> æ‰¾åˆ°</p><p><strong>é…ç½®ä½ çš„æœºå™¨ä½¿ç”¨é•œåƒç«™ç‚¹</strong>ï¼ˆä»¥windowsä¸ºä¾‹ï¼‰</p><p>æ·»åŠ ç¯å¢ƒå˜é‡ï¼šPUB_HOSTED_URL å€¼ï¼š <a href="https://pub.flutter-io.cn/">https://pub.flutter-io.cn</a></p><p>FLUTTER_STORAGE_BASE_URL å€¼ï¼š<a href="https://storage.flutter-io.cn/">https://storage.flutter-io.cn</a></p></li><li><h4 id="flutter-doctoræŠ¥é”™"><a href="#flutter-doctoræŠ¥é”™" class="headerlink" title="flutter doctoræŠ¥é”™"></a>flutter doctoræŠ¥é”™</h4><p>æˆ‘é‡åˆ°çš„æŠ¥é”™åªæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æœªå®‰è£…windowsæ¡Œé¢åº”ç”¨è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªéœ€è¦ä¸‹è½½visual Studioç„¶åå®‰è£…c++æ¡Œé¢åº”ç”¨ç¯å¢ƒï¼Œè®°å¾—é€‰window11æˆ–10;å¦ä¸€ä¸ªæ˜¯å·¥å…·æœªä¸‹è½½å®Œå…¨ï¼Œå³æŠ¥é”™ï¼š<strong>cmdline-tools component is missing</strong>å…ˆæ£€æŸ¥ä½ çš„AS(Andriod Studioä»¥ä¸‹ç®€ç§°AS)æ˜¯å¦å‹¾é€‰ä¸Šäº†ï¼Œç„¶åå†å¤åˆ¶ä½ çš„sdkç›®å½•ï¼Œå†åœ¨cmdè¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter config --android-sdk  /path/to/android/sdk </span><br></pre></td></tr></table></figure><p><em>æ˜¯ä½ è‡ªå·±çš„sdkè·¯å¾„ï¼Œå¦‚æˆ‘çš„æ˜¯ D:Android\Sdk</em></p><p><img src="https://i-blog.csdnimg.cn/blog_migrate/37cc7014396bc6c9fcfc6469f6b83a3e.png"></p></li></ul><p><strong>æ–°å»ºé¡¹ç›®</strong>å¯ä»¥é€šè¿‡ASåˆ›å»ºflutteré¡¹ç›®ï¼Œåˆ›å»ºåè®°å¾—æ‰“å¼€ç›®å½•ä¸‹çš„andriodç›®å½•æ‰èƒ½æ„å»ºè¿è¡Œåœ¨å®‰å“æœºå­ä¸Šï¼›æˆ–è€…æ‰“å¼€æ ¹ç›®å½•cmdè¾“å…¥<strong>flutter deviecs</strong>æŸ¥çœ‹å¯è¿è¡Œçš„ç¯å¢ƒï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250803054051.png"></p><p>ç„¶åå†flutter run -d (å¯¹äºid)å°±å¯ä»¥è¿è¡Œäº†ï¼Œæ”¯æŒ<strong>çƒ­æ›´æ–°</strong>ï¼ŒæŒ‰ä¸‹<strong>shift+R</strong>å°±å¯ä»¥</p><p>ç¼–å†™é¡µé¢çš„äº‹å°±äº¤ç»™aiäº†~</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>langchain4jè‡ªç”¨å­¦ä¹ ç¬”è®°</title>
      <link href="/2025/07/31/langchain4j%E8%87%AA%E7%94%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/07/31/langchain4j%E8%87%AA%E7%94%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>å‚è€ƒé±¼çš®è€å¸ˆæ•™å­¦è§†é¢‘</p><h2 id="åŸºæœ¬ä¾èµ–"><a href="#åŸºæœ¬ä¾èµ–" class="headerlink" title="åŸºæœ¬ä¾èµ–"></a>åŸºæœ¬ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dev.langchain4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langchain4j-community-dashscope-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0-beta7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dev.langchain4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langchain4j-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0-beta7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dev.langchain4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langchain4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dev.langchain4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langchain4j-easy-rag<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0-beta7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!--ç½‘é¡µçˆ¬å–--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jsoup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsoup<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.20.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dev.langchain4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>langchain4j-mcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0-beta7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Serviceç±»"><a href="#Serviceç±»" class="headerlink" title="Serviceç±»"></a>Serviceç±»</h2><p>åœ¨resourcesä¸‹æ·»åŠ system-prompt.txtæ–‡ä»¶ï¼Œé‡Œé¢å¡«å†™è§’è‰²é¢„è®¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AiCodeHelperService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SystemMessage(fromResource = &quot;system-prompt.txt&quot;)</span></span><br><span class="line">    String <span class="title function_">chat</span><span class="params">(<span class="meta">@UserMessage</span> String message, <span class="meta">@MemoryId</span> String chatId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SystemMessage(fromResource = &quot;system-prompt.txt&quot;)</span></span><br><span class="line">    Report <span class="title function_">report</span><span class="params">(<span class="meta">@UserMessage</span> String message, <span class="meta">@MemoryId</span> String chatId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Report</span><span class="params">(String name, List&lt;String&gt; suggestionList)</span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@SystemMessage(fromResource = &quot;system-prompt.txt&quot;)</span></span><br><span class="line">    Flux&lt;String&gt; <span class="title function_">chatStream</span><span class="params">(<span class="meta">@UserMessage</span> String message, <span class="meta">@MemoryId</span> String chatId)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Configç±»"><a href="#Configç±»" class="headerlink" title="Configç±»"></a>Configç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AiCodeHelperServiceFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ContentRetriever contentRetriever;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AiCodeHelperService <span class="title function_">aiCodeHelperService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ChatMemory</span> <span class="variable">chatMemory</span> <span class="operator">=</span> MessageWindowChatMemory.withMaxMessages(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//ai service</span></span><br><span class="line">        <span class="type">AiCodeHelperService</span> <span class="variable">aiCodeHelperService</span> <span class="operator">=</span> AiServices.builder(AiCodeHelperService.class)</span><br><span class="line">                .chatMemory(chatMemory)</span><br><span class="line">                .chatModel(qwenChatModel)</span><br><span class="line">                .tools(<span class="keyword">new</span> <span class="title class_">InterviewQuestionTool</span>())</span><br><span class="line">                .contentRetriever(contentRetriever)</span><br><span class="line">                .chatMemoryProvider(chatId -&gt; MessageWindowChatMemory.withMaxMessages(<span class="number">10</span>))</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> aiCodeHelperService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="RagçŸ¥è¯†åº“"><a href="#RagçŸ¥è¯†åº“" class="headerlink" title="RagçŸ¥è¯†åº“"></a>RagçŸ¥è¯†åº“</h2><p>åœ¨resourcesåˆ›å»ºdocsæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾çŸ¥è¯†åº“æ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AiConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ContentRetriever contentRetriever;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> StreamingChatModel streamingChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AiCodeHelperService <span class="title function_">aiCodeHelperService</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ChatMemory</span> <span class="variable">chatMemory</span> <span class="operator">=</span> MessageWindowChatMemory.withMaxMessages(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//ai service</span></span><br><span class="line">        <span class="type">AiCodeHelperService</span> <span class="variable">aiCodeHelperService</span> <span class="operator">=</span> AiServices.builder(AiCodeHelperService.class)</span><br><span class="line">                .chatMemory(chatMemory)</span><br><span class="line">                .chatModel(qwenChatModel)</span><br><span class="line">                .streamingChatModel(streamingChatModel)</span><br><span class="line">                .contentRetriever(contentRetriever)</span><br><span class="line">                .chatMemoryProvider(chatId -&gt; MessageWindowChatMemory.withMaxMessages(<span class="number">10</span>))</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> aiCodeHelperService;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Tools-è°ƒç”¨å®ä¾‹"><a href="#Tools-è°ƒç”¨å®ä¾‹" class="headerlink" title="Tools è°ƒç”¨å®ä¾‹"></a>Tools è°ƒç”¨å®ä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterviewQuestionTool</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»é¢è¯•é¸­ç½‘ç«™è·å–å…³é”®è¯ç›¸å…³çš„é¢è¯•é¢˜åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keyword æœç´¢å…³é”®è¯ï¼ˆå¦‚&quot;redis&quot;ã€&quot;javaå¤šçº¿ç¨‹&quot;ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é¢è¯•é¢˜åˆ—è¡¨ï¼Œè‹¥å¤±è´¥åˆ™è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Tool(name = &quot;interviewQuestionSearch&quot;, value = &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">                Retrieves relevant interview questions from mianshiya.com based on a keyword.</span></span><br><span class="line"><span class="meta">                Use this tool when the user asks for interview questions about specific technologies,</span></span><br><span class="line"><span class="meta">                programming concepts, or job-related topics. The input should be a clear search term.</span></span><br><span class="line"><span class="meta">                &quot;&quot;&quot;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">searchInterviewQuestions</span><span class="params">(<span class="meta">@P(value = &quot;the keyword to search&quot;)</span> String keyword)</span> &#123;</span><br><span class="line">        List&lt;String&gt; questions = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// æ„å»ºæœç´¢URLï¼ˆç¼–ç å…³é”®è¯ä»¥æ”¯æŒä¸­æ–‡ï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">encodedKeyword</span> <span class="operator">=</span> URLEncoder.encode(keyword, StandardCharsets.UTF_8);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://www.mianshiya.com/search/all?searchText=&quot;</span> + encodedKeyword;</span><br><span class="line">        <span class="comment">// å‘é€è¯·æ±‚å¹¶è§£æé¡µé¢</span></span><br><span class="line">        Document doc;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            doc = Jsoup.connect(url)</span><br><span class="line">                    .userAgent(<span class="string">&quot;Mozilla/5.0&quot;</span>)</span><br><span class="line">                    .timeout(<span class="number">5000</span>)</span><br><span class="line">                    .get();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;get web error&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> e.getMessage();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æå–é¢è¯•é¢˜</span></span><br><span class="line">        <span class="type">Elements</span> <span class="variable">questionElements</span> <span class="operator">=</span> doc.select(<span class="string">&quot;.ant-table-cell &gt; a&quot;</span>);</span><br><span class="line">        questionElements.forEach(el -&gt; questions.add(el.text().trim()));</span><br><span class="line">        <span class="keyword">return</span> String.join(<span class="string">&quot;\n&quot;</span>, questions);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®yml"><a href="#é…ç½®yml" class="headerlink" title="é…ç½®yml:"></a>é…ç½®yml:</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">langchain4j:</span></span><br><span class="line">  <span class="attr">community:</span></span><br><span class="line">    <span class="attr">dashscope:</span></span><br><span class="line">      <span class="attr">chat-model:</span></span><br><span class="line">        <span class="attr">model-name:</span> <span class="string">qwen-max</span></span><br><span class="line">        <span class="attr">api-key:</span> <span class="string">sk-xxxxx</span></span><br><span class="line">      <span class="attr">embedding-model:</span></span><br><span class="line">        <span class="attr">model-name:</span> <span class="string">text-embedding-v4</span></span><br><span class="line">        <span class="attr">api-key:</span> <span class="string">sk-xxxxx</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> langchain4j </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Ai 1.0å­¦ä¹ ç¬”è®°</title>
      <link href="/2025/07/30/IT%E7%AC%94%E8%AE%B0/java/Spring-Ai-1-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/07/30/IT%E7%AC%94%E8%AE%B0/java/Spring-Ai-1-0%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>çœ‹çš„é»‘é©¬çš„SpringAiæ•™å­¦è§†é¢‘ï¼Œä»–ç”¨çš„æ˜¯1.0.0-m6ç‰ˆæœ¬ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½å˜äº†ï¼Œä½†é‚£åˆæ˜¯ä¸ªæµ‹è¯•ç‰ˆï¼Œè€Œæ­£å¼ç‰ˆçš„1.0.0åˆæœ‰å¾ˆå¤šä¸åŒï¼Œæ‰€ä»¥è‡ªå·±è·‘å®˜ç½‘æ¥çœ‹çœ‹æ–‡æ¡£ï¼š<a href="https://spring-ai.spring-doc.cn/docs/1.0.0/api_chat-memory.html">èŠå¤©è®°å¿† (Chat Memory) | Spring AI1.0.0ä¸­æ–‡æ–‡æ¡£|Springå®˜æ–¹æ–‡æ¡£|SpringBoot æ•™ç¨‹|Springä¸­æ–‡ç½‘</a></p><p>æˆ‘æ˜¯ä»¥Deepseekæ¨¡å‹ä¸ºä¾‹å­ï¼Œæ¨èç»Ÿä¸€openaiä¾èµ–:ç”¨äº†openaiå°±éœ€è¦åŠ é…ä¸ªbase_url</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.33<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-model-chat-memory-repository-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-advisors-vector-store<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-model-openai<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-pdf-document-reader<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å†…å­˜è®°å¿†å­˜å‚¨"><a href="#å†…å­˜è®°å¿†å­˜å‚¨" class="headerlink" title="å†…å­˜è®°å¿†å­˜å‚¨"></a>å†…å­˜è®°å¿†å­˜å‚¨</h3><p><strong>é¦–å…ˆç¬¬ä¸€ä¸ªå˜åŒ–å°±æ˜¯è®°å¿†å¯¹è¯</strong>ï¼Œå…ˆä¸Šä»£ç ï¼š</p><p><strong>é…ç½®ç±»</strong>ï¼š</p><p>è®°å¾—å»å®˜ç½‘çœ‹çœ‹ä½ çš„æ¨¡å‹æ˜¯å¦æ”¯æŒembeddingåµŒå…¥ï¼š</p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250805003242.png" style="zoom:67%;" /><p>configå®Œæ•´ä»£ç (åŒ…å«äº†åé¢çš„è®°å¿†å’Œragé…ç½®)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AiConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatMemoryRepository <span class="title function_">chatMemoryRepository</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">InMemoryChatMemoryRepository</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> VectorStore <span class="title function_">vectorStore</span><span class="params">(ZhiPuAiEmbeddingModel embeddingModel)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SimpleVectorStore.builder(embeddingModel).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatMemory <span class="title function_">chatMemory</span><span class="params">(ChatMemoryRepository chatMemoryRepository)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> MessageWindowChatMemory.builder()</span><br><span class="line">                .chatMemoryRepository(chatMemoryRepository)</span><br><span class="line">                .maxMessages(<span class="number">15</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient <span class="title function_">aiService</span><span class="params">(OpenAiChatModel model, ChatMemory chatMemory)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(model)</span><br><span class="line">                .defaultSystem(<span class="string">&quot;ä½ å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                .defaultAdvisors(MessageChatMemoryAdvisor.builder(chatMemory).build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    CommandLineRunner <span class="title function_">commandLineRunner</span><span class="params">(<span class="meta">@Autowired</span> VectorStore vectorStore, <span class="meta">@Value(&quot;classpath:static/test.txt&quot;)</span> Resource testTxt)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args -&gt; &#123;</span><br><span class="line">            vectorStore.write(<span class="keyword">new</span> <span class="title class_">TokenTextSplitter</span>().transform(<span class="keyword">new</span> <span class="title class_">TextReader</span>(testTxt).read()));</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä¸­classpath:static&#x2F;test.txtä¸ºæˆ‘çš„ragåµŒå…¥æ–‡æœ¬</p><p><strong>æ¥å£</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ChatClient chatClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> VectorStore vectorStore;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/chat&quot;,produces = &quot;text/html; charset=UTF-8&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(String message,String chatId)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt()</span><br><span class="line">                .user(message)</span><br><span class="line">                .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span><br><span class="line">                        .searchRequest(SearchRequest.builder()</span><br><span class="line">                                .topK(<span class="number">5</span>)<span class="comment">//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line">                                .similarityThreshold(<span class="number">0.6</span>)<span class="comment">//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line">                                .build()).build())</span><br><span class="line">                .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, chatId))</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ˜¯å°†å¯¹è¯æ•°æ®å­˜åœ¨å†…å­˜çš„</p><p>åŒºåˆ«ä¸‹<strong>1.0.0-m6</strong>çš„å†™æ³•ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250730040230.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250730040205.png"></p><p>åæ­£æˆ‘ç”¨äº†1.0.0-m6åä½¿ç”¨advisorä¼šæŠ¥é”™:â€Handler dispatch failed: java.lang.NoSuchMethodError: â€˜reactor.core.publisher.Flux org.springframework.ai.chat.model.MessageAggregator.aggregateAdvisedResponse(reactor.core.publisher.Flux, java.util.function.Consumer)â€™â€æ‰€ä»¥æˆ‘å°±ç”¨1.0.0ç‰ˆæœ¬äº†</p><h3 id="æ•°æ®åº“è®°å¿†å­˜å‚¨"><a href="#æ•°æ®åº“è®°å¿†å­˜å‚¨" class="headerlink" title="æ•°æ®åº“è®°å¿†å­˜å‚¨"></a>æ•°æ®åº“è®°å¿†å­˜å‚¨</h3><p>é¦–å…ˆå¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-model-chat-memory-repository-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ”¯æŒçš„æ•°æ®åº“ï¼š</p><ul><li>PostgreSQL æ•°æ®åº“</li><li>MySQL &#x2F; MariaDB</li><li>SQL æœåŠ¡å™¨</li><li>HSQLDB æ•°æ®åº“</li></ul><p>ä¿®æ”¹åˆšåˆšçš„é…ç½®æ–‡ä»¶ï¼ˆæŠŠChatMemoryRepositoryæ”¹æˆJdbcChatMemoryRepositoryå°±è¡Œï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">   <span class="keyword">public</span> ChatMemory <span class="title function_">chatMemory</span><span class="params">(JdbcChatMemoryRepository chatMemoryRepository)</span>&#123;</span><br><span class="line">       <span class="keyword">return</span> MessageWindowChatMemory.builder()</span><br><span class="line">               .chatMemoryRepository(chatMemoryRepository)</span><br><span class="line">               .maxMessages(<span class="number">15</span>)</span><br><span class="line">               .build();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ JDBC URL æ—¶ï¼Œå¯ä»¥ä» JDBC URL ä¸­<strong>è‡ªåŠ¨æ£€æµ‹æ­£ç¡®çš„æ–¹è¨€</strong><code>JdbcChatMemoryRepositoryDialect.from(DataSource)</code>.æ‚¨å¯ä»¥é€šè¿‡å®ç°<code>JdbcChatMemoryRepositoryDialect</code>æ¥å£ï¼Œå³spring.datasource.url</p><p>ä½¿ç”¨æ•°æ®åº“å­˜å‚¨è®°å¿†åä¼šè‡ªåŠ¨è¿›è¡Œåˆå§‹åŒ–åˆ›å»ºä¸€å¼ è¡¨ï¼Œå®˜ç½‘è¯è¯´å°±æ˜¯<strong>Schema åˆå§‹åŒ–</strong>ä¼šè‡ªåŠ¨é…ç½®å°†è‡ªåŠ¨åˆ›å»º<code>SPRING_AI_CHAT_MEMORY</code>è¡¨ï¼Œä½¿ç”¨ç‰¹å®šäºæä¾›å•†çš„æ•°æ®åº“ SQL è„šæœ¬ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶æ„åˆå§‹åŒ–ä»…é’ˆå¯¹åµŒå…¥å¼æ•°æ®åº“ï¼ˆH2ã€HSQLã€Derby ç­‰ï¼‰è¿è¡Œ</p><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>spring.ai.chat.memory.repository.jdbc.initialize-schema</code>è´¢äº§ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.ai.chat.memory.repository.jdbc.initialize-schema</span>=<span class="string">embedded # ä»…é€‚ç”¨äºåµŒå…¥å¼æ•°æ®åº“ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line"><span class="attr">spring.ai.chat.memory.repository.jdbc.initialize-schema</span>=<span class="string">always   # æ€»æ˜¯åˆå§‹åŒ–</span></span><br><span class="line"><span class="attr">spring.ai.chat.memory.repository.jdbc.initialize-schema</span>=<span class="string">never    # #ä¸è¦åˆå§‹åŒ–ï¼ˆå¯¹Flyway/ liquebaseæœ‰ç”¨ï¼‰</span></span><br></pre></td></tr></table></figure><p><strong>ç›®å‰æœ€ä½³å®è·µæ˜¯å°†initialize-schemaè®¾ç½®ä¸ºneverï¼Œå¹¶è®¾ç½®platformä¸ºä½ çš„æ•°æ®åº“è¯­è¨€åƒè¿™æ ·ï¼š</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/h?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">1234</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">ai:</span></span><br><span class="line">    <span class="attr">chat:</span></span><br><span class="line">      <span class="attr">memory:</span></span><br><span class="line">        <span class="attr">repository:</span></span><br><span class="line">          <span class="attr">jdbc:</span></span><br><span class="line">            <span class="attr">platform:</span> <span class="string">mysql</span></span><br><span class="line">            <span class="attr">initialize-schema:</span> <span class="string">never</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åå†æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œå‚è€ƒmysql.sqlï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- schema-mysql.sql</span><br><span class="line">CREATE TABLE IF NOT EXISTS SPRING_AI_CHAT_MEMORY (</span><br><span class="line">    conversation_id VARCHAR(36) NOT NULL,</span><br><span class="line">    content TEXT NOT NULL,</span><br><span class="line">    type VARCHAR(10) NOT NULL,</span><br><span class="line">    `timestamp` TIMESTAMP NOT NULL,</span><br><span class="line">    CONSTRAINT TYPE_CHECK CHECK (type IN (&#x27;USER&#x27;, &#x27;ASSISTANT&#x27;, &#x27;SYSTEM&#x27;, &#x27;TOOL&#x27;))</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE INDEX SPRING_AI_CHAT_MEMORY_CONVERSATION_ID_TIMESTAMP_IDX</span><br><span class="line">ON SPRING_AI_CHAT_MEMORY(conversation_id, `timestamp`);</span><br></pre></td></tr></table></figure><p><strong>æ‰©å±•æ–¹è¨€</strong></p><p>è¦æ·»åŠ å¯¹æ–°æ•°æ®åº“çš„æ”¯æŒï¼Œè¯·å®ç°<code>JdbcChatMemoryRepositoryDialect</code>æ¥å£ï¼Œå¹¶æä¾›ç”¨äºé€‰æ‹©ã€æ’å…¥å’Œåˆ é™¤æ¶ˆæ¯çš„ SQLã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å°†è‡ªå®šä¹‰ dialect ä¼ é€’ç»™å­˜å‚¨åº“æ„å»ºå™¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ChatMemoryRepository</span> <span class="variable">chatMemoryRepository</span> <span class="operator">=</span> JdbcChatMemoryRepository.builder()</span><br><span class="line">    .jdbcTemplate(jdbcTemplate)</span><br><span class="line">    .dialect(<span class="keyword">new</span> <span class="title class_">MyCustomDbDialect</span>())</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šCassandraChatMemoryRepositoryå’ŒNeo4jChatMemoryRepositoryå¯ä»¥å»å®˜ç½‘çœ‹çœ‹ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œæ–°æ‰‹ä¸æ€ä¹ˆç”¨ï¼›</p><h3 id="æ£€ç´¢å¢å¼ºç”Ÿæˆ-Rag"><a href="#æ£€ç´¢å¢å¼ºç”Ÿæˆ-Rag" class="headerlink" title="æ£€ç´¢å¢å¼ºç”Ÿæˆ(Rag)"></a>æ£€ç´¢å¢å¼ºç”Ÿæˆ(Rag)</h3><p>é¦–å…ˆå…ˆå¼•å…¥ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-advisors-vector-store<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘è¿™é‡Œç”¨çš„æ™ºè°±çš„æ¨¡å‹å®ƒæ”¯æŒåµŒå…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> VectorStore <span class="title function_">vectorStore</span><span class="params">(ZhiPuAiEmbeddingModel embeddingModel)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> SimpleVectorStore.builder(embeddingModel).build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    CommandLineRunner <span class="title function_">commandLineRunner</span><span class="params">(<span class="meta">@Autowired</span> VectorStore vectorStore, <span class="meta">@Value(&quot;classpath:static/test.txt&quot;)</span> Resource testTxt)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args -&gt; &#123;</span><br><span class="line">            vectorStore.write(<span class="keyword">new</span> <span class="title class_">TokenTextSplitter</span>().transform(<span class="keyword">new</span> <span class="title class_">TextReader</span>(testTxt).read()));</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æˆ‘è¿™é‡ŒæŠŠdeepseekç”¨ä½œäº†å¯¹è¯æ¨¡å‹ï¼Œzhipuç”¨äºåµŒå…¥æ¨¡å‹</p><h3 id="å±å±±ä»£ç è‡ªç”¨"><a href="#å±å±±ä»£ç è‡ªç”¨" class="headerlink" title="å±å±±ä»£ç è‡ªç”¨"></a>å±å±±ä»£ç è‡ªç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">aiChat</span><span class="params">(MessageDto messageDto)</span> &#123;</span><br><span class="line">        <span class="type">ConversationUser</span> <span class="variable">conversationUser</span> <span class="operator">=</span> conversationUserMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;ConversationUser&gt;().lambda()</span><br><span class="line">                .eq(ConversationUser::getConversationId, messageDto.getChatId()));</span><br><span class="line">        <span class="type">Long</span> <span class="variable">currentLoginId</span> <span class="operator">=</span> UserUtils.getCurrentLoginId();</span><br><span class="line">        <span class="keyword">if</span> (conversationUser == <span class="literal">null</span>)&#123;</span><br><span class="line">            conversationUserMapper.insert(<span class="keyword">new</span> <span class="title class_">ConversationUser</span>()</span><br><span class="line">                    .setConversationId(messageDto.getChatId())</span><br><span class="line">                    .setCreatedTime(LocalDateTime.now())</span><br><span class="line">                    .setTitle(LocalDateTime.now().toString().substring(<span class="number">5</span>,<span class="number">9</span>)+<span class="string">&quot;æ–°å¯¹è¯&quot;</span>)</span><br><span class="line">                    .setUserId(currentLoginId));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (messageDto.getModel() ==<span class="literal">null</span> || messageDto.getModel().isEmpty())&#123;</span><br><span class="line">            messageDto.setModel(<span class="string">&quot;DEEPSEEK&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (messageDto.getModel()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;GPT&quot;</span>-&gt;&#123;</span><br><span class="line">                <span class="keyword">if</span> (messageDto.getFile() == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> ChatClient.builder(openChatModel)</span><br><span class="line">                            .defaultSystem(<span class="string">&quot;ä½ å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                            .build()</span><br><span class="line">                            .prompt()</span><br><span class="line">                            .user(messageDto.getMessage())</span><br><span class="line"><span class="comment">//                            .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span></span><br><span class="line"><span class="comment">//                                    .searchRequest(SearchRequest.builder()</span></span><br><span class="line"><span class="comment">//                                            .topK(5)//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line"><span class="comment">//                                            .similarityThreshold(0.6)//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line"><span class="comment">//                                            .build()).build())</span></span><br><span class="line">                            .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                            .stream()</span><br><span class="line">                            .content();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="type">MediaType</span> <span class="variable">mediaType</span> <span class="operator">=</span> MediaType.valueOf(Objects.requireNonNull(messageDto.getFile().getContentType()));</span><br><span class="line">                <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> mediaType.getType();</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isImage</span> <span class="operator">=</span> <span class="string">&quot;image&quot;</span>.equals(type);</span><br><span class="line">                <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> messageDto.getFile().getOriginalFilename();</span><br><span class="line">                <span class="type">String</span> <span class="variable">fileExtension</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">final</span> <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID() + <span class="string">&quot;.&quot;</span>+fileExtension;</span><br><span class="line">                <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> domin+aliUploadUtils.uploadFile(messageDto.getFile(), <span class="string">&quot;chat&quot;</span>, fileName, isImage);</span><br><span class="line">                <span class="type">Media</span> <span class="variable">media</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Media</span>(mediaType, URI.create(url));</span><br><span class="line">                <span class="keyword">if</span> (isImage)&#123;</span><br><span class="line">                    fileContent =<span class="string">&quot;&lt;picture&gt;&quot;</span>+url+<span class="string">&quot;&lt;/picture&gt;&quot;</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    fileContent =<span class="string">&quot;&lt;file&gt;&quot;</span>+url+<span class="string">&quot;&lt;/file&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="type">OpenAiChatOptions</span> <span class="variable">zhiPuAiChatOptions</span> <span class="operator">=</span> OpenAiChatOptions.builder()</span><br><span class="line">                        .model(<span class="string">&quot;gpt-5&quot;</span>)</span><br><span class="line">                        .build();</span><br><span class="line">                <span class="type">UserMessage</span> <span class="variable">userMessage</span> <span class="operator">=</span> UserMessage.builder().media(media).text(messageDto.getMessage()).build();</span><br><span class="line">                <span class="type">ChatResponse</span> <span class="variable">chatResponseFlux</span> <span class="operator">=</span>openChatModel.call(<span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(userMessage), zhiPuAiChatOptions));</span><br><span class="line">                <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> chatResponseFlux.getResult().getOutput().getText();</span><br><span class="line">                <span class="type">String</span> <span class="variable">finalFileContent</span> <span class="operator">=</span> fileContent;</span><br><span class="line">                springAiChatMemoryMapper.insert(<span class="keyword">new</span> <span class="title class_">SpringAiChatMemory</span>()</span><br><span class="line">                        .setContent(messageDto.getMessage()+ finalFileContent)</span><br><span class="line">                        .setType(<span class="string">&quot;USER&quot;</span>)</span><br><span class="line">                        .setConversationId(messageDto.getChatId())</span><br><span class="line">                        .setTimestamp(LocalDateTime.now()));</span><br><span class="line">                springAiChatMemoryMapper.insert(<span class="keyword">new</span> <span class="title class_">SpringAiChatMemory</span>()</span><br><span class="line">                        .setContent(text)</span><br><span class="line">                        .setType(<span class="string">&quot;ASSISTANT&quot;</span>)</span><br><span class="line">                        .setConversationId(messageDto.getChatId())</span><br><span class="line">                        .setTimestamp(LocalDateTime.now()));</span><br><span class="line">                <span class="keyword">return</span> Flux.just(text);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;DEEPSEEK&quot;</span> -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> ChatClient.builder(deepseekModel)</span><br><span class="line">                            .defaultSystem(<span class="string">&quot;ä½ å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                            .build()</span><br><span class="line">                            .prompt()</span><br><span class="line">                            .user(messageDto.getMessage())</span><br><span class="line">                            .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span><br><span class="line">                                    .searchRequest(SearchRequest.builder()</span><br><span class="line">                                            .topK(<span class="number">5</span>)<span class="comment">//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line">                                            .similarityThreshold(<span class="number">0.6</span>)<span class="comment">//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line">                                            .build()).build())</span><br><span class="line">                            .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                            .stream()</span><br><span class="line">                            .content();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;QWEN&quot;</span> -&gt;&#123;</span><br><span class="line">                <span class="keyword">return</span> ChatClient.builder(qwenModel)</span><br><span class="line">                        .defaultSystem(<span class="string">&quot;ä½ å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                        .build()</span><br><span class="line">                        .prompt()</span><br><span class="line">                        .user(messageDto.getMessage())</span><br><span class="line">                        .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span><br><span class="line">                                .searchRequest(SearchRequest.builder()</span><br><span class="line">                                        .topK(<span class="number">5</span>)<span class="comment">//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line">                                        .similarityThreshold(<span class="number">0.6</span>)<span class="comment">//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line">                                        .build()).build())</span><br><span class="line">                        .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                        .stream()</span><br><span class="line">                        .content();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;GEMINI&quot;</span> -&gt; &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> ChatClient.builder(geminiModel)</span><br><span class="line">                            .defaultSystem(<span class="string">&quot;ä½ å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                            .build()</span><br><span class="line">                            .prompt()</span><br><span class="line">                            .user(messageDto.getMessage())</span><br><span class="line">                            .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span><br><span class="line">                                    .searchRequest(SearchRequest.builder()</span><br><span class="line">                                            .topK(<span class="number">5</span>)<span class="comment">//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line">                                            .similarityThreshold(<span class="number">0.6</span>)<span class="comment">//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line">                                            .build()).build())</span><br><span class="line">                            .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                            .stream()</span><br><span class="line">                            .content();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;GROK&quot;</span> -&gt;&#123;</span><br><span class="line">                <span class="keyword">return</span> ChatClient.builder(gorkModel)</span><br><span class="line">                        .defaultSystem(<span class="string">&quot;ä½ å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                        .build()</span><br><span class="line">                        .prompt()</span><br><span class="line">                        .user(messageDto.getMessage())</span><br><span class="line">                        .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span><br><span class="line">                                .searchRequest(SearchRequest.builder()</span><br><span class="line">                                        .topK(<span class="number">5</span>)<span class="comment">//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line">                                        .similarityThreshold(<span class="number">0.6</span>)<span class="comment">//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line">                                        .build()).build())</span><br><span class="line">                        .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                        .stream()</span><br><span class="line">                        .content();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;GLM&quot;</span> -&gt;&#123;</span><br><span class="line">                <span class="keyword">if</span> (messageDto.getFile() == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> ChatClient.builder(zhiPuAiChatModel)</span><br><span class="line">                            .defaultSystem(<span class="string">&quot;ä½ åå­—å«ä½•å¹³å®‰ï¼Œæ˜¯ä¸€ä¸ªé«˜å†·é…·é…·çš„ITé«˜æ‰‹&quot;</span>)</span><br><span class="line">                            .build()</span><br><span class="line">                            .prompt()</span><br><span class="line">                            .user(messageDto.getMessage())</span><br><span class="line">                            .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span><br><span class="line">                                    .searchRequest(SearchRequest.builder()</span><br><span class="line">                                            .topK(<span class="number">5</span>)<span class="comment">//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line">                                            .similarityThreshold(<span class="number">0.6</span>)<span class="comment">//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line">                                            .build()).build())</span><br><span class="line">                            .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span><br><span class="line">                            .stream()</span><br><span class="line">                            .content();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="type">MediaType</span> <span class="variable">mediaType</span> <span class="operator">=</span> MediaType.valueOf(Objects.requireNonNull(messageDto.getFile().getContentType()));</span><br><span class="line">                <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> mediaType.getType();</span><br><span class="line">                <span class="type">boolean</span> <span class="variable">isImage</span> <span class="operator">=</span> <span class="string">&quot;image&quot;</span>.equals(type);</span><br><span class="line">                <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> messageDto.getFile().getOriginalFilename();</span><br><span class="line">                <span class="type">String</span> <span class="variable">fileExtension</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">final</span> <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> UUID.randomUUID() + <span class="string">&quot;.&quot;</span>+fileExtension;</span><br><span class="line">                <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> domin+aliUploadUtils.uploadFile(messageDto.getFile(), <span class="string">&quot;chat&quot;</span>, fileName, isImage);</span><br><span class="line">                <span class="type">Media</span> <span class="variable">media</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Media</span>(mediaType, URI.create(url));</span><br><span class="line">                <span class="keyword">if</span> (isImage)&#123;</span><br><span class="line">                    fileContent =<span class="string">&quot;&lt;picture&gt;&quot;</span>+url+<span class="string">&quot;&lt;/picture&gt;&quot;</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    fileContent =<span class="string">&quot;&lt;file&gt;&quot;</span>+url+<span class="string">&quot;&lt;/file&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="type">ZhiPuAiChatOptions</span> <span class="variable">zhiPuAiChatOptions</span> <span class="operator">=</span> ZhiPuAiChatOptions.builder()</span><br><span class="line">                        .model(AiModelConstant.GLM)</span><br><span class="line">                        .build();</span><br><span class="line">                <span class="type">UserMessage</span> <span class="variable">userMessage</span> <span class="operator">=</span> UserMessage.builder().media(media).text(messageDto.getMessage()).build();</span><br><span class="line">                Flux&lt;ChatResponse&gt; chatResponseFlux =zhiPuAiChatModel.stream(<span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(userMessage), zhiPuAiChatOptions));</span><br><span class="line">                Flux&lt;String&gt; map = chatResponseFlux.mapNotNull(chatResponse -&gt; chatResponse.getResult().getOutput().getText());</span><br><span class="line">                <span class="type">String</span> <span class="variable">finalFileContent</span> <span class="operator">=</span> fileContent;</span><br><span class="line">                map.doOnNext(chunk -&gt; &#123;&#125;).reduce((s1, s2) -&gt; s1 + s2).subscribe(</span><br><span class="line">                        result -&gt; &#123;</span><br><span class="line">                            <span class="comment">// æµå¼ç»“æŸåï¼Œ</span></span><br><span class="line">                            springAiChatMemoryMapper.insert(<span class="keyword">new</span> <span class="title class_">SpringAiChatMemory</span>()</span><br><span class="line">                                    .setContent(messageDto.getMessage()+ finalFileContent)</span><br><span class="line">                                    .setType(<span class="string">&quot;USER&quot;</span>)</span><br><span class="line">                                    .setConversationId(messageDto.getChatId())</span><br><span class="line">                                    .setTimestamp(LocalDateTime.now()));</span><br><span class="line">                            springAiChatMemoryMapper.insert(<span class="keyword">new</span> <span class="title class_">SpringAiChatMemory</span>()</span><br><span class="line">                                    .setContent(result)</span><br><span class="line">                                    .setType(<span class="string">&quot;ASSISTANT&quot;</span>)</span><br><span class="line">                                    .setConversationId(messageDto.getChatId())</span><br><span class="line">                                    .setTimestamp(LocalDateTime.now()));</span><br><span class="line">                        &#125;</span><br><span class="line">                );</span><br><span class="line">                <span class="keyword">return</span> map;</span><br><span class="line"></span><br><span class="line"><span class="comment">//                return ChatClient.create(zhiPuAiChatModel).prompt()</span></span><br><span class="line"><span class="comment">//                        .user(u -&gt; u.text(messageDto.getMessage())</span></span><br><span class="line"><span class="comment">//                                .media(new Media(mediaType, URI.create(url))))</span></span><br><span class="line"><span class="comment">////                        .advisors(QuestionAnswerAdvisor.builder(vectorStore)</span></span><br><span class="line"><span class="comment">////                                .searchRequest(SearchRequest.builder()</span></span><br><span class="line"><span class="comment">////                                        .topK(5)//æœ€å¤š 5 ä¸ªæ£€ç´¢ç»“æœ</span></span><br><span class="line"><span class="comment">////                                        .similarityThreshold(0.6)//æœ€å°ç›¸ä¼¼åº¦åŒ¹é…ç™¾åˆ†æ¯”</span></span><br><span class="line"><span class="comment">////                                        .build()).build())</span></span><br><span class="line"><span class="comment">//                        .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span></span><br><span class="line"><span class="comment">//                        .stream()</span></span><br><span class="line"><span class="comment">//                        .content();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//                Consumer&lt;ChatClient.PromptUserSpec&gt; userMessageConsumer = promptUserSpec -&gt;</span></span><br><span class="line"><span class="comment">//                        promptUserSpec.text(messageDto.getMessage())</span></span><br><span class="line"><span class="comment">//                                .media(media);</span></span><br><span class="line"><span class="comment">//                Flux&lt;String&gt; content = ChatClient.create(zhiPuAiChatModel).prompt().user(userMessageConsumer)</span></span><br><span class="line"><span class="comment">//                        .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, messageDto.getChatId()))</span></span><br><span class="line"><span class="comment">//                        .stream()</span></span><br><span class="line"><span class="comment">//                        .content();</span></span><br><span class="line"><span class="comment">//                ChatClient.create(zhiPuAiChatModel).prompt()</span></span><br><span class="line"><span class="comment">//                        .user(promptUserSpec -&gt; promptUserSpec.text(messageDto.getMessage()))</span></span><br><span class="line"><span class="comment">//                        .stream()</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Flux.empty();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESå­¦ä¹ ç¬”è®°</title>
      <link href="/2025/07/21/IT%E7%AC%94%E8%AE%B0/ES%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2025/07/21/IT%E7%AC%94%E8%AE%B0/ES%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¤è¯†"><a href="#è®¤è¯†" class="headerlink" title="è®¤è¯†"></a>è®¤è¯†</h2><h3 id="å®‰è£…eså’Œkibana"><a href="#å®‰è£…eså’Œkibana" class="headerlink" title="å®‰è£…eså’Œkibana"></a>å®‰è£…eså’Œkibana</h3><p>é¦–å…ˆä¸‹è½½es.tarå’Œkibana.taråŒ…å¯¼å…¥è¿›å»ç„¶åå†åŠ è½½é•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker laod -i es.tar</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i kibana.tar</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºå®ƒä»¬çš„ç½‘ç»œï¼Œå°†ä»–ä»¬å…³è”åœ¨ä¸€èµ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create es-net</span><br></pre></td></tr></table></figure><p>ç„¶åå†åˆ†åˆ«è¿è¡Œes å’Œ kibana:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name es -e <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span> -e <span class="string">&quot;discovery.type=single-node&quot;</span> -v es-data:/usr/share/elasticsearch/data -v es-plugins:/usr/share/elasticsearch/plugins --privileged --network es-net -p 9200:9200 -p 9300:9300 elasticsearch:7.12.1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name kibana -e ELASTICSEARCH_HOSTS=http://es:9200 --network=es-net -p 5601:5601 kibana:7.12.1</span><br></pre></td></tr></table></figure><p>ç„¶åå†è¿›å…¥5601ç«¯å£ï¼Œè¿›å»åç‚¹å‡»ä¸æ·»åŠ æ•°æ®ï¼Œè¿›å…¥dev toolså¯ä»¥è¿›è¡Œæµ‹è¯•</p><h3 id="å®‰è£…IKåˆ†è¯å™¨"><a href="#å®‰è£…IKåˆ†è¯å™¨" class="headerlink" title="å®‰è£…IKåˆ†è¯å™¨"></a>å®‰è£…IKåˆ†è¯å™¨</h3><p>é¦–å…ˆæ‰¾åˆ°ä¸Šä¼ æ–‡ä»¶çš„ä½ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect es-plugins</span><br></pre></td></tr></table></figure><p>ç„¶åå†ä¸Šä¼ ikæ–‡ä»¶å¤¹ï¼Œä¸Šä¼ åå†é‡å¯docker restart es,æ¥ç€å°±å¯ä»¥å»æµ‹è¯•åˆ†è¯å™¨äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST /_analyze</span><br><span class="line">&#123;</span><br><span class="line">  &quot;text&quot;: &quot;æˆ‘çš„åå­—å«ä½•å¹³å®‰ï¼Œæˆ‘çˆ±java&quot;,</span><br><span class="line">  &quot;analyzer&quot;: &quot;ik_smark&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°<strong>500</strong>é”™è¯¯ï¼Œä¸è¦ç›´æ¥ç”¨é»‘é©¬çš„é‚£ä¸ªikæ–‡ä»¶å¤¹ï¼Œå§å‹ç¼©åŒ…è§£å‹ç”¨è‡ªå·±çš„</p><p>æŸ¥çœ‹æ—¥å¿—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f es</span><br></pre></td></tr></table></figure><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725023717.png"></p><p>æŒ‰ç…§å›¾ç‰‡é‡Œçš„åšæ³•å°±æ˜¯åŠ ä¸ªext.dicæ–‡ä»¶ï¼Œåœ¨é‡Œé¢ç¼–å†™ä½ çš„è¯è¯­ï¼Œè®°å¾—ç”¨UTF-8ç¼–ç </p><h3 id="ç´¢å¼•åº“"><a href="#ç´¢å¼•åº“" class="headerlink" title="ç´¢å¼•åº“"></a>ç´¢å¼•åº“</h3><p>ä¸mysqlçš„å¯¹æ¯”ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725035901.png"></p><p><strong>typeç±»å‹</strong></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725033544.png"></p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725033952.png" style="zoom:50%;" /><p>ä¾‹å¦‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">PUT /user</span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;object&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;fistName&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;lastName&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;keyword&quot;</span></span><br><span class="line">      <span class="punctuation">,</span> <span class="attr">&quot;analyzer&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ik_smart&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ å¥½åå°±å¯ä»¥ GET &#x2F;ç´¢å¼•åº“åç§°æŸ¥è¯¢å‡ºæ¥æˆ–è€…Deleteåˆ é™¤</p><p>ä¿®æ”¹æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725034754.png"></p><h3 id="æ–‡æ¡£Crud"><a href="#æ–‡æ¡£Crud" class="headerlink" title="æ–‡æ¡£Crud"></a>æ–‡æ¡£Crud</h3><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725035034.png" style="zoom:80%;" /><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">POST /user/_doc/<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1973016127@qq.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æµ©åŸç§‘æŠ€åˆ›å§‹äººä½•å¹³å®‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;firstName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½•&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lastName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¹³å®‰&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>è·å–ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /user/_doc/1</span><br></pre></td></tr></table></figure><p>åˆ é™¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /user/_doc/1</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹</strong>ï¼š</p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725040525.png" style="zoom:67%;" /><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PUT /user/_doc/<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1973016127@qq.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æµ©åŸç§‘æŠ€åˆ›å§‹äººæ˜¯ä½•å¹³å®‰&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;firstName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½•&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lastName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;å¹³å®‰&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725040735.png" style="zoom: 67%;" /><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST /user/_update/<span class="number">1</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;doc&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1641436566@qq.com&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250725040957.png"></p><h2 id="JavaRestClient"><a href="#JavaRestClient" class="headerlink" title="JavaRestClient"></a>JavaRestClient</h2><p>å‡†å¤‡ç™½é›ªï¼ï¼å…¶å®ä¹Ÿæ²¡ç™½é›ªï¼Œå°±åƒä½ å­¦mybatis-plusä¹‹å‰å°±è¦å…ˆå­¦mybatiså’Œmysqlè¯­å¥~</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‹çš„æ•…äº‹(å¤§ä¸‰ä¸‹)</title>
      <link href="/2025/07/21/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B-%E5%A4%A7%E4%B8%89%E4%B8%8B/"/>
      <url>/2025/07/21/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B-%E5%A4%A7%E4%B8%89%E4%B8%8B/</url>
      
        <content type="html"><![CDATA[<p>ç‹åˆæ¥å†™æ•…äº‹äº†ï¼Œè¿™æ¬¡åé«˜é“å›æ¥äº†ï¼›è¿™å­¦æœŸç®—æ˜¯çœŸæ­£å¼€å§‹å®æˆ˜çš„ä¸€å­¦æœŸï¼Œå¾€å¹´éƒ½æ˜¯å­¦çŸ¥è¯†æŠ€èƒ½æˆ–è€…æ‰¾å·¥ä½œå…¼èŒçš„è·¯ä¸Šï¼Œè¿™å­¦æœŸ3æœˆä»½æˆ‘å¼€å§‹å’Œæœ‹å‹åœ¨é—²é±¼ä¸Šæ¥å•ï¼Œè™½ç„¶ä»·æ ¼éå¸¸çš„é»‘å¥´ä½†æ˜¯ä¸€å¼€å§‹æ¥çš„éƒ½æ¯”è¾ƒä½ï¼Œç¬¬ä¸€ä¸ªå•å­æ€»å…±ç”¨äº†1å‘¨å¤šæå®Œæ‰æ‹¿åˆ°100å¤šå…ƒï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡å¤šäººåˆä½œå¼€å‘é¡¹ç›®æ‰€ä»¥æ•ˆç‡ä½æ˜¯æ­£å¸¸çš„ï¼ŒåŠ ä¸Šæœ¬æ¥å†…å®¹å°±å¤šè¿˜è¦æ–‡æ¡£ä»€ä¹ˆçš„ï¼›ä½†åé¢æ¥å°±æ¸æ¸å¥½èµ·æ¥äº†ï¼Œæ¥äº†ä¸ª800ï¼Œ2000çš„ï¼ˆè™½ç„¶ä½†æ˜¯ä¹Ÿä¸æ˜¯å¾ˆå¥½å°¤å…¶æ˜¯é‚£ä¸ª2000çš„å•è´¼éº»çƒ¦ï¼Œçº¯ç‰›é©¬ï¼‰åé¢æˆ‘æŠŠæˆ‘åšçš„æ¯ä¸€å•å‰ªæˆè§†é¢‘åˆ†äº«åˆ°bç«™ï¼Œä¸€å¼€å§‹åªæ˜¯éšä¾¿å‰ªå‰ªå‘å‡ºå»ç»“æœè¿˜æœ‰è›®å¤šäººçœ‹çš„ï¼Œæˆ‘å°±ç»§ç»­å‘ä¸‹å»ï¼Œç°åœ¨ç²‰ä¸ä¹Ÿæ¶¨åˆ°4000å¤šäº†ï¼Œå¾ˆå¤šå•å­ä¹Ÿæ˜¯bç«™æ¥çš„ã€‚åé¢æˆ‘å‘ç°å•å­è¶Šæ¥è¶Šå¤šåšä¸å®Œäº†ï¼Œæˆ‘å°±æ‰“ç®—ä»¥æˆ‘ä¸ªäººåä¹‰å¼€ä¸ªæ¥å•ç¾¤ï¼Œå¹¶åˆ›å»ºäº†æµ©åŸç§‘æŠ€å·¥ä½œå®¤ï¼Œå…¶å®å°±æ˜¯æ–¹ä¾¿æˆ‘æˆ‘æ›´å¥½çš„è¥ä¸šå’Œæ³¨å†Œä¸œè¥¿ã€‚åˆ°ç°åœ¨æˆ‘çš„æ¥å•ç¾¤æœ‰60ä½™äººï¼Œæ€»æ¥å–å•å­æ•°ç›®20å•ï¼Œæ€»è¥ä¸šé¢1.5wå·¦å³ï¼Œè™½ç„¶æ•°å­—ä¸å¤§ï¼Œä½†å¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯å°†å°±çš„äº†ã€‚åé¢5æœˆä»½æˆ‘ä¸€ä¸ªäººåˆæ¥äº†ä¸ªå¤§å•å­ï¼Œæ€»å…±3w+å…ƒï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è¿™ä¹ˆå¤§ä¸ªå•å­å¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ç§è€ƒéªŒï¼Œä¸è¿‡è¿˜æ˜¯åšä¸‹æ¥äº†è€Œä¸”æ•ˆæœä¸é”™ã€‚åœ¨è¾¹ä¸Šå­¦çš„æƒ…å†µä¸‹æ¯ä¸ªæœˆå¹³å‡ä¸‹æ¥6k+çš„ç±³ï¼Œè¿™å­¦æœŸçš„ç”Ÿæ´»è´¹ä¹Ÿæ²¡æ‰¾å®¶é‡Œäººè¦äº†ï¼Œå®¶é‡Œäººä¹Ÿæ˜¯å¯¹æˆ‘çš„è¿›æ­¥éå¸¸è‚¯å®šæ”¯æŒï¼Œè¿˜æ‰“äº†å †æ¯”èµ›æ‹¿äº†äº›å¥–ã€‚æˆ‘è¿™å­¦æœŸä¸‹æ¥èµšçš„æœ‰4wå¤šå§ï¼Œä½†æ˜¯å¤©å¤©æ¥å•æ„Ÿè§‰è¿˜æ˜¯å¥½ç‰›é©¬å•Šï¼Œè€Œä¸”æœ€è¿‘å•å­æ•°ä¹Ÿå°‘äº†åšä¸èµ·æ¥äº†ï¼Œæš‘å‡æ‰“ç®—çœ‹çœ‹èƒ½ä¸èƒ½é‡æ–°åšèµ·æ¥æˆ–è€…å¾€Agentæ–¹å‘å‘å±•ï¼Œå‰æ™¯ä¸å¥½å•Šè¿˜æ˜¯å¾—ç»§ç»­åŠªåŠ›ï¼Œè¿™ä¸ªä¸èƒ½åƒä¸€è¾ˆå­çš„é¥­ã€‚</p><p>ï¼ˆæ„Ÿè§‰è¿˜æ˜¯è¦å¤šå­¦ç‚¹å„¿æŠ€æœ¯ï¼ŒæŠŠè‡ªå·±å…ˆç»ƒèµ·æ¥â€¦ï¼‰</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/f594668b6f2fec5b85a349122aa73a4f.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç‹çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7.20è§£å†³cursorå›½åŒºä½¿ç”¨é™åˆ¶</title>
      <link href="/2025/07/20/IT%E7%AC%94%E8%AE%B0/7-20%E8%A7%A3%E5%86%B3cursor%E5%9B%BD%E5%8C%BA%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6/"/>
      <url>/2025/07/20/IT%E7%AC%94%E8%AE%B0/7-20%E8%A7%A3%E5%86%B3cursor%E5%9B%BD%E5%8C%BA%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<p>shift+ctrl+p</p><p>æœç´¢ï¼šOpen user settings å¸¦jsoné‚£ä¸ª </p><p>â€œhttp.proxyâ€: â€œ<a href="http://127.0.0.1:33210/">http://127.0.0.1:33210</a>â€œ, </p><p>â€œhttp.proxyStrictSSLâ€: false, </p><p>â€œhttp.proxySupportâ€: â€œoverrideâ€, </p><p>â€œhttp.noProxyâ€: [],</p><p>â€œcursor.general.disableHttp2â€: true,</p><p><strong>å…¶ä¸­ç«¯å£éœ€è¦è‡ªè¡Œæ›¿æ¢æˆè‡ªå·±çš„ä»£ç†ç«¯å£ï¼Œå¦‚æˆ‘çš„clashå°±æ˜¯7890</strong></p><p><strong>æœ‰æ—¶å€™ä¼šå‡ºç°è¶…æ—¶ï¼Œå¤šå‘é€å‡ æ¬¡å°±è¡Œï¼Œè®°å¾—ä»£ç†åœ°åŒºä¸è¦é€‰é¦™æ¸¯æ¾³é—¨è¿™äº›å›½åŒº~</strong></p><p>å‘œå‘œå‘œè¢«ç¾å¸åˆ¶è£äº†ï¼Œå›½äº§aiç¼–ç¨‹å·¥å…·å‘åŠ›ç«èµ·æ¥çš„å¥½æ—¶æœºå‘€ï¼ŒTreaå‘åŠ›å‘€~</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250720001521.png"></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cursor </tag>
            
            <tag> ç ´è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºUGCç±»é¡¹ç›®ä¸Šçº¿æŠ€å·§|æ–‡æœ¬å’Œåª’ä½“å®‰å…¨éªŒè¯å®ç°</title>
      <link href="/2025/06/12/IT%E7%AC%94%E8%AE%B0/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FUGC%E7%B1%BB%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%E6%8A%80%E5%B7%A7-%E6%96%87%E6%9C%AC%E5%92%8C%E5%AA%92%E4%BD%93%E5%AE%89%E5%85%A8%E9%AA%8C%E8%AF%81%E5%AE%9E%E7%8E%B0/"/>
      <url>/2025/06/12/IT%E7%AC%94%E8%AE%B0/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FUGC%E7%B1%BB%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%E6%8A%80%E5%B7%A7-%E6%96%87%E6%9C%AC%E5%92%8C%E5%AA%92%E4%BD%93%E5%AE%89%E5%85%A8%E9%AA%8C%E8%AF%81%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä½ çš„å°ç¨‹åºå®¡æ ¸æ—¶é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¿™ç¯‡å¸–å­ä¼šå®Œç¾è§£å†³ä½ çš„é—®é¢˜</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250612225425.png"></p><p>ä¸€èˆ¬UGCç±»å°ç¨‹åºä¸Šçº¿éƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œå¾®ä¿¡å®˜æ–¹çš„è¿è¡Œæ”»ç•¥ï¼š<a href="https://developers.weixin.qq.com/community/develop/doc/0000e83e8a0b68b3c87962b265c009?highLine=UGC%E7%B1%BB%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%90%A5%E6%94%BB%E7%95%A5">å¾®ä¿¡å¼€æ”¾ç¤¾åŒº</a>ï¼Œè¯´ç™½äº†å°±æ˜¯æƒ³æ¨é”€å¾®ä¿¡çš„å®‰å…¨æ¥å£ï¼Œä½ å°±ç®—ç”¨äº†å…¶å®ƒçš„å®‰å…¨æ¥å£ä¹Ÿä¸è®©ä½ è¿‡ï¼Œå“ˆå“ˆå“ˆå“ˆè¢«èµ„æœ¬åšå±€äº†å§~</p><p><strong>ä»€ä¹ˆæœåŠ¡æˆ–åŠŸèƒ½çš„å°ç¨‹åºæ˜¯UGCå°ç¨‹åºï¼Ÿ</strong></p><p>å°ç¨‹åºä¸­çš„åŠŸèƒ½æˆ–æœåŠ¡ä¸­ï¼Œæ¶‰åŠç”¨æˆ·å°†è‡ªå·±è‡ªå®šä¹‰ç¼–è¾‘çš„æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å†…å®¹é€šè¿‡å°ç¨‹åºè¿›è¡Œå±•ç¤ºæˆ–æä¾›ç»™å…¶ä»–ç”¨æˆ·çš„ï¼Œå±äºUGCå°ç¨‹åºã€‚</p><h1 id="AccessTokenè·å–"><a href="#AccessTokenè·å–" class="headerlink" title="AccessTokenè·å–"></a>AccessTokenè·å–</h1><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html">æ¥å£è°ƒç”¨å‡­è¯ &#x2F; è·å–æ¥å£è°ƒç”¨å‡­æ®</a></p><p>å…ˆä¸ŠJavaä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> RedisUtils redisUtils;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è·å–access_token</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getAccessToken</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/cgi-bin/token&quot;</span>;</span><br><span class="line">       <span class="type">String</span> <span class="variable">requestUrl</span> <span class="operator">=</span> UriComponentsBuilder.fromHttpUrl(url)</span><br><span class="line">               .queryParam(<span class="string">&quot;appid&quot;</span>, APP_ID)</span><br><span class="line">               .queryParam(<span class="string">&quot;secret&quot;</span>, APP_SECRET)</span><br><span class="line">               .queryParam(<span class="string">&quot;grant_type&quot;</span>, <span class="string">&quot;client_credential&quot;</span>)</span><br><span class="line">               .toUriString();</span><br><span class="line">       <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpUtil.createGet(requestUrl).execute();</span><br><span class="line"></span><br><span class="line">       <span class="comment">// è·å– session_key å’Œ openid</span></span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">parseObj</span> <span class="operator">=</span> JSONUtil.parseObj(response.body());</span><br><span class="line">       <span class="comment">//å­˜å…¥redis</span></span><br><span class="line">       redisUtils.setValue(<span class="string">&quot;access_token&quot;</span>, (String)parseObj.get(<span class="string">&quot;access_token&quot;</span>));</span><br><span class="line">       redisUtils.expire(<span class="string">&quot;access_token&quot;</span>, <span class="number">7200</span>);</span><br><span class="line">       <span class="keyword">return</span> (String)parseObj.get(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>æˆ‘è¿™é‡Œè·å–åˆ°åå­˜åœ¨äº†redisé‡Œï¼Œå› ä¸ºè¿™ä¸ªaccess_tokenæœ‰æ•ˆæœŸåªæœ‰2å°æ—¶ï¼Œæ‰€ä»¥è¿˜åŠ äº†ä¸ªæ—¶é—´é™åˆ¶ï¼Œ2å°æ—¶åè‡ªåŠ¨æ¶ˆå¤±ã€‚</p><p><strong>è®°å¾—æ›¿æ¢APP_IDå’ŒAPP_SECRET</strong></p><p>RedisUtilså·¥å…·ç±»ï¼Œå¯ä»¥ç”¨ç”¨æŒºå¥½ç”¨çš„ï¼Œæˆ–è€…ç”¨ä½ è‡ªå·±çš„rediså­˜å‚¨æ–¹å¼ä¹Ÿè¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cn.bdth.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.dao.DataAccessException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.SessionCallback;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.ZSetOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * rediså·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  <span class="doctag">@github</span> dulaiduwang003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">getRedisTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æŒ‡å®šé”®çš„è¿‡æœŸæ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout è¿‡æœŸæ—¶é—´ï¼Œå•ä½ï¼šç§’</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æˆåŠŸè®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æŒ‡å®šé”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å‰©ä½™ç”Ÿå­˜æ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getExpire</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®æŒ‡å®šé”®çš„è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit    æ—¶é—´å•ä½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æˆåŠŸè®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout, <span class="keyword">final</span> TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.expire(key, timeout, unit);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥ç»™å®šé”®æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é”®æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹æŒ‡å®šé”®çš„æ•°å­—å€¼è¿›è¡Œå¢é‡æ“ä½œ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta å¢é‡å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¢é‡æ“ä½œåçš„æ–°å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">increment</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æŒ‡å®šçš„é”®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æˆåŠŸåˆ é™¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delKey</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.delete(key);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡åˆ é™¤æŒ‡å®šçš„é”®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> keys é”®é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ é™¤çš„é”®æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">delKeys</span><span class="params">(<span class="keyword">final</span> Collection&lt;String&gt; keys)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.delete(keys);</span><br><span class="line">        <span class="keyword">return</span> ret == <span class="literal">null</span> ? <span class="number">0</span> : ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å¯¹è±¡å­˜å‚¨åˆ°Redisä¸­ï¼Œä½¿ç”¨æŒ‡å®šçš„é”®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å¯¹è±¡å­˜å‚¨åˆ°Redisä¸­ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value   å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> timeout è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValueTimeout</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—æ®µ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hkey å­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasHashKey</span><span class="params">(<span class="keyword">final</span> String key, String hkey)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.opsForHash().hasKey(key, hkey);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å“ˆå¸Œè¡¨ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ-å€¼å¯¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey  å­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashPut</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().put(key, hKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å“ˆå¸Œè¡¨ä¸­æ‰¹é‡æ·»åŠ å­—æ®µ-å€¼å¯¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å¤šä¸ªå­—æ®µ-å€¼å¯¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashPutAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Map&lt;String, Object&gt; values)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().putAll(key, values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKey å­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å­—æ®µå¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">hashGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().get(key, hKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰çš„å­—æ®µå’Œå€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ‰€æœ‰å­—æ®µå’Œå€¼çš„æ˜ å°„è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hashGetAll</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å“ˆå¸Œè¡¨ä¸­å¤šä¸ªå­—æ®µçš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKeys  å¤šä¸ªå­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¤šä¸ªå­—æ®µå¯¹åº”çš„å€¼åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">hashMultiGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().multiGet(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥å“ˆå¸Œè¡¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—æ®µï¼ˆåŠŸèƒ½åŒ hasHashKeyï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key      å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hashKey  å­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hashExists</span><span class="params">(String key, String hashKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hKeys  å¤šä¸ªå­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¢«åˆ é™¤çš„å­—æ®µæ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">hashDeleteKeys</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().delete(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µï¼ˆå¯å˜å‚æ•°å½¢å¼ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     å“ˆå¸Œè¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> hashKey å¤šä¸ªå­—æ®µå</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è¢«åˆ é™¤çš„å­—æ®µæ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">hashDelete</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... hashKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().delete(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é›†åˆä¸­æ·»åŠ å¤šä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     é›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  å…ƒç´ æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ·»åŠ æˆåŠŸçš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»é›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     é›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  è¦ç§»é™¤çš„å…ƒç´ æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸç§»é™¤çš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setDel</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é›†åˆçš„æ‰€æœ‰æˆå‘˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">getSetAll</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æœ‰åºé›†åˆä¸­æ·»åŠ å¤šä¸ªå¸¦åˆ†æ•°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  åŒ…å«å…ƒç´ åŠå…¶åˆ†æ•°çš„é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ·»åŠ æˆåŠŸçš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetSetAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().add(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ‰åºé›†åˆä¸­æŸä¸ªå…ƒç´ çš„åˆ†æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å…ƒç´ å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å…ƒç´ å¯¹åº”çš„åˆ†æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">zsetSetGetSource</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().score(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯¹æœ‰åºé›†åˆä¸­çš„æŸä¸ªå…ƒç´ çš„åˆ†æ•°è¿›è¡Œå¢é‡æ“ä½œ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key       æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value     å…ƒç´ å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> increment åˆ†æ•°å¢é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ›´æ–°åçš„åˆ†æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">zsetIncrementScore</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value, <span class="keyword">final</span> Double increment)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().incrementScore(key, value, increment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘æœ‰åºé›†åˆä¸­æ·»åŠ ä¸€ä¸ªå¸¦åˆ†æ•°çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  å…ƒç´ å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source  åˆ†æ•°å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æˆåŠŸæ·»åŠ </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">zsetSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object values, <span class="keyword">final</span> Double source)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Boolean</span> <span class="variable">add</span> <span class="operator">=</span> redisTemplate.opsForZSet().add(key, values, source);</span><br><span class="line">        <span class="keyword">return</span> add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ‰åºé›†åˆä¸­æ’ååœ¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ åŠå…¶åˆ†æ•°ï¼ˆæŒ‰åˆ†æ•°ç”±é«˜åˆ°ä½æ’åºï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start èµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   ç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å…ƒç´ åŠå…¶åˆ†æ•°çš„é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; zsetReverseRangeWithScores(<span class="keyword">final</span> String key, <span class="keyword">final</span> Long start, <span class="keyword">final</span> Long end) &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().reverseRangeWithScores(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ‰åºé›†åˆä¸­æ’ååœ¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ï¼ˆæŒ‰åˆ†æ•°ç”±é«˜åˆ°ä½æ’åºï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start èµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   ç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å…ƒç´ é›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">zsetReverseRange</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Long start, <span class="keyword">final</span> Long end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().reverseRange(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸå­æ€§åœ°å¢åŠ æŒ‡å®šé”®çš„å€¼å¹¶è¿”å›æ–°å€¼ï¼ˆé€‚ç”¨äºè®¡æ•°å™¨åœºæ™¯ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è‡ªå¢åçš„æ–°å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">selfIncrease</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;Long&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Long <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> operations.opsForValue().increment(key);</span><br><span class="line">                operations.exec();</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸå­æ€§åœ°å¢åŠ æœ‰åºé›†åˆä¸­æŸä¸ªå…ƒç´ çš„åˆ†æ•°å¹¶è¿”å›æ–°åˆ†æ•°</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å…ƒç´ å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è‡ªå¢åçš„æ–°åˆ†æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">selfIncreaseSource</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;Double&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Double <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                <span class="type">Double</span> <span class="variable">count</span> <span class="operator">=</span> operations.opsForZSet().incrementScore(key, value, <span class="number">1</span>);</span><br><span class="line">                operations.exec();</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»æœ‰åºé›†åˆä¸­ç§»é™¤å¤šä¸ªæŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  è¦ç§»é™¤çš„å…ƒç´ é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸç§»é™¤çš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetDelAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»æœ‰åºé›†åˆä¸­ç§»é™¤æŒ‡å®šçš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     æœ‰åºé›†åˆé”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  è¦ç§»é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸç§»é™¤çš„å…ƒç´ æ•°é‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetDel</span><span class="params">(<span class="keyword">final</span> String key, Object values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘åˆ—è¡¨å°¾éƒ¨è¿½åŠ ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   åˆ—è¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å…ƒç´ å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨åœ¨æ·»åŠ å…ƒç´ åçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPush</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ£€æŸ¥æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨ï¼ˆåŠŸèƒ½åŒ hasKeyï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é”®æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">doesItExist</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘åˆ—è¡¨å°¾éƒ¨è¿½åŠ å¤šä¸ªå…ƒç´ ï¼ˆé›†åˆå½¢å¼ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     åˆ—è¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  è¦è¿½åŠ çš„å…ƒç´ é›†åˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨åœ¨æ·»åŠ å…ƒç´ åçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPushAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘åˆ—è¡¨å°¾éƒ¨è¿½åŠ å¤šä¸ªå…ƒç´ ï¼ˆå¯å˜å‚æ•°å½¢å¼ï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key     åˆ—è¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values  è¦è¿½åŠ çš„å…ƒç´ æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨åœ¨æ·»åŠ å…ƒç´ åçš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPushAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   åˆ—è¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start èµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   ç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æŒ‡å®šèŒƒå›´çš„å…ƒç´ åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">listGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">int</span> start, <span class="keyword">final</span> <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åˆ—è¡¨çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key åˆ—è¡¨é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> åˆ—è¡¨çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">keySize</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ–‡æœ¬å®‰å…¨å†…å®¹è¯†åˆ«"><a href="#æ–‡æœ¬å®‰å…¨å†…å®¹è¯†åˆ«" class="headerlink" title="æ–‡æœ¬å®‰å…¨å†…å®¹è¯†åˆ«"></a>æ–‡æœ¬å®‰å…¨å†…å®¹è¯†åˆ«</h1><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/sec-center/sec-check/msgSecCheck.html">å°ç¨‹åºå®‰å…¨ &#x2F; å†…å®¹å®‰å…¨ &#x2F; æ–‡æœ¬å†…å®¹å®‰å…¨è¯†åˆ«</a></p><p>è¿™é‡Œæˆ‘ç”¨Javaå®ç°æ–‡æœ¬è¯†åˆ«ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡æœ¬å†…å®¹æ£€æµ‹</span></span><br><span class="line"><span class="comment">     * Sceneåœºæ™¯æšä¸¾å€¼ï¼ˆ1 èµ„æ–™ï¼›2 è¯„è®ºï¼›3 è®ºå›ï¼›4 ç¤¾äº¤æ—¥å¿—ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">textCheck</span><span class="params">(String content,Integer scene,String openId)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/wxa/msg_sec_check&quot;</span>;</span><br><span class="line">        <span class="comment">//è·å–access_token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">accessToken</span> <span class="operator">=</span> (String) redisUtils.getValue(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (accessToken == <span class="literal">null</span>)&#123;</span><br><span class="line">            accessToken = getAccessToken();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUrl</span> <span class="operator">=</span> UriComponentsBuilder.fromHttpUrl(url)</span><br><span class="line">                .queryParam(<span class="string">&quot;access_token&quot;</span>, accessToken)</span><br><span class="line">                .toUriString();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonBody</span> <span class="operator">=</span> JSONUtil.createObj()</span><br><span class="line">                .put(<span class="string">&quot;content&quot;</span>, content)</span><br><span class="line">                .put(<span class="string">&quot;version&quot;</span>, <span class="number">2</span>)</span><br><span class="line">                .put(<span class="string">&quot;scene&quot;</span>, scene)</span><br><span class="line">                .put(<span class="string">&quot;openid&quot;</span>, openId)</span><br><span class="line">                .toString();</span><br><span class="line">                </span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpUtil.createPost(requestUrl)</span><br><span class="line">                .body(jsonBody)</span><br><span class="line">                .execute();</span><br><span class="line">                </span><br><span class="line">        <span class="comment">// è·å–å“åº”å†…å®¹å¹¶è§£æ</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">parseObj</span> <span class="operator">=</span> JSONUtil.parseObj(response.body());</span><br><span class="line">        <span class="type">String</span> <span class="variable">errmsg</span> <span class="operator">=</span> (String) parseObj.get(<span class="string">&quot;errmsg&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;ok&quot;</span>.equals(errmsg))&#123;</span><br><span class="line">            <span class="keyword">return</span> errmsg;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">JSONObject</span>  <span class="variable">result</span> <span class="operator">=</span> JSONUtil.parseObj(parseObj.get(<span class="string">&quot;result&quot;</span>));</span><br><span class="line">        <span class="type">int</span> <span class="variable">label</span> <span class="operator">=</span> ((Number) result.get(<span class="string">&quot;label&quot;</span>)).intValue();</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(label);</span><br><span class="line">        <span class="comment">//å‘½ä¸­æ ‡ç­¾æšä¸¾å€¼ï¼Œ100 æ­£å¸¸ï¼›10001 å¹¿å‘Šï¼›20001 æ—¶æ”¿ï¼›20002 è‰²æƒ…ï¼›20003 è¾±éª‚ï¼›20006 è¿æ³•çŠ¯ç½ªï¼›20008 æ¬ºè¯ˆï¼›20012 ä½ä¿—ï¼›20013 ç‰ˆæƒï¼›21000 å…¶ä»–</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦ä¼ å…¥contentè¦è¯†åˆ«çš„æ–‡æœ¬å†…å®¹ï¼ŒopenIdï¼Œsceneåº”ç”¨åœºæ™¯ï¼Œæˆ‘ä¼šè¿”å›labelå€¼</p><p>å‚è€ƒé”™è¯¯ç ï¼š</p><table><thead><tr><th align="left">é”™è¯¯ç </th><th align="left">é”™è¯¯ç å–å€¼</th><th align="left">è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td align="left">-1</td><td align="left">system error</td><td align="left">ç³»ç»Ÿç¹å¿™ï¼Œæ­¤æ—¶è¯·å¼€å‘è€…ç¨å€™å†è¯•</td></tr><tr><td align="left">40001</td><td align="left">invalid credential access_token isinvalid or not latest</td><td align="left">access_token æ— æ•ˆæˆ–ä¸ä¸ºæœ€æ–°è·å–çš„ access_tokenï¼Œè¯·å¼€å‘è€…ç¡®è®¤access_tokençš„æœ‰æ•ˆæ€§</td></tr><tr><td align="left">40003</td><td align="left">invalid openid</td><td align="left">ä¸åˆæ³•çš„ OpenID ï¼Œè¯·å¼€å‘è€…ç¡®è®¤ OpenID çš„æœ‰æ•ˆæ€§</td></tr><tr><td align="left">40129</td><td align="left">invalid scene</td><td align="left">åœºæ™¯å€¼é”™è¯¯ï¼ˆç›®å‰æ”¯æŒåœºæ™¯ 1 èµ„æ–™ï¼›2 è¯„è®ºï¼›3 è®ºå›ï¼›4 ç¤¾äº¤æ—¥å¿—ï¼‰</td></tr><tr><td align="left">43104</td><td align="left">The openid does not match the appid</td><td align="left">appidä¸ openid ä¸åŒ¹é…</td></tr><tr><td align="left">43002</td><td align="left">require POST method</td><td align="left">æ–¹æ³•è°ƒç”¨é”™è¯¯ï¼Œè¯·ç”¨ post æ–¹æ³•è°ƒç”¨</td></tr><tr><td align="left">44002</td><td align="left">empty post data</td><td align="left">POST çš„æ•°æ®åŒ…ä¸ºç©ºã€‚postè¯·æ±‚bodyå‚æ•°ä¸èƒ½ä¸ºç©ºã€‚</td></tr><tr><td align="left">44991</td><td align="left">reach max api minute frequence</td><td align="left">è¶…å‡ºæ¥å£æ¯åˆ†é’Ÿè°ƒç”¨é™åˆ¶</td></tr><tr><td align="left">45009</td><td align="left">reach max api daily quota limit</td><td align="left">è¶…å‡ºæ¥å£æ¯æ—¥è°ƒç”¨é™åˆ¶</td></tr><tr><td align="left">47001</td><td align="left">data format error</td><td align="left">è§£æ JSON&#x2F;XML å†…å®¹é”™è¯¯;post æ•°æ®ä¸­å‚æ•°ç¼ºå¤±;æ£€æŸ¥ä¿®æ­£åé‡è¯•ã€‚</td></tr><tr><td align="left">61010</td><td align="left">code is expired</td><td align="left">ç”¨æˆ·è®¿é—®è®°å½•è¶…æ—¶ï¼ˆç”¨æˆ·æœªåœ¨è¿‘ä¸¤å°æ—¶è®¿é—®å°ç¨‹åºï¼‰</td></tr></tbody></table><h1 id="å¤šåª’ä½“å®‰å…¨å†…å®¹è¯†åˆ«"><a href="#å¤šåª’ä½“å®‰å…¨å†…å®¹è¯†åˆ«" class="headerlink" title="å¤šåª’ä½“å®‰å…¨å†…å®¹è¯†åˆ«"></a>å¤šåª’ä½“å®‰å…¨å†…å®¹è¯†åˆ«</h1><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/sec-center/sec-check/mediaCheckAsync.html">å°ç¨‹åºå®‰å…¨ &#x2F; å†…å®¹å®‰å…¨ &#x2F; å¤šåª’ä½“å†…å®¹å®‰å…¨è¯†åˆ«</a></p><h2 id="æ¶ˆæ¯æ¨é€"><a href="#æ¶ˆæ¯æ¨é€" class="headerlink" title="æ¶ˆæ¯æ¨é€"></a>æ¶ˆæ¯æ¨é€</h2><p>è¿™ä¸ªå°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œé¦–å…ˆè¦å»å¾®ä¿¡å…¬ä¼—å¹³å°ç”³è¯·æ¶ˆæ¯æ¨é€ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250612232137.png"></p><p>å¡«å†™ä¿¡æ¯ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250612232233.png"></p><p>ç„¶ååœ¨é‡ŒæœåŠ¡å™¨ç¼–å†™æ¥æ”¶ä¿¡æ¯çš„æ¥å£ï¼Œæ¥æ”¶çš„åœ°å€è¦è·Ÿä½ å†™çš„urlä¸€æ ·</p><p>å…¶ä¸­ï¼Œsignatureç­¾åçš„ç”Ÿæˆæ–¹å¼æ˜¯ï¼š</p><ol><li>å°†Tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åºã€‚</li><li>å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œsha1è®¡ç®—ç­¾åï¼Œå³å¯è·å¾—signatureã€‚ å¼€å‘è€…éœ€è¦æ ¡éªŒsignatureæ˜¯å¦æ­£ç¡®ï¼Œä»¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦æ¥è‡ªå¾®ä¿¡æœåŠ¡å™¨ï¼ŒéªŒç­¾é€šè¿‡åï¼Œè¯·åŸæ ·è¿”å›echostrå­—ç¬¦ä¸²ã€‚</li></ol><p>ä¸¾ä¾‹ï¼šå‡è®¾å¡«å†™çš„URL&#x3D;â€<a href="https://www.qq.com/revice%22%EF%BC%8C">https://www.qq.com/revice&quot;ï¼Œ</a> Token&#x3D;â€AAAAAâ€ã€‚</p><ol><li>æ¨é€çš„URLé“¾æ¥ï¼š<a href="https://www.qq.com/revice?signature=f464b24fc39322e44b38aa78f5edd27bd1441696&echostr=4375120948345356249&timestamp=1714036504&nonce=1514711492">https://www.qq.com/revice?signature=f464b24fc39322e44b38aa78f5edd27bd1441696&amp;echostr=4375120948345356249&amp;timestamp=1714036504&amp;nonce=1514711492</a></li><li>å°†tokenã€timestampã€nonceä¸‰ä¸ªå‚æ•°è¿›è¡Œå­—å…¸åºæ’åºï¼Œæ’åºåç»“æœä¸º:[â€œ1514711492â€,â€1714036504â€,â€AAAAAâ€]ã€‚</li><li>å°†ä¸‰ä¸ªå‚æ•°å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼šâ€15147114921714036504AAAAAâ€</li><li>è¿›è¡Œsha1è®¡ç®—ç­¾åï¼šf464b24fc39322e44b38aa78f5edd27bd1441696</li><li>ä¸URLé“¾æ¥ä¸­çš„signatureå‚æ•°è¿›è¡Œå¯¹æ¯”ï¼Œç›¸ç­‰è¯´æ˜è¯·æ±‚æ¥è‡ªå¾®ä¿¡æœåŠ¡å™¨ï¼Œåˆæ³•ã€‚</li><li>æ„é€ å›åŒ…è¿”å›å¾®ä¿¡ï¼Œå›åŒ…æ¶ˆæ¯ä½“å†…å®¹ä¸ºURLé“¾æ¥ä¸­çš„echostrå‚æ•°4375120948345356249ã€‚</li></ol><p><strong>éªŒè¯æ¥å£ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/wx/revice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">revice</span><span class="params">(<span class="meta">@RequestParam</span> String signature,<span class="meta">@RequestParam</span> String timestamp,<span class="meta">@RequestParam</span> String nonce,<span class="meta">@RequestParam</span> String echostr)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">res</span> <span class="operator">=</span> nonce + timestamp + <span class="string">&quot;hepingan&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sha1Signature</span> <span class="operator">=</span> sha1(res);</span><br><span class="line">    <span class="keyword">if</span> (Objects.equals(sha1Signature, signature))&#123;</span><br><span class="line">        <span class="keyword">return</span> echostr;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">return</span> echostr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¿™é‡Œæˆ‘è®¾ç½®äº†æ— è®ºå¯¹é”™çš„è¿”å›äº†echostrï¼Œæ–¹ä¾¿éªŒè¯ï¼ŒéªŒè¯å®Œåå°±æ”¹å›æ¥ï¼›</strong></p><p>è¿™é‡Œæˆ‘å°±æˆåŠŸå¼€å¯äº†æ¶ˆæ¯æ¨é€</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250613192432.png"></p><h2 id="æ¶ˆæ¯æ¥æ”¶"><a href="#æ¶ˆæ¯æ¥æ”¶" class="headerlink" title="æ¶ˆæ¯æ¥æ”¶"></a>æ¶ˆæ¯æ¥æ”¶</h2><p><strong>å®‰å…¨æ¨¡å¼å¤ªå¤æ‚äº†ï¼Œè¿™é‡Œå…ˆç”¨æ˜æ–‡æ¨¡å¼å¼€å‘</strong></p><p>å…ˆå†™ä¸ªæ¥æ”¶æ•°æ®Dtoç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReviceDto</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String ToUserName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String FromUserName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String CreateTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String MsgType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String Event;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String debug_str;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String trace_id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Result result;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Detail detail;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Result</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String suggest;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Integer label;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Detail</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String strategy;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Integer errcode;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> String suggest;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Integer label;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Integer prob;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/wx/revice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">revice</span><span class="params">(<span class="meta">@RequestParam</span> String signature, <span class="meta">@RequestParam</span> String timestamp, <span class="meta">@RequestParam</span> String nonce, <span class="meta">@RequestParam</span> String echostr, <span class="meta">@RequestBody</span> ReviceSafeDto reviceDto)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> <span class="string">&quot;hepingan&quot;</span>;</span><br><span class="line">    <span class="comment">//éªŒè¯æˆåŠŸ</span></span><br><span class="line">    <span class="comment">//å­—å…¸æ’åº</span></span><br><span class="line">    Dictionary&lt;String, String&gt; dictionary = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line">    dictionary.put(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">    dictionary.put(<span class="string">&quot;timestamp&quot;</span>, timestamp);</span><br><span class="line">    dictionary.put(<span class="string">&quot;nonce&quot;</span>, nonce);</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sortedParams</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    dictionary.keys().asIterator().forEachRemaining(key -&gt; sortedParams.append(key).append(dictionary.get(key)));</span><br><span class="line">    <span class="type">String</span> <span class="variable">combinedString</span> <span class="operator">=</span> sortedParams.toString();</span><br><span class="line">    <span class="type">String</span> <span class="variable">sha1Combined</span> <span class="operator">=</span> sha1(combinedString);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (Objects.equals(sha1Combined, signature)) &#123;</span><br><span class="line">        <span class="comment">//éªŒè¯æˆåŠŸé€»è¾‘å¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//éªŒè¯å¤±è´¥é€»è¾‘å¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å›¾ç‰‡å†…å®¹æ£€æµ‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›¾ç‰‡å†…å®¹æ£€æµ‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> imgUrl</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> scene</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> openId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">mediaCheck</span><span class="params">(String imgUrl,Integer scene,String openId)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/wxa/msg_sec_check&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">accessToken</span> <span class="operator">=</span> (String) redisUtils.getValue(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (accessToken == <span class="literal">null</span>)&#123;</span><br><span class="line">        accessToken = getAccessToken();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">requestUrl</span> <span class="operator">=</span> UriComponentsBuilder.fromHttpUrl(url)</span><br><span class="line">            .queryParam(<span class="string">&quot;access_token&quot;</span>, accessToken)</span><br><span class="line">            .toUriString();</span><br><span class="line">    <span class="type">String</span> <span class="variable">jsonBody</span> <span class="operator">=</span> JSONUtil.createObj()</span><br><span class="line">            .put(<span class="string">&quot;media_url&quot;</span>, imgUrl)</span><br><span class="line">            .put(<span class="string">&quot;media_type&quot;</span>, <span class="number">2</span>)</span><br><span class="line">            .put(<span class="string">&quot;version&quot;</span>, <span class="number">2</span>)</span><br><span class="line">            .put(<span class="string">&quot;scene&quot;</span>, scene)</span><br><span class="line">            .put(<span class="string">&quot;openid&quot;</span>, openId)</span><br><span class="line">            .toString();</span><br><span class="line">    <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpUtil.createPost(requestUrl)</span><br><span class="line">            .body(jsonBody)</span><br><span class="line">            .execute();</span><br><span class="line"></span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">parseObj</span> <span class="operator">=</span> JSONUtil.parseObj(response.body());</span><br><span class="line">    <span class="type">String</span> <span class="variable">errmsg</span> <span class="operator">=</span> (String) parseObj.get(<span class="string">&quot;errmsg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="string">&quot;ok&quot;</span>.equals(errmsg))&#123;</span><br><span class="line">        <span class="comment">//è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> errmsg;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//è¿”å›trace_id</span></span><br><span class="line">        <span class="keyword">return</span> (String) parseObj.get(<span class="string">&quot;trace_id&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®‰å…¨æ¨¡å¼è§£å¯†ä»£ç å‚è€ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£å¯†æ¶ˆæ¯ä½“&quot;Encrypt&quot;å¯†æ–‡</span></span><br><span class="line"><span class="type">String</span> <span class="variable">encodingAesKey</span> <span class="operator">=</span> <span class="string">&quot;your_encoding_aes_key_here&quot;</span>; <span class="comment">// è¯·æ›¿æ¢ä¸ºå®é™…çš„EncodingAESKey</span></span><br><span class="line">                <span class="type">byte</span>[] aesKey = Base64.getDecoder().decode(encodingAesKey + <span class="string">&quot;=&quot;</span>); <span class="comment">// ç”Ÿæˆ32å­—èŠ‚çš„AESKey</span></span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">encryptMsg</span> <span class="operator">=</span> reviceDto.getEncrypt(); <span class="comment">// è·å–åŠ å¯†çš„æ¶ˆæ¯å¯†æ–‡</span></span><br><span class="line">                <span class="type">byte</span>[] tmpMsg = Base64.getDecoder().decode(encryptMsg); <span class="comment">// Base64è§£ç å¾—åˆ°TmpMsg</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨AESå¯†é’¥è¿›è¡Œè§£å¯†æ“ä½œï¼ˆç¤ºä¾‹ä¸­ä½¿ç”¨JDKå®ç°ï¼Œå®é™…å¯èƒ½éœ€è¦æ ¹æ®åŠ å¯†æ–¹å¼è°ƒæ•´ï¼‰</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    javax.crypto.<span class="type">Cipher</span> <span class="variable">cipher</span> <span class="operator">=</span> javax.crypto.Cipher.getInstance(<span class="string">&quot;AES/CBC/PKCS5Padding&quot;</span>);</span><br><span class="line">    <span class="type">SecretKeySpec</span> <span class="variable">keySpec</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecretKeySpec</span>(aesKey, <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">    cipher.init(javax.crypto.Cipher.DECRYPT_MODE, keySpec, <span class="keyword">new</span> <span class="title class_">IvParameterSpec</span>(<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">16</span>])); <span class="comment">// åˆå§‹åŒ–å‘é‡IVå…¨0æˆ–å…¶ä»–æŒ‡å®šå€¼</span></span><br><span class="line">    <span class="type">byte</span>[] decrypted = cipher.doFinal(tmpMsg);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å»é™¤å‰16å­—èŠ‚IVåç§»é‡ï¼ˆå¦‚æœæ˜¯CBCæ¨¡å¼ï¼‰ï¼Œå¹¶æå–æ˜æ–‡å’Œå¡«å……å†…å®¹</span></span><br><span class="line">    <span class="type">byte</span>[] contentBytes = <span class="keyword">new</span> <span class="title class_">byte</span>[decrypted.length - <span class="number">16</span>];</span><br><span class="line">    System.arraycopy(decrypted, <span class="number">16</span>, contentBytes, <span class="number">0</span>, contentBytes.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æå–çœŸå®æ•°æ®ï¼ˆå»é™¤PKCS7å¡«å……ï¼‰</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">padLength</span> <span class="operator">=</span> contentBytes[contentBytes.length - <span class="number">1</span>];</span><br><span class="line">    <span class="type">byte</span>[] realContent = <span class="keyword">new</span> <span class="title class_">byte</span>[contentBytes.length - padLength];</span><br><span class="line">    System.arraycopy(contentBytes, <span class="number">0</span>, realContent, <span class="number">0</span>, realContent.length);</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">plainText</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(realContent, java.nio.charset.StandardCharsets.UTF_8); <span class="comment">// è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> plainText; <span class="comment">// è¿”å›è§£å¯†åçš„æ˜æ–‡</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    log.error(<span class="string">&quot;è§£å¯†å¤±è´¥: &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
            <tag> ä¸Šçº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¾®ä¿¡ç™»å½•å®ç°å’Œæ³¨æ„äº‹é¡¹</title>
      <link href="/2025/05/13/%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E5%AE%9E%E7%8E%B0%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"/>
      <url>/2025/05/13/%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E5%AE%9E%E7%8E%B0%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</url>
      
        <content type="html"><![CDATA[<p>å¾®ä¿¡ç™»å½•çš„å®˜æ–¹apiï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/user-login/code2Session.html">å°ç¨‹åºç™»å½• &#x2F; å°ç¨‹åºç™»å½•</a></p><p>ç°åœ¨å¦‚æœä½¿ç”¨çš„æ˜¯2.17ä»¥ä¸Šçš„åŸºç¡€åº“æ˜¯æ— æ³•è·å–ç”¨æˆ·å¤´åƒï¼Œæ˜µç§°å’Œæ‰‹æœºç­‰ä¿¡æ¯ï¼Œéœ€è¦å…ˆè·å–openidï¼Œä¸è¿‡å¥½åƒ2.1ä»¥ä¸‹ç‰ˆæœ¬çš„åº“ä¹Ÿä¸è¡Œï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨openidç™»å½•å§</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250513190036.png"></p><p>ä»€ä¹ˆæ˜¯openIDï¼ŸopenIDæ˜¯å¾®ä¿¡ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ï¼ˆè·Ÿå¾®ä¿¡å·å¾ˆåƒï¼‰ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹å°±å¯ä»¥ç”¨å®ƒæ¥æ³¨å†Œæˆ–ç™»å½•ã€‚</p><p><strong>ç›´æ¥å…ˆä¸Šå‰ç«¯ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥å¤„ç†å¾®ä¿¡ç™»å½•</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleWxLoginDirectly</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">uni.<span class="title function_">login</span>(&#123;</span><br><span class="line"><span class="attr">provider</span>: <span class="string">&#x27;weixin&#x27;</span>,</span><br><span class="line"><span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">code</span>)</span><br><span class="line">uni.<span class="title function_">request</span>(&#123;</span><br><span class="line"><span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;baseUrl&#125;</span>/user/wx-login`</span>,</span><br><span class="line"><span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line"><span class="attr">data</span>: res.<span class="property">code</span>,</span><br><span class="line"><span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line"><span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> === <span class="number">200</span>)&#123;</span><br><span class="line">uni.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;sa-token&#x27;</span>, res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">tokenValue</span>)</span><br><span class="line">uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>,</span><br><span class="line"><span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">uni.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;, <span class="number">1500</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line"><span class="attr">title</span>: res.<span class="property">data</span>.<span class="property">msg</span> || <span class="string">&#x27;ç™»å½•å¤±è´¥&#x27;</span>,</span><br><span class="line"><span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">fail</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">uni.<span class="title function_">showToast</span>(&#123;</span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;ç½‘ç»œé”™è¯¯&#x27;</span>,</span><br><span class="line"><span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">isLoading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>baseUrlä¸ºä½ çš„åç«¯åœ°å€</li><li>å…·ä½“è¿”å›çš„reséœ€è¦è‡ªå·±å¤„ç†</li><li>uni.setStorageSyncä¸ºå­˜å‚¨tokenåœ¨æœ¬åœ°</li><li>ç™»å½•å¥½åä¼šè·³è½¬åˆ°&#x2F;pages&#x2F;index&#x2F;index</li></ul><p>uni.login()å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://uniapp.dcloud.net.cn/api/plugins/login.html#login">uni.login(OBJECT) | uni-appå®˜ç½‘</a></p><p><strong>åç«¯è·å–openIDçš„ç±»ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WechatUtil</span> &#123;</span><br><span class="line"><span class="comment">//é…ç½®è‡ªå·±çš„app_idã€app_secret</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">APP_ID</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">APP_SECRET</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getOpenId</span><span class="params">(String loginCode)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.weixin.qq.com/sns/jscode2session&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestUrl</span> <span class="operator">=</span> UriComponentsBuilder.fromHttpUrl(url)</span><br><span class="line">                .queryParam(<span class="string">&quot;appid&quot;</span>, APP_ID)</span><br><span class="line">                .queryParam(<span class="string">&quot;secret&quot;</span>, APP_SECRET)</span><br><span class="line">                .queryParam(<span class="string">&quot;js_code&quot;</span>, loginCode)</span><br><span class="line">                .queryParam(<span class="string">&quot;grant_type&quot;</span>, <span class="string">&quot;authorization_code&quot;</span>)</span><br><span class="line">                .toUriString();</span><br><span class="line"> </span><br><span class="line">        <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> HttpUtil.createGet(requestUrl).execute();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è·å– session_key å’Œ openid</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">parseObj</span> <span class="operator">=</span> JSONUtil.parseObj(response.body());</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">openid</span> <span class="operator">=</span> (String) parseObj.get(<span class="string">&quot;openid&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> openid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å…ˆå¡«å†™è‡ªå·±çš„APP_IDå’ŒAPP_SECRET</li></ul><p><strong>æ¥æ”¶å¾®ä¿¡ç™»å½•çš„æ¥å£ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¾®ä¿¡å°ç¨‹åºç™»å½•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç™»å½•ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/wx-login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">wxLogin</span><span class="params">(<span class="meta">@RequestBody</span> String code)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">openId</span> <span class="operator">=</span> WechatUtil.getOpenId(code);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().lambda().eq(User::getOpenId, openId));</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            user = <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            user.setOpenId(openId);</span><br><span class="line">            user.setUsername(<span class="string">&quot;wx_&quot;</span>+openId.substring(<span class="number">0</span>, <span class="number">15</span>));</span><br><span class="line">            user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            user.setAvatar(<span class="string">&quot;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&quot;</span>);</span><br><span class="line">            user.setCreatedTime(LocalDateTime.now());</span><br><span class="line">            userMapper.insert(user);</span><br><span class="line">            StpUtil.login(user.getId());</span><br><span class="line">            <span class="keyword">return</span> Result.data(StpUtil.getTokenInfo());</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            StpUtil.login(user.getId());</span><br><span class="line">            <span class="keyword">return</span> Result.data(StpUtil.getTokenInfo());</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>ä¸»è¦çœ‹å‰é¢éƒ¨åˆ†åé¢å°±æ˜¯å¤„ç†é€»è¾‘äº†ï¼Œé€šè¿‡å‰ç«¯ä¼ è¿‡æ¥çš„<strong>code</strong>ï¼ˆè¿™ä¸ªcodeæ˜¯ä»€ä¹ˆï¼Ÿç™»å½•å‡­è¯æ ¡éªŒã€‚é€šè¿‡ wx.login æ¥å£è·å¾—ä¸´æ—¶ç™»å½•å‡­è¯ code åä¼ åˆ°å¼€å‘è€…æœåŠ¡å™¨è°ƒç”¨æ­¤æ¥å£å®Œæˆç™»å½•æµç¨‹ã€‚æ›´å¤šä½¿ç”¨æ–¹æ³•è¯¦è§<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html">å°ç¨‹åºç™»å½•ã€‚</a>ï¼‰æ¥è·å–openIDï¼Œç„¶ååˆ¤æ–­æ•°æ®åº“é‡Œæœ‰æ— è¿™ä¸ªopenIdæ¥åˆ¤æ–­æ˜¯ä½¿ç”¨æ³¨å†Œè¿˜æ˜¯ç™»å½•ã€‚</p><p>æ³¨æ„è‡ªå·±çš„wxappidï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·è¦å’ŒJavaé‡Œè®¾ç½®çš„ä¸€æ ·å“¦</p><h2 id="éƒ¨åˆ†é—®é¢˜"><a href="#éƒ¨åˆ†é—®é¢˜" class="headerlink" title="éƒ¨åˆ†é—®é¢˜"></a>éƒ¨åˆ†é—®é¢˜</h2><ul><li><strong>40029</strong></li></ul><p>å¾®ä¿¡å°ç¨‹åºè¿”å›40029çš„æƒ…å†µåŸå› æœ‰å¾ˆå¤šï¼Œé‡åˆ°åå¤§æ¦‚æ€»ç»“äº†å‡ ä¸ªå·²çŸ¥çš„</p><p>1.å°ç¨‹åºé‡Œä¼ åˆ°åå°çš„codeè¢«å¾®ä¿¡çš„è°ƒç”¨æ¥å£ä½¿ç”¨äº†ä¸¤æ¬¡ï¼ˆåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼‰</p><p>2.appidã€AppSecretçš„å€¼ä¸å¯¹ï¼ˆè¿™ä¸ªè‡ªå·±å¤åˆ¶æ„Ÿè§‰ä¸€èˆ¬ä¸ä¼šé”™ï¼‰</p><p>3.è‡ªå·±é‡åˆ°çš„æœ€éš¾å—çš„åŸå› :åˆ›å»ºé¡¹ç›®çš„appidè·Ÿä½ è¯·æ±‚urlé‡Œçš„appidã€AppSecretä¸æ˜¯åŒä¸€ç»„</p><p>èµ·å› ï¼šåˆšå¼€å§‹å­¦ä¹ çš„æ—¶å€™ï¼Œè‡ªå·±æ³¨å†Œäº†ä¸€ä¸ªå°ç¨‹åºè´¦å·ï¼Œç¬¬ä¸€ä¸ªé¡¹ç›®ç”¨çš„è¿™ä¸ªappidã€‚åœ¨çœŸæ­£å¼€å§‹åšé¡¹ç›®çš„æ—¶å€™ï¼Œæ–°å»ºå°ç¨‹åºç”¨çš„æµ‹è¯•appidï¼Œç„¶åè¯·æ±‚openidçš„æ—¶å€™å¿˜äº†ï¼Œç”¨äº†è‡ªå·±ç”³è¯·çš„appidã€AppSecretï¼Œç»“æœå°±æ˜¯æµªè´¹ä¸€ä¸‹åˆè°ƒè¯•ã€‚å¦‚æœè¦ç”¨æµ‹è¯•è´¦å·çš„AppSecretï¼Œå¯ä»¥åœ¨å¼€å‘å·¥å…·é‡Œ â€˜æµ‹è¯•å·â€™â€”â€˜ç”³è¯·åœ°å€é‡Œæ‰¾åˆ°â€™ã€‚</p><ul><li><strong>41002</strong></li></ul><p>{errcode: 41002, errmsg: â€œappid missing rid: xxxxxxxxxxxâ€} é”™ç”¨æˆpostè¯·æ±‚</p><ul><li><strong>41004</strong></li></ul><p>{errcode: 41004, errmsg: â€œappsecret missing, rid: xxxxxxxxxxxâ€} è¯·æ±‚æ—¶é”®åé”™äº†,åº”ä¸º secret</p><ul><li><strong>41008</strong></li></ul><p>{errcode: 41008, errmsg: â€œmissing code, req_id: xxxxxx â€œ} è¯·æ±‚æ—¶é”®åé”™äº†,åº”ä¸º js_code</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ç™»å½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bç«™æ‰¹é‡å–æ¶ˆå…³æ³¨è„šæœ¬</title>
      <link href="/2025/03/12/IT%E7%AC%94%E8%AE%B0/b%E7%AB%99%E6%89%B9%E9%87%8F%E5%8F%96%E6%B6%88%E5%85%B3%E6%B3%A8%E8%84%9A%E6%9C%AC/"/>
      <url>/2025/03/12/IT%E7%AC%94%E8%AE%B0/b%E7%AB%99%E6%89%B9%E9%87%8F%E5%8F%96%E6%B6%88%E5%85%B3%E6%B3%A8%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<p>è¿›å…¥æˆ‘çš„å…³æ³¨é¡µé¢ç›´æ¥f12æ§åˆ¶å°ç²˜è´´ä¸‹é¢çš„è„šæœ¬ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç‚¹å‡»â€œå·²å…³æ³¨â€å’Œâ€œå·²äº’ç²‰â€æŒ‰é’®çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">clickFollowButtons</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è·å–æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ div å…ƒç´ </span></span><br><span class="line">    <span class="keyword">const</span> followButtons = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div.follow-btn__trigger.gray&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†å¹¶ç‚¹å‡»åŒ…å«â€œå·²å…³æ³¨â€æˆ–â€œå·²äº’ç²‰â€æ–‡æœ¬çš„æŒ‰é’®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> button <span class="keyword">of</span> followButtons) &#123;</span><br><span class="line">        <span class="keyword">if</span> (button.<span class="property">innerText</span>.<span class="title function_">includes</span>(<span class="string">&quot;å·²å…³æ³¨&quot;</span>) || button.<span class="property">innerText</span>.<span class="title function_">includes</span>(<span class="string">&quot;å·²äº’ç²‰&quot;</span>)) &#123;</span><br><span class="line">            button.<span class="title function_">click</span>(); <span class="comment">// æ¨¡æ‹Ÿç‚¹å‡»</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å·²ç‚¹å‡»æŒ‰é’®:&quot;</span>, button.<span class="property">innerText</span>.<span class="title function_">trim</span>());</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ¯æ¬¡ç‚¹å‡»åç­‰å¾…1ç§’</span></span><br><span class="line">            <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å½“å‰é¡µé¢çš„æŒ‰é’®ç‚¹å‡»å®Œæˆï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ç¿»é¡µå‡½æ•°</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">autoPaginate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pageNumber = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æ­£åœ¨å¤„ç†ç¬¬ <span class="subst">$&#123;pageNumber&#125;</span> é¡µ...`</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç‚¹å‡»å½“å‰é¡µçš„â€œå·²å…³æ³¨â€å’Œâ€œå·²äº’ç²‰â€æŒ‰é’®</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">clickFollowButtons</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŸ¥æ‰¾â€œä¸‹ä¸€é¡µâ€æŒ‰é’®</span></span><br><span class="line">        <span class="keyword">const</span> nextButton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button.vui_button.vui_pagenation--btn.vui_pagenation--btn-side&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!nextButton || nextButton.<span class="property">disabled</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ²¡æœ‰æ›´å¤šé¡µé¢äº†ï¼Œè„šæœ¬æ‰§è¡Œç»“æŸï¼&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>; <span class="comment">// å¦‚æœæ²¡æœ‰â€œä¸‹ä¸€é¡µâ€æŒ‰é’®æˆ–æŒ‰é’®ä¸å¯ç”¨ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç‚¹å‡»â€œä¸‹ä¸€é¡µâ€æŒ‰é’®</span></span><br><span class="line">        nextButton.<span class="title function_">click</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å·²ç‚¹å‡»ä¸‹ä¸€é¡µæŒ‰é’®ï¼Œç­‰å¾…é¡µé¢åŠ è½½...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆï¼ˆæ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´å»¶è¿Ÿæ—¶é—´ï¼‰</span></span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">3000</span>));</span><br><span class="line"></span><br><span class="line">        pageNumber++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿é¡µé¢åŠ è½½å®Œæˆ</span></span><br><span class="line"><span class="built_in">setTimeout</span>(autoPaginate, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†™äº†ä¸¤å¹´é¡¹ç›®æ€»ç»“çš„springboot+uniappé¡¹ç›®æ¨¡æ¿æ–‡æ¡£</title>
      <link href="/2025/03/09/%E5%86%99%E4%BA%86%E4%B8%A4%E5%B9%B4%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E7%9A%84springboot-uniapp%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E6%96%87%E6%A1%A3/"/>
      <url>/2025/03/09/%E5%86%99%E4%BA%86%E4%B8%A4%E5%B9%B4%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E7%9A%84springboot-uniapp%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<p><strong>giteeå¼€æºåœ°å€:<a href="https://gitee.com/hepingan11/springboot-uniapp">hepingan11&#x2F;springboot+uniapp</a></strong></p><p>è§£å‹å³ç”¨</p><p>è¿›å…¥application.ymlé…ç½®ä½ çš„ä¿¡æ¯ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="comment"># mysql</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/h?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">java</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="comment"># redis??</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">lettuce:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">200</span></span><br><span class="line">          <span class="attr">max-wait:</span> <span class="string">-1ms</span></span><br><span class="line">          <span class="attr">max-idle:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">min-idle:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">database:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sa-token:</span></span><br><span class="line">  <span class="attr">token-name:</span> <span class="string">sa-token</span></span><br><span class="line">  <span class="attr">active-timeout:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">is-concurrent:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">is-share:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">is-log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">token-style:</span> <span class="string">uuid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜¿é‡ŒOSS</span></span><br><span class="line"><span class="attr">ali-oss:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">accessKey:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">bucketName:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">domain:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br></pre></td></tr></table></figure><p><strong>sa-tokenæ•™ç¨‹</strong>ï¼š<a href="https://sa-token.cc/doc.html#/use/login-auth"><a href="https://sa-token.cc/doc.html#/">æ¡†æ¶ä»‹ç»</a></a></p><p><strong>è·¨åŸŸè§£å†³ç±»</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">corsConfigurer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">                registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                        .allowedOrigins(<span class="string">&quot;http://localhost:5173&quot;</span>) <span class="comment">// å…è®¸å‰ç«¯åœ°å€</span></span><br><span class="line">                        .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>, <span class="string">&quot;PUT&quot;</span>, <span class="string">&quot;DELETE&quot;</span>, <span class="string">&quot;OPTIONS&quot;</span>)</span><br><span class="line">                        .allowedHeaders(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                        .allowCredentials(<span class="literal">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>sa-tokenæ‹¦æˆªç±»</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaTokenConfigure</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ’åºçš„æ‹¦æˆª</span></span><br><span class="line">    String[] writeUrl = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;</span><br><span class="line">            <span class="string">&quot;/user/login&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/user/register&quot;</span>,</span><br><span class="line">            <span class="string">&quot;/**&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">SaInterceptor</span>(handler -&gt; StpUtil.checkLogin()))</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(writeUrl);</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨writeUrlé…ç½®ä½ çš„ä¸è¢«æ‹¦æˆªçš„æ¥å£</p><p><strong>UserUrilså·¥å…·ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserUtils</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getLoginIdByToken</span><span class="params">(<span class="keyword">final</span> String token)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">loginIdObject</span> <span class="operator">=</span> StpUtil.getLoginIdByToken(token);</span><br><span class="line">        <span class="keyword">return</span> Long.parseLong(String.valueOf(loginIdObject));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–ç™»å½•äººid</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">getCurrentLoginId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Long.parseLong(String.valueOf(StpUtil.getLoginId()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨UserUtils.getCurrentLoginId()è·å–æ¥å£è°ƒç”¨äººçš„IDï¼Œä¸€èˆ¬ç”¨äºè·å–userId</p><p><strong>RedisUtilså·¥å…·ç±»</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">getRedisTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getExpire</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> redisTemplate.getExpire(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout, <span class="keyword">final</span> TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.expire(key, timeout, unit);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">increment</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delKey</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.delete(key);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">delKeys</span><span class="params">(<span class="keyword">final</span> Collection&lt;String&gt; keys)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.delete(keys);</span><br><span class="line">        <span class="keyword">return</span> ret == <span class="literal">null</span> ? <span class="number">0</span> : ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValueTimeout</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasHashKey</span><span class="params">(<span class="keyword">final</span> String key, String hkey)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.opsForHash().hasKey(key, hkey);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashPut</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().put(key, hKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashPutAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Map&lt;String, Object&gt; values)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().putAll(key, values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">hashGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().get(key, hKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hashGetAll</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">hashMultiGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().multiGet(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hashExists</span><span class="params">(String key, String hashKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">hashDeleteKeys</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().delete(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">hashDelete</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... hashKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().delete(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setDel</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">getSetAll</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetSetAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().add(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">zsetSetGetSource</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().score(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">zsetIncrementScore</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value, <span class="keyword">final</span> Double increment)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().incrementScore(key, value, increment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">zsetSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object values, <span class="keyword">final</span> Double source)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Boolean</span> <span class="variable">add</span> <span class="operator">=</span> redisTemplate.opsForZSet().add(key, values, source);</span><br><span class="line">        <span class="keyword">return</span> add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; zsetReverseRangeWithScores(<span class="keyword">final</span> String key, <span class="keyword">final</span> Long start, <span class="keyword">final</span> Long end) &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().reverseRangeWithScores(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">zsetReverseRange</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Long start, <span class="keyword">final</span> Long end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().reverseRange(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">selfIncrease</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;Long&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Long <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> operations.opsForValue().increment(key);</span><br><span class="line">                operations.exec();</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">selfIncreaseSource</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;Double&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Double <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                <span class="type">Double</span> <span class="variable">count</span> <span class="operator">=</span> operations.opsForZSet().incrementScore(key, value, <span class="number">1</span>);</span><br><span class="line">                operations.exec();</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetDelAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetDel</span><span class="params">(<span class="keyword">final</span> String key, Object values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPush</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">doesItExist</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPushAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPushAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">listGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">int</span> start, <span class="keyword">final</span> <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">keySize</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒå¸¸ç”¨çš„redisUtils.seValue(key,value)è®¾ç½®redisé”®å€¼ï¼ŒgetValue(key)</p><p>pom.xmlè¿˜æœ‰è®¸å¤šå¯ä»¥ä½¿ç”¨çš„mavenåº“ï¼Œéƒ½åŠ äº†æ³¨é‡Šï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚åŠ åˆ å°±è¡Œ.</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uniapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pass Assistant v3.0ç‰ˆæœ¬å¤§æ›´æ–°è¯´æ˜+è™çš®æ¤’æ”¯ä»˜æ¥å…¥</title>
      <link href="/2025/02/19/Pass-Assistant-v3-0%E7%89%88%E6%9C%AC%E5%A4%A7%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E-%E8%99%8E%E7%9A%AE%E6%A4%92%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5/"/>
      <url>/2025/02/19/Pass-Assistant-v3-0%E7%89%88%E6%9C%AC%E5%A4%A7%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E-%E8%99%8E%E7%9A%AE%E6%A4%92%E6%94%AF%E4%BB%98%E6%8E%A5%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åŠ ä¸Šaiçš„ç¥è¾…åŠ©ä¸‹æ•´è›Šäº†ä¸€å‘¨å¤šçš„ä»£ç æ‰å†™å‡ºæ¥çš„3.0å¤§æ›´æ–°ï¼ŒæœŸé—´åŒ…æ‹¬ç ´è§£äº†cursorçš„æ—¶é—´ (:doge)</p><p>æ•´ä½“é¡µé¢å¤§æ›´æ–°ï¼Œè®©ä½ çš„çœ¼ç›çœ‹èµ·æ¥æ›´èˆ’æœäº†</p><p>gitee: <a href="https://gitee.com/hepingan11/gptweb">Pass Assistantå‰ç«¯: ä½•å¹³å®‰é­”æ”¹time seaåçš„gptå‰ç«¯éƒ¨åˆ†</a></p><p>â€‹<a href="https://gitee.com/hepingan11/gptjava">Pass Assistantåç«¯: åŸºäºtime seaä¿®æ”¹åçš„gpt</a></p><h1 id="æ›´æ–°å†…å®¹"><a href="#æ›´æ–°å†…å®¹" class="headerlink" title="æ›´æ–°å†…å®¹"></a>æ›´æ–°å†…å®¹</h1><h2 id="å›¾åºŠæ¨¡å—ä¼˜åŒ–æ›´æ–°"><a href="#å›¾åºŠæ¨¡å—ä¼˜åŒ–æ›´æ–°" class="headerlink" title="å›¾åºŠæ¨¡å—ä¼˜åŒ–æ›´æ–°"></a>å›¾åºŠæ¨¡å—ä¼˜åŒ–æ›´æ–°</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250219082134.png"></p><p>æ–°å¢äº†å…¬å…±å›¾åºŠï¼Œå¯ä»¥å°†è‡ªå·±çš„å›¾ç‰‡è®¾ä¸ºç§æœ‰æˆ–å…¬æœ‰ï¼Œå…±æœ‰ä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹ï¼Œå¸ƒå±€ä¹Ÿæ¯”ä»¥å‰çš„æ— csså™åˆ©äºšé£æ›´å¥½çœ‹ï¼Œç«™é•¿ä¹Ÿæ›´æœ‰é’±äº†ï¼Œæ™®é€šç”¨æˆ·ä¸Šé™20å¼ äº†ï¼ˆåŸæ¥10å¼ ï¼‰åç»­3.1æˆ–3.2å°†æ·»åŠ ç”¨ITå¸æ¥æ‰©å®¹å›¾åºŠ</p><h2 id="å¤–è”å¯¼èˆªæ¨¡å—"><a href="#å¤–è”å¯¼èˆªæ¨¡å—" class="headerlink" title="å¤–è”å¯¼èˆªæ¨¡å—"></a>å¤–è”å¯¼èˆªæ¨¡å—</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250219082503.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250219082606.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250219082711.png"></p><p>åæ­£å°±æ˜¯çœ‹èµ·æ¥æ›´èˆ’æœäº†é¡µé¢ï¼Œä»¥å‰çš„æ˜¾ç¤ºè¿˜æœ‰bug</p><h2 id="æ–°å¢â€å…³äºæˆ‘â€æ¨¡å—"><a href="#æ–°å¢â€å…³äºæˆ‘â€æ¨¡å—" class="headerlink" title="æ–°å¢â€å…³äºæˆ‘â€æ¨¡å—"></a>æ–°å¢â€å…³äºæˆ‘â€æ¨¡å—</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250219082812.png"></p><p>å°±æ˜¯å¦‚å›¾ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„é¡µé¢ï¼Œä½†æ˜¯ä½¿ç”¨äº†æ–°æŠ€æœ¯lottieåŠ¨æ€å›¾ï¼Œé‡Œé¢è¿˜æœ‰æˆ‘çš„å²æœˆå²ä¹¦~</p><p>è¿˜æœ‰è®¸å¤šç»†å¤„çš„æ›´æ–°ï¼Œåæ­£å°±è®©è¿™ä¸ªç½‘ç«™çœ‹èµ·æ¥åƒäººåšçš„äº†</p><h1 id="è™çš®æ¤’æ”¯ä»˜æ¥å…¥"><a href="#è™çš®æ¤’æ”¯ä»˜æ¥å…¥" class="headerlink" title="è™çš®æ¤’æ”¯ä»˜æ¥å…¥"></a>è™çš®æ¤’æ”¯ä»˜æ¥å…¥</h1><p>å› ä¸ºå¹³å®‰æˆ‘æ²¡æ³•æ³¨å†Œå¾®ä¿¡æˆ–æ”¯ä»˜å®æ”¯ä»˜å•†å®¶ï¼ˆå­¦ç”Ÿå…šæ‡‚å¾—éƒ½æ‡‚ï¼‰ï¼Œå‘ç°äº†ä¸‰æ–¹æ”¯ä»˜ä»£ç†ï¼Œå°±é€‰äº†è™çš®æ¤’æ”¯ä»˜ï¼ˆèŠ±äº†88å¤§æ´‹å¼€æˆ·äº†æ”¯ä»˜å®ï¼Œå› ä¸ºå°±åœ¨å®ƒå°±åœ¨é‡åº†å¼€çš„å…¬å¸è·‘è·¯äº†æˆ‘ä¹Ÿå¯ä»¥çº¿ä¸‹å•æ€ï¼‰ï¼Œä¸‹é¢æ˜¯æˆ‘åœ¨æˆ‘ç½‘ç«™æ¥å…¥çš„javaä»£ç ç†è§£ï¼Œå…¨æ˜¯è‡ªå·±æ‰‹æ•²çš„aiéƒ½å†™ä¸å‡ºæ¥ã€‚</p><p>å®˜ç½‘ï¼š<a href="https://www.xunhupay.com/">è™çš®æ¤’-ä¸ªäººæ”¯ä»˜å¾®ä¿¡æ”¯ä»˜å®ä¸ªäººæ”¯ä»˜æ¥å£,ä¸ªäººç½‘ç«™æ”¶æ¬¾APIæ¥å£</a></p><p><strong>å®˜æ–¹apiæ¥å£</strong></p><p><strong>æ”¯ä»˜ç½‘å…³æ¥å£URLï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.xunhupay.com/payment/do.html  (è®¾ç½®ä¸ºå¯é…ç½®çš„å˜é‡ï¼Œä»¥ä¾¿æ¥å£å˜æ›´æ—¶æ–¹ä¾¿ä¿®æ”¹)</span><br></pre></td></tr></table></figure><p><strong>ä¼ å‚æ–¹å¼ï¼šPost</strong></p><p>ä½¿ç”¨curlçš„postæ–¹å¼ä¼ å‚æ•°ï¼Œå¹¶ç›´æ¥è·å–jsonè¿”å›å€¼ï¼Œå¼•å¯¼å®¢æˆ·è·³è½¬åˆ°æ”¯ä»˜é“¾æ¥ã€‚</p><table><thead><tr><th align="left">#</th><th align="left">å‚æ•°å</th><th align="left">å«ä¹‰</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">version</td><td align="left">API ç‰ˆæœ¬å·</td><td align="left">string(24)</td><td align="left">å¿…å¡«ã€‚ç›®å‰ä¸º1.1</td></tr><tr><td align="left">2</td><td align="left">appid</td><td align="left">APP ID</td><td align="left">string(32)</td><td align="left">å¿…å¡«ã€‚å¡«å†™è™çš®æ¤’çš„APPIDï¼Œä¸æ˜¯å°ç¨‹åºAPPID</td></tr><tr><td align="left">3</td><td align="left">trade_order_id</td><td align="left">å•†æˆ·è®¢å•å·</td><td align="left">string(32)</td><td align="left">å¿…å¡«ã€‚è¯·ç¡®ä¿åœ¨å½“å‰ç½‘ç«™å†…æ˜¯å”¯ä¸€è®¢å•å·ï¼Œåªèƒ½æ˜¯æ•°å­—ã€å¤§å°å†™å­—æ¯_-*</td></tr><tr><td align="left">4</td><td align="left">total_fee</td><td align="left">è®¢å•é‡‘é¢(å…ƒ)</td><td align="left">decimal(18,2)</td><td align="left">å¿…å¡«ã€‚å•ä½ä¸ºäººæ°‘å¸ å…ƒï¼Œæ²¡å°æ•°ä½ä¸ç”¨å¼ºåˆ¶ä¿ç•™2ä½å°æ•°</td></tr><tr><td align="left">5</td><td align="left">title</td><td align="left">è®¢å•æ ‡é¢˜</td><td align="left">string(128)</td><td align="left">å¿…å¡«ã€‚å•†æˆ·è®¢å•æ ‡é¢˜ï¼ˆä¸èƒ½è¶…è¿‡127ä¸ªå­—ç¬¦æˆ–è€…42ä¸ªæ±‰å­—ï¼Œä¸èƒ½æœ‰è¡¨æƒ…ç¬¦å·ï¼‰</td></tr><tr><td align="left">6</td><td align="left">time</td><td align="left">å½“å‰æ—¶é—´æˆ³</td><td align="left">int(11)</td><td align="left">å¿…å¡«ã€‚PHPç¤ºä¾‹ï¼š<code>time()</code></td></tr><tr><td align="left">7</td><td align="left">notify_url</td><td align="left">é€šçŸ¥å›è°ƒç½‘å€</td><td align="left">string(128)</td><td align="left">å¿…å¡«ã€‚ç”¨æˆ·æ”¯ä»˜æˆåŠŸåï¼Œæˆ‘ä»¬æœåŠ¡å™¨ä¼šä¸»åŠ¨å‘é€ä¸€ä¸ªpostæ¶ˆæ¯åˆ°è¿™ä¸ªç½‘å€(æ³¨æ„ï¼šå½“å‰æ¥å£å†…ï¼ŒSESSIONå†…å®¹æ— æ•ˆï¼Œæ‰‹æœºç«¯ä¸æ”¯æŒä¸­æ–‡åŸŸå)</td></tr><tr><td align="left">8</td><td align="left">return_url</td><td align="left">è·³è½¬ç½‘å€</td><td align="left">string(128)</td><td align="left">å¯é€‰ã€‚ç”¨æˆ·æ”¯ä»˜æˆåŠŸåï¼Œæˆ‘ä»¬ä¼šè®©ç”¨æˆ·æµè§ˆå™¨è‡ªåŠ¨è·³è½¬åˆ°è¿™ä¸ªç½‘å€</td></tr><tr><td align="left">9</td><td align="left">callback_url</td><td align="left">å•†å“ç½‘å€</td><td align="left">string(128)</td><td align="left">å¯é€‰ã€‚ç”¨æˆ·å–æ¶ˆæ”¯ä»˜åï¼Œæˆ‘ä»¬å¯èƒ½å¼•å¯¼ç”¨æˆ·è·³è½¬åˆ°è¿™ä¸ªç½‘å€ä¸Šé‡æ–°è¿›è¡Œæ”¯ä»˜</td></tr><tr><td align="left">10</td><td align="left">plugins</td><td align="left">åç§°</td><td align="left">string(128)</td><td align="left">å¯é€‰ã€‚ ç”¨äºè¯†åˆ«å¯¹æ¥ç¨‹åºæˆ–ä½œè€…</td></tr><tr><td align="left">11</td><td align="left">attach</td><td align="left">å¤‡æ³¨</td><td align="left">text</td><td align="left">å¯é€‰ã€‚å¤‡æ³¨å­—æ®µï¼Œå¯ä»¥ä¼ å…¥ä¸€äº›å¤‡æ³¨æ•°æ®ï¼Œå›è°ƒæ—¶åŸæ ·è¿”å›</td></tr><tr><td align="left">12</td><td align="left">nonce_str</td><td align="left">éšæœºå€¼</td><td align="left">string(32)</td><td align="left">å¿…å¡«ã€‚ä½œç”¨ï¼š1.é¿å…æœåŠ¡å™¨é¡µé¢ç¼“å­˜ï¼Œ2.é˜²æ­¢å®‰å…¨å¯†é’¥è¢«çŒœæµ‹å‡ºæ¥</td></tr><tr><td align="left">13</td><td align="left">hash</td><td align="left">ç­¾å</td><td align="left">string(32)</td><td align="left">å¿…å¡«ã€‚</td></tr><tr><td align="left">14</td><td align="left">type</td><td align="left">æ”¯ä»˜é€šé“ç±»å‹</td><td align="left">string(32)</td><td align="left">å¾®ä¿¡H5æ”¯ä»˜è¯·å¡«â€WAPâ€ï¼Œå¾®ä¿¡å°ç¨‹åºæ”¯ä»˜è¯·å¡«â€JSAPIâ€ ï¼Œè¯·å‚è€ƒå°ç¨‹åºdemoå¯¹æ¥å°ç¨‹åºæ”¯ä»˜ï¼Œå¾®ä¿¡å†…æ”¯ä»˜è¯·å‹¿å¡«å†™â€JSAPIâ€ï¼Œæ”¯ä»˜ç½‘å…³ä¸ºï¼š<a href="https://api.xunhupay.com/">https://api.xunhupay.com</a> è·³è½¬å°ç¨‹åºAPPIDï¼šwx2574b5c5ee8da56bï¼Œå…¶ä»–æ”¯ä»˜ç½‘å…³è·³è½¬å°ç¨‹åºAPPIDï¼šwx402faa5bd5eda155ï¼Œï¼ˆæ”¯ä»˜å®ä¸éœ€è¦æ­¤å‚æ•°ï¼‰</td></tr><tr><td align="left">15</td><td align="left">wap_url</td><td align="left">ç½‘ç«™åŸŸå</td><td align="left">string(50)</td><td align="left">ç½‘ç«™åŸŸåï¼ŒH5æ”¯ä»˜é€šé“è¯·å¡«ä½ ç½‘ç«™åŸŸåï¼Œå°ç¨‹åºæ”¯ä»˜è¯·å¡«æ”¯ä»˜ç½‘å…³ï¼ˆä¾‹å¦‚ï¼š<a href="https://api.dpweixin.com).(æ”¯ä»˜å®ä¸éœ€è¦æ­¤å‚æ•°)/">https://api.dpweixin.comï¼‰ã€‚ï¼ˆæ”¯ä»˜å®ä¸éœ€è¦æ­¤å‚æ•°ï¼‰</a></td></tr><tr><td align="left">16</td><td align="left">wap_name</td><td align="left">ç½‘ç«™åç§°</td><td align="left">string(50)</td><td align="left">åº—é“ºåç§°æˆ–ç½‘ç«™åŸŸåï¼Œé•¿åº¦32æˆ–ä»¥å†…ï¼ŒH5æ”¯ä»˜é€šé“è¯·æ±‚å¿…å¡«ã€‚ï¼ˆæ”¯ä»˜å®ä¸éœ€è¦æ­¤å‚æ•°ï¼‰</td></tr></tbody></table><p>è¯·æ±‚è¿”å›ï¼š</p><table><thead><tr><th align="left">#</th><th align="left">å‚æ•°å</th><th align="left">å«ä¹‰</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">oderid</td><td align="left">è®¢å•id</td><td align="left">int</td><td align="left">è®¢å•id(æ­¤å¤„æœ‰ä¸ªå†å²é—ç•™é”™è¯¯ï¼Œè¿”å›åç§°æ˜¯openidï¼Œå€¼æ˜¯orderidï¼Œä¸€èˆ¬å¯¹æ¥ä¸éœ€è¦è¿™ä¸ªå‚æ•°)</td></tr><tr><td align="left">2</td><td align="left">url_qrcode</td><td align="left">äºŒç»´ç åœ°å€(PCç«¯ä½¿ç”¨)</td><td align="left">string(156)</td><td align="left">äºŒç»´ç æœ‰æ•ˆæœŸäº”åˆ†é’Ÿï¼ŒPCç«¯å¯å°†è¯¥å‚æ•°å±•ç¤ºå‡ºæ¥è¿›è¡Œæ‰«ç æ”¯ä»˜ï¼Œä¸ç”¨å†è½¬äºŒç»´ç ï¼Œéœ€è‡ªå·±å¤„ç†è·³è½¬</td></tr><tr><td align="left">3</td><td align="left">url</td><td align="left">è¯·æ±‚url(æ‰‹æœºç«¯ä¸“ç”¨ï¼ŒPCç«¯å·²åœç”¨)</td><td align="left">string(155)</td><td align="left">åªéœ€è·³è½¬æ­¤å‚æ•°å³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯å¾®ä¿¡ç«¯è¿˜æ˜¯æ‰‹æœºç«¯ï¼Œè‡ªåŠ¨è¿”å›return_urlï¼Œä¸èƒ½å…ˆæ˜¾ç¤ºâ€œurl_qrcodeâ€äºŒç»´ç ï¼Œå†è·³è½¬â€œurlâ€é“¾æ¥</td></tr><tr><td align="left">4</td><td align="left">errcode</td><td align="left">é”™è¯¯ç </td><td align="left">int</td><td align="left"></td></tr><tr><td align="left">5</td><td align="left">errmsg</td><td align="left">é”™è¯¯ä¿¡æ¯</td><td align="left">string(8)</td><td align="left">é”™è¯¯ä¿¡æ¯å…·ä½“å€¼</td></tr><tr><td align="left">6</td><td align="left">hash</td><td align="left">ç­¾å</td><td align="left">string(32)</td><td align="left">æ•°æ®ç­¾åï¼Œå‚è€ƒä¸‹é¢ç­¾åç®—æ³•</td></tr></tbody></table><p><strong>HASHç”Ÿæˆçš„æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼Œè®¾æ‰€æœ‰å‘é€æˆ–è€…æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºé›†åˆMï¼Œå°†é›†åˆMå†…éç©ºå‚æ•°å€¼çš„å‚æ•°æŒ‰ç…§å‚æ•°åASCIIç ä»å°åˆ°å¤§æ’åºï¼ˆå­—å…¸åºï¼‰ï¼Œä½¿ç”¨URLé”®å€¼å¯¹çš„æ ¼å¼ï¼ˆå³key1&#x3D;value1&amp;key2&#x3D;value2â€¦ï¼‰æ‹¼æ¥æˆå­—ç¬¦ä¸²stringAã€‚</p><p>ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹é‡è¦è§„åˆ™ï¼š</p><ol><li>å‚æ•°åASCIIç ä»å°åˆ°å¤§æ’åºï¼ˆå­—å…¸åºï¼‰ï¼›</li><li>å¦‚æœå‚æ•°çš„å€¼ä¸ºç©ºä¸å‚ä¸ç­¾åï¼›</li><li>å‚æ•°ååŒºåˆ†å¤§å°å†™ï¼›</li><li>éªŒè¯è°ƒç”¨è¿”å›æˆ–å¾®ä¿¡ä¸»åŠ¨é€šçŸ¥ç­¾åæ—¶ï¼Œä¼ é€çš„hashå‚æ•°ä¸å‚ä¸ç­¾åï¼Œå°†ç”Ÿæˆçš„ç­¾åä¸è¯¥hashå€¼ä½œæ ¡éªŒã€‚</li><li>å¾®ä¿¡æ¥å£å¯èƒ½å¢åŠ å­—æ®µï¼ŒéªŒè¯ç­¾åæ—¶å¿…é¡»æ”¯æŒå¢åŠ çš„æ‰©å±•å­—æ®µ</li></ol><p>ç¬¬äºŒæ­¥ï¼Œåœ¨stringAæœ€åæ‹¼æ¥ä¸Š<code>APPSECRET(ç§˜é’¥)</code>å¾—åˆ°stringSignTempå­—ç¬¦ä¸²ï¼Œå¹¶å¯¹stringSignTempè¿›è¡ŒMD5è¿ç®—ï¼Œå¾—åˆ°hashå€¼ï¼ˆ32ä½å°å†™ï¼‰ã€‚</p><p>çŸ¥é“ä½ ä»¬å–œæ¬¢cvå¤§æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">// appid</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">appid</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="comment">// appsecret</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">appsecret</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="comment">// è¯·æ±‚è·¯å¾„</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.xunhupay.com/payment/do.html&quot;</span>;</span><br><span class="line">       <span class="comment">// è®¾ç½® ä¼ é€’å‚æ•°çš„é›†åˆï¼Œæ–¹ä¾¿ ä¼ é€’æ•°æ®ã€‚</span></span><br><span class="line">       Map&lt;String,Object&gt; options = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¾ç½®ç‰ˆæœ¬å·</span></span><br><span class="line">       options.put(<span class="string">&quot;version&quot;</span>,<span class="string">&quot;1.1&quot;</span>);</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¾ç½® appid</span></span><br><span class="line">       options.put(<span class="string">&quot;appid&quot;</span>,appid);</span><br><span class="line">       <span class="comment">// å¯†é’¥ä¸éœ€è¦ç›´æ¥ä¼ é€’</span></span><br><span class="line">       <span class="comment">//options.put(&quot;appsecret&quot;,appsecret);</span></span><br><span class="line">       <span class="comment">// å¿…å¡« è®¢å•å· å…·ä½“å†…å®¹è‡ªå·±æ§åˆ¶ é•¿åº¦ 32ä½ å®˜ç½‘è¯´ è¯·ç¡®ä¿åœ¨å½“å‰ç½‘ç«™å†…æ˜¯å”¯ä¸€è®¢å•å·ï¼Œå…·ä½“å«ä¹‰ æˆ‘æµ‹è¯•äº† åœ¨æè¿° æ­¤å¤‡æ³¨</span></span><br><span class="line">       options.put(<span class="string">&quot;trade_order_id&quot;</span>,<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line">       <span class="comment">// å¿…å¡« ä»·æ ¼ ç²¾ç¡®åˆ°RMBåˆ†</span></span><br><span class="line">       options.put(<span class="string">&quot;total_fee&quot;</span>,<span class="string">&quot;0.01&quot;</span>);</span><br><span class="line">       <span class="comment">// å¿…å¡« æ ‡é¢˜</span></span><br><span class="line">       options.put(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;Pass Assistant&quot;</span>);</span><br><span class="line">       <span class="comment">// å¿…å¡« å½“å‰æ—¶é—´æˆ³ è°ƒç”¨ åˆšå†™çš„æ–¹æ³• getSecondTimestamp</span></span><br><span class="line">       options.put(<span class="string">&quot;time&quot;</span>, getSecondTimestamp(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">       <span class="comment">// å¿…å¡« é€šçŸ¥å›è°ƒåœ°å€ url ä»€ä¹ˆå«ä¹‰ æˆ‘ä»¬åå°éœ€è¦çŸ¥é“ ç”¨æˆ·æ”¯ä»˜äº†ã€‚</span></span><br><span class="line">       options.put(<span class="string">&quot;notify_url&quot;</span>,<span class="string">&quot;http://127.0.0.1:8601/pay/paycallback&quot;</span>); <span class="comment">// åªæœ‰è¿™ä¸ªæœ‰ç”¨</span></span><br><span class="line">       <span class="comment">// éå¿…å¡« ä½¿ç”¨ å“åº”å­—æ®µä¸­ url å°±ç›´æ¥è·³åˆ°ç™¾åº¦äº†ï¼Œå¦‚æœè®¿é—®ï¼Œurl_qrcode ï¼Œä¸ä¼šç›´æ¥è·³è½¬ï¼Œåªæœ‰å½“æ”¯ä»˜å®Œæˆåï¼Œå†æ¬¡åˆ·æ–° url_qrcodeä¸­çš„è¿æ¥ï¼Œæ‰ä¼šè·³è½¬ã€‚</span></span><br><span class="line">       options.put(<span class="string">&quot;return_url&quot;</span>,<span class="string">&quot;https://www.baidu.com&quot;</span>);</span><br><span class="line">       <span class="comment">// éå¿…å¡« ç”¨æˆ·å–æ¶ˆæ”¯ä»˜ï¼Œè·³è½¬çš„é¡µé¢   ç»è¿‡æµ‹è¯•ï¼Œæ²¡æœ‰è§¦å‘æœºåˆ¶ï¼Œå»ºè®®ä¸ä¼ é€’</span></span><br><span class="line">       options.put(<span class="string">&quot;callback_url&quot;</span>,<span class="string">&quot;https://www.sina.com.cn/&quot;</span>);</span><br><span class="line">       <span class="comment">//plugins éå¿…å¡« å¤‡æ³¨ä¿¡æ¯</span></span><br><span class="line">       options.put(<span class="string">&quot;plugins&quot;</span>,<span class="string">&quot;æˆ‘æ˜¯å¤‡æ³¨ä¿¡æ¯&quot;</span>);</span><br><span class="line">       <span class="comment">// nonce_str  å¿…å¡« éšæœºå€¼ 32ä½å†…  ä½œç”¨: 1.é¿å…æœåŠ¡å™¨é¡µé¢ç¼“å­˜ï¼Œ2.é˜²æ­¢å®‰å…¨å¯†é’¥è¢«çŒœæµ‹å‡ºæ¥(md5 å¯†é’¥è¶Šå¤æ‚ï¼Œå°±è¶Šéš¾è§£å¯†å‡ºæ¥)</span></span><br><span class="line">       options.put(<span class="string">&quot;nonce_str&quot;</span>,<span class="string">&quot;740969606&quot;</span>);</span><br><span class="line">       <span class="comment">// å®šä¹‰ sb ä¸ºäº†è·å– MD5 åŠ å¯†å‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">       <span class="comment">// å°†HashMap è¿›è¡Œ é”® çš„ Ascll ä»å°åˆ°å¤§æ’åº å¹¶ å°†æ¯ä¸ª hashmapå…ƒç´  ä»¥ &amp; æ‹¼æ¥èµ·æ¥</span></span><br><span class="line">       options.entrySet().stream().sorted((e1,e2) -&gt; e1.getKey().compareTo(e2.getKey())).forEach(a -&gt;&#123;</span><br><span class="line">           sb.append(a).append(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="comment">// å»é™¤ æœ€åä¸€ä½çš„ &amp;</span></span><br><span class="line">       sb.deleteCharAt(sb.length()-<span class="number">1</span>);</span><br><span class="line">       <span class="comment">// æ‹¼æ¥ä¸Šå¯†é’¥</span></span><br><span class="line">       sb.append(appsecret);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„ åŠ å¯†å·¥å…· è¿›è¡Œ MD5 åŠ å¯†</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> SecureUtil.md5(sb.toString());</span><br><span class="line">       <span class="comment">// è¾“å‡ºhashç»“æœ postman è¦ç”¨</span></span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ‘ä»¬ç”Ÿæˆçš„Hash æ˜¯ï¼š&quot;</span>+s);</span><br><span class="line">       <span class="comment">// è¾“å‡ºtimeç»“æœ postman è¦ç”¨</span></span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ‘ä»¬ç”Ÿæˆçš„time æ˜¯: &quot;</span>+options.get(<span class="string">&quot;time&quot;</span>));</span><br><span class="line">       System.out.println();</span><br><span class="line">       <span class="comment">// å¿…å¡« hash ç­¾å</span></span><br><span class="line">       options.put(<span class="string">&quot;hash&quot;</span>, s);</span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ‘ä»¬ä¼ é€’çš„å‚æ•°æœ‰ï¼š&quot;</span>+options.toString());</span><br><span class="line">       System.out.println(<span class="string">&quot;å¼€å§‹è°ƒ è™çš®æ¤’æ”¯ä»˜ æ¥å£...&quot;</span>);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„HttpUtil å‘é€ post è¯·æ±‚</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">post</span> <span class="operator">=</span> HttpUtil.post(url, options);</span><br><span class="line">       System.out.println(<span class="string">&quot;ç»“æŸè°ƒ è™çš®æ¤’æ”¯ä»˜ æ¥å£...\n&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;è™çš®æ¤’æ”¯ä»˜ æ¥å£ å“åº”çš„ç»“æœæ˜¯ï¼š&quot;</span>+post+<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">       <span class="comment">// è¯´æ˜ï¼šè¿™é‡Œ å› ä¸ºè™çš®æ¤’æ”¯ä»˜ å“åº”ç»“æœ ä¸ç»Ÿä¸€ï¼Œæ­£ç¡®æ˜¯Json;ä¸æ­£ç¡® å°±æ˜¯ä¸€è¡ŒString ã€‚æ²¡åŠæ³• åˆ¤æ–­æ˜¯å¦è¯·æ±‚æ˜¯å¦æœ‰æ•ˆã€‚æ‰€ä»¥ åªèƒ½é€šè¿‡ æ˜¯ç”±èƒ½å¤Ÿè§£ææˆjson æœ‰æ— å¼‚å¸¸åˆ¤æ–­ æ˜¯å¦è°ƒç”¨æˆåŠŸ</span></span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           <span class="type">Map</span> <span class="variable">map</span> <span class="operator">=</span> (Map)JSON.parse(post);</span><br><span class="line">           map.keySet().stream().forEach(k -&gt; &#123;</span><br><span class="line">               <span class="keyword">if</span> (k == <span class="string">&quot;url&quot;</span>) &#123;</span><br><span class="line">                   System.out.println(<span class="string">&quot;urläºŒç»´ç é“¾æ¥æ˜¯: &quot;</span>+map.get(k));</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           System.out.println(<span class="string">&quot;è°ƒ è™çš®æ¤’æ”¯ä»˜ æ—¶ å‡ºç°äº†é—®é¢˜&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è·å–ç²¾ç¡®åˆ°ç§’çš„æ—¶é—´æˆ³   åŸç† è·å–æ¯«ç§’æ—¶é—´æˆ³ï¼Œå› ä¸º 1ç§’ = 100æ¯«ç§’ å»é™¤åä¸‰ä½ å°±æ˜¯ç§’çš„æ—¶é—´æˆ³</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getSecondTimestamp</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="literal">null</span> == date) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">String</span> <span class="variable">timestamp</span> <span class="operator">=</span> String.valueOf(date.getTime());</span><br><span class="line">       <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> timestamp.length();</span><br><span class="line">       <span class="keyword">if</span> (length &gt; <span class="number">3</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> Integer.valueOf(timestamp.substring(<span class="number">0</span>,length-<span class="number">3</span>));</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>åæ¥ç»è¿‡æˆ‘çš„ä¸Šåæ¬¡æµ‹è¯•ï¼Œæ”¯ä»˜æˆåŠŸåå›è°ƒ(notify_url)æ²¡ç”¨ï¼Œå°±é€‰æ‹©ç¬¬äºŒç§æ–¹æ³•å§ï¼Œé¡µé¢æ¯éš”å‡ ç§’æŸ¥è¯¢æ¬¡æ”¯ä»˜çŠ¶å†µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="comment">// appid</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">appid</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="comment">// appsecret</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">appsecret</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="comment">// è¯·æ±‚è·¯å¾„</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.xunhupay.com/payment/query.html&quot;</span>;</span><br><span class="line">       <span class="comment">// è®¾ç½® ä¼ é€’å‚æ•°çš„é›†åˆï¼Œæ–¹ä¾¿ ä¼ é€’æ•°æ®ã€‚</span></span><br><span class="line">       Map&lt;String,Object&gt; options = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¾ç½® appid</span></span><br><span class="line">       options.put(<span class="string">&quot;appid&quot;</span>,appid);</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¢å•å· å…·ä½“å†…å®¹è‡ªå·±æ§åˆ¶ é•¿åº¦ 32ä½ å®˜ç½‘è¯´ è¯·ç¡®ä¿åœ¨å½“å‰ç½‘ç«™å†…æ˜¯å”¯ä¸€è®¢å•å·ï¼Œå…·ä½“å«ä¹‰ æˆ‘æµ‹è¯•äº† åœ¨æè¿° æ­¤å¤‡æ³¨</span></span><br><span class="line">       options.put(<span class="string">&quot;out_trade_order&quot;</span>,<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line">       <span class="comment">// å¿…å¡« å½“å‰æ—¶é—´æˆ³ è°ƒç”¨ åˆšå†™çš„æ–¹æ³• getSecondTimestamp</span></span><br><span class="line">       options.put(<span class="string">&quot;time&quot;</span>, getSecondTimestamp(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">       <span class="comment">// nonce_str  å¿…å¡« éšæœºå€¼ 32ä½å†…  ä½œç”¨: 1.é¿å…æœåŠ¡å™¨é¡µé¢ç¼“å­˜ï¼Œ2.é˜²æ­¢å®‰å…¨å¯†é’¥è¢«çŒœæµ‹å‡ºæ¥(md5 å¯†é’¥è¶Šå¤æ‚ï¼Œå°±è¶Šéš¾è§£å¯†å‡ºæ¥)</span></span><br><span class="line">       options.put(<span class="string">&quot;nonce_str&quot;</span>,<span class="string">&quot;123546789&quot;</span>);</span><br><span class="line">       <span class="comment">// å®šä¹‰ sb ä¸ºäº†è·å– MD5 åŠ å¯†å‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">       <span class="comment">// å°†HashMap è¿›è¡Œ é”® çš„ Ascll ä»å°åˆ°å¤§æ’åº å¹¶ å°†æ¯ä¸ª hashmapå…ƒç´  ä»¥ &amp; æ‹¼æ¥èµ·æ¥</span></span><br><span class="line">       options.entrySet().stream().sorted((e1,e2) -&gt; e1.getKey().compareTo(e2.getKey())).forEach(a -&gt;&#123;</span><br><span class="line">           sb.append(a).append(<span class="string">&quot;&amp;&quot;</span>);&#125;);</span><br><span class="line">       <span class="comment">// å»é™¤ æœ€åä¸€ä½çš„ &amp;</span></span><br><span class="line">       sb.deleteCharAt(sb.length()-<span class="number">1</span>);</span><br><span class="line">       sb.append(appsecret);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„ åŠ å¯†å·¥å…· è¿›è¡Œ MD5 åŠ å¯†</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> SecureUtil.md5(sb.toString());</span><br><span class="line">       <span class="comment">// å¿…å¡« hash ç­¾å</span></span><br><span class="line">       options.put(<span class="string">&quot;hash&quot;</span>, s);</span><br><span class="line">       System.out.println(<span class="string">&quot;æˆ‘ä»¬ä¼ é€’çš„å‚æ•°æœ‰ï¼š&quot;</span>+options);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„HttpUtil å‘é€ post è¯·æ±‚</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">post</span> <span class="operator">=</span> HttpUtil.post(url, options);</span><br><span class="line">       System.out.println(<span class="string">&quot;ç»“æŸè°ƒ è™çš®æ¤’æ”¯ä»˜ æ¥å£...\n&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;è™çš®æ¤’æ”¯ä»˜ æ¥å£ å“åº”çš„ç»“æœæ˜¯ï¼š&quot;</span>+post+<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(post);</span><br><span class="line">       <span class="comment">// è·å–dataå¯¹è±¡</span></span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">dataObject</span> <span class="operator">=</span> jsonObject.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">       <span class="comment">// è·å–statuså€¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">status</span> <span class="operator">=</span> dataObject.getString(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">       System.out.println(status);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶äº†ä¸Šé¢çš„å…¨åªæ˜¯æµ‹è¯•ç±»ï¼Œä¸‹é¢ä¸ŠçœŸçš„å®æˆ˜ä»£ç ï¼Œä¹Ÿå°±æ˜¯æˆ‘çš„Pass Assistantçš„åˆ†äº«ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;hupijiao.appid&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> String AppId;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Value(&quot;$&#123;hupijiao.appsecret&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> String AppSecret;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Value(&quot;$&#123;hupijiao.webUrl&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> String webUrl;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è™çš®æ¤’æ”¯ä»˜å®æ”¯ä»˜</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> productId the product id</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line">   <span class="keyword">public</span> AlipayPayCodeVo <span class="title function_">generatePayQrCode</span><span class="params">(<span class="keyword">final</span> Long productId)</span> &#123;</span><br><span class="line">       <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> productMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Product&gt;().lambda().eq(Product::getProductId, productId));</span><br><span class="line">       <span class="keyword">if</span> (product == <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">OrdersException</span>(ExceptionMessages.PRODUCT_NULL_ERR, <span class="number">500</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// è¯·æ±‚è·¯å¾„</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.xunhupay.com/payment/do.html&quot;</span>;</span><br><span class="line">       <span class="comment">// è®¾ç½® ä¼ é€’å‚æ•°çš„é›†åˆï¼Œæ–¹ä¾¿ ä¼ é€’æ•°æ®ã€‚</span></span><br><span class="line">       Map&lt;String,Object&gt; options = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¾ç½®ç‰ˆæœ¬å·</span></span><br><span class="line">       options.put(<span class="string">&quot;version&quot;</span>,<span class="string">&quot;1.1&quot;</span>);</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¾ç½® appid</span></span><br><span class="line">       options.put(<span class="string">&quot;appid&quot;</span>,AppId);</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¢å•å· å…·ä½“å†…å®¹è‡ªå·±æ§åˆ¶ é•¿åº¦ 32ä½</span></span><br><span class="line">       <span class="comment">// å®˜ç½‘è¯´ è¯·ç¡®ä¿åœ¨å½“å‰ç½‘ç«™å†…æ˜¯å”¯ä¸€è®¢å•å·ï¼Œå…·ä½“å«ä¹‰ æˆ‘æµ‹è¯•äº† åœ¨æè¿° æ­¤å¤‡æ³¨</span></span><br><span class="line">       <span class="type">SecureRandom</span> <span class="variable">secureRandom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">12</span>);</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">12</span>; i++) &#123;</span><br><span class="line">           stringBuilder.append(secureRandom.nextInt(<span class="number">12</span>)); <span class="comment">// ç”Ÿæˆ0-9ä¹‹é—´çš„éšæœºæ•°</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">String</span> <span class="variable">randomNumber</span> <span class="operator">=</span> stringBuilder.toString();</span><br><span class="line">       options.put(<span class="string">&quot;trade_order_id&quot;</span>,randomNumber);</span><br><span class="line">       <span class="comment">// å¿…å¡« ä»·æ ¼ ç²¾ç¡®åˆ°RMBåˆ†</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">formattedNumber</span> <span class="operator">=</span> String.format(<span class="string">&quot;%.2f&quot;</span>, product.getProductPrice());</span><br><span class="line">       options.put(<span class="string">&quot;total_fee&quot;</span>,formattedNumber);</span><br><span class="line">       <span class="comment">// å¿…å¡« æ ‡é¢˜</span></span><br><span class="line">       options.put(<span class="string">&quot;title&quot;</span>,product.getProductName());</span><br><span class="line">       <span class="comment">// å¿…å¡« å½“å‰æ—¶é—´æˆ³ è°ƒç”¨ åˆšå†™çš„æ–¹æ³• getSecondTimestamp</span></span><br><span class="line">       options.put(<span class="string">&quot;time&quot;</span>, getSecondTimestamp(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">       <span class="comment">// å¿…å¡« é€šçŸ¥å›è°ƒåœ°å€ url ä»€ä¹ˆå«ä¹‰ æˆ‘ä»¬åå°éœ€è¦çŸ¥é“ ç”¨æˆ·æ”¯ä»˜äº†ã€‚</span></span><br><span class="line">       options.put(<span class="string">&quot;notify_url&quot;</span>,<span class="string">&quot;https://java.hepingan.top/pay/paycallback&quot;</span>); <span class="comment">// åªæœ‰è¿™ä¸ªæœ‰ç”¨</span></span><br><span class="line">       <span class="comment">// éå¿…å¡« ä½¿ç”¨ å“åº”å­—æ®µä¸­ url å°±ç›´æ¥è·³åˆ°ç™¾åº¦äº†ï¼Œå¦‚æœè®¿é—®ï¼Œurl_qrcode ï¼Œä¸ä¼šç›´æ¥è·³è½¬ï¼Œåªæœ‰å½“æ”¯ä»˜å®Œæˆåï¼Œå†æ¬¡åˆ·æ–° url_qrcodeä¸­çš„è¿æ¥ï¼Œæ‰ä¼šè·³è½¬ã€‚</span></span><br><span class="line">       options.put(<span class="string">&quot;return_url&quot;</span>,webUrl+<span class="string">&quot;/#/user_view&quot;</span>);</span><br><span class="line">       <span class="comment">// éå¿…å¡« ç”¨æˆ·å–æ¶ˆæ”¯ä»˜ï¼Œè·³è½¬çš„é¡µé¢   ç»è¿‡æµ‹è¯•ï¼Œæ²¡æœ‰è§¦å‘æœºåˆ¶ï¼Œå»ºè®®ä¸ä¼ é€’</span></span><br><span class="line">       options.put(<span class="string">&quot;callback_url&quot;</span>,webUrl+<span class="string">&quot;/#/user_view&quot;</span>);</span><br><span class="line">       <span class="comment">//plugins éå¿…å¡« å¤‡æ³¨ä¿¡æ¯</span></span><br><span class="line">       options.put(<span class="string">&quot;plugins&quot;</span>,<span class="string">&quot;æ‚¨æ”¯ä»˜åçš„ITå¸ï¼ˆè™šæ‹Ÿè´§å¸ï¼‰å°†åªç”¨äºPass Assistantç«™å†…æ¶ˆè´¹.&quot;</span>);</span><br><span class="line">       <span class="comment">// nonce_str  å¿…å¡« éšæœºå€¼ 32ä½å†…  ä½œç”¨: 1.é¿å…æœåŠ¡å™¨é¡µé¢ç¼“å­˜ï¼Œ2.é˜²æ­¢å®‰å…¨å¯†é’¥è¢«çŒœæµ‹å‡ºæ¥(md5 å¯†é’¥è¶Šå¤æ‚ï¼Œå°±è¶Šéš¾è§£å¯†å‡ºæ¥)</span></span><br><span class="line">       <span class="type">SecureRandom</span> <span class="variable">secureRandom2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">stringBuilder2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">10</span>);</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">           stringBuilder2.append(secureRandom2.nextInt(<span class="number">10</span>)); <span class="comment">// ç”Ÿæˆ0-9ä¹‹é—´çš„éšæœºæ•°</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">String</span> <span class="variable">randomNumber2</span> <span class="operator">=</span> stringBuilder2.toString();</span><br><span class="line">       options.put(<span class="string">&quot;nonce_str&quot;</span>,randomNumber2);</span><br><span class="line">       <span class="comment">// å®šä¹‰ sb ä¸ºäº†è·å– MD5 åŠ å¯†å‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">       <span class="comment">// å°†HashMap è¿›è¡Œ é”® çš„ Ascll ä»å°åˆ°å¤§æ’åº å¹¶ å°†æ¯ä¸ª hashmapå…ƒç´  ä»¥ &amp; æ‹¼æ¥èµ·æ¥</span></span><br><span class="line">       options.entrySet().stream().sorted((e1,e2) -&gt; e1.getKey().compareTo(e2.getKey())).forEach(a -&gt;&#123;</span><br><span class="line">           sb.append(a).append(<span class="string">&quot;&amp;&quot;</span>);&#125;);</span><br><span class="line">       <span class="comment">// å»é™¤ æœ€åä¸€ä½çš„ &amp;</span></span><br><span class="line">       sb.deleteCharAt(sb.length()-<span class="number">1</span>);</span><br><span class="line">       <span class="comment">// æ‹¼æ¥ä¸Šå¯†é’¥</span></span><br><span class="line">       sb.append(AppSecret);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„ åŠ å¯†å·¥å…· è¿›è¡Œ MD5 åŠ å¯†</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> SecureUtil.md5(sb.toString());</span><br><span class="line">       <span class="comment">// å¿…å¡« hash ç­¾å</span></span><br><span class="line">       options.put(<span class="string">&quot;hash&quot;</span>, s);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„HttpUtil å‘é€ post è¯·æ±‚</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">post</span> <span class="operator">=</span> HttpUtil.post(url, options);</span><br><span class="line">       <span class="comment">// è¯´æ˜ï¼šè¿™é‡Œ å› ä¸ºè™çš®æ¤’æ”¯ä»˜ å“åº”ç»“æœ ä¸ç»Ÿä¸€ï¼Œæ­£ç¡®æ˜¯Json;</span></span><br><span class="line">       <span class="comment">// ä¸æ­£ç¡® å°±æ˜¯ä¸€è¡ŒString ã€‚æ²¡åŠæ³• åˆ¤æ–­æ˜¯å¦è¯·æ±‚æ˜¯å¦æœ‰æ•ˆã€‚</span></span><br><span class="line">       <span class="comment">// æ‰€ä»¥ åªèƒ½é€šè¿‡ æ˜¯ç”±èƒ½å¤Ÿè§£ææˆjson æœ‰æ— å¼‚å¸¸åˆ¤æ–­ æ˜¯å¦è°ƒç”¨æˆåŠŸ</span></span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           Map&lt;String, Object&gt; map = (Map&lt;String, Object&gt;) JSON.parse(post);</span><br><span class="line">           <span class="type">String</span> <span class="variable">payUrl</span> <span class="operator">=</span> (String) map.get(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">           <span class="type">LocalDateTime</span> <span class="variable">createdTime</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">           <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Orders</span>()</span><br><span class="line">                   .setOrdersId(randomNumber)</span><br><span class="line">                   .setUserId(UserUtils.getCurrentLoginId())</span><br><span class="line">                   .setCreatedTime(createdTime)</span><br><span class="line">                   .setUpdateTime(createdTime)</span><br><span class="line">                   .setProductId(productId)</span><br><span class="line">                   .setProductName(product.getProductName())</span><br><span class="line">                   .setProductPrice(product.getProductPrice())</span><br><span class="line">                   .setState(<span class="number">0</span>);</span><br><span class="line">           ordersMapper.insert(orders);</span><br><span class="line">           <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AlipayPayCodeVo</span>()</span><br><span class="line">                   .setOrdersId(orders.getOrdersId())</span><br><span class="line">                   .setCreatedTime(orders.getCreatedTime())</span><br><span class="line">                   .setProductName(orders.getProductName())</span><br><span class="line">                   .setProductPrice(orders.getProductPrice())</span><br><span class="line">                   .setPayUrl(payUrl);</span><br><span class="line">       &#125;<span class="keyword">catch</span> (OrdersException e)&#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è·å–ç²¾ç¡®åˆ°ç§’çš„æ—¶é—´æˆ³   åŸç† è·å–æ¯«ç§’æ—¶é—´æˆ³ï¼Œå› ä¸º 1ç§’ = 100æ¯«ç§’ å»é™¤åä¸‰ä½ å°±æ˜¯ç§’çš„æ—¶é—´æˆ³</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getSecondTimestamp</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="literal">null</span> == date) &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">String</span> <span class="variable">timestamp</span> <span class="operator">=</span> String.valueOf(date.getTime());</span><br><span class="line">       <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> timestamp.length();</span><br><span class="line">       <span class="keyword">if</span> (length &gt; <span class="number">3</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> Integer.valueOf(timestamp.substring(<span class="number">0</span>,length-<span class="number">3</span>));</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ£€æŸ¥ ä»˜æ¬¾çŠ¶æ€</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> orderNo è®¢å•</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> &#123;<span class="doctag">@link</span> String&#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">paymentStatus</span><span class="params">(<span class="keyword">final</span> String orderNo)</span> &#123;</span><br><span class="line">       <span class="comment">// è¯·æ±‚è·¯å¾„</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;https://api.xunhupay.com/payment/query.html&quot;</span>;</span><br><span class="line">       <span class="comment">// è®¾ç½® ä¼ é€’å‚æ•°çš„é›†åˆï¼Œæ–¹ä¾¿ ä¼ é€’æ•°æ®ã€‚</span></span><br><span class="line">       Map&lt;String,Object&gt; options = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¾ç½® appid</span></span><br><span class="line">       options.put(<span class="string">&quot;appid&quot;</span>,AppId);</span><br><span class="line">       <span class="comment">// å¿…å¡« è®¢å•å· å…·ä½“å†…å®¹è‡ªå·±æ§åˆ¶ é•¿åº¦ 32ä½ å®˜ç½‘è¯´ è¯·ç¡®ä¿åœ¨å½“å‰ç½‘ç«™å†…æ˜¯å”¯ä¸€è®¢å•å·ï¼Œå…·ä½“å«ä¹‰ æˆ‘æµ‹è¯•äº† åœ¨æè¿° æ­¤å¤‡æ³¨</span></span><br><span class="line">       options.put(<span class="string">&quot;out_trade_order&quot;</span>,orderNo);</span><br><span class="line">       <span class="comment">// å¿…å¡« å½“å‰æ—¶é—´æˆ³ è°ƒç”¨ åˆšå†™çš„æ–¹æ³• getSecondTimestamp</span></span><br><span class="line">       options.put(<span class="string">&quot;time&quot;</span>, getSecondTimestamp(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">       <span class="comment">// nonce_str  å¿…å¡« éšæœºå€¼ 32ä½å†…  ä½œç”¨: 1.é¿å…æœåŠ¡å™¨é¡µé¢ç¼“å­˜ï¼Œ2.é˜²æ­¢å®‰å…¨å¯†é’¥è¢«çŒœæµ‹å‡ºæ¥(md5 å¯†é’¥è¶Šå¤æ‚ï¼Œå°±è¶Šéš¾è§£å¯†å‡ºæ¥)</span></span><br><span class="line">       <span class="type">SecureRandom</span> <span class="variable">secureRandom2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">stringBuilder2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">10</span>);</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">           stringBuilder2.append(secureRandom2.nextInt(<span class="number">10</span>)); <span class="comment">// ç”Ÿæˆ0-9ä¹‹é—´çš„éšæœºæ•°</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">String</span> <span class="variable">randomNumber2</span> <span class="operator">=</span> stringBuilder2.toString();</span><br><span class="line">       options.put(<span class="string">&quot;nonce_str&quot;</span>,randomNumber2);</span><br><span class="line">       <span class="comment">// å®šä¹‰ sb ä¸ºäº†è·å– MD5 åŠ å¯†å‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">       <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">       <span class="comment">// å°†HashMap è¿›è¡Œ é”® çš„ Ascll ä»å°åˆ°å¤§æ’åº å¹¶ å°†æ¯ä¸ª hashmapå…ƒç´  ä»¥ &amp; æ‹¼æ¥èµ·æ¥</span></span><br><span class="line">       options.entrySet().stream().sorted((e1,e2) -&gt; e1.getKey().compareTo(e2.getKey())).forEach(a -&gt;&#123;</span><br><span class="line">           sb.append(a).append(<span class="string">&quot;&amp;&quot;</span>);&#125;);</span><br><span class="line">       <span class="comment">// å»é™¤ æœ€åä¸€ä½çš„ &amp;</span></span><br><span class="line">       sb.deleteCharAt(sb.length()-<span class="number">1</span>);</span><br><span class="line">       sb.append(AppSecret);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„ åŠ å¯†å·¥å…· è¿›è¡Œ MD5 åŠ å¯†</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> SecureUtil.md5(sb.toString());</span><br><span class="line">       <span class="comment">// å¿…å¡« hash ç­¾å</span></span><br><span class="line">       options.put(<span class="string">&quot;hash&quot;</span>, s);</span><br><span class="line">       <span class="comment">// è°ƒç”¨ Hutool çš„HttpUtil å‘é€ post è¯·æ±‚</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">post</span> <span class="operator">=</span> HttpUtil.post(url, options);</span><br><span class="line"></span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(post);</span><br><span class="line">       <span class="comment">// è·å–dataå¯¹è±¡</span></span><br><span class="line">       <span class="type">JSONObject</span> <span class="variable">dataObject</span> <span class="operator">=</span> jsonObject.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">       <span class="comment">// è·å–statuså€¼</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">status</span> <span class="operator">=</span> dataObject.getString(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">       System.out.println(status);</span><br><span class="line">       <span class="keyword">if</span> (Objects.equals(status, <span class="string">&quot;OD&quot;</span>))&#123;</span><br><span class="line">           ordersMapper.update(<span class="literal">null</span>,<span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;Orders&gt;()</span><br><span class="line">                   .lambda()</span><br><span class="line">                   .eq(Orders::getOrdersId,orderNo)</span><br><span class="line">                   .set(Orders::getState,<span class="number">1</span>)</span><br><span class="line">                   .set(Orders::getPayTime,LocalDateTime.now()));</span><br><span class="line">           <span class="type">Long</span> <span class="variable">frequency</span> <span class="operator">=</span> userMapper.getFrequencyById(UserUtils.getCurrentLoginId());</span><br><span class="line">           <span class="type">Orders</span> <span class="variable">orders</span> <span class="operator">=</span> ordersMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Orders&gt;()</span><br><span class="line">                   .lambda()</span><br><span class="line">                   .eq(Orders::getOrdersId,orderNo)</span><br><span class="line">                   .select(Orders::getProductId));</span><br><span class="line">           <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> productMapper.selectOne(<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;Product&gt;()</span><br><span class="line">                   .lambda()</span><br><span class="line">                   .eq(Product::getProductId, orders.getProductId())</span><br><span class="line">                   .select(Product::getFrequency));</span><br><span class="line">           <span class="comment">//æ›´æ–°ç”¨æˆ·çš„æ¬¡æ•°</span></span><br><span class="line">           userMapper.update(<span class="literal">null</span>,<span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;User&gt;()</span><br><span class="line">                   .lambda()</span><br><span class="line">                   .eq(User::getUserId,UserUtils.getCurrentLoginId())</span><br><span class="line">                   .set(User::getFrequency,frequency+product.getFrequency()));</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span> (Objects.equals(status, <span class="string">&quot;WP&quot;</span>))&#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;wait&quot;</span>;</span><br><span class="line">       &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="string">&quot;cancel&quot;</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å‰ç«¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;payying&quot;</span><br><span class="line">    style=&quot;text-align: center; padding-top: 100px&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;h1&gt;è¯·è·³è½¬åˆ°æ–°çš„é¡µé¢è¿›è¡Œæ”¯ä»˜&lt;/h1&gt;</span><br><span class="line">    &lt;h2 style=&quot;color: red&quot;&gt;æ”¯ä»˜æˆåŠŸå‰è¯·å‹¿å…³é—­æˆ–åˆ·æ–°è¯¥é¡µé¢&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt; </span><br><span class="line">  &lt;div v-if=&quot;showSucceed&quot;</span><br><span class="line">  style=&quot;text-align: center; padding-top: 100px&quot;&gt;</span><br><span class="line">    &lt;h1&gt;æ­å–œæ‚¨å·²æˆåŠŸæ”¯ä»˜&lt;/h1&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;router().push(&#x27;/user_view&#x27;)&quot;&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">alipayPay</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">       <span class="title class_">ElLoading</span>.<span class="title function_">service</span>(&#123;</span><br><span class="line">         <span class="attr">fullscreen</span>: <span class="literal">true</span>,</span><br><span class="line">         <span class="attr">text</span>: <span class="string">&quot;æ­£åœ¨æ„å»ºè®¢å•...&quot;</span>,</span><br><span class="line">         <span class="attr">spinner</span>: <span class="string">&quot;el-icon-loading&quot;</span>,</span><br><span class="line">         <span class="attr">background</span>: <span class="string">&quot;rgba(0, 0, 0, 0.7)&quot;</span>,</span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="comment">//æ„å»ºæ”¯ä»˜å®è®¢å•</span></span><br><span class="line">       outcome.<span class="property">value</span> = <span class="keyword">await</span> <span class="title function_">alipayPayQrCode</span>(productId.<span class="property">value</span>);</span><br><span class="line">       payVisible.<span class="property">value</span> = <span class="literal">false</span>;</span><br><span class="line">       payying.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">       mainPageVisible.<span class="property">value</span> = <span class="literal">false</span>;</span><br><span class="line">       <span class="variable language_">window</span>.<span class="title function_">open</span>(outcome.<span class="property">value</span>.<span class="property">payUrl</span>, <span class="string">&#x27;_blank&#x27;</span>);</span><br><span class="line">       <span class="comment">//3ç§’æ£€æŸ¥ä¸€ä¸‹è®¢å•æ˜¯å¦æ”¯ä»˜æˆåŠŸ</span></span><br><span class="line">       <span class="keyword">let</span> timerId = <span class="built_in">setInterval</span>(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">         <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">alipayIsSucceed</span>(outcome.<span class="property">value</span>.<span class="property">ordersId</span>);</span><br><span class="line">         <span class="keyword">if</span> (res === <span class="string">&quot;success&quot;</span>) &#123;</span><br><span class="line">           <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">             <span class="attr">title</span>: <span class="string">&quot;æˆåŠŸ&quot;</span>,</span><br><span class="line">             <span class="attr">message</span>: <span class="string">&quot;èµèµæˆåŠŸï¼Œå¯åœ¨æˆ‘çš„èµèµä¸­æŸ¥çœ‹è¯¥èµèµè®°å½•&quot;</span>,</span><br><span class="line">             <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">           &#125;);</span><br><span class="line">           showSucceed.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">           <span class="keyword">await</span> <span class="title function_">getUser</span>();</span><br><span class="line">           <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">         &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res === <span class="string">&quot;cancel&quot;</span>) &#123;</span><br><span class="line">           showCover.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">           <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">             <span class="attr">title</span>: <span class="string">&quot;è®¢å•å·²å…³é—­&quot;</span>,</span><br><span class="line">             <span class="attr">message</span>: <span class="string">&quot;é•¿æ—¶é—´æœªæ”¯ä»˜ï¼Œè®¢å•å·²å…³é—­&quot;</span>,</span><br><span class="line">             <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">           &#125;);</span><br><span class="line">           <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">         &#125;</span><br><span class="line">       <span class="comment">//é—´éš”æ—¶é—´æŸ¥è¯¢</span></span><br><span class="line">       &#125;, <span class="number">5000</span>);</span><br><span class="line">     &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">       <span class="title class_">ElNotification</span>(&#123;</span><br><span class="line">         <span class="attr">title</span>: <span class="string">&quot;é”™è¯¯&quot;</span>,</span><br><span class="line">         <span class="attr">message</span>: e,</span><br><span class="line">         <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">       &#125;);</span><br><span class="line">       mainPageVisible.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">     &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">       <span class="title class_">ElLoading</span>.<span class="title function_">service</span>().<span class="title function_">close</span>();</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>çœ‹å¾—æ‡‚å°±çœ‹å•¦ï¼ŒæŠŠé‚£ä¸ªæµ‹è¯•ç±»çœ‹æ‡‚å°±ä¼šäº†ï¼Œæˆ‘è¿™ä¸ªä»…ä¾›å‚è€ƒ</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pass Assistant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cursorç ´è§£æœ€æ–°æ–¹æ³•ï¼ˆ2025.2.16ï¼‰</title>
      <link href="/2025/02/16/cursor%E7%A0%B4%E8%A7%A3%E6%9C%80%E6%96%B0%E6%96%B9%E6%B3%95%EF%BC%882025-2-16%EF%BC%89/"/>
      <url>/2025/02/16/cursor%E7%A0%B4%E8%A7%A3%E6%9C%80%E6%96%B0%E6%96%B9%E6%B3%95%EF%BC%882025-2-16%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>sb cursoræ²¡æœ‰äº’è”ç½‘å¼€æºç²¾ç¥ï¼Œç›´æ¥ç»™ä»–ç ´è§£äº†ï¼ï¼ï¼ä¹Ÿæ˜¯æ‰¾äº†ä¸¤ä¸‰å¤©æ‰æ‰¾åˆ°</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250216092318.png"></p><p>é¦–å…ˆå»ä¸‹è½½0.45ç‰ˆæœ¬ä»¥ä¸‹çš„ï¼Œè¶Šä½è¶Šå¥½ï¼Œæˆ‘é€‰çš„æ˜¯0.44.0</p><p><a href="https://downloader-cursor.deno.dev/">Cursor å†å²ç‰ˆæœ¬ä¸‹è½½</a></p><p>å†å»ä¸‹è½½è¿™ä¸ªå·¥å…·ï¼š</p><p><a href="https://pan.quark.cn/s/aa96dd0eaa80#/list/share">å¤¸å…‹ç½‘ç›˜åˆ†äº«</a></p><p>è¿è¡Œé‡Œé¢çš„CursorPro.exeï¼Œä»–ä¼šè‡ªåŠ¨ä¸ºä½ åˆ›å»ºå¥½ä¸€ä¸ªæ–°è´¦å·å¹¶åº”ç”¨åˆ°ä½ çš„cursorä¸­ï¼Œè¿™æ ·ä½ çš„æ¬¡æ•°ç”¨å®Œäº†å°±è¿è¡Œå®ƒï¼Œé»˜è®¤æµè§ˆå™¨å¬è¯´æ˜¯è¦è°·æ­Œï¼ˆæ²¡è¯•è¿‡ï¼‰ã€‚</p><h2 id="ä¿®æ”¹æœºæ¢°ç "><a href="#ä¿®æ”¹æœºæ¢°ç " class="headerlink" title="ä¿®æ”¹æœºæ¢°ç "></a>ä¿®æ”¹æœºæ¢°ç </h2><p>ä¿®æ”¹æœºæ¢°ç è¿™ç§æ–¹æ³•åœ¨0.45æ²¡ç”¨äº†ä½†è¿˜æ˜¯æ”¾å‡ºæ¥æ–¹æ³•ï¼›cursorå­˜æ”¾åœ°å€ä¸ºï¼šC:\Users\Admin\AppData\Roaming\Cursor\User\globalStorageçš„storage.jsonï¼Œå¯ä»¥è‡ªå·±ä¿®æ”¹é‡Œé¢çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;telemetry.macMachineId&quot;: &quot;2cbc0f71-f470-4545-b762-87c9dc049cb7&quot;,</span><br><span class="line">&quot;telemetry.sqmId&quot;: &quot;&#123;fbcde710-2667-44a0-a4c9-7dfdcd97da51&#125;&quot;,</span><br><span class="line">&quot;telemetry.machineId&quot;: &quot;24d91d598c0e71a98be1aced4a602106174baad36a50f85768b4213cd968caf9&quot;,</span><br><span class="line">&quot;telemetry.devDeviceId&quot;: &quot;baf2a55a-a656-42b4-9016-32950a89c738&quot;,</span><br></pre></td></tr></table></figure><p>æ ¼å¼è¦ç¬¦åˆä¸€æ ·</p><p>æˆ–è€…å»ä¸‹ä¸ªæ’ä»¶å«Fake Cursorï¼ˆ<a href="https://github.com/fake-cursor/cursor-fake-machine%EF%BC%89%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%87%AA%E5%8A%A8%E4%BF%AE%E6%94%B9%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%EF%BC%8C**%E4%BF%AE%E6%94%B9%E5%AE%8C%E5%90%8E%E8%AE%B0%E5%BE%97%E5%B0%86%E6%96%87%E4%BB%B6%E4%BB%85%E9%99%90%E8%AE%BE%E7%BD%AE%E4%B8%BA%E5%8F%AA%E8%AF%BB**%EF%BC%8C%E4%B8%8D%E7%84%B6cursor%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E4%BD%A0%E7%9A%84id">https://github.com/fake-cursor/cursor-fake-machineï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œ**ä¿®æ”¹å®Œåè®°å¾—å°†æ–‡ä»¶ä»…é™è®¾ç½®ä¸ºåªè¯»**ï¼Œä¸ç„¶cursorä¼šè‡ªåŠ¨æ›´æ–°ä½ çš„id</a></p><p>å‚è€ƒï¼š<a href="https://www.bilibili.com/video/BV1iNNUeaET4/?spm_id_from=333.337.search-card.all.click&vd_source=190aa40e29cf9c29c0ec0fe896bdef1f">Cursorç™½å«–æŒ‡å—ï¼Œæ— é™åˆ¶ä½¿ç”¨Cursoræ•™ç¨‹_å“”å“©å“”å“©_bilibili</a></p><p><a href="https://www.bilibili.com/video/BV1JjAAe6E1W/?spm_id_from=333.337.search-card.all.click">cursorä¸€ç«™å¼æ— é™ç™½å«–|è§£å†³50æ¬¡150æ¬¡é™åˆ¶|è§£å†³è‡ªåŠ¨å‡çº§é—®é¢˜|_å“”å“©å“”å“©_bilibili</a></p><h2 id="ä¸€é”®ç ´è§£æ–¹æ³•ï¼ˆæ¨èï¼‰"><a href="#ä¸€é”®ç ´è§£æ–¹æ³•ï¼ˆæ¨èï¼‰" class="headerlink" title="ä¸€é”®ç ´è§£æ–¹æ³•ï¼ˆæ¨èï¼‰"></a>ä¸€é”®ç ´è§£æ–¹æ³•ï¼ˆæ¨èï¼‰</h2><p>åŸè§†é¢‘é“¾æ¥ï¼š<a href="https://www.bilibili.com/video/BV1TjA3ekEjt/?spm_id_from=333.337.search-card.all.click&vd_source=190aa40e29cf9c29c0ec0fe896bdef1f">ã€çœŸÂ·æ— é™ä½¿ç”¨ã€‘cursoræœ€æ–°ç‰ˆæ— é™ç»­æ¯ç™½å«–-è„šæœ¬åœ¨è§†é¢‘ç®€ä»‹-æ²¡æœ‰å¥—è·¯_å“”å“©å“”å“©_bilibili</a></p><p> å†™äº†è¿™ä¸ªå¸®åŠ©æ–‡æ¡£, å¤§å®¶å¯ä»¥çœ‹ä¸‹ <a href="https://www.yuque.com/brojie/iofws3/cmnk49w9dx9ygsys?singleDoc#">https://www.yuque.com/brojie/iofws3/cmnk49w9dx9ygsys?singleDoc#</a> ã€ŠCursorè„šæœ¬å¸®åŠ©æ–‡æ¡£ã€‹ â€” ç½‘ç›˜é“¾æ¥: å¤¸å…‹: <a href="https://pan.quark.cn/s/67c02947b8c5">https://pan.quark.cn/s/67c02947b8c5</a> ç™¾åº¦: <a href="https://pan.baidu.com/s/1PN4gD4t9Fc-dr-npYVxSBg?pwd=6amk">https://pan.baidu.com/s/1PN4gD4t9Fc-dr-npYVxSBg?pwd=6amk</a> æå–ç : 6amk</p><p><strong>æ³¨æ„äº‹é¡¹</strong></p><ul><li>é»˜è®¤æµè§ˆå™¨è®¾ç½®ä¸ºè°·æ­Œæµè§ˆå™¨</li><li>éœ€è¦ä¸Šæ¢¯å­ï¼ˆæˆ‘æ²¡ä¸Šå¥½åƒä¹Ÿè¡Œï¼‰</li><li>ä»¥ç®¡ç†å‘˜è¿è¡Œè„šæœ¬</li><li>cursorä¸ºæœ€æ–°ç‰ˆ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> cursor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªå›°æ‰°æˆ‘åŠå¹´çš„bugï¼Œcannot read properties of null (reading &#39;addeventlistener&#39;),çœŸå‡¶ç«Ÿæ˜¯ç¯¡æ”¹çŒ´ï¼</title>
      <link href="/2025/02/07/IT%E7%AC%94%E8%AE%B0/%E4%B8%80%E4%B8%AA%E5%9B%B0%E6%89%B0%E6%88%91%E5%8D%8A%E5%B9%B4%E7%9A%84bug%EF%BC%8Ccannot-read-properties-of-null-reading-addeventlistener-%E7%9C%9F%E5%87%B6%E7%AB%9F%E6%98%AF%E7%AF%A1%E6%94%B9%E7%8C%B4%EF%BC%81/"/>
      <url>/2025/02/07/IT%E7%AC%94%E8%AE%B0/%E4%B8%80%E4%B8%AA%E5%9B%B0%E6%89%B0%E6%88%91%E5%8D%8A%E5%B9%B4%E7%9A%84bug%EF%BC%8Ccannot-read-properties-of-null-reading-addeventlistener-%E7%9C%9F%E5%87%B6%E7%AB%9F%E6%98%AF%E7%AF%A1%E6%94%B9%E7%8C%B4%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>æ²¡é”™å¦‚æœä½ çš„Vueå‡ºç°äº†cannot read properties of null (reading<br>  â€˜addeventlistenerâ€™),è€Œä¸”ä¸‹é¢çš„ç´¢å¼•ä¸ºuserscript.htmlçš„212è¡Œï¼Œå†…å®¹ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶</span></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">setBtnClick</span>(<span class="params"></span>)&#123;  </span><br><span class="line">     <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,setMenu);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯å…¨å±€é…ç½®é”™äº†å•¥çš„ï¼Œç½‘ä¸Šæœå‡ºæ¥è¯´è¿˜è¦æŒ‚è½½domå‰åœæ­¢addEventLiseneräº‹ä»¶å•¥çš„ï¼Œç”šè‡³æˆ‘æŠŠaddeventlistenerçš„æ‰€æœ‰ä»£ç éƒ½åˆ äº†ï¼Œè¯•äº†åŠå¤©éƒ½ä¸è¡Œã€‚</p><p>ç½ªé­ç¥¸é¦–ï¼š</p><p> <img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250207054420.png"></p><h1 id="ä¿®æ”¹æ–¹æ³•"><a href="#ä¿®æ”¹æ–¹æ³•" class="headerlink" title="ä¿®æ”¹æ–¹æ³•"></a>ä¿®æ”¹æ–¹æ³•</h1><p><strong>é‚£ä¹ˆæ­å–œä½ ï¼Œä½ å†™ä»£ç çš„æ—¶å€™ä¸èƒ½ç”¨ç¯¡æ”¹çŒ´äº†ï¼Œæˆ–è€…ä¸é—²éº»çƒ¦å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä¿®æ”¹æ–¹æ³•ï¼š</strong></p><p>åœ¨ Tampermonkeyï¼ˆç¯¡æ”¹çŒ´ï¼‰æµ‹è¯•ç‰ˆä¸­é‡åˆ° <code>Cannot read properties of null (reading &#39;addEventListener&#39;)</code> é”™è¯¯ï¼Œé€šå¸¸æ˜¯å› ä¸ºç”¨æˆ·è„šæœ¬å°è¯•è®¿é—®å°šæœªåŠ è½½æˆ–åŠ¨æ€ç”Ÿæˆçš„ DOM å…ƒç´ ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹ Tampermonkey ç¯å¢ƒçš„è¯¦ç»†è§£å†³æ–¹æ¡ˆï¼š</p><hr><h3 id="1-ç¡®ä¿è„šæœ¬åœ¨-DOM-åŠ è½½å®Œæˆåæ‰§è¡Œ"><a href="#1-ç¡®ä¿è„šæœ¬åœ¨-DOM-åŠ è½½å®Œæˆåæ‰§è¡Œ" class="headerlink" title="1. ç¡®ä¿è„šæœ¬åœ¨ DOM åŠ è½½å®Œæˆåæ‰§è¡Œ"></a><strong>1. ç¡®ä¿è„šæœ¬åœ¨ DOM åŠ è½½å®Œæˆåæ‰§è¡Œ</strong></h3><p>Tampermonkey é»˜è®¤åœ¨ <code>document-end</code> é˜¶æ®µæ‰§è¡Œè„šæœ¬ï¼Œä½†æŸäº›åŠ¨æ€å†…å®¹å¯èƒ½éœ€è¦æ›´æ™šçš„æ‰§è¡Œæ—¶æœºã€‚ä½¿ç”¨ <code>@run-at</code> å…ƒæ•°æ®æˆ– <code>DOMContentLoaded</code> äº‹ä»¶ç¡®ä¿å…ƒç´ å­˜åœ¨ã€‚</p><h4 id="æ–¹æ³•-1ï¼šè°ƒæ•´è„šæœ¬æ‰§è¡Œé˜¶æ®µ"><a href="#æ–¹æ³•-1ï¼šè°ƒæ•´è„šæœ¬æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="æ–¹æ³• 1ï¼šè°ƒæ•´è„šæœ¬æ‰§è¡Œé˜¶æ®µ"></a><strong>æ–¹æ³• 1ï¼šè°ƒæ•´è„šæœ¬æ‰§è¡Œé˜¶æ®µ</strong></h4><p>åœ¨è„šæœ¬çš„å…ƒæ•°æ®ï¼ˆ<code>==UserScript==</code> éƒ¨åˆ†ï¼‰ä¸­æŒ‡å®š <code>@run-at document-idle</code>ï¼Œç¡®ä¿è„šæœ¬åœ¨é¡µé¢å®Œå…¨ç©ºé—²æ—¶æ‰§è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         Your Script Name</span></span><br><span class="line"><span class="comment">// @namespace    http://tampermonkey.net/</span></span><br><span class="line"><span class="comment">// @version      1.0</span></span><br><span class="line"><span class="comment">// @description  Example</span></span><br><span class="line"><span class="comment">// @match        https://example.com/*</span></span><br><span class="line"><span class="comment">// @run-at       document-idle  // ç¡®ä¿åœ¨ DOM ç©ºé—²åæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">        btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setMenu);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;æœªæ‰¾åˆ°æŒ‰é’® #rwl-setbtn&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•-2ï¼šæ‰‹åŠ¨ç›‘å¬-DOMContentLoaded"><a href="#æ–¹æ³•-2ï¼šæ‰‹åŠ¨ç›‘å¬-DOMContentLoaded" class="headerlink" title="æ–¹æ³• 2ï¼šæ‰‹åŠ¨ç›‘å¬ DOMContentLoaded"></a><strong>æ–¹æ³• 2ï¼šæ‰‹åŠ¨ç›‘å¬ DOMContentLoaded</strong></h4><p>å³ä½¿ä½¿ç”¨ <code>@run-at</code>ï¼ŒæŸäº›åŠ¨æ€é¡µé¢ä»éœ€è¿›ä¸€æ­¥ç­‰å¾…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @match        https://example.com/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">        btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setMenu);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;åˆæ¬¡æœªæ‰¾åˆ°æŒ‰é’®ï¼Œå°è¯•åŠ¨æ€ç›‘å¬...&quot;</span>);</span><br><span class="line">        <span class="title function_">observeDynamicButton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">observeDynamicButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">            btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setMenu);</span><br><span class="line">            observer.<span class="title function_">disconnect</span>(); <span class="comment">// ç»‘å®šååœæ­¢ç›‘å¬</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åŠ¨æ€æŒ‰é’®å·²ç»‘å®šäº‹ä»¶&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    observer.<span class="title function_">observe</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123; <span class="attr">childList</span>: <span class="literal">true</span>, <span class="attr">subtree</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setMenu</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ç‚¹å‡»äº‹ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="2-å¤„ç†è·¨åŸŸæˆ–-iframe-ä¸­çš„å…ƒç´ "><a href="#2-å¤„ç†è·¨åŸŸæˆ–-iframe-ä¸­çš„å…ƒç´ " class="headerlink" title="2. å¤„ç†è·¨åŸŸæˆ– iframe ä¸­çš„å…ƒç´ "></a><strong>2. å¤„ç†è·¨åŸŸæˆ– iframe ä¸­çš„å…ƒç´ </strong></h3><p>å¦‚æœç›®æ ‡å…ƒç´ ä½äº <code>iframe</code> å†…ï¼Œéœ€å…ˆè®¿é—® <code>iframe</code> çš„ <code>contentDocument</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @match        https://example.com/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> iframe = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;iframe&quot;</span>); <span class="comment">// è°ƒæ•´é€‰æ‹©å™¨ä»¥åŒ¹é…å®é™… iframe</span></span><br><span class="line">    <span class="keyword">if</span> (iframe) &#123;</span><br><span class="line">        iframe.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> btn = iframe.<span class="property">contentDocument</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">                btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setMenu);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="3-ä½¿ç”¨-Tampermonkey-çš„-unsafeWindow-è®¿é—®é¡µé¢ä¸Šä¸‹æ–‡"><a href="#3-ä½¿ç”¨-Tampermonkey-çš„-unsafeWindow-è®¿é—®é¡µé¢ä¸Šä¸‹æ–‡" class="headerlink" title="3. ä½¿ç”¨ Tampermonkey çš„ unsafeWindow è®¿é—®é¡µé¢ä¸Šä¸‹æ–‡"></a><strong>3. ä½¿ç”¨ Tampermonkey çš„ <code>unsafeWindow</code> è®¿é—®é¡µé¢ä¸Šä¸‹æ–‡</strong></h3><p>Tampermonkey è„šæœ¬é»˜è®¤è¿è¡Œåœ¨éš”ç¦»çš„æ²™ç›’ç¯å¢ƒï¼Œç›´æ¥ä½¿ç”¨ <code>document</code> å¯èƒ½æ— æ³•è®¿é—®é¡µé¢ DOMã€‚éœ€é€šè¿‡ <code>unsafeWindow</code> è®¿é—®å®é™…é¡µé¢å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @match        https://example.com/*</span></span><br><span class="line"><span class="comment">// @grant        unsafeWindow  // å£°æ˜éœ€è¦ unsafeWindow æƒé™</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> uw = <span class="keyword">typeof</span> unsafeWindow !== <span class="string">&quot;undefined&quot;</span> ? unsafeWindow : <span class="variable language_">window</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> btn = uw.<span class="property">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">        btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setMenu);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="4-è°ƒè¯•ä¸æ—¥å¿—è¾“å‡º"><a href="#4-è°ƒè¯•ä¸æ—¥å¿—è¾“å‡º" class="headerlink" title="4. è°ƒè¯•ä¸æ—¥å¿—è¾“å‡º"></a><strong>4. è°ƒè¯•ä¸æ—¥å¿—è¾“å‡º</strong></h3><p>æ·»åŠ æ—¥å¿—ä»¥ç¡®è®¤å…ƒç´ æ˜¯å¦å­˜åœ¨åŠè„šæœ¬æ‰§è¡ŒçŠ¶æ€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @match        https://example.com/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Tampermonkey è„šæœ¬å·²åŠ è½½&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;DOMContentLoaded è§¦å‘&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŸ¥æ‰¾åˆ°çš„æŒ‰é’®ï¼š&quot;</span>, btn);</span><br><span class="line">    <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">        btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æŒ‰é’®ç‚¹å‡»äº‹ä»¶è§¦å‘&quot;</span>);</span><br><span class="line">            <span class="title function_">setMenu</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><hr><h3 id="5-éªŒè¯å…ƒç´ é€‰æ‹©å™¨"><a href="#5-éªŒè¯å…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="5. éªŒè¯å…ƒç´ é€‰æ‹©å™¨"></a><strong>5. éªŒè¯å…ƒç´ é€‰æ‹©å™¨</strong></h3><p>ç¡®ä¿ <code>#rwl-setbtn</code> é€‰æ‹©å™¨æ­£ç¡®ï¼š</p><ol><li>åœ¨ç›®æ ‡é¡µé¢ä¸ŠæŒ‰ <code>F12</code> æ‰“å¼€å¼€å‘è€…å·¥å…·ã€‚</li><li>ä½¿ç”¨ <code>Ctrl+F</code> åœ¨ Elements é¢æ¿ä¸­æœç´¢ <code>#rwl-setbtn</code>ã€‚</li><li>ç¡®è®¤å…ƒç´ å­˜åœ¨ä¸” ID æ— è¯¯ã€‚å¦‚æœå…ƒç´ æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæ£€æŸ¥å…¶çˆ¶çº§å®¹å™¨æ˜¯å¦å·²æ¸²æŸ“ã€‚</li></ol><hr><h3 id="6-å¤„ç†-Shadow-DOM"><a href="#6-å¤„ç†-Shadow-DOM" class="headerlink" title="6. å¤„ç† Shadow DOM"></a><strong>6. å¤„ç† Shadow DOM</strong></h3><p>å¦‚æœå…ƒç´ ä½äº Shadow DOM å†…éƒ¨ï¼Œéœ€ç©¿é€è®¿é—®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šè®¿é—® Shadow DOM ä¸­çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> host = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#shadow-host&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (host &amp;&amp; host.<span class="property">shadowRoot</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> btn = host.<span class="property">shadowRoot</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#rwl-setbtn&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (btn) &#123;</span><br><span class="line">        btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setMenu);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ol><li><strong>æ‰§è¡Œæ—¶æœº</strong>ï¼šé€šè¿‡ <code>@run-at document-idle</code> æˆ– <code>DOMContentLoaded</code> ç¡®ä¿è„šæœ¬åœ¨ DOM å°±ç»ªåè¿è¡Œã€‚</li><li><strong>åŠ¨æ€å…ƒç´ </strong>ï¼šä½¿ç”¨ <code>MutationObserver</code> ç›‘å¬ DOM å˜åŒ–ã€‚</li><li><strong>è·¨åŸŸ&#x2F;iframe</strong>ï¼šé€šè¿‡ <code>iframe.contentDocument</code> æˆ– <code>unsafeWindow</code> è®¿é—®ç›®æ ‡å…ƒç´ ã€‚</li><li><strong>è°ƒè¯•</strong>ï¼šæ·»åŠ  <code>console.log</code> éªŒè¯å…ƒç´ æ˜¯å¦å­˜åœ¨åŠè„šæœ¬æ‰§è¡Œæµç¨‹ã€‚</li><li><strong>é€‰æ‹©å™¨éªŒè¯</strong>ï¼šç¡®ä¿å…ƒç´  ID æ­£ç¡®ä¸”ä½äºå½“å‰ä½œç”¨åŸŸã€‚</li></ol><p>å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œè¯·æä¾›ç›®æ ‡é¡µé¢çš„ URL æˆ– HTML ç»“æ„ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥åˆ†æã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ•…äº‹ï¼ˆå¤§ä¸‰ä¸Šï¼‰</title>
      <link href="/2025/01/24/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%89%E4%B8%8A%EF%BC%89/"/>
      <url>/2025/01/24/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E7%8E%8B%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%89%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/c1f824f19f97d2c5a1ecb27e6ee461d8_720.jpg"></p><p>ç‹ä¹Ÿæ˜¯æµªäº†ä¸€å­¦æœŸï¼Œæš‘å‡ä¹Ÿæ˜¯æ‹¿åˆ°äº†æ¢¦æƒ³ä¸­çš„ç¥æœº4070super, æ‹¿åˆ°åæœ¬æƒ³ç€æäº›å¤§é¡¹ç›®èµšäº›money, ä½†æš‘å‡è¿˜æ˜¯æ‹¿å»ä½“éªŒæ¸¸æˆå»äº†ï¼Œä½“éªŒäº†ä»¥å‰ä¸æ•¢å¼€é¡¶çº§ç”»è´¨çš„èµ›åšæœ‹å…‹ï¼Œåœ°å¹³çº¿5ç­‰3aï¼Œç°åœ¨æµç•…è¿è¡Œï¼Œåªæ˜¯ç°åœ¨å¾ˆå°‘æœ‰å¿ƒé™ä¸‹æ¥ç©äº†ã€‚å¼€å­¦ä¹Ÿæ˜¯æ¯å¤©è¿‡ç€æ™®æ™®é€šé€šçš„æ¯ä¸€å¤©ï¼Œå‘¨æœ«å‡ºå»ç©ç©é€›é€›å•¥çš„ï¼Œæ²¡æœ‰æå¤§é¡¹ç›®çš„å†²åŠ¨äº†ï¼Œä»£ç ä¸€å¤©æ•²å¾—å¾ˆå°‘äº†ã€‚ç›´åˆ°æŸå¤©å»ç½‘ä¸Šå¯»æ±‚ä¸€äº›ç å†œå…¼èŒæ‰¾åˆ°äº†æœºä¼šï¼Œç¬¬ä¸€å•60å…ƒ10åˆ†é’Ÿå°±æå®Œäº†ï¼Œæ­£å½“æˆ‘è§‰å¾—èµšé’±å¦‚æ­¤ç®€å•æ—¶åé¢å°±å¼€å§‹éš¾é“æˆ‘äº†ï¼Œæœ‰sbå®¢æˆ·æ‰¾æˆ‘å®šåˆ¶appï¼Œæƒ³ç”¨100å…ƒåšä¸€ä¸ªå•†ä¸šçº§çš„é¡¹ç›®ï¼Œè¿˜æœ‰1000çš„æ¯•è®¾æˆ‘ç”¨æ¨¡æ¿åšè¢«å‘ç°â€¦. å‘ç°è¿˜æ˜¯ä¸å¥½èµšã€‚ä½†æ˜¯ä¸Šæ¬¡çš„æ¯”èµ›å¥–é‡‘åˆ°äº†ï¼ŒåŠ ä¸Šæˆ‘è‡ªå·±å­˜çš„ä¸€äº›é’±æ¢äº†ä¸ª4k160hzæ˜¾ç¤ºå™¨ï¼Œè¿˜æ˜¯é¦™(ËµÂ¯Í’ã€°Â¯Í’Ëµ)ï¼Œè¿˜æ˜¯åƒè½¯é¥­èˆ’æœã€‚å¯’å‡å¿…é¡»è¦æç‚¹å„¿å¤§ä¸œè¥¿å‡ºæ¥ï¼Œä¸ç„¶æ²¡æœºä¼šäº†ï¼Œæš‘å‡è¦å»å®ä¹ ã€‚<br>æ€»ä¹‹æ„Ÿè§‰è¿™å­¦æœŸéƒ½åœ¨ç©ï¼Œå¿…é¡»è¦åšå‡ºæ”¹å˜äº†ï¼Œå‡†å¤‡ä»Šå¹´çš„å¤§å­¦ç”Ÿè®¡è®¾èµ›ï¼Œå¿…é¡»è¦å»åˆ°å¨æµ·ï¼Œè¿˜æœ‰è“æ¡¥æ¯å†²çœä¸€ï¼Œè¿™æ ·æ‰èƒ½å»åŒ—äº¬ç©ç©ï¼Œå‡†å¤‡å°†æˆ‘çš„ç½‘ç«™åšä¸€ä¸ªuniappç«¯ï¼Œå¹¶ä¸”å¾€å·¥å…·ç±»æ–¹å‘èµ°ï¼Œspring cloudè¦å•ƒå®Œã€‚</p><p>å®é™…ä¸Šå¯’å‡ä¸€å›æ¥å°±æŠ±ç€æ–°çš„æ˜¾ç¤ºå™¨ç©â€¦..ä¸è¡Œå¿…é¡»è¦åšå‡ºæ”¹å˜ï¼Œè¿™å¯æ˜¯å¼¯é“</p><p align="right">2025.1.24</p><p>æœ€è¿‘æœ‰ç‚¹å„¿å¯¹åµŒå…¥å¼å•ç‰‡æœºæ„Ÿå…´è¶£ï¼Œæƒ³ä¹°ä¸ªæ ‘è“æ´¾4bï¼Œä½†æ˜¯è¦400å¤šâ€¦..</p><p align="right">---2025.2.7</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFS+YARNé›†ç¾¤éƒ¨ç½²ï¼ˆä½•å¹³å®‰åŸåˆ›ï¼‰</title>
      <link href="/2024/11/26/IT%E7%AC%94%E8%AE%B0/HDFS%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%EF%BC%88%E4%BD%95%E5%B9%B3%E5%AE%89%E5%8E%9F%E5%88%9B%EF%BC%89/"/>
      <url>/2024/11/26/IT%E7%AC%94%E8%AE%B0/HDFS%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2%EF%BC%88%E4%BD%95%E5%B9%B3%E5%AE%89%E5%8E%9F%E5%88%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="1-HDFSé›†ç¾¤éƒ¨ç½²"><a href="#1-HDFSé›†ç¾¤éƒ¨ç½²" class="headerlink" title="1.HDFSé›†ç¾¤éƒ¨ç½²"></a>1.HDFSé›†ç¾¤éƒ¨ç½²</h2><p>é€‰ç”¨çš„æ˜¯Centos7çš„è™šæ‹Ÿæœºï¼Œä½†æ˜¯Centosçš„yumä»“åº“ä¸å†æ”¯æŒäº†ï¼Œæœ¬äººè‡ªå·±å†™äº†æ–‡ç« å¦‚ä½•ä½¿ç”¨æ–°yumåº“ï¼š<a href="https://ai.hepingan.top/2024/10/29/Centos%E4%B8%8D%E5%86%8D%E6%94%AF%E6%8C%81%E6%9C%8D%E5%8A%A1%E4%BA%86%EF%BC%9F%E6%96%B0yum%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/">Centosä¸å†æ”¯æŒæœåŠ¡äº†ï¼Ÿæ–°yumä»“åº“+dockeré…ç½®æ•™ç¨‹ | å¤©é¦™å›­</a></p><p>é¦–å…ˆå‡†å¤‡ä¸‰å°linuxè™šæ‹Ÿæœºï¼Œä¸‰å°æœºå­çš„è§’è‰²å¦‚ä¸‹ï¼š</p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232058.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232058.png" alt="img"></a></p><p>ä¸Šä¼ hadoopå®‰è£…åŒ…åˆ°node1ï¼Œç„¶åè§£å‹åˆ°&#x2F;export&#x2F;server&#x2F;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bash</span><br><span class="line">tar -zxvf hadoop-3.3.4.tar.gz -C /export/server</span><br><span class="line">bash</span><br><span class="line"><span class="built_in">cd</span> /export/server</span><br><span class="line"><span class="built_in">ln</span> -s /export/server/hadoop-3.3.4 hadoop</span><br><span class="line"><span class="built_in">cd</span> hadoop</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯Hadoopå®‰è£…åŒ…çš„å„ä¸ªç»“æ„çš„ä»‹ç»</p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232347.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232347.png" alt="img"></a></p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232407.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232407.png" alt="img"></a></p><p><strong>workersæ–‡ä»¶é…ç½®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /export/server/hadoop/etc/hadoop</span><br><span class="line">vim workers</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘å·²åœ¨ç³»ç»Ÿä¸Šå®šä¹‰äº†node1,2,3çš„ipåœ°å€æŒ‡å‘ï¼Œæ•…ç›´æ¥å†™å…¥node1&#x2F;node2&#x2F;node3å³å¯</p><p>é…ç½®hadoop-env.sh:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/export/server/jdk</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/export/server/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=<span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_LOG_DIR=<span class="variable">$HADOOP_HOME</span>/logs</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232435.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232435.png" alt="img"></a></p><p><strong>core-site.xmlé…ç½®ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://node1:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>io.file.buffer.size<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>131072<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232543.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232543.png" alt="img"></a></p><p><strong>hdfs-site.xmlé…ç½®</strong></p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232600.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241126232600.png" alt="img"></a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">xml</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir.perm<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>700<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/nn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1,node2,node3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/dn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.handler.count<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>100<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.blocksize<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>268435456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153447.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153447.png" alt="img" style="zoom:50%;" /></a></p><p><strong>å¤åˆ¶node1åˆ°node2ï¼Œnode3</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /export/server</span><br><span class="line">scp -r hadoop-3.3.4 node2:`<span class="built_in">pwd</span>`/</span><br><span class="line">scp -r hadoop-3.3.4 node3:`<span class="built_in">pwd</span>`/</span><br></pre></td></tr></table></figure><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153516.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153516.png" alt="img" style="zoom:50%;" /></a></p><p>é…ç½®ç¯å¢ƒå˜é‡</p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153641.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153641.png" alt="img"></a></p><p>æˆæƒç”¨æˆ·</p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153712.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153712.png" alt="img"></a></p><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153732.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241127153732.png" alt="img" style="zoom:67%;" /></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su - hadoop</span><br><span class="line"></span><br><span class="line">start-dfs.sh</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åå¯ä»¥æµè§ˆå™¨è¾“å…¥node1:9870å°±å¯ä»¥è®¿é—®hadoopé¡µé¢äº†</p><p>å½“çœ‹åˆ°live nodesæœ‰3ä¸ªæ—¶å°±è¯æ˜é…ç½®æˆåŠŸäº†ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20250102211558.png"></p><h2 id="2-YARNé›†ç¾¤éƒ¨ç½²"><a href="#2-YARNé›†ç¾¤éƒ¨ç½²" class="headerlink" title="2.YARNé›†ç¾¤éƒ¨ç½²"></a>2.YARNé›†ç¾¤éƒ¨ç½²</h2><p>YARNçš„æ¶æ„ä¸­é™¤äº†æ ¸å¿ƒè§’è‰²ï¼Œ</p><p>å³ï¼šResourceManagerï¼šé›†ç¾¤èµ„æºæ€»ç®¡å®¶</p><p>NodeManagerï¼šå•æœºèµ„æºç®¡å®¶</p><p>è¿˜å¯ä»¥æ­é…2ä¸ªè¾…åŠ©è§’è‰²ä½¿å¾—YARNé›†ç¾¤è¿è¡Œæ›´åŠ ç¨³å®š</p><p>ä»£ç†æœåŠ¡å™¨(ProxyServer)ï¼šWeb Application Proxy Webåº”ç”¨ç¨‹åºä»£ç†</p><p>å†å²æœåŠ¡å™¨(JobHistoryServer)ï¼š åº”ç”¨ç¨‹åºå†å²ä¿¡æ¯è®°å½•æœåŠ¡</p><ul><li>ç›®å‰é¡¹ç›®æš‚æœªç”¨åˆ°YARNçš„è®¡ç®—ï¼ŒJavaåç«¯çš„æ•°æ®å¤„ç†æ¯”YARNé›†ç¾¤çš„è®¡ç®—èƒ½åŠ›å®åŠ›ç›¸å½“æ›´ç®€å•ï¼Œä¸”YARNé›†ç¾¤å¯åŠ¨æ—¶æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å¾ˆå¤§ï¼Œä½œä¸ºæ™®é€šå¼€å‘è€…é€šå¸¸æ²¡æœ‰å¤§å†…å­˜çš„æœåŠ¡å™¨ã€‚</li></ul><table><thead><tr><th><strong>ç»„ä»¶</strong></th><th><strong>é…ç½®æ–‡ä»¶</strong></th><th><strong>å¯åŠ¨è¿›ç¨‹</strong></th><th><strong>å¤‡æ³¨</strong></th></tr></thead><tbody><tr><td>Hadoop HDFS</td><td>éœ€ä¿®æ”¹</td><td>éœ€å¯åŠ¨NameNodeä½œä¸ºä¸»èŠ‚ç‚¹DataNodeä½œä¸ºä»èŠ‚ç‚¹SecondaryNameNodeä¸»èŠ‚ç‚¹è¾…åŠ©</td><td>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</td></tr><tr><td>Hadoop YARN</td><td>éœ€ä¿®æ”¹</td><td>éœ€å¯åŠ¨ResourceManagerä½œä¸ºé›†ç¾¤èµ„æºç®¡ç†è€…NodeManagerä½œä¸ºå•æœºèµ„æºç®¡ç†è€…ProxyServerä»£ç†æœåŠ¡å™¨æä¾›å®‰å…¨æ€§JobHistoryServerè®°å½•å†å²ä¿¡æ¯å’Œæ—¥å¿—</td><td>åˆ†å¸ƒå¼èµ„æºè°ƒåº¦</td></tr><tr><td>Hadoop MapReduce</td><td>éœ€ä¿®æ”¹</td><td>æ— éœ€å¯åŠ¨ä»»ä½•è¿›ç¨‹MapReduceç¨‹åºè¿è¡Œåœ¨YARNå®¹å™¨å†…</td><td>åˆ†å¸ƒå¼æ•°æ®è®¡ç®—</td></tr></tbody></table><p>hadoopç”¨æˆ·ç™»å½•ï¼Œcd &#x2F;export&#x2F;server&#x2F;hadoop&#x2F;etc&#x2F;hadoop</p><p>mapred-env.shæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/export/server/jdk</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_JOB_HISTORYSERVER_HEAPSIZE=1000</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_MAPRED_ROOT_LOGGER=INFO,RFA</span><br></pre></td></tr></table></figure><p>mapred-site.xmlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.intermediate-done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/mr-history/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/mr-history/done<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.map.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.reduce.env<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>HADOOP_MAPRED_HOME=$HADOOP_HOME<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>yarn-env.shæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹4è¡Œç¯å¢ƒå˜é‡å†…å®¹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sh</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/export/server/jdk</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/export/server/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=<span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br><span class="line"><span class="comment"># export YARN_CONF_DIR=$HADOOP_HOME/etc/hadoop</span></span><br><span class="line"><span class="comment"># export YARN_LOG_DIR=$HADOOP_HOME/logs/yarn</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_LOG_DIR=<span class="variable">$HADOOP_HOME</span>/logs</span><br></pre></td></tr></table></figure><p>yarn-site.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">xml</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log.server.url<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://node1:19888/jobhistory/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.web-proxy.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1:8089<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>proxy server hostname and port<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Configuration to enable or disable log aggregation<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.remote-app-log-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/tmp/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Configuration to enable or disable log aggregation<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.scheduler.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.local-dirs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/nm-local<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Comma-separated list of paths on the local filesystem where intermediate data is written.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log-dirs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/data/nm-log<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Comma-separated list of paths on the local filesystem where logs are written.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>10800<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Default time (in seconds) to retain log files on the NodeManager Only applicable if log-aggregation is disabled.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Shuffle service that needs to be set for Map Reduce applications.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†å¤åˆ¶é…ç½®åˆ°node2ï¼Œnode3ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh</span><br><span class="line">scp * node2:`<span class="built_in">pwd</span>`/</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨çš„è¿›ç¨‹å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼šä¸€é”®å¯åŠ¨YARNé›†ç¾¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$HADOOP_HOME</span>/sbin/start-yarn.sh</span><br></pre></td></tr></table></figure><p>ä¼šåŸºäºyarn-site.xmlä¸­é…ç½®çš„yarn.resourcemanager.hostnameæ¥å†³å®šåœ¨å“ªå°æœºå™¨ä¸Šå¯åŠ¨resourcemanager</p><p>ä¼šåŸºäºworkersæ–‡ä»¶é…ç½®çš„ä¸»æœºå¯åŠ¨NodeManager</p><p>ä¸€é”®åœæ­¢YARNé›†ç¾¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$HADOOP_HOME</span>/sbin/stop-yarn.sh</span><br></pre></td></tr></table></figure><p>åœ¨å½“å‰æœºå™¨ï¼Œå•ç‹¬å¯åŠ¨æˆ–åœæ­¢è¿›ç¨‹</p><p>$HADOOP_HOME&#x2F;bin&#x2F;yarn â€“daemon start|stop resourcemanager|nodemanager|proxyserver</p><p>startå’Œstopå†³å®šå¯åŠ¨å’Œåœæ­¢å¯æ§åˆ¶resourcemanagerã€nodemanagerã€proxyserverä¸‰ç§è¿›ç¨‹</p><p>å†å²æœåŠ¡å™¨å¯åŠ¨å’Œåœæ­¢</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$HADOOP_HOME</span>/bin/mapred â€“daemon start|stop historyserver</span><br></pre></td></tr></table></figure><p><a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241202205212.png"><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241202205212.png" alt="img"></a></p><p>node1:8088é‡Œç‚¹å‡»nodeså‡ºç°è¿™ç§å°±æˆåŠŸäº†</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HDFS </tag>
            
            <tag> YARN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centosä¸å†æ”¯æŒæœåŠ¡äº†ï¼Ÿæ–°yumä»“åº“+dockeré…ç½®æ•™ç¨‹</title>
      <link href="/2024/10/29/IT%E7%AC%94%E8%AE%B0/Centos%E4%B8%8D%E5%86%8D%E6%94%AF%E6%8C%81%E6%9C%8D%E5%8A%A1%E4%BA%86%EF%BC%9F%E6%96%B0yum%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/"/>
      <url>/2024/10/29/IT%E7%AC%94%E8%AE%B0/Centos%E4%B8%8D%E5%86%8D%E6%94%AF%E6%8C%81%E6%9C%8D%E5%8A%A1%E4%BA%86%EF%BC%9F%E6%96%B0yum%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="yumé…ç½®"><a href="#yumé…ç½®" class="headerlink" title="yumé…ç½®"></a>yumé…ç½®</h2><p>å½“ä½ è¾“å…¥yum repolistæ—¶æŠ¥é”™å¹¶æç¤ºåº“ä¸º0ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241029221124.png"></p><p>è¯´æ˜ä½ çš„centos yumä¸è¡Œäº†</p><p>ç›´æ¥å¤åˆ¶ä¸‹é¢çš„ä»£ç åˆ°é¢æ¿å°±å¯ä»¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sSL https://gitee.com/SuperManito/LinuxMirrors/raw/main/ChangeMirrors.sh)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€‰æ‹©ä¸€ä¸ªä½ å–œæ¬¢çš„æºï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241029221336.png"></p><p>ç„¶åç­‰å¾…å®‰è£…okå°±è¡Œ</p><h2 id="dockeræ¢æºæ•™ç¨‹"><a href="#dockeræ¢æºæ•™ç¨‹" class="headerlink" title="dockeræ¢æºæ•™ç¨‹"></a>dockeræ¢æºæ•™ç¨‹</h2><p>å®‰è£…dockerï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>æŒ‰é”®ç›˜ä¸Šçš„ i é”®ï¼Œä¹‹åæŠŠä¸‹é¢çš„ä»£ç è´´è¿›å»</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;registry-mirrors&quot;</span> : </span><br><span class="line">[</span><br><span class="line"><span class="string">&quot;https://docker.m.daocloud.io&quot;</span>, </span><br><span class="line"><span class="string">&quot;https://noohub.ru&quot;</span>,</span><br><span class="line"><span class="string">&quot;https://huecker.io&quot;</span>,</span><br><span class="line"><span class="string">&quot;https://dockerhub.timeweb.cloud&quot;</span>, </span><br><span class="line"><span class="string">&quot;https://docker.rainbond.cc&quot;</span></span><br><span class="line">] </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>escé”®ï¼Œé€€å‡ºç¼–è¾‘æ¨¡å¼ã€‚ </p><p>:wq ä¿å­˜ã€‚ </p><p>é‡å¯</p><p>docker systemctl restart docker</p><p>Docker å¸¸è§å‘½ä»¤ï¼š</p><p>åˆ é™¤é•œåƒ: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [name/id]</span><br></pre></td></tr></table></figure><p>æ‹‰å–é•œåƒ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull -d [name] </span><br></pre></td></tr></table></figure><p>å¯åŠ¨å®¹å™¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [name]</span><br></pre></td></tr></table></figure><p>åˆ é™¤å®¹å™¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f [name]</span><br></pre></td></tr></table></figure><p>ä¸€é”®æ‹‰å–å¯åŠ¨å®¹å™¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name [name] -e [ç¯å¢ƒ] -p [å®¿ä¸»æœºç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ç«¯å£]</span><br></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨å†…éƒ¨:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it [name] bash</span><br></pre></td></tr></table></figure><h2 id="é»‘é©¬å•†åŸéƒ¨ç½²æ³¨æ„äº‹é¡¹"><a href="#é»‘é©¬å•†åŸéƒ¨ç½²æ³¨æ„äº‹é¡¹" class="headerlink" title="é»‘é©¬å•†åŸéƒ¨ç½²æ³¨æ„äº‹é¡¹"></a>é»‘é©¬å•†åŸéƒ¨ç½²æ³¨æ„äº‹é¡¹</h2><ul><li><p>ç¡®ä¿åœ¨åŒä¸€ä¸ªnetworkç½‘ç»œç¯å¢ƒä¸‹</p></li><li><p>ç¡®ä¿nginx.confé‡Œçš„apiçš„<a href="http://hmall:8080ä¸ºä½ javaåç«¯çš„åå­—">http://hmall:8080ä¸ºä½ javaåç«¯çš„åå­—</a></p></li><li><p>DockerFileå’ŒjaråŒ…éƒ½è¦ä¸Šä¼ </p><p>åç«¯éƒ¨ç½²ï¼š</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name hmall --network hmall -p 8080:8080 hmall</span><br></pre></td></tr></table></figure><p>å‰ç«¯nginx:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  --name nginx \</span><br><span class="line">  -p 18080:18080 \</span><br><span class="line">  -p 18081:18081 \</span><br><span class="line">  -v /root/nginx/html:/usr/share/nginx/html \</span><br><span class="line">  -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">  --network hmall \</span><br><span class="line">  nginx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºelectron+vueçš„æ¡Œé¢åº”ç”¨åŸºç¡€ç¬”è®°</title>
      <link href="/2024/10/15/IT%E7%AC%94%E8%AE%B0/%E5%9F%BA%E4%BA%8Eelectron-vue%E7%9A%84%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/10/15/IT%E7%AC%94%E8%AE%B0/%E5%9F%BA%E4%BA%8Eelectron-vue%E7%9A%84%E6%A1%8C%E9%9D%A2%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ­£å¸¸çš„vueé¡¹ç›®ï¼Œç„¶å vue add electron-builder</p><p>é€‰æ‹©13.0</p><p><img src="https://segmentfault.com/img/bVcTmOU" alt="img"></p><p>å¦‚æœå‡ºç°ä¸‹é¢è¿™ç§å°±è¯æ˜å·²ç»å®‰è£…å¥½äº†ï¼Œä¸€èˆ¬éœ€è¦2åˆ†é’Ÿ</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241015215100.png"></p><p>å¦‚æœæ—¶é—´å¤ªé•¿å®‰è£…å¤±è´¥å¯ä»¥è¯•è¯•cnpm install</p><p><img src="https://segmentfault.com/img/bVcTmOV" alt="img"></p><p><img src="https://segmentfault.com/img/bVcTmOW" alt="img"></p><p><img src="https://segmentfault.com/img/bVcTmOX" alt="img"></p><blockquote><p>å®‰è£… å®Œæˆå æˆ‘ä»¬ä½¿ç”¨ npm run electron:serve è¿è¡Œé¡¹ç›® å¦‚æœä¾æ—§æ˜¯æŠ¥é”™çš„ã€‚è¯·è€å¿ƒå¾€ä¸‹çœ‹å®Œ</p></blockquote><p><img src="https://segmentfault.com/img/bVcTmOY" alt="img"></p><p>æ­¤å¤„ æˆ‘ä»¬éœ€è¦æ‰“å¼€é¡¹ç›®çš„ç›®å½• æ‰¾åˆ° node_modules ä¸‹çš„ electron ã€‚ åˆ é™¤ è¿™ä¸ªæ–‡ä»¶ä»¥å é‡æ–°ä½¿ç”¨ cnpm install</p><p><img src="https://segmentfault.com/img/bVcTmOZ" alt="img"></p><p>è‡³æ­¤ã€‚ electron åº”ç”¨ å·²ç»æ­å»ºå®Œæˆã€‚ æˆ‘ä»¬ä½¿ç”¨ npm run electron:serve è¿›è¡Œå¯åŠ¨é¡¹ç›® ( windows ä¸ imac ä¸€æ · )</p><p><img src="https://segmentfault.com/img/bVcTmO0" alt="img"></p><p>è™½ç„¶ä½†æ˜¯æˆ‘å…¨ç¨‹æ²¡æœ‰æŠ¥é”™</p><h2 id="é¡¹ç›®ä¿®æ”¹"><a href="#é¡¹ç›®ä¿®æ”¹" class="headerlink" title="é¡¹ç›®ä¿®æ”¹"></a>é¡¹ç›®ä¿®æ”¹</h2><blockquote><p>ç›¸æ¯”äº åŸºç¡€ vue é¡¹ç›® æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨ç›®å½•ä¸­ å¤šå‡ºä¸€ä¸ª background.js æ–‡ä»¶</p></blockquote><p><img src="https://segmentfault.com/img/bVcTmO1" alt="img"></p><blockquote><p>æ­¤å¤„å¯ä»¥ é…ç½® electron åº”ç”¨çš„ä¸€äº›è®¾ç½®ã€‚ å¦‚çª—å£å¤§å° ã€ æ˜¯å¦å¯ä»¥ç¼©æ”¾ã€æ˜¯å¦å¯ä»¥ç§»åŠ¨çª—å£ç­‰ç­‰</p></blockquote><p><img src="https://segmentfault.com/img/bVcTmO2" alt="img"></p><p>æ³¨æ„ï¼šæ‰“å¼€å’Œ å…³é—­ å¼€å‘è€…å·¥å…· è¯·ç‚¹å‡»ã€‚ æ“ä½œæ  &gt; view &gt; Toggle Developer tools</p><h2 id="æ‰“åŒ…-electron-åº”ç”¨"><a href="#æ‰“åŒ…-electron-åº”ç”¨" class="headerlink" title="æ‰“åŒ… electron åº”ç”¨"></a>æ‰“åŒ… electron åº”ç”¨</h2><blockquote><p>æ‰“åŒ…åº”ç”¨ ä½¿ç”¨ npm run electron:build è¿›è¡Œæ‰“åŒ… ï¼ˆ imac ç³»ç»Ÿ å’Œ windowsç³»ç»Ÿ ä¸€æ ·ä½¿ç”¨è¿™ä¸ª ï¼‰</p></blockquote><blockquote><p>æ­¤å¤„ ä»¥ iMac ä¸ºä¾‹ ï¼ˆ ä¸‹é¢ä¼šæœ‰ windows è§£å†³æ–¹æ¡ˆ ï¼‰</p></blockquote><p><img src="https://segmentfault.com/img/bVcTmO3" alt="img"></p><blockquote><p>å½“æˆ‘ä»¬çœ‹åˆ°ã€‚ Build complete ! æ—¶ å°±è¯´æ˜ æ‰“åŒ…æˆåŠŸ å¯ä»¥æŸ¥çœ‹ dist_electron &#x2F; mac é‡Œé¢å°±æ˜¯æ‰“åŒ…å¥½çš„åº”ç”¨ ï¼ˆ è‹¹æœç³»ç»Ÿ ï¼‰</p></blockquote><p><strong>windows</strong> <strong>è§£å†³æ–¹æ¡ˆ</strong></p><ul><li>æ‰“åŒ… windows åº”ç”¨æ—¶ æˆ‘ä»¬éœ€è¦å°† æ•´ä¸ªé¡¹ç›®çš„æºç  ä¸Šä¼ åˆ° windows ç”µè„‘ä¸Š</li><li>ä¸Šä¼ åˆ° windows ç”µè„‘ä¸Šå åŒæ ·éœ€è¦å®‰è£… cnpm ä¸ç„¶ electron æ˜¯å®‰è£…ä¸ä¸Šçš„</li><li>æ‰“å¼€é¡¹ç›®ç›®å½• åˆ é™¤æ‰ node_modules é‡æ–° cnpm install</li><li>å¦‚æœè¿˜æ˜¯æ— æ³•æ‰“åŒ… åˆ é™¤æ‰ node_modules &#x2F; electron ç›®å½• é‡æ–° cnpm install</li><li>ç„¶åè¿è¡Œ npm run electron:build è¿›è¡Œæ‰“åŒ…</li></ul><p>Electron å®˜ç½‘åœ°å€ ç‚¹æ­¤ : <a href="https://link.segmentfault.com/?enc=0EsiAJHQlJ2ASTmG9k0oXA==.z3eI2kK0HHhzkv5JVflgG9gV1bZFKLJ203ZEWxW/xPg=">electron å®˜æ–¹åœ°å€</a></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> electron </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Uniappé¡¹ç›®æ¨¡æ¿</title>
      <link href="/2024/09/29/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/Uniapp%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF/"/>
      <url>/2024/09/29/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/Uniapp%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h3 id="é¡¹ç›®ç›®å½•æ¶æ„ï¼š"><a href="#é¡¹ç›®ç›®å½•æ¶æ„ï¼š" class="headerlink" title="é¡¹ç›®ç›®å½•æ¶æ„ï¼š"></a>é¡¹ç›®ç›®å½•æ¶æ„ï¼š</h3><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240929112415.png"></p><h3 id="request-js"><a href="#request-js" class="headerlink" title="request.js"></a>request.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//GETè¯·æ±‚</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">url, data = &#123;&#125;, header = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;http://127.0.0.1:8601&quot;</span>+url, data, header);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//POSTè¯·æ±‚</span></span><br><span class="line">  <span class="title function_">post</span>(<span class="params">url, data = &#123;&#125;, header = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&quot;http://127.0.0.1:8601&quot;</span>+url, data, header);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å°è£…uni.request</span></span><br><span class="line">  <span class="title function_">request</span>(<span class="params">method, url, data, header</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      uni.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: url,</span><br><span class="line">        <span class="attr">method</span>: method,</span><br><span class="line">        <span class="attr">data</span>: data,</span><br><span class="line">        <span class="attr">header</span>: header,</span><br><span class="line">        <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// è¿™é‡Œå¯ä»¥å¯¹å“åº”ç»“æœè¿›è¡Œé¢„å¤„ç†</span></span><br><span class="line">          <span class="keyword">if</span> (res.<span class="property">statusCode</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(res.<span class="property">data</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µå¤„ç†é”™è¯¯</span></span><br><span class="line">            <span class="title function_">reject</span>(res);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// è¿™é‡Œå¤„ç†è¯·æ±‚å¤±è´¥</span></span><br><span class="line">          <span class="title function_">reject</span>(err);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸‹httpçš„é“¾æ¥å°±è¡Œï¼Œè¿™æ˜¯å‘åç«¯å‘é€è¯·æ±‚çš„å°è£…</p><h4 id="ä½¿ç”¨å°è£…ç±»ä¾‹å­"><a href="#ä½¿ç”¨å°è£…ç±»ä¾‹å­" class="headerlink" title="ä½¿ç”¨å°è£…ç±»ä¾‹å­"></a><strong>ä½¿ç”¨å°è£…ç±»ä¾‹å­</strong></h4><ul><li>GETï¼ˆåç«¯ä½¿ç”¨@RequestParamæ¥æ”¶ï¼‰ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="title function_">get</span>(<span class="string">&#x27;/seat/getList?hall=&#x27;</span>+hall).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">list.<span class="property">value</span> = res.<span class="property">data</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>GET(åç«¯ä½¿ç”¨@PathVariableæ¥æ”¶):</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">request.<span class="title function_">get</span>(<span class="string">&#x27;/seat/getList/&#x27;</span>+hall).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line">list.<span class="property">value</span> = res.<span class="property">data</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>POSTï¼ˆåç«¯ä½¿ç”¨@RequestBodyæ¥æ”¶ï¼‰ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> form = <span class="title function_">ref</span>(&#123;</span><br><span class="line"><span class="string">&quot;line&quot;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="string">&quot;vertical&quot;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="string">&quot;hall&quot;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">submit</span>(<span class="params"></span>)&#123;</span><br><span class="line">request.<span class="title function_">post</span>(<span class="string">&#x27;/seat/addHall&#x27;</span>,form.<span class="property">value</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(res === <span class="string">&quot;ok&quot;</span>)&#123;</span><br><span class="line">toast.<span class="title function_">show</span>(<span class="string">&#x27;æ·»åŠ æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">toast.<span class="title function_">show</span>(<span class="string">&#x27;æ·»åŠ å¤±è´¥ï¼Œæˆ–è®¸å·²ç»æœ‰é‡å¤æ•°æ®äº†?&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vue-config-js"><a href="#vue-config-js" class="headerlink" title="vue.config.js"></a>vue.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// é…ç½®è·¯å¾„åˆ«å</span></span><br><span class="line">    <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">        <span class="attr">devServer</span>: &#123;</span><br><span class="line">            <span class="comment">// è°ƒè¯•æ—¶å…è®¸å†…ç½‘ç©¿é€ï¼Œè®©å¤–ç½‘çš„äººè®¿é—®åˆ°æœ¬åœ°è°ƒè¯•çš„H5é¡µé¢</span></span><br><span class="line">            <span class="attr">disableHostCheck</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// productionSourceMap: false,</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// #ifndef VUE3</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./uni.promisify.adaptor&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"><span class="title class_">App</span>.<span class="property">mpType</span> = <span class="string">&#x27;app&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  ...<span class="title class_">App</span></span><br><span class="line">&#125;)</span><br><span class="line">app.$mount()</span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// #ifdef VUE3</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSSRApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="title function_">createSSRApp</span>(<span class="title class_">App</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    app</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// #endif</span></span><br></pre></td></tr></table></figure><p>å°±æ˜¯HBuilderé»˜è®¤åˆ›å»ºçš„</p><h3 id="pages-json"><a href="#pages-json" class="headerlink" title="pages.json"></a>pages.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;easycom&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;autoscan&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;custom&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;^wd-(.*)&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wot-design-uni/components/wd-$1/wd-$1.vue&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">//pagesæ•°ç»„ä¸­ç¬¬ä¸€é¡¹è¡¨ç¤ºåº”ç”¨å¯åŠ¨é¡µï¼Œå‚è€ƒï¼šhttps://uniapp.dcloud.io/collocation/pages</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/test&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app2&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;globalStyle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;uniIdRouter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª easycomæ˜¯å¼•å…¥çš„ä¸€ä¸ªç»„ä»¶åº“ï¼š<a href="https://wot-design-uni.cn/">Wot Design Uni | ä¸€ä¸ªåŸºäºVue3+TSå¼€å‘çš„uni-appç»„ä»¶åº“ï¼Œæä¾›70+é«˜è´¨é‡ç»„ä»¶ï¼Œæ”¯æŒæš—é»‘æ¨¡å¼ã€å›½é™…åŒ–å’Œè‡ªå®šä¹‰ä¸»é¢˜ã€‚ (wot-design-uni.cn)</a></p><p>å…¶ä»–çš„å°±æ˜¯é¡µé¢è·¯ç”±äº†,è·¯ç”±è·³è½¬ï¼šuni.navigateTo({url:â€&#x2F;pages&#x2F;index&#x2F;testâ€})</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ä¸€èˆ¬ä¼švue3å°±ä¼šuniappäº†ï¼Œåæ­£æˆ‘ä¸€å¤©å°±å¯ä»¥ä¸Šæ‰‹å†™é¡¹ç›®äº†.</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uniapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ¸¸æˆå›¾åº“</title>
      <link href="/2024/09/05/%E6%88%91%E7%9A%84%E6%B8%B8%E6%88%8F%E5%9B%BE%E5%BA%93/"/>
      <url>/2024/09/05/%E6%88%91%E7%9A%84%E6%B8%B8%E6%88%8F%E5%9B%BE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>é—®å°±æ˜¯å›¾åºŠ</p><h2 id="é»‘ç¥è¯æ‚Ÿç©º"><a href="#é»‘ç¥è¯æ‚Ÿç©º" class="headerlink" title="é»‘ç¥è¯æ‚Ÿç©º"></a>é»‘ç¥è¯æ‚Ÿç©º</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240831-004739.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240903-230453.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240904-033427.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240904-034003.png"></p><p>å°±ä½ ä¸€å‘¨ç›®çš„æ—¶å€™æ¬ºè´Ÿæˆ‘å•Š? !</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/1.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240830-181651.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240831-001928.png"></p><hr><h2 id="åŸç¥"><a href="#åŸç¥" class="headerlink" title="åŸç¥"></a>åŸç¥</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20250721-044439.png"></p><p><strong>xpå¤§é‰´èµ</strong></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20250619-132421.png"></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240905-003507.png"></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240903-035128.png"></p><p>RTX ON!</p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240903-032703.png"></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240904-225615.png"></p><p>â€‹<strong><u>æ±Ÿå—å¥½</u> <u>é£æ™¯æ—§æ›¾è°™</u> ä¸‹æ¬¡å‡ºå»è¿œæ–¹æ—…æ¸¸å°±å»æ±Ÿæµ™ä¸€å¸¦çš„æ±Ÿå—å¤é•‡å§</strong></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240914171350.png"></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20240904-230038.png"></p><p><strong>ç¾é£Ÿ</strong></p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240928174051.png"></p><hr><h2 id="MineCraft"><a href="#MineCraft" class="headerlink" title="MineCraft"></a>MineCraft</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/QQ20250110-172603.png"></p><p>å¹´æ¦œæ€è¿›å…¨æœç¬¬20å</p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20250217231130.png"></p><p>éš¾å¿˜çš„å›å¿†</p><hr><h2 id="èµ›åšæœ‹å…‹2077"><a href="#èµ›åšæœ‹å…‹2077" class="headerlink" title="èµ›åšæœ‹å…‹2077"></a>èµ›åšæœ‹å…‹2077</h2><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/photomode_27092024_134948.png"></p><p><strong>RTX ON!</strong></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/photomode_27092024_115438.png"></p><p>å¼ºè€…çš„å­¤ç‹¬</p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/photomode_11092024_014706.png"></p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/photomode_11092024_014857.png"></p><p>æ™šä¸Šå¥½ å¤œä¹‹åŸ</p><hr><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/photomode_11092024_003638.png"></p><hr><h2 id="AEä½œå“"><a href="#AEä½œå“" class="headerlink" title="AEä½œå“"></a>AEä½œå“</h2><p>(tips: è§†é¢‘æ’­æ”¾ä¸äº†å³é”®é€‰æ‹©æ˜¾ç¤ºæ‰€æœ‰æ§ä»¶)</p><video src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/%E5%9B%BE%E5%B1%82%202-girl_ears_hood_1079406_2560x1440.mp4" /><p>&lt;video src&#x3D;â€<a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/girl_dress_jewelry_1168576_2048x1152.mp4">https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/girl_dress_jewelry_1168576_2048x1152.mp4</a>â€œ &#x2F; &gt;</p><hr><h2 id="Blenderç»ƒä¹ "><a href="#Blenderç»ƒä¹ " class="headerlink" title="Blenderç»ƒä¹ "></a>Blenderç»ƒä¹ </h2><p>(tips: è§†é¢‘æ’­æ”¾ä¸äº†å³é”®é€‰æ‹©æ˜¾ç¤ºæ‰€æœ‰æ§ä»¶)</p><video src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/0001-0260.mkv" /><video src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/0001-0480.mkv" />]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¨±ä¹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024.9æœˆæœ€æ–°ç™¾åº¦ç½‘ç›˜ä¸é™é€Ÿä¸‹è½½æ•™ç¨‹</title>
      <link href="/2024/08/31/2024-9%E6%9C%88%E6%9C%80%E6%96%B0%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E4%B8%8D%E9%99%90%E9%80%9F%E4%B8%8B%E8%BD%BD%E6%95%99%E7%A8%8B/"/>
      <url>/2024/08/31/2024-9%E6%9C%88%E6%9C%80%E6%96%B0%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E4%B8%8D%E9%99%90%E9%80%9F%E4%B8%8B%E8%BD%BD%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>2024.9æœˆæœ€æ–°ç™¾åº¦ç½‘ç›˜ç ´è§£</p><p>ä½¿ç”¨motrixè½¯ä»¶è¾…åŠ©ï¼Œè½¯ä»¶ä¸‹è½½ï¼š</p><p>å®˜ç½‘ï¼š<a href="https://motrix.app/">Motrix</a></p><p>123ç½‘ç›˜ä¸‹è½½ï¼š<a href="https://www.123pan.com/s/3JBrVv-rW70A.html">Motrix-Setup-1.8.19.exeå®˜æ–¹ç‰ˆä¸‹è½½ä¸¨æœ€æ–°ç‰ˆä¸‹è½½ä¸¨ç»¿è‰²ç‰ˆä¸‹è½½ä¸¨APPä¸‹è½½-123äº‘ç›˜ (123pan.com)</a></p><p>ä¸‹è½½å®‰è£…è¿›å…¥è®¾ç½®é€‰æ‹©è¿›é˜¶è®¾ç½®ï¼Œå°†RPCç›‘å¬ç«¯å£æ”¹ä¸º6800ï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240831045707.png"></p><p>è¿›å…¥ç½‘ç«™ï¼š<a href="https://jx.os3.top/user">å‰å°è§£æä¸­å¿ƒ | ç½‘ç›˜è§£æ-å…¬ç›Šç«™ç‚¹ (os3.top)</a></p><p>ç²˜è´´åˆ†äº«çš„é“¾æ¥å’Œå¯†ç ï¼Œç„¶åç‚¹å‡» è·å–&#x2F;åˆ·æ–°åˆ—è¡¨ï¼Œä¸‹æ–¹é€‰æ‹©ä½ è¦ä¸‹è½½çš„æ–‡ä»¶ï¼Œç‚¹å‡»æ‰¹é‡è§£æï¼Œç„¶åç‚¹å‡»å‘é€Aria2å°±å¯ä»¥ä¸é™é€Ÿä¸‹è½½äº†ã€‚</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240831050041.png"></p><h2 id="åœ¨çº¿æ’­æ”¾æ— æŸè§†é¢‘"><a href="#åœ¨çº¿æ’­æ”¾æ— æŸè§†é¢‘" class="headerlink" title="åœ¨çº¿æ’­æ”¾æ— æŸè§†é¢‘"></a>åœ¨çº¿æ’­æ”¾æ— æŸè§†é¢‘</h2><p>ç™¾åº¦ç½‘ç›˜æœ€æ–°åœ¨çº¿æ’­æ”¾æ— æŸç”»è´¨è§†é¢‘appä¸‹è½½ï¼š</p><p><a href="https://www.123pan.com/s/ra8CTd-0fEl?%E6%8F%90%E5%8F%96%E7%A0%81:8RNp">https://www.123pan.com/s/ra8CTd-0fEl?æå–ç :8RNp</a></p><p>ç”µè„‘çš„è¯å°±è‡ªå·±å®‰ä¸ªæ¨¡æ‹Ÿå™¨</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024ä¼ä¸šçº§é¡¹ç›®ã€Šäº‘å²šåˆ°å®¶ã€‹å¼€å‘æ—¥å¿—</title>
      <link href="/2024/08/12/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/2024%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%A1%B9%E7%9B%AE%E3%80%8A%E4%BA%91%E5%B2%9A%E5%88%B0%E5%AE%B6%E3%80%8B%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/"/>
      <url>/2024/08/12/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/2024%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%A1%B9%E7%9B%AE%E3%80%8A%E4%BA%91%E5%B2%9A%E5%88%B0%E5%AE%B6%E3%80%8B%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<ul><li><p>2024.8.11æˆåŠŸæ­å»ºé¡¹ç›®å¹¶å®Œæˆç¬¬ä¸€ä¸ªæ¥å£åŒºåŸŸç®¡ç†</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240812051015.png"></p></li></ul><p>å°ç»“ï¼šåˆæ˜¯ä¸€ä¸ªå¾®æœåŠ¡é¡¹ç›®ï¼Œè¿™ä¸‹ç†Ÿæ‚‰äº†å¾®æœåŠ¡çš„æµç¨‹ï¼Œä¹‹å‰æ­å»ºå­¦æˆåœ¨çº¿é¡¹ç›®çš„æ—¶å€™æ­äº†å¥½ä¹…ï¼Œç°åœ¨æœ‰ç»éªŒäº†ä¹Ÿæ˜¯1ä¸ªå°æ—¶å°±æå®šäº†ã€‚ä¸å•ä½“æ¶æ„å¤§è‡´ä¸åŒçš„å°±æ˜¯æŠŠä¸€ä¸ªé¡¹ç›®æ‹†åˆ†æˆå¤šä¸ªæ¨¡å—ç®¡ç†ï¼Œå‘æˆ‘è¿™é‡Œçš„æ¨¡å—å°±æœ‰å¥½ä¸ªï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20240812051338.png"></p><p>å¾®æœåŠ¡çš„ä¸€äº›ç»„ä»¶å¦‚nacoså°±æ˜¯ä¸€ä¸ªå…¬å…±çš„é…ç½®ä¿¡æ¯ç®¡ç†çš„ä¸œä¸œï¼Œåœ¨ä¼ä¸šåœ¨ä¸€èˆ¬åªæœ‰leaderæ‰æœ‰ç®¡ç†æƒé™ï¼Œæ™®é€šæ‰“å·¥äººå°±åªèƒ½è¯»å–é…ç½®äº†ï¼Œmysql,rediså•¥çš„ä¹Ÿéƒ½æ”¾åœ¨docker å®¹å™¨é‡Œï¼Œä¸è¿‡ä¼ä¸šçš„è¯ä¼°è®¡äº‘æœåŠ¡å™¨ç”¨å¾—å¤šä¸€äº›å§ã€‚è¿˜æœ‰å°±æ˜¯ç½‘å…³ç»Ÿä¸€ä»£ç†å…¶ä»–å¾®æœåŠ¡ï¼Œä¸é”™<del>ä»£ç çš„è¯å‰é¢æ¯”è¾ƒç®€å•å°±æ™®é€šçš„å¢åˆ æ”¹æŸ¥ï¼Œæ²¡å•¥æŠ€æœ¯å«é‡ã€‚å¬è¯´åé¢çš„æŠ¢è®¢å•æ¨¡å—æœ‰ç‚¹å„¿éš¾</del></p><blockquote><p><strong>é˜²æ­¢å¿˜æ‰å¯åŠ¨äº‹é¡¹</strong>ï¼šé¡¹ç›®å¯åŠ¨å…ˆå¯åŠ¨è™šæ‹Ÿæœºï¼Œè´¦å·å¯†ç ï¼šroot&#x2F;centosï¼Œè¿›å»å</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">start</span> docker </span><br><span class="line">docker <span class="built_in">start</span> mysql</span><br><span class="line">docker <span class="built_in">start</span> redis</span><br><span class="line">docker restart nacos</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ç½‘å…³é¡¹ç›®</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‘å²šåˆ°å®¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ•…äº‹ï¼ˆå¤§äºŒä¸‹ï¼‰</title>
      <link href="/2024/08/02/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%BA%8C%E4%B8%8B%EF%BC%89/"/>
      <url>/2024/08/02/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%BA%8C%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-hh.oss-cn-hangzhou.aliyuncs.com/undefinedimage-20240802064757078.png" alt="image-20240802064757078"></p><p>åˆæ˜¯å†²å†²ä¸€å­¦æœŸï¼Œæƒ¯ä¾‹åˆæ¥äº†ï¼Œåˆæ˜¯åœ¨ç«è½¦ä¸Šå†™ä¸€å­¦æœŸæ€»ç»“ã€‚</p><p>è¿™å­¦æœŸçœŸçš„è¿‡å¾—å¾ˆå¿«ï¼Œæ„Ÿè§‰ä¸Šä¸€ç§’è¿˜åœ¨çˆ¬æ­¦åŠŸå±±ï¼Œè¿˜åœ¨é•¿æ²™çœ‹æ¯›çˆ·çˆ·ï¼Œè¿˜åœ¨å’Œå¥³æœ‹å‹çˆ¬ç¼™äº‘å±±â€¦.. å¯èƒ½æ˜¯è¿™å­¦æœŸä»»åŠ¡æ¯”è¾ƒé‡å§ã€‚å¯’å‡AIGCç ´å£ç¤¾çš„æœ‹å‹å‘äº†æˆ‘ä»½gptçš„æ¨¡æ¿ç„¶åæˆ‘å°±æ„Ÿå…´è¶£æ”¹äº†èµ·æ¥ï¼Œä¼˜åŒ–å¼„æˆäº†è‡ªå·±çš„gpt, æˆ‘ä»¬ç ´å£ç¤¾ä¹Ÿåœ¨åæ¥æœ‰äº†è‡ªå·±çš„å°ç¨‹åºå’Œå…¬å¸ä¼ä¸šï¼Œæ‰“ç®—æš‘å‡é‡æ“æ—§ä¸šæŠŠå®ƒå¼„èµ·æ¥ï¼Œæ­ä¸ªå®˜ç½‘ä»€ä¹ˆçš„ã€‚åæ¥æŠ¥åäº†å…¨å›½å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›ï¼Œä½œå“å°±æ˜¯é‚£ä¸ªgptï¼Œè‡ªå·±åŠ äº†å‡ ä¸ªæ¨¡å—æ²¡æƒ³åˆ°è¿˜è¿›äº†çœäºŒå…¥äº†å›½èµ›ï¼Œè™½ç„¶åé¢å› ä¸ºç§ç§åŸå› é½å›½èµ›äº†ï¼Œè‡³å°‘è¿˜æ˜¯å¯ä»¥è‚¯å®šæˆ‘çš„æ°´å¹³çš„(å®³å¾—æˆ‘å¤©å¤©æ²¡äº‹çš„æ—¶å€™å°±å†™è¿™ç ´é€¼ç©æ„å„¿æœ€ååˆä¸æ‰“å›½èµ›äº†.Æª(Ë˜âŒ£Ë˜)Êƒ)ï¼Œè‡ªå·±è¿˜æ˜¯å‡­æœ¬äº‹å†™äº†å¾ˆå¤šä¸œè¥¿çš„ï¼Œæœ€è¿‘åˆå’Œæœ‹å‹æŠ¥åäº†é¾™æ™ºæ¯ï¼Œæ˜¯ä¸ªaiç®—æ³•æ¯”èµ›å¯¹æˆ‘æ¥è¯´è¿˜æ˜¯æœ‰ç‚¹å„¿éš¾åº¦çš„ï¼ŒæœŸæœ«çš„æ—¶å€™æˆ‘ä¸€ä¸ªäººä¹Ÿæ˜¯å…»æ´»åå‡ ä¸ªäººï¼ŒæŠŠæˆ‘è®¾è®¡åˆ†äº«ç»™åˆ«äººæˆ–å¸®åšç‚¹å„¿å†…å®¹ã€‚ä¸è¿‡è¿™å­¦æœŸæ–°ä¸œè¥¿å­¦çš„å¥½åƒå¾ˆå°‘ï¼Œå¯èƒ½æ˜¯ä¸çŸ¥é“å­¦å•¥äº†å§ä¸€ç›´éƒ½åœ¨å®æ“äº†ã€‚æš‘å‡æƒ³æ‰¾ä¸ªå®ä¹ ç»“æœä¸€çœ‹å…¨æ˜¯éœ€è¦å·¥ä½œç»éªŒï¼Œè¦ä¸å°±æ˜¯åº”å±Šç”Ÿè¦æ±‚ï¼Œæ‰€ä»¥æŠ€æœ¯å†å¥½åˆ«äººéƒ½ä¸ä¼šçœ‹ä½ çš„ã€‚è¿˜æ˜¯è€è€å®å®å»å‘å±•æˆ‘çš„å§ã€‚</p><p>æš‘å‡ä¹°äº†æ–°ç”µè„‘ç»ˆäºå¯ä»¥æ£é¼“Aiäº†.        â€“2024.8.2</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€æ–°AIä»£ç åŠ©æ‰‹é€šä¹‰çµç ï¼Œä¸‡äº¿æ•°æ®åœ¨çº¿æœç´¢è§£è¯»ï¼Œæ‹³æ‰“CodeGeeX</title>
      <link href="/2024/07/25/Ai%E7%A7%91%E6%8A%80/%E6%9C%80%E6%96%B0AI%E4%BB%A3%E7%A0%81%E5%8A%A9%E6%89%8B%E9%80%9A%E4%B9%89%E7%81%B5%E7%A0%81%EF%BC%8C%E4%B8%87%E4%BA%BF%E6%95%B0%E6%8D%AE%E5%9C%A8%E7%BA%BF%E6%90%9C%E7%B4%A2%E8%A7%A3%E8%AF%BB%EF%BC%8C%E6%8B%B3%E6%89%93CodeGeeX/"/>
      <url>/2024/07/25/Ai%E7%A7%91%E6%8A%80/%E6%9C%80%E6%96%B0AI%E4%BB%A3%E7%A0%81%E5%8A%A9%E6%89%8B%E9%80%9A%E4%B9%89%E7%81%B5%E7%A0%81%EF%BC%8C%E4%B8%87%E4%BA%BF%E6%95%B0%E6%8D%AE%E5%9C%A8%E7%BA%BF%E6%90%9C%E7%B4%A2%E8%A7%A3%E8%AF%BB%EF%BC%8C%E6%8B%B3%E6%89%93CodeGeeX/</url>
      
        <content type="html"><![CDATA[<p>æœ€æ–°çš„Aiä»£ç æ³¨é‡Šå·¥å…·â€œé€šä¹‰çµç â€ä¹Ÿæ˜¯å‘å¸ƒäº†ï¼Œå°ä½•ä¹Ÿæ¥è¹­è¹­çƒ­åº¦~</p><p>å®˜ç½‘ï¼š<a href="https://tongyi.aliyun.com/lingma">é€šä¹‰çµç _æ™ºèƒ½ç¼–ç åŠ©æ‰‹_AIç¼–ç¨‹-é˜¿é‡Œäº‘ (aliyun.com)</a></p><p>åº”ç”¨æˆ–æ’ä»¶å¸‚åœºé‡Œæœç´¢é€šä¹‰çµç å°±è¡Œ</p><blockquote><h3 id="åœ¨-Visual-Studio-Code-ä¸­å®‰è£…é€šä¹‰çµç "><a href="#åœ¨-Visual-Studio-Code-ä¸­å®‰è£…é€šä¹‰çµç " class="headerlink" title="åœ¨ Visual Studio Code ä¸­å®‰è£…é€šä¹‰çµç "></a><img src="https://img.alicdn.com/imgextra/i4/O1CN012S9NwM1OqkmCghDCB_!!6000000001757-2-tps-96-93.png" alt="img" style="zoom:25%;" />åœ¨ Visual Studio Code ä¸­å®‰è£…é€šä¹‰çµç </h3><p>ç›´æ¥å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>å”¤èµ· Visual Studio Code æ’ä»¶å¸‚åœºç›´æ¥å®‰è£…ï¼Œå®‰è£…åè¯·é‡å¯ IDEï¼Œå³å¯å¼€å¯æ™ºèƒ½ç¼–ç ä¹‹æ—…ã€‚</p><p>ç«‹å³å®‰è£…</p><p>æ‰‹åŠ¨å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>æ­¥éª¤1</p><p>å·²å®‰è£… Visual Studio Code çš„æƒ…å†µä¸‹ï¼Œåœ¨ä¾§è¾¹å¯¼èˆªä¸Šç‚¹å‡»æ‰©å±•ã€‚</p><p><img src="https://img.alicdn.com/imgextra/i3/O1CN01aP4Wo823ZiHsreAM7_!!6000000007270-2-tps-1380-592.png" alt="img"></p><p>æ­¥éª¤2</p><p>æœç´¢é€šä¹‰çµç ï¼ˆTONGYI Lingmaï¼‰ï¼Œæ‰¾åˆ°é€šä¹‰çµç åç‚¹å‡»å®‰è£…ã€‚</p><p><img src="https://img.alicdn.com/imgextra/i3/O1CN01WnQgRP1ZMUQ0hDhCN_!!6000000003180-2-tps-1260-552.png" alt="img"></p><p>æ­¥éª¤3</p><p>é‡å¯ Visual Studio Codeï¼Œé‡å¯æˆåŠŸåç™»å½•é˜¿é‡Œäº‘è´¦å·ï¼Œå³åˆ»å¼€å¯æ™ºèƒ½ç¼–ç ä¹‹æ—…ã€‚</p></blockquote><h3 id="åœ¨-JetBrains-IDEs-ä¸­å®‰è£…é€šä¹‰çµç -ä»¥-IntelliJ-IDEA-ä¸ºä¾‹"><a href="#åœ¨-JetBrains-IDEs-ä¸­å®‰è£…é€šä¹‰çµç -ä»¥-IntelliJ-IDEA-ä¸ºä¾‹" class="headerlink" title="åœ¨ JetBrains IDEs ä¸­å®‰è£…é€šä¹‰çµç  ä»¥ IntelliJ IDEA ä¸ºä¾‹"></a><img src="https://img.alicdn.com/imgextra/i3/O1CN01Q9RGID1V5lS9mq1Gf_!!6000000002602-2-tps-96-96.png" alt="img" style="zoom:25%;" />åœ¨ JetBrains IDEs ä¸­å®‰è£…é€šä¹‰çµç  ä»¥ IntelliJ IDEA ä¸ºä¾‹</h3><ul><li>æ­¥éª¤1</li></ul><p>å·²å®‰è£… IntelliJ IDEA çš„æƒ…å†µä¸‹ï¼š</p><p><img src="https://img.alicdn.com/imgextra/i2/O1CN01xaMBv61nVYqMSMUN5_!!6000000005095-2-tps-52-62.png" alt="img">IntelliJ IDEA èœå•ä¸‹ç‚¹å‡»è®¾ç½®</p><p><img src="https://img.alicdn.com/imgextra/i4/O1CN01yhRyhg1yXoZAp6U6w_!!6000000006589-2-tps-52-56.png" alt="img">æ–‡ä»¶èœå•ä¸‹ç‚¹å‡»è®¾ç½®</p><p><img src="https://img.alicdn.com/imgextra/i3/O1CN01oULdGZ1prCnL5Jk02_!!6000000005413-2-tps-1324-534.png" alt="img"></p><ul><li>æ­¥éª¤2</li></ul><p>æ–¹å¼ä¸€ï¼šä»æ’ä»¶å¸‚åœºå®‰è£…ç‚¹å‡»å¯¼èˆª-æ’ä»¶ï¼Œæ‰“å¼€åº”ç”¨å¸‚åœºï¼Œæœç´¢é€šä¹‰çµç ï¼ˆTONGYI Lingmaï¼‰ï¼Œæ‰¾åˆ°é€šä¹‰çµç åç‚¹å‡»å®‰è£…ã€‚</p><p><img src="https://img.alicdn.com/imgextra/i2/O1CN01GFrBe11WrE9UI0scW_!!6000000002841-2-tps-1260-516.png" alt="img"></p><p>æ–¹å¼äºŒï¼šä¸‹è½½ç¦»çº¿åŒ…å®‰è£…1. ä¸‹è½½ JetBrains IDEs çš„ zip å®‰è£…åŒ…ï¼›<img src="https://img.alicdn.com/imgextra/i3/O1CN01ial9Jy1WGaQj8wGPo_!!6000000002761-2-tps-80-80.png" alt="img" style="zoom:25%;" />ä¸‹è½½ç¦»çº¿å®‰è£…åŒ…<br>\2. ç‚¹å‡»å¯¼èˆª-æ’ä»¶ï¼Œç‚¹å‡»è®¾ç½®å›¾æ ‡ï¼Œä¸‹æ‹‰èœå•ä¸­å•å‡»ä»æœ¬åœ°å®‰è£…æ’ä»¶ï¼Œ<br>  é€‰æ‹©ä¸‹è½½çš„ zip æ–‡ä»¶åå®‰è£…ã€‚</p><p><img src="https://img.alicdn.com/imgextra/i4/O1CN01u7vhds1STAqr9ztZb_!!6000000002247-0-tps-1260-514.jpg" alt="img"></p><ul><li>æ­¥éª¤3</li></ul><p>é‡å¯ IntelliJ IDEAï¼Œé‡å¯æˆåŠŸåç™»å½•é˜¿é‡Œäº‘è´¦å·ï¼Œå³åˆ»å¼€å¯æ™ºèƒ½ç¼–ç ä¹‹æ—…ã€‚</p><h3 id="æŠ€å·§"><a href="#æŠ€å·§" class="headerlink" title="æŠ€å·§"></a>æŠ€å·§</h3><p>é€‰ä¸­ä¸€ä¸ªå•è¯æŒ‰ä½Ctrl+Shift+Så¯ä»¥å¿«é€ŸæŸ¥è¯¢è¯¥å•è¯çš„ç”¨æ³•</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/492bef6dcc3c2c6171e24d8371ed1f96.png"></p><p>â€‹                                                           </p><p>â€‹                                                                                                           </p><p>â€‹                                                                    </p><p>â€‹                                                                                                                                 </p>]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é˜¿é‡Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot+vue3é¡¹ç›®æ­å»ºæ—¶ç»å¸¸ç”¨åˆ°çš„ç±»</title>
      <link href="/2024/07/22/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/springboot-vue3%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E6%97%B6%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E7%B1%BB/"/>
      <url>/2024/07/22/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/springboot-vue3%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E6%97%B6%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<p>æ¨¡æ¿ä¸‹è½½ï¼š<a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/muban.zip">https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/muban.zip</a></p><h1 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h1><h3 id="Controllerå±‚æ³¨è§£"><a href="#Controllerå±‚æ³¨è§£" class="headerlink" title="Controllerå±‚æ³¨è§£"></a>Controllerå±‚æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin(origins = &#123;&quot;*&quot;, &quot;null&quot;&#125;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/emp&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br></pre></td></tr></table></figure><h3 id="Doç±»æ³¨è§£ä¾‹"><a href="#Doç±»æ³¨è§£ä¾‹" class="headerlink" title="Doç±»æ³¨è§£ä¾‹"></a>Doç±»æ³¨è§£ä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸»é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long user_id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long frequency;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Long isVip;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºæ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createdTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²å¤„ç†ç±»"><a href="#å­—ç¬¦ä¸²å¤„ç†ç±»" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†ç±»"></a>å­—ç¬¦ä¸²å¤„ç†ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.hepingan.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­—ç¬¦ä¸²å¤„ç†ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  <span class="doctag">@github</span> dulaiduwang003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">StringUtils</span> <span class="keyword">extends</span> <span class="title class_">org</span>.apache.commons.lang3.StringUtils &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isLegal</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isEmpty(str)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> !str.contains(<span class="string">&quot;|&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">notEmpty</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(str) &amp;&amp; str.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; String <span class="title function_">join</span><span class="params">(List&lt;T&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> join(list.toArray());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; String <span class="title function_">join</span><span class="params">(List&lt;T&gt; list, String separator)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> join(list.toArray(), separator);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Redisä¿¡æ¯ç±»"><a href="#Redisä¿¡æ¯ç±»" class="headerlink" title="Redisä¿¡æ¯ç±»"></a>Redisä¿¡æ¯ç±»</h3><p>è¦æ­é…ä¸‹é¢çš„Redisé…ç½®ç±»ä¸€èµ·ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.hepingan.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.dao.DataAccessException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.SessionCallback;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.ZSetOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * rediså·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  <span class="doctag">@github</span> dulaiduwang003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">getRedisTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> expire(key, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getExpire</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> redisTemplate.getExpire(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> timeout, <span class="keyword">final</span> TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.expire(key, timeout, unit);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">increment</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delKey</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.delete(key);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">delKeys</span><span class="params">(<span class="keyword">final</span> Collection&lt;String&gt; keys)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.delete(keys);</span><br><span class="line">        <span class="keyword">return</span> ret == <span class="literal">null</span> ? <span class="number">0</span> : ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setValueTimeout</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value, <span class="keyword">final</span> <span class="type">long</span> timeout)</span> &#123;</span><br><span class="line">        redisTemplate.opsForValue().set(key, value, timeout, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getValue</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasHashKey</span><span class="params">(<span class="keyword">final</span> String key, String hkey)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">ret</span> <span class="operator">=</span> redisTemplate.opsForHash().hasKey(key, hkey);</span><br><span class="line">        <span class="keyword">return</span> ret != <span class="literal">null</span> &amp;&amp; ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashPut</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().put(key, hKey, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hashPutAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Map&lt;String, Object&gt; values)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().putAll(key, values);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">hashGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> String hKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().get(key, hKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hashGetAll</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">hashMultiGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().multiGet(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hashExists</span><span class="params">(String key, String hashKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">hashDeleteKeys</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; hKeys)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().delete(key, hKeys);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">hashDelete</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... hashKey)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().delete(key, hashKey);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setDel</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">getSetAll</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetSetAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().add(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">zsetSetGetSource</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().score(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">zsetIncrementScore</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value, <span class="keyword">final</span> Double increment)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().incrementScore(key, value, increment);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">zsetSet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object values, <span class="keyword">final</span> Double source)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">Boolean</span> <span class="variable">add</span> <span class="operator">=</span> redisTemplate.opsForZSet().add(key, values, source);</span><br><span class="line">        <span class="keyword">return</span> add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; zsetReverseRangeWithScores(<span class="keyword">final</span> String key, <span class="keyword">final</span> Long start, <span class="keyword">final</span> Long end) &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().reverseRangeWithScores(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">zsetReverseRange</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Long start, <span class="keyword">final</span> Long end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForZSet().reverseRange(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">selfIncrease</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;Long&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Long <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> operations.opsForValue().increment(key);</span><br><span class="line">                operations.exec();</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">selfIncreaseSource</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;Double&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Double <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                <span class="type">Double</span> <span class="variable">count</span> <span class="operator">=</span> operations.opsForZSet().incrementScore(key, value, <span class="number">1</span>);</span><br><span class="line">                operations.exec();</span><br><span class="line">                <span class="keyword">return</span> count;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetDelAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Set&lt;ZSetOperations.TypedTuple&lt;Object&gt;&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">zsetDel</span><span class="params">(<span class="keyword">final</span> String key, Object values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForZSet().remove(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPush</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object value)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">doesItExist</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPushAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Collection&lt;Object&gt; values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">listPushAll</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> Object... values)</span> &#123;</span><br><span class="line">        <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForList().rightPushAll(key, values);</span><br><span class="line">        <span class="keyword">return</span> count == <span class="literal">null</span> ? <span class="number">0</span> : count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">listGet</span><span class="params">(<span class="keyword">final</span> String key, <span class="keyword">final</span> <span class="type">int</span> start, <span class="keyword">final</span> <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">keySize</span><span class="params">(<span class="keyword">final</span> String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Redisé…ç½®ç±»"><a href="#Redisé…ç½®ç±»" class="headerlink" title="Redisé…ç½®ç±»"></a>Redisé…ç½®ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.hepingan.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.deser.LocalDateTimeDeserializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateSerializer;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.datatype.jsr310.ser.LocalDateTimeSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.AutoConfigureBefore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.CacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.RedisSerializationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Rediså‚æ•°é…ç½®</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  <span class="doctag">@github</span> dulaiduwang003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="meta">@AutoConfigureBefore(RedisAutoConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Jackson2JsonRedisSerializer&lt;Object&gt; <span class="title function_">jackson2JsonRedisSerializer</span><span class="params">()</span> &#123;</span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Object&gt; serializer = <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>&lt;&gt;(Object.class);</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">om</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        om.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class="line">        om.registerModule(timeModule());</span><br><span class="line">        serializer.setObjectMapper(om);</span><br><span class="line">        <span class="keyword">return</span> serializer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> StringRedisSerializer <span class="title function_">stringRedisSerializer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(LettuceConnectionFactory lettuceConnectionFactory,</span></span><br><span class="line"><span class="params">                                                       Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer,</span></span><br><span class="line"><span class="params">                                                       StringRedisSerializer stringRedisSerializer)</span> &#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        template.setConnectionFactory(lettuceConnectionFactory);</span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisCacheConfiguration <span class="title function_">redisCacheConfiguration</span><span class="params">(Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer,</span></span><br><span class="line"><span class="params">                                                           RedisSerializer&lt;String&gt; redisSerializer)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .entryTtl(Duration.ofSeconds(<span class="number">3600</span> * <span class="number">24</span> * <span class="number">10</span>))</span><br><span class="line">                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))</span><br><span class="line">                .disableCachingNullValues();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CacheManager <span class="title function_">cacheManager</span><span class="params">(RedisConnectionFactory factory,</span></span><br><span class="line"><span class="params">                                     RedisSerializer&lt;String&gt; redisSerializer,</span></span><br><span class="line"><span class="params">                                     Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer,</span></span><br><span class="line"><span class="params">                                     RedisCacheConfiguration redisCacheConfiguration)</span> &#123;</span><br><span class="line">        <span class="type">RedisCacheManager</span> <span class="variable">cacheManager</span> <span class="operator">=</span> RedisCacheManager.builder(factory)</span><br><span class="line">                .cacheDefaults(redisCacheConfiguration)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JavaTimeModule <span class="title function_">timeModule</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">JavaTimeModule</span> <span class="variable">timeModule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JavaTimeModule</span>();</span><br><span class="line">        timeModule.addDeserializer(LocalDate.class,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LocalDateDeserializer</span>(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd&quot;</span>)));</span><br><span class="line">        timeModule.addDeserializer(LocalDateTime.class,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LocalDateTimeDeserializer</span>(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line">        timeModule.addSerializer(LocalDate.class,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LocalDateSerializer</span>(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd&quot;</span>)));</span><br><span class="line">        timeModule.addSerializer(LocalDateTime.class,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">LocalDateTimeSerializer</span>(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)));</span><br><span class="line">        <span class="keyword">return</span> timeModule;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Beanå¤„ç†ç±»"><a href="#Beanå¤„ç†ç±»" class="headerlink" title="Beanå¤„ç†ç±»"></a>Beanå¤„ç†ç±»</h3><p>(å¾ˆå°‘ç”¨)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.hepingan.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.serializer.SerializerFeature;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>  <span class="doctag">@github</span> dulaiduwang003</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">BeanUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S, T&gt; T <span class="title function_">copyClassProperTies</span><span class="params">(S source, Class&lt;T&gt; target)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> JSON.parseObject(JSON.toJSONString(source), target);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">copyArrayProperTies</span><span class="params">(Object source, Class&lt;T&gt; target)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> JSON.parseArray(JSON.toJSONString(source), target);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S, T&gt; T <span class="title function_">copyClassProperTiesWriteDate</span><span class="params">(S source, Class&lt;T&gt; target)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> JSON.parseObject(</span><br><span class="line">                JSONObject.toJSONStringWithDateFormat(source, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, SerializerFeature.WriteDateUseDateFormat), target</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Copy array proper ties write date list.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;    the type parameter</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source the source</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> target the target</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; List&lt;T&gt; <span class="title function_">copyArrayProperTiesWriteDate</span><span class="params">(Object source, Class&lt;T&gt; target)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> JSON.parseArray(</span><br><span class="line">                JSONObject.toJSONStringWithDateFormat(source, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, SerializerFeature.WriteDateUseDateFormat), target</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ymlé…ç½®"><a href="#ymlé…ç½®" class="headerlink" title="ymlé…ç½®"></a>ymlé…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">codec:</span></span><br><span class="line">    <span class="attr">max-in-memory-size:</span> <span class="number">1048576</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">max-file-size:</span> <span class="string">10240MB</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">10240MB</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">H_Java</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="comment"># redis??</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">lettuce:</span></span><br><span class="line">        <span class="attr">pool:</span></span><br><span class="line">          <span class="attr">max-active:</span> <span class="number">200</span></span><br><span class="line">          <span class="attr">max-wait:</span> <span class="string">-1ms</span></span><br><span class="line">          <span class="attr">max-idle:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">min-idle:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">database:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">&#x27;xxxxx&#x27;</span></span><br><span class="line">  <span class="comment"># mysql??</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/h?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;allowMultiQueries=true&amp;useSSL=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxx</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sa-token:</span></span><br><span class="line">  <span class="attr">token-name:</span> <span class="string">token</span></span><br><span class="line">  <span class="attr">active-timeout:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">is-concurrent:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">is-share:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">is-log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># token ?????????uuid?simple-uuid?random-32?random-64?random-128?tik?</span></span><br><span class="line">  <span class="attr">token-style:</span> <span class="string">uuid</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8601</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment">#    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">cache-enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">jdbc-type-for-null:</span> <span class="string">&#x27;null&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜¿é‡ŒOSS</span></span><br><span class="line"><span class="attr">ali-oss:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">&#x27;oss-cn-hangzhou.aliyuncs.com&#x27;</span></span><br><span class="line">  <span class="attr">accessKey:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">bucketName:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">domain:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="Resultå‰åç«¯è¿”å›ç±»"><a href="#Resultå‰åç«¯è¿”å›ç±»" class="headerlink" title="Resultå‰åç«¯è¿”å›ç±»"></a>Resultå‰åç«¯è¿”å›ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.hepingan.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;String, Object&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CODE_SUCCESS</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CODE_ERROR</span> <span class="operator">=</span> <span class="number">500</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(<span class="type">int</span> code, String msg, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setCode(code);</span><br><span class="line">        <span class="built_in">this</span>.setMsg(msg);</span><br><span class="line">        <span class="built_in">this</span>.setData(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Map&lt;String, ?&gt; map)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setMap(map);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (Integer) <span class="built_in">this</span>.get(<span class="string">&quot;code&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMsg</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (String) <span class="built_in">this</span>.get(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.get(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">setCode</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.put(<span class="string">&quot;code&quot;</span>, code);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">setMsg</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.put(<span class="string">&quot;msg&quot;</span>, msg);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.put(<span class="string">&quot;data&quot;</span>, data);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">set</span><span class="params">(String key, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.put(key, data);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">setMap</span><span class="params">(Map&lt;String, ?&gt; map)</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">var2</span> <span class="operator">=</span> map.keySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (var2.hasNext()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> (String) var2.next();</span><br><span class="line">            <span class="built_in">this</span>.put(key, map.get(key));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">ok</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(CODE_SUCCESS, <span class="string">&quot;æ“ä½œæˆåŠŸ&quot;</span>, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">ok</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(CODE_SUCCESS, msg, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">code</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code, (String) <span class="literal">null</span>, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">data</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(CODE_SUCCESS, <span class="string">&quot;ok&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(CODE_ERROR, <span class="string">&quot;æ“ä½œå¤±è´¥&quot;</span>, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(<span class="keyword">final</span> String msg, <span class="keyword">final</span> Integer code)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code, msg, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(CODE_ERROR, msg, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg, <span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code, msg, (Object) <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">build</span><span class="params">(<span class="type">int</span> code, String msg, Object data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code, msg, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;code\&quot;: &quot;</span> + <span class="built_in">this</span>.getCode() + <span class="string">&quot;, \&quot;msg\&quot;: &quot;</span> + <span class="built_in">this</span>.transValue(<span class="built_in">this</span>.getMsg()) + <span class="string">&quot;, \&quot;data\&quot;: &quot;</span> + <span class="built_in">this</span>.transValue(<span class="built_in">this</span>.getData()) + <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">transValue</span><span class="params">(Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value <span class="keyword">instanceof</span> String ? <span class="string">&quot;\&quot;&quot;</span> + value + <span class="string">&quot;\&quot;&quot;</span> : String.valueOf(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¸€èˆ¬springbootæµè¡Œmavené…ç½®ç±»ï¼Œå³pom-xml"><a href="#ä¸€èˆ¬springbootæµè¡Œmavené…ç½®ç±»ï¼Œå³pom-xml" class="headerlink" title="ä¸€èˆ¬springbootæµè¡Œmavené…ç½®ç±»ï¼Œå³pom.xml"></a>ä¸€èˆ¬springbootæµè¡Œmavené…ç½®ç±»ï¼Œå³pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>top.hepingan<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>H_Java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>H_Java<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>H_Java<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">licenses</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">license</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">licenses</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">developers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developer</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">developers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.ipokerface<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>snowflake-id-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.redisson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redisson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.20.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alipay.sdk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>alipay-sdk-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.35.107.ALL<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.zxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javase<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.aliyun.oss/aliyun-sdk-oss --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.17.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.squareup.okhttp3<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okhttp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.nanohttpd<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nanohttpd-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.35<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.ipokerface<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>snowflake-id-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-redis-jackson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.35.0.RC<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.dev33<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sa-token-spring-boot3-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.35.0.RC<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            &lt;artifactId&gt;gson&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        &lt;dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.75<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="VUE"><a href="#VUE" class="headerlink" title="VUE"></a>VUE</h1><p>ä¸€èˆ¬vue3é¡¹ç›®ç›®å½•é¢„è§ˆï¼š</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page1/PixPin_2024-07-22_03-40-18.png"></p><h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementPlus</span> <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">ElementPlusIconsVue</span> <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/theme-chalk/display.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, component] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(<span class="title class_">ElementPlusIconsVue</span>)) &#123;</span><br><span class="line">    app.<span class="title function_">component</span>(key, component)</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="router-js"><a href="#router-js" class="headerlink" title="router.js"></a>router.js</h3><p>routesé‡Œä¸€ä¸ªèŠ±æ‹¬å·å°±æ˜¯ä¸€ä¸ªè·¯ç”±</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHashHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;cancelArr&#125; <span class="keyword">from</span> <span class="string">&quot;@/utils/BSideRequest&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Index&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/EmployeeView.vue&#x27;</span>),</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;UserView&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../views/UserView.vue&#x27;</span>),</span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">    routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO å…¨å±€å‰ç½®å®ˆå«</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to) =&gt; &#123;</span><br><span class="line">    <span class="comment">// TODO é¡µé¢åˆ‡æ¢ä¸­æ–­æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">    cancelArr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">cancel, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">cancel</span>()</span><br><span class="line">        cancelArr.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO è®¾ç½®æµè§ˆå™¨Title</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = (to.<span class="property">meta</span>.<span class="property">title</span> ? to.<span class="property">meta</span>.<span class="property">title</span> : <span class="string">&#x27;&#x27;</span>) + <span class="string">&#x27; - Hå…¬å¸ç®¡ç†ç³»ç»Ÿ&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="BSideRequest-js"><a href="#BSideRequest-js" class="headerlink" title="BSideRequest.js"></a>BSideRequest.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO è¯·æ±‚å–æ¶ˆä»¤ç‰Œåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> cancelArr = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: process.<span class="property">env</span>.<span class="property">VUE_APP_BASE_API</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">6</span> * <span class="number">60</span> * <span class="number">1000</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO è¯·æ±‚å¤´</span></span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;token&#x27;</span>] = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO æ·»åŠ å–æ¶ˆä»¤ç‰Œ</span></span><br><span class="line">    config.<span class="property">cancelToken</span> = <span class="keyword">new</span> axios.<span class="title class_">CancelToken</span>(<span class="function"><span class="params">cancel</span> =&gt;</span> &#123;</span><br><span class="line">        cancelArr.<span class="title function_">push</span>(cancel)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = response.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">code</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="number">401</span>) &#123;</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">            <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;user&#x27;</span>);</span><br><span class="line">            location.<span class="title function_">reload</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> res.<span class="property">msg</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&#x27;æœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œæ­£åœ¨ç´§æ€¥å¤„ç†ï¼Œè¯·ç¨åä½¿ç”¨ã€‚&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒé…ç½®-env-development"><a href="#ç¯å¢ƒé…ç½®-env-development" class="headerlink" title="ç¯å¢ƒé…ç½®.env.development"></a>ç¯å¢ƒé…ç½®.env.development</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># just a flag</span><br><span class="line">ENV = &#x27;development&#x27;</span><br><span class="line"></span><br><span class="line"># HTTPè¯·æ±‚åŸºç±»</span><br><span class="line">VUE_APP_BASE_API = &#x27;http://localhost:8601&#x27;</span><br><span class="line"></span><br><span class="line"># é•¿è¿æ¥åŸºç±»</span><br><span class="line">VUE_APP_WSS = &#x27;ws://localhost:8601&#x27;</span><br><span class="line"></span><br><span class="line"># å›¾ç‰‡æœåŠ¡å™¨åŸŸå</span><br><span class="line">VUE_APP_IMAGE = &#x27;https://img-hepingan.oss-cn-hangzhou.aliyuncs.com&#x27;</span><br><span class="line"></span><br><span class="line">VUE_APP_RATE = 20</span><br><span class="line"></span><br><span class="line">VUE_APP_MEMORY = 4</span><br><span class="line"></span><br><span class="line">VUE_APP_MEMORY_SIZE = 2000</span><br></pre></td></tr></table></figure><h3 id="BSideApi-jsæ ¼å¼"><a href="#BSideApi-jsæ ¼å¼" class="headerlink" title="BSideApi.jsæ ¼å¼"></a>BSideApi.jsæ ¼å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/BSideRequest&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">GetSdModelPage</span>(<span class="params">pageNum,prompt</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;emp/get/page?pageNum=&#x27;</span>+ pageNum +<span class="string">&#x27;&amp;prompt=&#x27;</span>+ prompt,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">GetEmployeeList</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;emp/get/emp&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘çš„vueé¡¹ç›®é‡Œæœ‰çš„åº“ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@element-plus/icons-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.3.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;axios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.7.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;core-js&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.6.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;element-plus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.7.7&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;v-md-editor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.0.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue-router&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vuex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.1.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p><strong>å³axios,element-plus,v-md-editor,vuex,vue-routerï¼Œæ¨èå®‰è£…ä¸ç„¶ä¸Šé¢æœ‰äº›ç”¨ä¸äº†</strong></p><p>cssåº“æ¨èï¼š<a href="https://www.tailwindcss.cn/">Tailwind CSS - åªéœ€ä¹¦å†™ HTML ä»£ç ï¼Œæ— éœ€ä¹¦å†™ CSSï¼Œå³å¯å¿«é€Ÿæ„å»ºç¾è§‚çš„ç½‘ç«™ã€‚ | TailwindCSSä¸­æ–‡æ–‡æ¡£ | TailwindCSSä¸­æ–‡ç½‘</a></p><p>mavenä»“åº“ï¼š<a href="https://mvnrepository.com/">Maven Repository: Search&#x2F;Browse&#x2F;Explore (mvnrepository.com)</a></p><p>redisæ•™ç¨‹ï¼š<a href="https://blog.csdn.net/weixin_44893902/article/details/123087435">Windowä¸‹Redisçš„å®‰è£…å’Œéƒ¨ç½²è¯¦ç»†å›¾æ–‡æ•™ç¨‹ï¼ˆRedisçš„å®‰è£…å’Œå¯è§†åŒ–å·¥å…·çš„ä½¿ç”¨ï¼‰_rediså®‰è£…-CSDNåšå®¢</a></p><p>element-plusï¼š<a href="https://element-plus.org/zh-CN/">ä¸€ä¸ª Vue 3 UI æ¡†æ¶ | Element Plus (element-plus.org)</a></p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>åå‡ ç§’ä¸€ä¸ªç½‘ç«™ï¼ŸDroaä¸€é”®ç”Ÿæˆ</title>
      <link href="/2024/05/31/Ai%E7%A7%91%E6%8A%80/%E5%8D%81%E5%87%A0%E7%A7%92%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99%EF%BC%9FDroa%E4%B8%80%E9%94%AE%E7%94%9F%E6%88%90/"/>
      <url>/2024/05/31/Ai%E7%A7%91%E6%8A%80/%E5%8D%81%E5%87%A0%E7%A7%92%E4%B8%80%E4%B8%AA%E7%BD%91%E7%AB%99%EF%BC%9FDroa%E4%B8%80%E9%94%AE%E7%94%9F%E6%88%90/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ä¸ºå¤§å®¶æ¨èè¿™ä¸€æ¬¾ AI ç½‘ç«™ç”Ÿæˆç¥å™¨ <a href="https://www.uisdc.com/tag/dora-ai">Dora AI</a>ï¼Œå®ƒæ˜¯æ–°æ¨å‡ºçš„ä¸€ä¸ªæ— ä»£ç ç½‘ç«™æ„å»ºå¹³å°ï¼Œå€ŸåŠ© AI ç”ŸæˆæŠ€æœ¯ï¼Œåªé€šè¿‡æ–‡æœ¬æç¤ºå°±èƒ½å¿«é€Ÿç”Ÿæˆå¯ç¼–è¾‘ã€å¯äº¤äº’çš„ç½‘ç«™ï¼Œç›®å‰å—åˆ°å¾ˆå¤šç½‘ç«™å¼€å‘è€…çš„å…³æ³¨ï¼Œä¸€èµ·æ¥çœ‹çœ‹å®ƒæœ‰å“ªäº›ç¥å¥‡ä¹‹å¤„å§~</p><p><img src="https://image.uisdc.com/wp-content/uploads/2023/05/uisdc-hs-20230518-1-3.jpg" alt="Dora AI ï¼ä¸€å¥è¯ç”Ÿæˆå¯äº¤äº’ã€å¯ç¼–è¾‘ç½‘ç«™çš„ AI ç¥å™¨"></p><p>Dora AI ä¸»é¡µ</p><p><a href="https://www.uisdc.com/controlnet-v1-1">AIç»˜ç”»ç¥çº§æ’ä»¶ Controlnet è¿ç»­æ›´æ–°ï¼æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£…ä½“éªŒæ–°åŠŸèƒ½ï¼ˆé™„æ¨¡å‹èµ„æºï¼‰å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯å’Œä½ ä»¬ä¸€èµ·æ¢ç´¢ AI ç»˜ç”»çš„èŠ±ç”Ÿ~ Stable Diffusion WebUI çš„ç»˜ç”»æ’ä»¶ Controlnet åœ¨ 4 æœˆä»½æ›´æ–°äº† V1.1 ç‰ˆæœ¬ï¼Œå‘å¸ƒäº† 14 ä¸ªä¼˜åŒ–æ¨¡å‹ï¼Œå¹¶æ–°å¢äº†å¤šä¸ªé¢„å¤„ç†å™¨ï¼Œè®©å®ƒçš„åŠŸèƒ½æ¯”ä¹‹å‰æ›´åŠ å¥½ç”¨äº†ï¼Œæœ€è¿‘å‡ å¤©åˆè¿ç»­æ›´æ–°äº† 3 ä¸ªæ–° Refereé˜…è¯»æ–‡ç«  <em>&gt;</em></a></p><h4 id="Dora-AI-ä»‹ç»"><a href="#Dora-AI-ä»‹ç»" class="headerlink" title="Dora AI ä»‹ç»"></a>Dora AI ä»‹ç»</h4><p>Dora AI ç½‘ç«™ç›´è¾¾ï¼š <a href="https://link.uisdc.com/?redirect=https://www.dora.run/ai">https://www.dora.run/ai</a></p><p>Dora AI çš„äº§å“å›¢é˜Ÿæ¥è‡ªä¸­å›½åŒ—äº¬ï¼ŒProduct Hunt ä¸Šçš„å‘å¸ƒè€…ä¸º Faye Zhengã€‚ä» Dora AI å®˜ç½‘ä¸Šçœ‹ï¼Œç›®å‰å¯ä»¥å®ç°çš„æ•ˆæœä¸»è¦æœ‰ä¸‰ç§ï¼š</p><p><strong>â‘  æ ¹æ®æ–‡æœ¬ç”Ÿæˆç½‘ç«™</strong></p><p>æ ¹æ®å®˜æ–¹æ¼”ç¤ºè§†é¢‘å±•ç¤ºï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€å¥å…³äºç½‘ç«™çš„æè¿°åï¼ŒDora AI çš„ä¼šä¸€æ¬¡æ€§ç”Ÿæˆä¸‰ç»„è®¾è®¡ç¨¿ä¾›ç”¨æˆ·æŒ‘é€‰ã€‚è®¾è®¡ç¨¿å…·æœ‰å®Œæ•´çš„ç½‘ç«™é¡µé¢æ¡†æ¶ï¼Œæ–‡æ¡ˆã€é…å›¾å’Œå„ç§ç»„ä»¶ä¸€åº”ä¿±å…¨ï¼Œæ’ç‰ˆè®¾è®¡çœ‹èµ·æ¥ä¹Ÿå¾ˆé«˜çº§ã€‚è€Œä¸”è¿™ä¸ªè®¾è®¡ç¨¿è¿˜æ˜¯å¯ç¼–è¾‘çš„ï¼Œåˆ†æˆäº†å¤šä¸ªä¸åŒçš„å›¾å±‚ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­åœ¨ä¸Šé¢åšå‡ºä¿®æ”¹ã€‚</p><p><img src="https://image.uisdc.com/wp-content/uploads/2023/05/uisdc-hs-20230518-1-4.jpg" alt="Dora AI ï¼ä¸€å¥è¯ç”Ÿæˆå¯äº¤äº’ã€å¯ç¼–è¾‘ç½‘ç«™çš„ AI ç¥å™¨"></p><p>AI ç”Ÿæˆçš„è®¾è®¡ç¨¿</p><p><strong>â‘¡ ç”Ÿæˆ3Däº¤äº’åŠ¨ç”»</strong></p><p>åœ¨ç¼–è¾‘è®¾è®¡ç¨¿æ—¶ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥ä¸€å¥è¯ï¼Œè®© AI å°†é™æ€èƒŒæ™¯æ›¿æ¢æˆå…·æœ‰äº¤äº’æ•ˆæœçš„ 3D æ¨¡å‹ï¼Œè¿™æ ·é¼ æ ‡è¿›è¡Œæ“ä½œæ—¶ç½‘é¡µä¼šè·Ÿéšååº”ï¼Œæ‰“é€ æ²‰æµ¸å¼ä½¿ç”¨ä½“éªŒã€‚</p><p>ä»æ¼”ç¤ºè§†é¢‘ä¸­æˆ‘å‘ç°å½“ 3D æ¨¡å‹ç”Ÿæˆåï¼Œå¯¹åº”çš„å›¾å±‚å˜æˆâ€œåœºæ™¯â€å’Œâ€œ3D ç›¸æœºâ€ï¼Œä¹Ÿå°±æ˜¯äº¤äº’æ•ˆæœæ˜¯é€šè¿‡ç›¸æœºè§†è§’è°ƒæ•´å®Œæˆçš„ã€‚è€Œ AI åšçš„ä½œç”¨åº”è¯¥æ˜¯è®©â€œæ›¿æ¢ 3D æ¨¡å‹å…ƒç´ â€å’Œâ€œæ·»åŠ åŠ¨ç”»æ•ˆæœâ€2 ä¸ªä»»åŠ¡è‡ªåŠ¨å®Œæˆï¼Œçœå»ç”¨æˆ·è‡ªå·±è°ƒæ•´è®¾è®¡çš„æ­¥éª¤ã€‚</p><p><strong>â‘¢ é«˜çº§ AI åŠ¨ç”»</strong></p><p>åœ¨çœ‹å®Œæ¼”ç¤ºè§†é¢‘åï¼Œæˆ‘è§‰å¾— AI åŠ¨ç”»è¿™ä¸ªåŠŸèƒ½å®åœ¨æ˜¯å¤ªç¥äº†ã€‚æè¿°ä½ æƒ³è¦çš„åŠ¨ç”»æ•ˆæœå¹¶æŒ‡å®šåŠ¨ç”»å¯¹è±¡ï¼ŒDora AI å°±èƒ½è‡ªåŠ¨æ·»åŠ åŠ¨ç”»å¹¶å¼¹å‡ºç¼–è¾‘é¢æ¿ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­æ‹–åŠ¨æ»‘å—å¯¹åŠ¨ç”»æ•ˆæœè¿›è¡Œè°ƒæ•´ã€‚è¿™æ¯”è‡ªå·±æ‰‹åŠ¨è°ƒæ•´åŠ¨ç”»æ•ˆæœæ–¹ä¾¿å¾ˆå¤šï¼Œè€Œä¸”è®©ä¸æ‡‚ç¼–ç¨‹çš„ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾ä¸ºè‡ªå·±çš„ç½‘ç«™æ·»åŠ é«˜çº§çš„åŠ¨ç”»æ•ˆæœã€‚</p><p>å…¶å® Dora åŸæœ¬å°±æ˜¯ä¸€ä¸ªæ— ä»£ç ç½‘ç«™æ„å»ºå¹³å°ï¼Œå¸®åŠ©ç”¨æˆ·ç›´æ¥é€šè¿‡æ‹–æ‹½å…ƒç´ ç»„ä»¶åˆ›å»ºå¸¦æœ‰ 3D å…ƒç´ å’ŒåŠ¨ç”»æ•ˆæœçš„ç½‘ç«™ï¼Œå¹¶å€ŸåŠ© Flutter å®ç°å“åº”å¼å¸ƒå±€ï¼Œå¯ä»¥é€‚åº”å…¨ç«¯æ’ç‰ˆéœ€æ±‚ã€‚</p><p>Dora å®˜ç½‘ï¼š <a href="https://link.uisdc.com/?redirect=https://www.dora.run/">https://www.dora.run/</a></p><p>Dora çš„äº§å“æ¼”ç¤º</p><p>è¿™æ¬¡å‘å¸ƒçš„ Dora AI åˆ™æ˜¯å€ŸåŠ©ç°åœ¨çš„ AI æŠ€æœ¯è®©ç½‘ç«™æ„å»ºå˜å¾—æ›´åŠ å¿«æ·æ–¹ä¾¿ã€‚æ¯”å¦‚å¿«é€Ÿç”Ÿæˆç½‘ç«™é…å›¾ã€é€šè¿‡æ–‡æœ¬æŒ‡ä»¤è‡ªåŠ¨å®Œæˆè´Ÿè´£æŒ‡ä»¤ç­‰ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½é€šè¿‡è‡ªç„¶è¯­è¨€å¿«é€Ÿåˆ¶ä½œä¸€ä¸ªè§†è§‰æ•ˆæœä¼˜ç§€ã€å…·æœ‰ 3D åŠ¨ç”»å’Œäº¤äº’åŠŸèƒ½çš„ç½‘ç«™ï¼Œè¿™æ— ç–‘ä¹Ÿæ˜¯ç½‘ç«™è®¾è®¡çš„ä¸€å¤§è¿›æ­¥ã€‚</p><p>ç›®å‰ Dora AI æ­£åœ¨è¿›è¡Œ alpha å†…æµ‹ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è¿›å…¥å®˜æ–¹åŠ å…¥ Waitliastï¼š</p><p>Dora AI å®˜ç½‘ï¼š <a href="https://link.uisdc.com/?redirect=https://www.dora.run/ai">https://www.dora.run/ai</a></p>]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PASS-Assistant Document</title>
      <link href="/2024/05/27/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/PASS-Assistant-Document/"/>
      <url>/2024/05/27/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/PASS-Assistant-Document/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-06-11_15-10-24.png"></p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å…¨æ–°çš„Aiæ•´åˆWebç½‘ç«™ï¼ŒåŸºäºè¿‘å¹´æ¥å¤§ç«çš„ChatGPT3.5ï¼ŒChatGPT4å’Œæ™ºè°±æ¸…è¨€GLM-4vå¤§æ¨¡å‹å¼€å‘äº†åŸºç¡€çš„æ™ºèƒ½å¯¹è¯ç³»ç»Ÿã€‚è¯¥ç½‘ç«™æ‹¥æœ‰åŸºç¡€çš„ç™»å½•ç³»ç»Ÿï¼Œç§¯åˆ†ç³»ç»Ÿï¼Œç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå…‘æ¢ç ç³»ç»Ÿï¼Œè®¢å•ç³»ç»Ÿï¼Œæ”¶è—åŠŸèƒ½å’ŒæœåŠ¡å™¨é…ç½®ç³»ç»Ÿç­‰ï¼Œè¿˜æœ‰é¢„è®¾è§’è‰²å’Œæ¨¡å‹å¯¹è¯ï¼ŒSD-AIç»˜ç”»æ¨¡å—ï¼Œç§äººGPTé¢„è®¾æ¨¡å—ï¼Œæ•°å­—äººå¹³å°æ¨¡å—ç­‰æ–°å¥‡åŠŸèƒ½ã€‚</p><p>â€¢SD-AIç»˜ç”»æ¨¡å—ï¼šé‡‡ç”¨è¿œç¨‹è°ƒç”¨äº‘æœåŠ¡å™¨sdç»˜ç”»æ¥å£ï¼Œèƒ½åœ¨çº¿å®ç°æ–‡ç”Ÿå›¾ï¼Œå›¾ç”Ÿå›¾åŠŸèƒ½ï¼Œç”¨æˆ·åœ¨çº¿å®Œæˆç»˜ç”»åŠŸèƒ½åï¼Œå¯ä»¥é€‰æ‹©å°†å…¶å‘å¸ƒåˆ°è¯¥ç½‘ç«™ç»™äºˆå…¶å®ƒæµè§ˆäººè§‚çœ‹ï¼Œå®ç°å…±äº«å‹ç»˜ç”»åˆ†äº«ç¤¾åŒºã€‚<br>â€¢ç§äººGPTé¢„è®¾æ¨¡å—ï¼šç”¨æˆ·èƒ½è‡ªå·±å¡«å†™å¯¹è¯æ¨¡å‹apiï¼Œå¯†é’¥ï¼Œæ¨¡å‹é¢„è®¾ï¼Œå›å¤é€Ÿç‡ç­‰è®¾ç½®ï¼Œå®ç°è‡ªå·±ç§äººå®šåˆ¶çš„GPTï¼Œæ‰“é€ æ›´ç¬¦åˆè‡ªèº«çš„é¢„è®¾ã€‚<br>â€¢æ•°å­—äººå¹³å°ï¼šåŸºäºæ™ºèƒ½é—®ç­”æ¨¡å‹(GPT3.5&#x2F;GLM-4V)ï¼ŒGPT-SOVITSæ¨¡å‹å’Œé˜¿é‡Œäº‘å‡½æ•°è®¡ç®—FCåº”ç”¨æ•°å­—äººæ¥å£é›†åˆè€Œæˆçš„åœ¨çº¿æ•°å­—äººé—®ç­”å¹³å°ï¼Œç”¨æˆ·èƒ½å¤Ÿåœ¨é¢„è®¾çš„æ•°å­—äººæ¨¡å‹ä¸­ä¸å…¶å¯¹è¯ï¼Œå‘é€æ¶ˆæ¯åä¼šç»è¿‡è¿™ä¸‰ä¸ªæ¨¡å‹åŠ å·¥å¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå¯¹åˆšåˆšæ¶ˆæ¯å¤„ç†çš„æ•°å­—äººå¯¹è¯è§†é¢‘ã€‚è¯¥æ¨¡å—å¹³å°é™¤äº†å¯¹è¯åŠŸèƒ½ï¼Œè¿˜æœ‰åœ¨çº¿å®šåˆ¶æ•°å­—äººåŠŸèƒ½ï¼Œç”¨æˆ·ä»…éœ€ä¸Šä¼ äººç‰©å¤´åƒï¼Œä¸€åˆ†é’Ÿå½•åˆ¶è¯­éŸ³å’Œæ¨¡å‹é¢„è®¾è¯å°±å¯åœ¨çº¿åˆæˆæ•°å­—äººæ¨¡å‹ï¼Œå¹¶ä¸”å¯ä»¥å°†æ¨¡å‹åˆ†äº«åˆ°è¯¥ç½‘ç«™ã€‚</p><h2 id="éƒ¨åˆ†æ¥å£æ–‡æ¡£åŠè®¾è®¡"><a href="#éƒ¨åˆ†æ¥å£æ–‡æ¡£åŠè®¾è®¡" class="headerlink" title="éƒ¨åˆ†æ¥å£æ–‡æ¡£åŠè®¾è®¡"></a>éƒ¨åˆ†æ¥å£æ–‡æ¡£åŠè®¾è®¡</h2><p>æ¥å£æ–‡æ¡£ç”±æœ¬äººäº²è‡ªç¼–å†™ï¼Œæœ‰é”™è¯¯æ¬¢è¿æŒ‡æ­£å“¦~(qq1973016127)</p><ul><li><strong>æ§åˆ¶å°(Admin)</strong></li></ul><p>å¯¹aiæ¨¡å‹å„ä¸ªé…ç½®å¯ç›´æ¥åœ¨å¯è§†åŒ–é¢æ¿ä¿®æ”¹ï¼Œå› ä¸ºåç«¯æ‰€æœ‰è¯·æ±‚ä¸­éƒ½æ˜¯æŸ¥è¯¢redisä¸­çš„é…ç½®æ•°æ®è¿›è¡Œæ¥å£è°ƒç”¨ï¼Œæ‰€ä»¥é…ç½®ä¿¡æ¯ä¹Ÿæ˜¯å­˜å‚¨åœ¨redisä¸­çš„ã€‚</p><p>è·å–ç»ˆç«¯æ•°æ®ï¼šGET &#x2F;admin&#x2F;server&#x2F;get&#x2F;terminal</p><p>æ›´æ–°ç»ˆç«¯æ•°æ®ï¼šPOST &#x2F;admin&#x2F;server&#x2F;put&#x2F;terminal</p><p>è·å–æ€»äººæ•°ï¼šGET &#x2F;admin&#x2F;user&#x2F;get&#x2F;count</p><p>è·å–ç”¨æˆ·ä¿¡æ¯ï¼šPOST &#x2F;user&#x2F;current&#x2F;info</p><ul><li><p><strong>é»‘å¤œ&#x2F;æ—¥é—´ ä¸»é¢˜åˆ‡æ¢</strong></p></li><li><p><strong>Web å¯¹è¯è®°å¿†(å†å²å¯¹è¯è®°å½•)</strong></p></li><li><p><strong>è¶…çº§å®éªŒå®¤åŠŸèƒ½ (å«ç»˜å›¾åŠŸèƒ½ NewBing claude å…è´¹GPT)</strong></p></li><li><p><strong>å¯¹è¯æš‚åœ</strong></p></li><li><p><strong>å•†å“</strong></p></li></ul><p>è·å–è®¢å•åˆ†é¡µæ•°æ®ï¼š&#x2F;admin&#x2F;orders&#x2F;page?pageNum&#x3D;a&amp;prompt&#x3D; b &amp;status&#x3D;c</p><p>åˆ é™¤äº¤æ˜“äº§å“ï¼š&#x2F;admin&#x2F;product&#x2F;delete&#x2F;â€˜ + data</p><p>æ·»åŠ äº¤æ˜“äº§å“ï¼š&#x2F;admin&#x2F;product&#x2F;put&#x2F;data</p><p>è·å–äº¤æ˜“äº§å“ï¼š&#x2F;admin&#x2F;product&#x2F;get&#x2F;page?pageNum&#x3D;â€™ + a + â€˜&amp;prompt&#x3D;â€™ + b,</p><ul><li><strong>æ”¯ä»˜å®æ”¯ä»˜</strong></li></ul><p>æ„å»ºè®¢å•ï¼šurl: â€˜&#x2F;pay&#x2F;alipay&#x2F;pay&#x2F;â€˜ + data,<br>method: â€˜POSTâ€™</p><p>çŠ¶æ€æŸ¥è¯¢ï¼šurl: â€˜&#x2F;pay&#x2F;alipay&#x2F;status&#x2F;â€˜ + data,<br>method: â€˜POSTâ€™</p><p>ç”¨æˆ·è®¢å•pageï¼šurl: â€˜&#x2F;pay&#x2F;orders&#x2F;page?pageNum&#x3D;â€™ + data,<br>method: â€˜GETâ€™</p><ul><li><p><strong>GPT æµå¯¹è¯</strong></p></li><li><p><strong>å¯¹è¯åŠŸèƒ½æ”¶è—åŠŸèƒ½ ä»¥åŠ æ”¶è—å¯¹è¯å›æº¯åœºæ™¯</strong></p></li><li><p><strong>æ”¯æŒ GPT è‡ªå®šä¹‰æ•æ„Ÿè¯æ‹¦æˆª ä»¥åŠ å¾®ä¿¡é“­æ„Ÿè¯æ‹¦æˆª</strong></p></li><li><p><strong>SD MJ æ–‡ç”Ÿå›¾ å›¾ç”Ÿå›¾</strong></p></li></ul><p>æäº¤ç»˜ç”»è¯·æ±‚:&#x2F;draw&#x2F;postSdDraw</p><p>ä¼ å‚ï¼š@Valid DrawingSdTaskDto dto</p><p>dtoç±»ï¼š</p><p>private MultipartFile images;</p><p>@NotBlank(message &#x3D; â€œæç¤ºè¯ä¸èƒ½ä¸ºç©ºâ€)<br>private String prompt;</p><p>@NotNull(message &#x3D; â€œå›¾ç‰‡å®½åº¦ä¸èƒ½ä¸ºç©ºâ€)<br>private Long width;</p><p>@NotNull(message &#x3D; â€œå›¾ç‰‡é«˜åº¦ä¸èƒ½ä¸ºç©ºâ€)<br>private Long height;</p><p>@NotBlank(message &#x3D; â€œæ¨¡å‹åç§°ä¸èƒ½ä¸ºç©ºâ€)<br>private String modelName;</p><p>@NotNull(message &#x3D; â€œè¿­ä»£æ¬¡æ•°ä¸èƒ½ä¸ºç©ºâ€)<br>private Integer steps;</p><p>@NotBlank(message &#x3D; â€œé‡‡æ ·æ–¹æ³•ä¸èƒ½ä¸ºç©ºâ€)<br>private String sampler_index;</p><p>@NotNull(message &#x3D; â€œç¯å¢ƒä¸èƒ½ä¸ºç©ºâ€)<br>private Integer env;</p><p>@NotNull(message &#x3D; â€œä¸Šä¼ æç¤ºè¯ä¸èƒ½ä¸ºç©ºâ€)<br>private Long is_public;</p><p>private String negative_prompt;</p><ul><li><p><strong>æ”¯æŒè‡ªå®šä¹‰ GPT é¢„è®¾è¯åŠŸèƒ½ç‰ˆå—(æ— é™åˆ¶å®šä¹‰)</strong></p></li><li><p><strong>é¡¹ç›®å·¥ä»¶æ¨¡å—åŒ–</strong></p></li><li><p><strong>Ai å¸å…‘æ¢ç </strong></p></li></ul><p>ç”Ÿäº§äº¤æ¢ç ï¼š&#x2F;admin&#x2F;exchange&#x2F;build</p><p>åˆ é™¤äº¤æ¢ç ï¼š&#x2F;admin&#x2F;exchange&#x2F;delete&#x2F;ï¼ˆdataï¼‰</p><p>å…‘æ¢äº¤æ¢ç ï¼š&#x2F;admin&#x2F;exchange&#x2F;get&#x2F;page?pageNum&#x3D;â€™ + a + â€˜&amp;prompt&#x3D;â€™ + b,</p><ul><li><strong>ç™»å½•æ³¨å†Œ</strong></li></ul><p>æ‰¾å›å¯†ç ï¼šPOST &#x2F;auth&#x2F;email&#x2F;password&#x2F;back</p><p>æ³¨å†Œï¼šurl: â€˜&#x2F;auth&#x2F;email&#x2F;enrollâ€™,<br>method: â€˜POSTâ€™</p><p>é‚®ç®±ç™»å½•ï¼šurl: â€˜&#x2F;auth&#x2F;email&#x2F;loginâ€™,<br>method: â€˜POSTâ€™</p><p>æ˜¯å¦ç™»å½•æˆåŠŸï¼šurl: â€˜&#x2F;auth&#x2F;wechat&#x2F;code&#x2F;result?verifyCode&#x3D;â€™ + data,<br>method: â€˜GETâ€™</p><ul><li><p><strong>åˆ›æ„å¹¿åœº(å…è®¸å°†ä¼˜ç§€ä¸ªäººä½œå“å±•ç¤ºè‡³é‰´èµ æ‰€æœ‰ç”¨æˆ·å¯è§†)</strong></p></li><li><p><strong>æ”¯æŒ GPT å¯¹è¯æš‚åœè¾“å‡ºä»¥åŠç»§ç»­è¾“å‡º</strong></p></li><li><p><strong>å†…ç½®åå°ç®¡ç† (ç”¨æˆ·ç®¡ç† ç»˜å›¾ç®¡ç† æœåŠ¡å™¨ç®¡ç† å…‘æ¢ç ç®¡ç†)</strong></p></li><li><p><strong>æ¥å…¥ç™¾åº¦ç¿»è¯‘ API</strong></p></li><li><p><strong>æ”¶è—</strong></p></li></ul><p>æ·»åŠ æ”¶è—ï¼šurl: â€˜&#x2F;user&#x2F;stat&#x2F;put&#x2F;dataâ€™,<br>method: â€˜POSTâ€™,<br>data</p><p>åˆ é™¤æ”¶è—ï¼šurl: â€˜&#x2F;user&#x2F;star&#x2F;delete&#x2F;â€˜ + data,<br>method: â€˜POSTâ€™</p><ul><li><p><strong>ç»˜å›¾ç±» API åˆ—é˜Ÿå¤„ç†</strong></p></li><li><p><strong>ç»˜ç”»æ¨¡å‹æ§åˆ¶å°ä¿®æ”¹</strong></p></li></ul><p>æŸ¥è¯¢ï¼šGET &#x2F;admin&#x2F;sd&#x2F;page&#x2F;model?pageNum&#x3D;?</p><p>æ–°å¢ï¼šPOST &#x2F;admin&#x2F;sd&#x2F;put&#x2F;data</p><p>åˆ é™¤ï¼š&#x2F;admin&#x2F;sd&#x2F;delete&#x2F;data</p><ul><li><p><strong>æ•°æ®æ‡’å¼‚æ­¥å¤„ç†</strong></p></li><li><p><strong>æ”¯æŒä¸»æµè¯­è¨€ä»¥åŠé…ç½®ç±» ä»£ç é«˜äº®</strong></p></li><li><p><strong>å…¬å‘Š</strong></p></li></ul><p>url: â€˜&#x2F;public&#x2F;get&#x2F;announcementâ€™,<br>method: â€˜GETâ€™</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PASS-Assistant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PASS-Assistant Demonstration</title>
      <link href="/2024/05/27/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/PASS-Assistant-Demonstration/"/>
      <url>/2024/05/27/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/PASS-Assistant-Demonstration/</url>
      
        <content type="html"><![CDATA[<p>è§†é¢‘æ¼”ç¤ºåœ°å€ï¼š<a href="https://www.cnblogs.com/hepingan/p/18180722">Pass Asistantæ¼”ç¤ºè§†é¢‘ - ä½•å¹³å®‰ - åšå®¢å›­ (cnblogs.com)</a></p><p>ï¼ˆè§†é¢‘æ˜¾ç¤ºä¸äº†è¯·ä¸‹è½½ä¸‹é¢è§†é¢‘é“¾æ¥ï¼š<a href="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/QQ2024428-225915.mp4%EF%BC%89">https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/QQ2024428-225915.mp4ï¼‰</a></p><p><strong>é¦–é¡µ</strong></p><p>è¯¥ç½‘ç«™æ‹¥æœ‰åŸºç¡€çš„ç™»å½•ç³»ç»Ÿï¼Œç§¯åˆ†ç³»ç»Ÿï¼Œç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œå…‘æ¢ç ç³»ç»Ÿï¼Œè®¢å•ç³»ç»Ÿï¼Œæ”¶è—åŠŸèƒ½å’ŒæœåŠ¡å™¨é…ç½®ç³»ç»Ÿç­‰ï¼Œè¿˜æœ‰é¢„è®¾è§’è‰²å’Œæ¨¡å‹å¯¹è¯ï¼ŒSD-AIç»˜ç”»æ¨¡å—ï¼Œç§äººGPTé¢„è®¾æ¨¡å—ï¼Œæ•°å­—äººå¹³å°æ¨¡å—ç­‰æ–°å¥‡åŠŸèƒ½ã€‚</p><p><img src="https://img2.imgtp.com/2024/05/06/wolrFlHC.png"></p><p><strong>é¢„è®¾è§’è‰²</strong></p><p><img src="https://img2.imgtp.com/2024/05/06/gxG3nzLq.png"></p><p><strong>æ•°å­—äººå¹³å°</strong></p><p>è¯¥åŠŸèƒ½æš‚æœªå®Œå·¥ï¼Œæ‰“ç®—åŸºäºæ™ºèƒ½é—®ç­”æ¨¡å‹(GPT3.5&#x2F;GLM-4V)ï¼ŒGPT-SOVITSæ¨¡å‹å’Œé˜¿é‡Œäº‘å‡½æ•°è®¡ç®—FCåº”ç”¨æ•°å­—äººæ¥å£é›†åˆè€Œæˆçš„åœ¨çº¿æ•°å­—äººé—®ç­”å¹³å°ï¼Œç”¨æˆ·èƒ½å¤Ÿåœ¨é¢„è®¾çš„æ•°å­—äººæ¨¡å‹ä¸­ä¸å…¶å¯¹è¯ï¼Œå‘é€æ¶ˆæ¯åä¼šç»è¿‡è¿™ä¸‰ä¸ªæ¨¡å‹åŠ å·¥å¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå¯¹åˆšåˆšæ¶ˆæ¯å¤„ç†çš„æ•°å­—äººå¯¹è¯è§†é¢‘ã€‚è¯¥æ¨¡å—å¹³å°é™¤äº†å¯¹è¯åŠŸèƒ½ï¼Œè¿˜æœ‰åœ¨çº¿å®šåˆ¶æ•°å­—äººåŠŸèƒ½ï¼Œç”¨æˆ·ä»…éœ€ä¸Šä¼ äººç‰©å¤´åƒï¼Œä¸€åˆ†é’Ÿå½•åˆ¶è¯­éŸ³å’Œæ¨¡å‹é¢„è®¾è¯å°±å¯åœ¨çº¿åˆæˆæ•°å­—äººæ¨¡å‹ï¼Œå¹¶ä¸”å¯ä»¥å°†æ¨¡å‹åˆ†äº«åˆ°è¯¥ç½‘ç«™ã€‚</p><p>ç”±äºæ¥å£è´¹ç”¨è¿‡é«˜æš‚æœªæœ‰èƒ½åŠ›è¿è¥è¯¥æ¨¡å—ã€‚</p><p><img src="https://img2.imgtp.com/2024/05/06/GJuUFYwZ.png"></p><p>AI<strong>ç»˜ç”»</strong></p><p>é‡‡ç”¨sdç»˜ç”»äº‘ç«¯æ¥å£çš„è°ƒç”¨ï¼Œæœ¬äººçš„æ¥å£éƒ¨ç½²åœ¨é˜¿é‡Œäº‘å‡½æ•°FCæœåŠ¡å™¨ä¸Šï¼Œåœ°å€: sd.hepingan.topï¼Œå¯ä»¥è®¾ç½®æ­£å‘æç¤ºè¯ï¼Œåå‘æç¤ºè¯ï¼Œæ¨¡å‹ï¼Œå‚è€ƒå›¾ï¼ˆå³å›¾ç”Ÿå›¾åŠŸèƒ½ï¼‰ï¼Œæ­¥æ•°ï¼Œé‡‡æ ·å™¨ï¼Œå¤§å°ï¼Œæ˜¯å¦å…¬å¼€çš„è®¾ç½®ã€‚ç»˜ç”»æ¬£èµå¯éšæœºæµè§ˆåˆ«äººçš„å›¾å’Œè‡ªå·±çš„å›¾ã€‚</p><p><img src="https://img2.imgtp.com/2024/05/07/pa8wGbpF.png"></p><p><strong>ç»˜ç”»æ¨¡å‹ç®¡ç†</strong></p><p>åœ¨çº¿æ–°å¢å’Œåˆ é™¤ç»˜ç”»æ¨¡å‹</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-05-12_00-54-59.png"></p><p>å•†å“ç®¡ç†</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-05-12_00-54-51.png"></p><p>å…‘æ¢ç ç®¡ç†</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-05-12_00-54-41.png"></p><p>ç”¨æˆ·ç®¡ç†</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-05-12_00-54-21.png"></p><p>ç”¨æˆ·æ”¶è—æ¨¡å—</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-05-12_00-53-36.png"></p><p>ä¸ªäººä¸­å¿ƒ</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/PixPin_2024-05-12_00-53-16.png"></p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PASS-Assistant </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AIäºŒç»´ç ,çœŸçš„å¤ªå¥½çœ‹äº†!aiäºŒç»´ç åˆ¶ä½œæ–¹æ³•åˆ†äº«</title>
      <link href="/2024/04/18/Ai%E7%A7%91%E6%8A%80/AI%E4%BA%8C%E7%BB%B4%E7%A0%81-%E7%9C%9F%E7%9A%84%E5%A4%AA%E5%A5%BD%E7%9C%8B%E4%BA%86-ai%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%88%B6%E4%BD%9C%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/"/>
      <url>/2024/04/18/Ai%E7%A7%91%E6%8A%80/AI%E4%BA%8C%E7%BB%B4%E7%A0%81-%E7%9C%9F%E7%9A%84%E5%A4%AA%E5%A5%BD%E7%9C%8B%E4%BA%86-ai%E4%BA%8C%E7%BB%B4%E7%A0%81%E5%88%B6%E4%BD%9C%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ®µæ—¶é—´å®šåˆ¶é«˜çº§ AI è‰ºæœ¯äºŒç»´ç çš„ä»·æ ¼ä¸€è·¯é£™å‡ï¼Œæœ€é«˜å·²è‡³ 2w åˆ¶ä½œä¸€å¼ ã€‚ç»è¿‡æˆ‘ä»¬çš„åŠªåŠ›ç ”å‘ï¼Œç®€åŒ–äº†å„ç§ç¹ççš„åˆ¶ä½œæµç¨‹ï¼ŒçœŸæ­£åšåˆ°äº†è‰ºæœ¯äºŒç»´ç äººäººå¯ç”Ÿæˆä¸”çœŸçš„å¾ˆè‰ºæœ¯ï¼</p><h2 id="ä¸€ã€AIäºŒç»´ç æ•ˆæœ"><a href="#ä¸€ã€AIäºŒç»´ç æ•ˆæœ" class="headerlink" title="ä¸€ã€AIäºŒç»´ç æ•ˆæœ"></a><strong>ä¸€ã€AIäºŒç»´ç æ•ˆæœ</strong></h2><p>å¦‚ä¸‹è¯·æ¬£èµ</p><p><img src="https://pic3.zhimg.com/80/v2-b4bcb9c99fdf66620fa6ea02a6acdeb2_720w.webp" alt="img"></p><p>ç¾å¥³äºŒç»´ç </p><p><img src="https://pic3.zhimg.com/80/v2-1b86e4a55fdcf27a2bc954e5eb5e43aa_720w.webp" alt="img"></p><p>é£æ™¯äºŒç»´ç </p><p><img src="https://pic2.zhimg.com/80/v2-43f3a1cd0b7168b2764aa3301848a955_720w.webp" alt="img"></p><p>ä¸“å±äºŒç»´ç </p><p><img src="https://pic3.zhimg.com/80/v2-edc9651077f8a09c42ac6d2dbe3431ce_720w.webp" alt="img"></p><p>äºŒç»´ç è®¾è®¡</p><p><img src="https://pic4.zhimg.com/80/v2-b019cc7414e929c00d7ce2a8e0526447_720w.webp" alt="img"></p><p>äºŒç»´ç ç¾å¥³</p><p><img src="https://pic1.zhimg.com/80/v2-7d30088a5bfb02ee8e5a3d6950e25c2c_720w.webp" alt="img"></p><p>ç«‹ä½“äºŒç»´ç </p><p><img src="https://pic1.zhimg.com/80/v2-ea6e4c374fd0c0ee8b0c6625aa51b8dc_720w.webp" alt="img"></p><p>äºŒç»´ç ç¾åŒ–</p><p>ä»ç°åœ¨èµ·ï¼Œæ— é¡»å†èŠ±é«˜ä»·å»å®šåˆ¶ï¼Œæ— é¡»å†ä»˜è´¹å»å­¦ä¹ ã€‚ç®€å•ä¾¿å®œå³å¯æ‰¹é‡ç”Ÿäº§é«˜çº§ AI äºŒç»´ç ã€‚</p><p>å³ä½¿ä½ æ˜¯ä»æ²¡æ¥è§¦è¿‡ AI ç»˜ç”»çš„å°ç™½ã€ä¸äº†è§£äºŒç»´ç çš„åŸç†ï¼Œåªéœ€æŒ‰ç…§æˆ‘ä»¬ä¸‹é¢åˆ—å‡ºçš„æ•™ç¨‹ï¼Œå°±èƒ½ç«‹å³ä¸Šæ‰‹ï½</p><p><a href="https://link.zhihu.com/?target=https://pan.quark.cn/s/991e4ab6ebc6">AIäºŒç»´ç ç¾åŒ–æ•™ç¨‹pan.quark.cn&#x2F;s&#x2F;991e4ab6ebc6</a></p><p><strong>äºŒã€AIè‰ºæœ¯äºŒç»´ç ä½¿ç”¨åœºæ™¯</strong></p><p>äºŒç»´ç ç›®å‰å·²ç»å¹¿æ³›åº”ç”¨äºå„è¡Œå„ä¸šï¼Œä¸ç®¡åœ¨ç½‘ä¸Šå†²æµªï¼Œæˆ–æ˜¯åœ¨çº¿ä¸‹å„ç§åœºåˆï¼Œæˆ‘ä»¬éƒ½éšå¤„å¯è§äºŒç»´ç çš„åº”ç”¨ã€‚</p><p>å½“äººä»¬å·²ç»çœ‹è…»åƒç¯‡ä¸€å¾‹çš„é»‘ç™½äºŒç»´ç ï¼Œæ˜¯æ—¶å€™æŠŠä½ çš„å“ç‰ŒäºŒç»´ç æ›´æ¢ä¸ºç»“åˆ AI çš„è‰ºæœ¯äºŒç»´ç ï¼Œå½»åº•é¢ è¦†äºŒç»´ç ä½“éªŒï¼Œé‡æ–°å®šä¹‰ä¸ªäººä¸å“ç‰Œå½¢è±¡ï¼Œç•™ä¸‹ä»¤äººæ·±åˆ»çš„å°è±¡ï¼</p><p>ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›AIäºŒç»´ç åŸºç¡€ä½¿ç”¨åœºæ™¯ï¼Œå…·ä½“çš„åœºæ™¯è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šï¼Œç­‰å¾…ä½ å»æ¢ç´¢ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-7bf179b91cb1e6aa043289197546ad8c_720w.webp" alt="img"></p><h2 id="ä¸‰ã€å¦‚ä½•é€šè¿‡AIç¾åŒ–äºŒç»´ç è¿›è¡Œå¼•æµå’Œå˜ç°ï¼Ÿ"><a href="#ä¸‰ã€å¦‚ä½•é€šè¿‡AIç¾åŒ–äºŒç»´ç è¿›è¡Œå¼•æµå’Œå˜ç°ï¼Ÿ" class="headerlink" title="ä¸‰ã€å¦‚ä½•é€šè¿‡AIç¾åŒ–äºŒç»´ç è¿›è¡Œå¼•æµå’Œå˜ç°ï¼Ÿ"></a><strong>ä¸‰ã€å¦‚ä½•é€šè¿‡AIç¾åŒ–äºŒç»´ç è¿›è¡Œå¼•æµå’Œå˜ç°ï¼Ÿ</strong></h2><p>ä½ å¯ä»¥åœ¨é—²é±¼ã€<strong>æŠ–éŸ³</strong>å’Œ<strong>å°çº¢ä¹¦</strong>ç­‰å¹³å°ä¸Šå‘å¸ƒä½œå“è¿›è¡Œæ¨å¹¿ï¼Œæ‰¾åˆ°ä¸ä½ ç±»ä¼¼çš„è´¦å·è¿›è¡Œæ¨¡ä»¿å‘å¸ƒå³å¯ã€‚å¸å¼•ç”¨æˆ·æ‰«æäºŒç»´ç å¹¶æ·»åŠ ä½ çš„å¾®ä¿¡ï¼Œç„¶åå¼€å§‹å˜ç°ã€‚ä½ è¿˜å¯ä»¥å°†è‡ªå·±çš„äºŒç»´ç åˆ¶ä½œæˆè‰ºæœ¯å“ï¼Œç„¶ååŠ å…¥å„ç§å¾®ä¿¡ç¾¤è¿›è¡Œæ¨å¹¿ã€‚</p><p><strong>å˜ç°æ–¹å¼ï¼š</strong></p><p>ç›´æ¥å¸®åŠ©ç”¨æˆ·åˆ¶ä½œäºŒç»´ç ã€‚ç”±äºè¿™é¡¹æ“ä½œå…·æœ‰ä¸€å®šé—¨æ§›ï¼Œè®¸å¤šäººä¸ä¼šæ“ä½œã€‚å¦‚æœæœ‰äººå¯¹æ­¤æ„Ÿå…´è¶£ï¼Œä»–ä»¬è‡ªç„¶ä¼šé€‰æ‹©ä»˜è´¹ã€‚ç›®å‰å¸‚åœºä»·æ¯å¼ äºŒç»´ç å¯ä»¥ä¸º9.9è‡³29.9å…ƒä¸ç­‰ã€‚</p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±åˆ¶ä½œæ•™ç¨‹å¹¶é”€å”®ã€‚é€šè¿‡å½•åˆ¶ä¸€ä»½æ•™ç¨‹å¹¶é”€å”®ï¼Œæ¯ä»½å”®ä»·99è‡³199å…ƒï¼Œè½»æ¾å®ç°é›¶æœ¬æŠ•å…¥ã€ä¸‡å€åˆ©æ¶¦ã€‚ è¿˜å¯ä»¥æä¾›æ”¶å¾’åŸ¹è®­ã€‚</p><p>å¯¹äºé‚£äº›ä¸ä»…ä¸æ‡‚AIäºŒç»´ç ç¾åŒ–ï¼Œä¹Ÿä¸æ‡‚æ¨å¹¿å’Œå¼•æµçš„äººï¼Œä½ å¯ä»¥æä¾›AIäºŒç»´ç åˆ¶ä½œæ–¹æ³•ä¸€å¯¹ä¸€æŒ‡å¯¼å’Œå®æ“ç»éªŒåˆ†äº«ï¼Œå¹¶æ”¶è´¹299è‡³599å…ƒã€‚</p><p>AIäºŒç»´ç ç¾åŒ–æ•™ç¨‹ï¼š**<a href="https://link.zhihu.com/?target=http://pan.quark.cn/s/395b49cf23e6">http://pan.quark.cn/s/395b49cf</a>**</p>]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ç©æ„å„¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue+python flaskå®ç°æ™ºè°±æ¸…è¨€æ¥å£webæœåŠ¡</title>
      <link href="/2024/04/06/IT%E7%AC%94%E8%AE%B0/vue-python-flask%E5%AE%9E%E7%8E%B0%E6%99%BA%E8%B0%B1%E6%B8%85%E8%A8%80%E6%8E%A5%E5%8F%A3web%E6%9C%8D%E5%8A%A1/"/>
      <url>/2024/04/06/IT%E7%AC%94%E8%AE%B0/vue-python-flask%E5%AE%9E%E7%8E%B0%E6%99%BA%E8%B0%B1%E6%B8%85%E8%A8%80%E6%8E%A5%E5%8F%A3web%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>åˆ›å»ºä¸ªä¸»pyæ–‡ä»¶å’Œå‰¯pyæ¥å£ï¼Œä¸»pyå…ˆå¼•å…¥è¿è¡Œä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> blog <span class="keyword">import</span> blog</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.register_blueprint(blog)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘çš„å‰¯pyæ–‡ä»¶å«blog.pyï¼Œæ‰€ä»¥å°±å¼•å…¥å®ƒçš„åå­—äº†ï¼ˆè®°å¾—æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼‰</p><p>æ¥ä¸‹æ¥æ˜¯blogæ¥å£ä»£ç ~</p><p>å¼•å…¥é…ç½®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, request</span><br><span class="line"><span class="keyword">from</span> zhipuai <span class="keyword">import</span> ZhipuAI</span><br><span class="line"></span><br><span class="line">blog = Blueprint(<span class="string">&#x27;blog&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line">client = ZhipuAI(api_key=<span class="string">&quot;æ›¿æ¢ä¸ºä½ çš„Api key&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="æ¥å£ä»£ç "><a href="#æ¥å£ä»£ç " class="headerlink" title="æ¥å£ä»£ç "></a>æ¥å£ä»£ç </h2><p><strong>æ™®é€šçš„GLM4æ–‡æœ¬å¯¹è¯æ¥å£ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blog.route(<span class="params"><span class="string">&#x27;/chat&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chat_GLM4</span>():</span><br><span class="line">    content = request.form[<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">    <span class="built_in">print</span>(request.form[<span class="string">&#x27;content&#x27;</span>])</span><br><span class="line">    response = client.chat.completions.create(</span><br><span class="line">        model=<span class="string">&quot;glm-4&quot;</span>,</span><br><span class="line">        messages=[</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªå’Œè”¼å¯äº²ï¼Œç²˜äººçš„å¥³å‹ï¼Œä½ åœ¨å›ç­”ç”¨æˆ·é—®é¢˜æ—¶å¯ä»¥å¸¦ç‚¹å„¿ç”œè¨€èœœè¯­&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: content&#125;</span><br><span class="line">        ],</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(response.choices[<span class="number">0</span>].message.content)</span><br><span class="line">    <span class="keyword">return</span> response.choices[<span class="number">0</span>].message.content</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„messageä¸­çš„systemå†…å®¹æ˜¯è®©æ¨¡å‹æ‰®æ¼”ä¸ªå¯¹åº”è§’è‰²æˆ–æå‡ºè¦æ±‚ï¼Œä¸‹é¢çš„contentæ‰æ˜¯æå‡ºé—®é¢˜</p><p><strong>GLM-4vå›¾åƒæ–‡æœ¬å¯¹è¯ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blog.route(<span class="params"><span class="string">&#x27;/chatgv&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chat_GLM4V</span>():</span><br><span class="line">    img = request.files.get(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">    <span class="comment"># print(img)</span></span><br><span class="line">    header = &#123;</span><br><span class="line">        <span class="string">&quot;token&quot;</span>: <span class="string">&quot;ä½ çš„IMGTPå›¾åºŠtoken&quot;</span>,</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36 Edg/121.0.0.0&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æœ¬åœ°æ–¹æ³•</span></span><br><span class="line">    <span class="comment"># image_filename = &quot;abc.png&quot;</span></span><br><span class="line">    <span class="comment"># directory = os.getcwd()</span></span><br><span class="line">    <span class="comment"># image_path = os.path.join(directory, image_filename)</span></span><br><span class="line"></span><br><span class="line">    files = &#123;</span><br><span class="line">        <span class="string">&quot;image&quot;</span>: (<span class="string">&#x27;img.jpg&#x27;</span>, img, <span class="string">&#x27;multipart/form-data&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    r2 = requests.post(url=<span class="string">&quot;https://www.imgtp.com/api/upload&quot;</span>, files=files, headers=header)</span><br><span class="line"></span><br><span class="line">    r2_data = r2.json()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> r2.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="comment"># print(f&quot;ä¿¡æ¯:&#123;r2_data&#125;&quot;)</span></span><br><span class="line">        img_url = r2_data.get(<span class="string">&quot;data&quot;</span>, &#123;&#125;).get(<span class="string">&quot;url&quot;</span>)</span><br><span class="line">        img_name = r2_data.get(<span class="string">&quot;data&quot;</span>, &#123;&#125;).get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        img_id = r2_data.get(<span class="string">&quot;data&quot;</span>, &#123;&#125;).get(<span class="string">&quot;id&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å›¾ç‰‡åœ°å€ï¼š<span class="subst">&#123;img_url&#125;</span>,å›¾ç‰‡åï¼š<span class="subst">&#123;img_name&#125;</span>,å›¾ç‰‡id: <span class="subst">&#123;img_id&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(r2.status_code)</span><br><span class="line"></span><br><span class="line">    content = request.form[<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">    response = client.chat.completions.create(</span><br><span class="line">        model=<span class="string">&quot;glm-4v&quot;</span>,</span><br><span class="line">        messages=[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;text&quot;</span>: content</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;image_url&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;image_url&quot;</span>: &#123;</span><br><span class="line">                            <span class="string">&quot;url&quot;</span>: img_url</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(response.choices[<span class="number">0</span>].message.content)</span><br><span class="line">    r = requests.post(<span class="string">&quot;https://www.imgtp.com/api/delete&quot;</span>, headers=header, data=&#123;<span class="string">&#x27;id&#x27;</span>: img_id&#125;)</span><br><span class="line">    <span class="built_in">print</span>(r.json())</span><br><span class="line">    <span class="keyword">return</span> response.choices[<span class="number">0</span>].message.content</span><br></pre></td></tr></table></figure><p>è®°å¾—æ›¿æ¢ä½ çš„IMGTPå›¾åºŠtokenï¼Œè·å–tokenæ–¹æ³•ï¼šç™»å½•ç½‘ç«™ï¼š<a href="https://www.imgtp.com/">ImgTP - å…è´¹å…¬å…±å›¾åºŠ</a>ï¼Œåœ¨è®¾ç½®é‡Œé¢å¯ä»¥çœ‹åˆ°ä½ è´¦å·çš„tokenï¼š</p><p><img src="https://img2.imgtp.com/2024/04/06/Jtu9UAuH.png"></p><p>å®ƒé‡Œé¢ä¹Ÿæä¾›äº†å®˜æ–¹æ¥å£æ–‡æ¡£</p><p>æˆ‘è¿™é‡Œçš„é€»è¾‘æ˜¯å…ˆé€šè¿‡imgtpå›¾åºŠä¸Šä¼ å›¾ç‰‡ï¼Œå°†ä¸Šä¼ çš„å›¾ç‰‡é“¾æ¥è¿”å›å¹¶ä¼ ç»™GLM-4vå¯¹è¯æ¨¡å‹ï¼Œè°ƒç”¨å®Œæˆåå°±åˆ é™¤å›¾ç‰‡äº†ï¼ˆåˆ é™¤å®ƒå¯ä»¥ä¸å ç”¨å›¾åºŠç©ºé—´ï¼Œä¹Ÿå¯ä»¥ä¸åˆ çœ‹è‡ªå·±éœ€æ±‚ï¼‰</p><p><strong>cogview-3å›¾åƒç”Ÿæˆ</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@blog.route(<span class="params"><span class="string">&#x27;/draw&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">draw</span>():</span><br><span class="line">    content = request.form.get(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">    response = client.images.generations(</span><br><span class="line">        model=<span class="string">&quot;cogview-3&quot;</span>,  <span class="comment"># å¡«å†™éœ€è¦è°ƒç”¨çš„æ¨¡å‹åç§°</span></span><br><span class="line">        prompt=content,</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(response.data[<span class="number">0</span>].url)</span><br><span class="line">    <span class="keyword">return</span> response.data[<span class="number">0</span>].url</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¼šè¿”å›å›¾ç‰‡é“¾æ¥</p><h2 id="è°ƒç”¨å®ä¾‹"><a href="#è°ƒç”¨å®ä¾‹" class="headerlink" title="è°ƒç”¨å®ä¾‹"></a>è°ƒç”¨å®ä¾‹</h2><p>å·¥å…·ï¼špostman</p><p>è¿è¡Œä¸»pyæ–‡ä»¶ï¼Œæ™®é€šæ–‡æœ¬å¯¹è¯ï¼š</p><p><img src="https://img2.imgtp.com/2024/04/06/g2fHsYcs.png"></p><p>å›¾åƒæ–‡æœ¬å¯¹è¯ï¼š</p><p><img src="https://img2.imgtp.com/2024/04/06/l6HmdJRS.png"></p><p>å›¾åƒç”Ÿæˆæ¥å£ï¼š</p><p><img src="https://img2.imgtp.com/2024/04/06/yCf80rGY.png"></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ£é¼“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ™ºè°±æ¸…è¨€apiè°ƒç”¨æ•™ç¨‹</title>
      <link href="/2024/03/31/Ai%E7%A7%91%E6%8A%80/%E6%99%BA%E8%B0%B1%E6%B8%85%E8%A8%80api%E8%B0%83%E7%94%A8%E6%95%99%E7%A8%8B/"/>
      <url>/2024/03/31/Ai%E7%A7%91%E6%8A%80/%E6%99%BA%E8%B0%B1%E6%B8%85%E8%A8%80api%E8%B0%83%E7%94%A8%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>å°†æ™ºè°±æ¸…è¨€çš„<a href="https://link.zhihu.com/?target=https://chatglm.cn/main/alltoolsdetail">GLM4</a>çš„å¯¹è¯æµè½¬æ¢ä¸ºäº†ChatGPTå…¼å®¹çš„æµæ ¼å¼ï¼ŒåŒæ—¶æ”¯æŒé«˜é€Ÿæµå¼è¾“å‡ºã€æ™ºèƒ½ä½“å¯¹è¯ã€è”ç½‘æœç´¢ã€AIç»˜å›¾ã€é•¿æ–‡æ¡£è§£è¯»ã€å›¾åƒè§£æã€å¤šè½®å¯¹è¯ï¼Œé›¶é…ç½®éƒ¨ç½²ï¼Œå¤šè·¯tokenæ”¯æŒï¼Œè‡ªåŠ¨æ¸…ç†ä¼šè¯ç—•è¿¹ã€‚</p><h2 id="åœ¨çº¿ä½“éªŒ"><a href="#åœ¨çº¿ä½“éªŒ" class="headerlink" title="åœ¨çº¿ä½“éªŒ"></a>åœ¨çº¿ä½“éªŒ</h2><p>ä»£ç å·²ç»å¼€æºï¼ˆå¸Œæœ›èƒ½ç‚¹ä¸ªå°å°çš„starå“ˆ~ï¼‰ï¼š<a href="https://link.zhihu.com/?target=https://github.com/LLM-Red-Team/glm-free-api?tab=readme-ov-file">https://github.com/LLM-Red-Team/glm-free-api</a></p><p>æ­¤é“¾æ¥ä»…ä¸´æ—¶æµ‹è¯•åŠŸèƒ½ï¼Œåªæœ‰ä¸€è·¯å¹¶å‘ï¼Œå¦‚æœé‡åˆ°å¼‚å¸¸è¯·ç¨åé‡è¯•ï¼Œå»ºè®®è‡ªè¡Œéƒ¨ç½²ä½¿ç”¨ã€‚</p><p><a href="https://link.zhihu.com/?target=https://udify.app/chat/Pe89TtaX3rKXM8NS">https://udify.app/chat/Pe89TtaX3rKXM8NS</a></p><h2 id="éªŒæ˜æ­£èº«"><a href="#éªŒæ˜æ­£èº«" class="headerlink" title="éªŒæ˜æ­£èº«"></a>éªŒæ˜æ­£èº«</h2><p><img src="https://pic2.zhimg.com/80/v2-1eb899c6f95dc8b011e95d507efda499_720w.webp" alt="img"></p><p>éªŒæ˜æ­£èº«</p><h2 id="æ™ºèƒ½ä½“å¯¹è¯"><a href="#æ™ºèƒ½ä½“å¯¹è¯" class="headerlink" title="æ™ºèƒ½ä½“å¯¹è¯"></a>æ™ºèƒ½ä½“å¯¹è¯</h2><p>å¯¹åº”æ™ºèƒ½ä½“é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https://chatglm.cn/main/gdetail/65c046a531d3fcb034918abe">ç½‘æŠ‘äº‘è¯„è®ºç”Ÿæˆå™¨</a></p><p><img src="https://pic3.zhimg.com/80/v2-ca5642dc21579a634bc307bffb8e95d2_720w.webp" alt="img"></p><p>æ™ºèƒ½ä½“å¯¹è¯</p><h2 id="å¤šè½®å¯¹è¯"><a href="#å¤šè½®å¯¹è¯" class="headerlink" title="å¤šè½®å¯¹è¯"></a>å¤šè½®å¯¹è¯</h2><p><img src="https://pic3.zhimg.com/80/v2-8aff0e5a84f8acf0c3d234e5d8e27c32_720w.webp" alt="img"></p><p>å¤šè½®å¯¹è¯</p><h2 id="AIç»˜å›¾"><a href="#AIç»˜å›¾" class="headerlink" title="AIç»˜å›¾"></a>AIç»˜å›¾</h2><p><img src="https://pic3.zhimg.com/80/v2-c86de8bba4671417764b7de113d34026_720w.webp" alt="img"></p><p>AIç»˜å›¾</p><h2 id="è”ç½‘æœç´¢"><a href="#è”ç½‘æœç´¢" class="headerlink" title="è”ç½‘æœç´¢"></a>è”ç½‘æœç´¢</h2><p><img src="https://pic3.zhimg.com/80/v2-0f5c5d0589398aa57b9cd0f606fdd6c6_720w.webp" alt="img"></p><p>è”ç½‘æœç´¢</p><h2 id="é•¿æ–‡æ¡£è§£è¯»"><a href="#é•¿æ–‡æ¡£è§£è¯»" class="headerlink" title="é•¿æ–‡æ¡£è§£è¯»"></a>é•¿æ–‡æ¡£è§£è¯»</h2><p><img src="https://pic1.zhimg.com/80/v2-bbd4e1c2fc31ba79c3e156478135cd28_720w.webp" alt="img"></p><h2 id="å›¾åƒè§£æ"><a href="#å›¾åƒè§£æ" class="headerlink" title="å›¾åƒè§£æ"></a>å›¾åƒè§£æ</h2><p><img src="https://pic2.zhimg.com/80/v2-fbddd3b47d6e746311026451174fd449_720w.webp" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Suno V3ç‰ˆæœ¬æ›´æ–°ï¼å ªç§°AIéŸ³ä¹çš„ChatGPTæ—¶åˆ»</title>
      <link href="/2024/03/29/Ai%E7%A7%91%E6%8A%80/Suno-V3%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%EF%BC%81%E5%A0%AA%E7%A7%B0AI%E9%9F%B3%E4%B9%90%E7%9A%84ChatGPT%E6%97%B6%E5%88%BB/"/>
      <url>/2024/03/29/Ai%E7%A7%91%E6%8A%80/Suno-V3%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0%EF%BC%81%E5%A0%AA%E7%A7%B0AI%E9%9F%B3%E4%B9%90%E7%9A%84ChatGPT%E6%97%B6%E5%88%BB/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸€å¥è¯æ€»ç»“</strong></p><p>Suno AIéŸ³ä¹å¹³å°å‘å¸ƒäº†V3ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€AIéŸ³ä¹åˆ›ä½œé¢†åŸŸçš„ä¸€ä¸ªé‡è¦è¿›æ­¥ï¼Œç±»ä¼¼äºChatGPTåœ¨æ–‡æœ¬ç”Ÿæˆé¢†åŸŸçš„å½±å“ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-6878a32e86cbde25dd062ffe7a663058_720w.webp" alt="img"></p><p><strong>å…³é”®ä¿¡æ¯ç‚¹</strong></p><ul><li>Suno AIæ˜¯ä¸“æ³¨äºç”Ÿæˆå¼AIéŸ³ä¹çš„å¹³å°ï¼Œæœ€æ–°å‘å¸ƒçš„V3ç‰ˆæœ¬åœ¨éŸ³è´¨ã€å’¬å­—å’ŒèŠ‚å¥ç¼–æ’ä¸Šæœ‰æ˜¾è‘—æå‡ã€‚</li><li>V3ç‰ˆæœ¬çš„AIéŸ³ä¹ç”Ÿæˆè´¨é‡å·²ç»è¾¾åˆ°äº†å€¼å¾—å…³æ³¨å’Œæ¨èçš„æ°´å¹³ã€‚</li><li>Suno AIæä¾›äº†ä¸¤ç§æ¨¡å¼ï¼šCustom Modeï¼ˆè‡ªå®šä¹‰æ¨¡å¼ï¼Œå¯è¾“å…¥æ­Œè¯ï¼‰å’ŒInstrumentalï¼ˆç”Ÿæˆçº¯éŸ³ä¹ï¼‰ã€‚</li><li>ç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™promptæ¥æŒ‡å¯¼AIåˆ›ä½œéŸ³ä¹ï¼ŒåŒ…æ‹¬éŸ³ä¹æµæ´¾ã€é£æ ¼ã€æƒ…ç»ªã€ä¹å™¨ç­‰å…ƒç´ ã€‚</li><li>Suno AIçš„V3ç‰ˆæœ¬è™½ç„¶ä»æœ‰é™åˆ¶ï¼ˆå¦‚æœ€å¤šç”Ÿæˆ2åˆ†é’ŸéŸ³ä¹ï¼‰ï¼Œä½†å·²ç»è¶³å¤Ÿæ»¡è¶³å¤§å¤šæ•°æ™®é€šäººçš„éŸ³ä¹åˆ›ä½œéœ€æ±‚ã€‚</li></ul><p><img src="https://pic4.zhimg.com/80/v2-587370bb7cc270127554cc48d0a82d5b_720w.webp" alt="img"></p><p><strong>å†…å®¹é—®ç­”</strong></p><ul><li>Q: Suno AIçš„V3ç‰ˆæœ¬æœ‰å“ªäº›æ”¹è¿›ï¼Ÿ</li><li>A: V3ç‰ˆæœ¬åœ¨éŸ³è´¨ã€å’¬å­—å’ŒèŠ‚å¥ç¼–æ’ä¸Šæœ‰äº†æ˜¾è‘—æå‡ï¼Œä½¿å¾—ç”Ÿæˆçš„éŸ³ä¹æ›´åŠ æ‚¦è€³å’Œä¸“ä¸šã€‚</li><li>Q: Suno AIæä¾›å“ªäº›åˆ›ä½œæ¨¡å¼ï¼Ÿ</li><li>A: æä¾›Custom Modeï¼ˆè‡ªå®šä¹‰æ¨¡å¼ï¼Œå¯è¾“å…¥æ­Œè¯ï¼‰å’ŒInstrumentalï¼ˆç”Ÿæˆçº¯éŸ³ä¹ï¼‰ä¸¤ç§æ¨¡å¼ã€‚</li><li>Q: å¦‚ä½•ä½¿ç”¨Suno AIç”ŸæˆéŸ³ä¹ï¼Ÿ</li><li>A: ç”¨æˆ·éœ€è¦ç¼–å†™ä¸€ä¸ªåŒ…å«éŸ³ä¹æµæ´¾ã€é£æ ¼ã€æƒ…ç»ªã€ä¹å™¨ç­‰å…ƒç´ çš„promptæ¥æŒ‡å¯¼AIåˆ›ä½œéŸ³ä¹ã€‚</li></ul><p><img src="https://pic3.zhimg.com/80/v2-ebdcc8855e725feddf29c4032ee244a6_720w.webp" alt="img"></p><p><strong>Suno AIçš„V3ç‰ˆæœ¬è¦æ€ä¹ˆä½¿ç”¨ï¼Ÿ</strong></p><p>Suno AIçš„V3ç‰ˆæœ¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä½¿ç”¨ï¼š</p><p><strong>1.è®¿é—®Suno AIå¹³å°</strong>ï¼šé¦–å…ˆï¼Œä½ éœ€è¦è®¿é—®Suno AIçš„å®˜æ–¹ç½‘ç«™ï¼ˆ<a href="https://link.zhihu.com/?target=https://app.suno.ai/%EF%BC%89%EF%BC%8C%E8%BF%99%E6%98%AF%E7%94%9F%E6%88%90%E9%9F%B3%E4%B9%90%E7%9A%84%E4%B8%BB%E9%A1%B5%E3%80%82">https://app.suno.ai/ï¼‰ï¼Œè¿™æ˜¯ç”ŸæˆéŸ³ä¹çš„ä¸»é¡µã€‚</a></p><p><strong>2.é€‰æ‹©ç”Ÿæˆæ¨¡å¼</strong>ï¼šSuno AIæä¾›äº†ä¸¤ç§ä¸»è¦çš„ç”Ÿæˆæ¨¡å¼ï¼š</p><ol><li><ol><li><strong>Custom Modeï¼ˆè‡ªå®šä¹‰æ¨¡å¼ï¼‰</strong>ï¼šåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰æ­Œè¯æ¥ç”ŸæˆéŸ³ä¹ã€‚</li><li><strong>Instrumentalï¼ˆçº¯éŸ³ä¹æ¨¡å¼ï¼‰</strong>ï¼šé€‰æ‹©è¿™ä¸ªæ¨¡å¼ï¼ŒSuno AIå°†åªç”Ÿæˆæ²¡æœ‰æ­Œè¯çš„çº¯éŸ³ä¹ã€‚</li></ol></li></ol><p><strong>ç¼–å†™Prompt</strong>ï¼šä½¿ç”¨Custom Modeæ—¶ï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªpromptï¼Œè¿™ä¸ªpromptåº”è¯¥åŒ…å«ä»¥ä¸‹å…ƒç´ ï¼š</p><ol><li><ol><li>éŸ³ä¹æµæ´¾ï¼ˆå¦‚Kpopã€Heavy Metalï¼‰</li><li>éŸ³ä¹é£æ ¼ï¼ˆå¦‚Slowã€Broadwayï¼‰</li><li>æƒ…ç»ªï¼ˆå¦‚æ‚²ä¼¤ã€æ„¤æ€’ï¼‰</li><li>ä¹å™¨ï¼ˆå¦‚é’¢ç´ã€å‰ä»–ï¼‰</li><li>ä¸»é¢˜æˆ–åœºæ™¯</li><li>äººå£°æè¿°ï¼ˆå¦‚æ„¤æ€’çš„ç”·å£°ã€å¿§ä¼¤çš„å¥³å£°ï¼‰</li></ol></li></ol><p>\3. å¯¹äºInstrumentalæ¨¡å¼ï¼Œä½ éœ€è¦æ ¹æ®ä½ æƒ³è¦ç”Ÿæˆçš„éŸ³ä¹çš„ç‰¹ç‚¹æ¥ç¼–å†™ç›¸åº”çš„è‹±æ–‡è¯ç»„prompt,ä¸ç”¨å†™æ­Œè¯ã€‚</p><p><strong>4.ç”Ÿæˆæ­Œè¯</strong>ï¼šå¦‚æœä½ ä¸ç†Ÿæ‚‰éŸ³ä¹åˆ›ä½œï¼Œå¯ä»¥ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹æ¥å¸®åŠ©ä½ ç”Ÿæˆæ­Œæ›²çš„promptå’Œæ­Œè¯ã€‚ä½ éœ€è¦æä¾›ä¸€ä¸ªæ•…äº‹æˆ–ä¸»é¢˜ï¼Œå¹¶æŒ‡å®šæ­Œæ›²çš„ç»“æ„ï¼ˆå¦‚Verseã€Chorusã€Bridgeç­‰ï¼‰ï¼Œä»¥åŠä½ å¸Œæœ›çš„æ–‡å­¦æ°”è´¨å’ŒæŠ¼éŸµè¦æ±‚ã€‚</p><p><strong>5.æäº¤ç”Ÿæˆ</strong>ï¼šå°†ç¼–å†™å¥½çš„promptå¤åˆ¶ç²˜è´´åˆ°Suno AIçš„è¾“å…¥æ¡†ä¸­ï¼Œç„¶åç‚¹å‡»ç”ŸæˆæŒ‰é’®ã€‚æ ¹æ®ä½ çš„è®¾ç½®ï¼ŒAIå°†æ ¹æ®è¿™äº›æŒ‡ç¤ºç”ŸæˆéŸ³ä¹ã€‚</p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥åˆ©ç”¨Suno AIçš„V3ç‰ˆæœ¬æ¥åˆ›ä½œå±äºä½ è‡ªå·±çš„éŸ³ä¹ä½œå“ã€‚</p><p><strong>å…¶ä»–äº‹é¡¹ï¼š</strong></p><p><strong>1.å…è´¹ä¸ä»˜è´¹ç”¨æˆ·</strong>ï¼šå…è´¹ç”¨æˆ·æ¯å¤©æœ‰ä¸€å®šæ•°é‡çš„ç§¯åˆ†ï¼ˆ50ç§¯åˆ†ï¼‰ï¼Œå¯ä»¥ç”¨æ¥ç”ŸæˆéŸ³ä¹ã€‚ä»˜è´¹ç”¨æˆ·å¯ä»¥é€šè¿‡è®¢é˜…æœåŠ¡è·å¾—æ›´å¤šç§¯åˆ†ï¼Œ10åˆ€ä¸€ä¸ªæœˆï¼Œç»™2500ç§¯åˆ†ï¼Œå¯ä»¥ç”Ÿæˆå¾ˆå¤šç©å¾ˆä¹…ã€‚</p><p><strong>2.ç¼–è¾‘ä¸åˆ†äº«</strong>ï¼šç”Ÿæˆçš„éŸ³ä¹å¯ä»¥ç›´æ¥åˆ†äº«ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œè¿›ä¸€æ­¥çš„ç¼–è¾‘æˆ–ä¸å…¶ä»–æŠ€æœ¯ï¼ˆå¦‚SVCï¼‰ç»“åˆï¼Œä»¥å®ç°æ›´ä¸ªæ€§åŒ–çš„å£°éŸ³æ•ˆæœã€‚</p><p>å¯¹äºç”Ÿæˆå¼AIï¼Œæˆ‘ä¸€ç›´æ˜¯æŒ‰ç…§äº”ä¸ªæ¨¡æ€å»è¿›è¡Œåˆ†ç±»çš„ï¼š</p><p>æ–‡æœ¬ã€å›¾ç‰‡ã€å£°éŸ³ã€è§†é¢‘ã€3Dã€‚</p><p>è€Œå£°éŸ³é¢†åŸŸï¼Œå¯èƒ½æ˜¯åœ¨æˆ‘çš„åˆ†ç±»é‡Œï¼Œæˆ‘æœ€æ„Ÿå…´è¶£ä¹Ÿæ˜¯æœ€å–œæ¬¢çš„ä¸€ä¸ªã€‚</p><p>åœ¨æŸä¸€ä¸ªè·¯æ¼”çš„PPTä¸Šï¼Œæˆ‘ç»™å£°éŸ³åˆæ‹†æˆäº†4ä¸ªç»†åˆ†ï¼š</p><p><img src="https://pic2.zhimg.com/80/v2-02f4643a48586050ccd176912f5f1cd5_720w.jpg" alt="img"></p><p>TTSã€SVCã€AIéŸ³æ•ˆï¼Œæˆ‘éƒ½å†™è¿‡ï¼Œä¹Ÿç©äº†å¾ˆä¹…ï¼Œè€Œç”Ÿæˆå¼AIéŸ³ä¹ï¼Œæ˜¯æˆ‘ä¸€ç›´æ²¡å†™è¿‡çš„ä¸œè¥¿ã€‚</p><p>ä¸æ˜¯æˆ‘æ²¡ç©ï¼Œæ˜¯æˆ‘è§‰å¾—è¿™ç©æ„ï¼ŒçœŸçš„è¿˜æ²¡åˆ°å€¼å¾—å»å†™å»æ¨èçš„åœ°æ­¥ã€‚ã€‚ã€‚</p><p>æ•´ä¸ªAIç”Ÿæˆå¼éŸ³ä¹çš„ä»£è¡¨ï¼Œé‚£è‚¯å®šå°±æ˜¯SunoAIäº†ã€‚</p><p>è€Œä¸”è¿™ç©æ„å…¶å®ä¹Ÿç«è¿‡2æ³¢äº†ã€‚</p><p>ç¬¬ä¸€æ³¢æ˜¯å»å¹´3ã€4æœˆçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªå¾ˆç«çš„å¼€æºé¡¹ç›®å«Barkï¼Œå°±æ˜¯å‡ºè‡ªSunoä¹‹æ‰‹ï¼Œæ‹¿äº†å°†è¿‘32kçš„æ˜Ÿæ ‡ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-f2179ca631838dd9d997b2c80eeca83b_720w.jpg" alt="img"></p><p>ç„¶åå°±æ˜¯å»å¹´12æœˆ21å·çš„æ—¶å€™ï¼Œä¸ºäº†åº†ç¥ã€Šæµ·è´¼ç‹ã€‹åŠ¨ç”»25å‘¨å¹´ï¼Œæµ·è´¼ç‹å†³å®šé‡åˆ¶æœ€å¼€å§‹çš„ä¸œæµ·ç¯‡çš„é‚£60é›†ï¼Œç„¶åå°¾ç”°è¿™è´§ï¼Œç»™æµ·è´¼ç‹å®˜æ–¹å‘äº†ä¸€é¦–è´ºæ›²ï¼Œå«ã€ŠYO-HO-HOãŠã‚Œé”æµ·è³Šã€‹ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-b63bb2351d009e740983d8b2c89669aa_720w.webp" alt="img"></p><p>è¿™äº‹æœ¬èº«æ˜¯ä¸ªå¥½äº‹ï¼Œä½†æ˜¯å¥½æ­»ä¸æ­»çš„ï¼Œè¿™æ›²å­æ˜¯ç‰¹ä¹ˆæ‹¿AIåšçš„ï¼Œå°±æ˜¯ç”¨ä»Šå¤©çš„ä¸»è§’Sunoå‡ºçš„ã€‚ã€‚</p><p>è¿™æ›²å­å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œå¾ˆç³™ï¼ŒåŸºæœ¬ç­‰äºæ²¡æ³•å¬çš„åœ°æ­¥ã€‚</p><p><img src="https://picx.zhimg.com/v2-b5e3de36486af065a9201cc5903b9227.jpg?source=382ee89a" alt="img"></p><p>01:17</p><p>ç„¶åå°±è¢«ç½‘å‹ä¸€é€šéª‚ï¼Œä½ è¿™ä¸ªæµ“çœ‰å¤§çœ¼çš„å°¾ç”°æ€ä¹ˆä¹Ÿç”¨AIäº†ã€‚ã€‚ã€‚ä¼ ç€ä¼ ç€å°±å˜æˆã€Šæµ·è´¼ç‹ã€‹é‡åˆ¶ç‰ˆè¦ç”¨AIåšäº†ã€‚ã€‚ã€‚äºæ˜¯éª‚çš„æ›´å‡¶äº†ã€‚ã€‚ã€‚</p><p>è¿™ä¸ªå°æ’æ›²ï¼Œè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œä¹Ÿé—´æ¥çš„æ ‡æ˜ï¼Œå½“æ—¶çš„Sunoçš„è´¨é‡ï¼Œæ˜¯çœŸçš„å·®ã€‚</p><p>ç›´åˆ°ä»Šå¤©ï¼ŒSunoç»ˆäºä¸Šäº†V3ç‰ˆæœ¬ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-5d63262301bc08b71740b3c10c3754ee_720w.webp" alt="img"></p><p>åœ¨æˆ‘å¬äº†å¾ˆå¤šdemoå’Œè‡ªå·±ä¹Ÿè·‘äº†äºŒåå‡ é¦–åï¼Œæˆ‘è§‰å¾—ï¼ŒAIéŸ³ä¹çš„â€ChatGPTâ€æ—¶åˆ»ï¼Œç»ˆäºåˆ°æ¥äº†ã€‚</p><p>è¿™æ˜¯æˆ‘çš„ä¸€ä¸ªdemoã€‚</p><p><img src="https://pic1.zhimg.com/v2-ebe10536f4be6d422a3b2cc5ca2434e6.jpg?source=382ee89a" alt="img"></p><p>02:00</p><p>å¼Šç«¯å°±æ˜¯Sunoæœ€å¤šåªèƒ½ç”Ÿæˆ2åˆ†é’Ÿçš„éŸ³ä¹ï¼Œæ‰€ä»¥å¯ä»¥å¬åˆ°æœ€åï¼Œä¼šæˆ›ç„¶è€Œæ­¢ç›´æ¥æˆªæ–­ï¼Œä½†æ˜¯å·²ç»æ¯”V2å¥½å¾ˆå¤šäº†ã€‚</p><p>ä½†æ˜¯è¿™ä¸ªéŸ³è´¨ã€å’¬å­—ã€èŠ‚å¥ç¼–æ’å•¥çš„ï¼Œä¹Ÿéƒ½å¥½å¤ªå¤šå¤ªå¤šäº†ã€‚</p><p>å‘ç»™æœ‹å‹å¬ï¼Œå¥¹å›äº†ä¸€å¥æ˜¯ï¼šå§æ§½ï¼Œè¿˜æ˜¯å¥½å¬çš„ã€‚</p><p>ç½‘å€åœ¨æ­¤ï¼š<a href="https://link.zhihu.com/?target=https://app.suno.ai/">https://app.suno.ai/</a></p><p><img src="https://pic2.zhimg.com/80/v2-6956ea0ab882b4ca6818984ccb5c9c49_720w.webp" alt="img"></p><p>ç‚¹Createå°±æ˜¯ç”Ÿæˆçš„ä¸»é¡µã€‚</p><p>ä¸»è¦ç”¨ä¸¤ç§æ¨¡å¼ï¼Œä¸€ä¸ªæ˜¯æ‰“å¼€çš„â€Custom Modeâ€ï¼Œè¿™ä¸ªæ˜¯è‡ªå®šä¹‰æ¨¡å¼ï¼Œå¯ä»¥è‡ªå·±è‡ªå®šä¹‰æ­Œè¯ã€‚</p><p>ç¬¬äºŒç§æ˜¯Instrumentalï¼Œè¿™ä¸ªæ‰“å¼€åå°±åªä¼šç”Ÿæˆæ²¡æœ‰æ­Œè¯çš„çº¯éŸ³ä¹äº†ã€‚</p><p>rollä¸€æ¬¡æ˜¯åŒæ—¶å‡º2é¦–æ­Œï¼Œä¸€é¦–æ¶ˆè€—5ç§¯åˆ†ï¼Œæ‰€ä»¥ä¸€æ¬¡æ¶ˆè€—10ç§¯åˆ†ã€‚</p><p>å…è´¹ç”¨æˆ·æ¯å¤©æœ‰50ç§¯åˆ†å¯ä»¥ç©ï¼Œå¯ä»¥roll5æ¬¡å‡º10é¦–æ­Œã€‚</p><p>ä½ è¦æ˜¯æ°ªé‡‘çš„è¯ä¹ŸæŒºä¾¿å®œï¼Œ10åˆ€ä¸€ä¸ªæœˆï¼Œç»™2500ç§¯åˆ†ï¼Œèƒ½ç©å¾ˆä¹…å¾ˆä¹…ã€‚</p><p>è¦ç”ŸæˆéŸ³ä¹çš„è¯ï¼Œç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å†™promptï¼Œç¬¬äºŒæ­¥ï¼ˆçº¯éŸ³ä¹æ²¡æœ‰ï¼‰å°±æ˜¯å†™æ­Œè¯ã€‚</p><p>promptè¿™å—ï¼Œæˆ‘æ¯”è¾ƒæ¨èçš„å†™æ³•å°±æ˜¯ï¼š</p><blockquote><p>éŸ³ä¹æµæ´¾ï¼ˆå¦‚Kpopã€Heavy Metalï¼‰ã€éŸ³ä¹é£æ ¼ï¼ˆå¦‚Slowã€Broadwayï¼‰ã€æƒ…ç»ªï¼ˆå¦‚æ‚²ä¼¤ã€æ„¤æ€’ï¼‰ã€ä¹å™¨ï¼ˆå¦‚é’¢ç´ã€å‰ä»–ï¼‰ã€ä¸»é¢˜æˆ–åœºæ™¯ã€äººå£°æè¿°ï¼ˆå¦‚æ„¤æ€’çš„ç”·å£°ã€å¿§ä¼¤çš„å¥³å£°ï¼‰</p></blockquote><p>ä½†æ˜¯è¯´å®è¯ï¼Œå†™éŸ³ä¹çš„promptå¯¹äºä¸æ‡‚éŸ³ä¹çš„äººæ¥è¯´ï¼ŒçœŸçš„éš¾ï¼Œæ¯•ç«Ÿä»€ä¹ˆéŸ³ä¹æµæ´¾ã€éŸ³ä¹é£æ ¼å¾ˆå¤šéƒ½ä¸æ‡‚ï¼Œä½ å’‹å†™å•Š&#x3D; &#x3D;</p><p>æ­Œè¯å…¶å®ä¸€æ ·çš„é“ç†ï¼Œä¸€é¦–æ­Œï¼Œæ­£å¸¸æ˜¯æœ‰ç»“æ„çš„ï¼Œæ¯”å¦‚æœ‰Verseï¼ˆä¸»æ­Œï¼‰ã€Chorusï¼ˆå‰¯æ­Œï¼‰ã€æœ‰Bridgeï¼ˆå¿«ç»“æŸçš„æ—¶å€™ç»å¸¸é‚£ä¸ªä¸ä¸€æ ·çš„éƒ¨åˆ†ï¼‰ç­‰ç­‰ï¼Œæ™®é€šäººå¾ˆå¤šæ—¶å€™å†å†™çš„æ—¶å€™ä¹Ÿä¸€è„¸æ‡µé€¼ï¼Œè¿™ç‰¹ä¹ˆå’‹å†™ã€‚ã€‚</p><p>åˆ«è¯´å¤§å®¶ï¼Œå…¶å®æˆ‘å»å¹´åˆšç©Sunoçš„æ—¶å€™ï¼Œä¸€æ ·ä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼ã€‚</p><p>è®©å¤§å®¶å»ç°å­¦æˆ‘è§‰å¾—ä¹Ÿä¸ç°å®ã€‚ã€‚ã€‚</p><p>é‚£AIçš„æ–¹å¼ï¼Œå°±å¿…é¡»ç”¨AIå»è§£å†³ï¼Œä½ è¯´å¯¹å§ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘å°±éšæ‰‹å†™äº†ä¸€ä¸ªPromptï¼Œè®©å¤§æ¨¡å‹æ¥ç»™ä½ å†™æ­Œæ›²Promptå’Œæ­Œè¯ã€‚</p><p>ä»€ä¹ˆç©æ„éƒ½ç»™ä½ å¼„å¥½ï¼Œä½ è‡ªå·±å¤åˆ¶å³ç”¨ã€‚å°±åƒè¿™æ ·ï¼š</p><p><img src="https://pic4.zhimg.com/80/v2-30b4e6477f63003467b6a9e03b8c8f77_720w.webp" alt="img"></p><p><img src="https://pic2.zhimg.com/80/v2-3d5a4cbc7ea9c5049d38692f1e562001_720w.webp" alt="img"></p><p>è¿™ä¸ªPrompté•¿è¿™æ ·ï¼š</p><blockquote><p>#01 ä½ æ˜¯æ­Œè¯å¤§å¸ˆXXï¼Œç°åœ¨ï¼Œæˆ‘éœ€è¦ä½ å¸®æˆ‘å†™ä¸€æ®µXXæ­Œè¯ï¼Œæè¿°çš„æ˜¯ä¸€ä¸ªXXæ•…äº‹ï¼Œæ•´ä½“æ­Œæ›²æ—¶é•¿2åˆ†é’Ÿä»¥å†…ï¼Œè¦æŠ¼éŸµï¼Œè¦æœ‰æ–‡å­¦æ°”è´¨ï¼Œå‰¯æ­Œéƒ¨åˆ†è¦è¿›è¡Œè·¨è¡Œé‡å¤ã€‚è¯·æŒ‰ä»¥ä¸‹ç»“æ„å¸®æˆ‘åˆ›ä½œï¼š<br>â€œâ€â€<br>[instrumental intro]<br>[Verse 1]<br>&lt;æ­Œè¯&gt;<br>[Chorus]<br>&lt;æ­Œè¯&gt;<br>[Verse 2]<br>&lt;æ­Œè¯&gt;<br>[Chorus]<br>&lt;æ­Œè¯&gt;<br>[Bridge]<br>&lt;æ­Œè¯&gt;<br>[Guitar solo]<br>[Chorus]<br>&lt;æ­Œè¯&gt;<br>[Outro]<br>[End]<br>â€œâ€â€<br>#02 è¾“å‡ºæ­Œè¯ä»¥åï¼Œå†æ ¹æ®æ­Œè¯å’Œæ•…äº‹å†…å®¹ï¼Œä»¥è‹±æ–‡è¯ç»„çš„å½¢å¼å†ç»™å‡ºæ­Œæ›²çš„promptã€‚<br>è¯·æŒ‰ä»¥ä¸‹æ ¼å¼å¸®æˆ‘è¾“å‡ºè‹±æ–‡promptï¼š<br>â€œâ€â€&lt;éŸ³ä¹æµæ´¾ï¼ˆå¦‚Kpopã€Heavy Metalï¼‰&gt;ã€&lt;éŸ³ä¹é£æ ¼ï¼ˆå¦‚Slowã€Broadwayï¼‰&gt;ã€&lt;æƒ…ç»ªï¼ˆå¦‚æ‚²ä¼¤ã€æ„¤æ€’ï¼‰&gt;ã€&lt;ä¹å™¨ï¼ˆå¦‚é’¢ç´ã€å‰ä»–ï¼‰&gt;ã€&lt;ä¸»é¢˜æˆ–åœºæ™¯&gt;ã€&lt;äººå£°æè¿°ï¼ˆå¦‚æ„¤æ€’çš„ç”·å£°ã€å¿§ä¼¤çš„å¥³å£°ï¼‰&gt;â€â€â€</p></blockquote><p>ç›´æ¥æ‹¿å»å¤åˆ¶å¼€ç®±å³å¯ç”¨ã€‚</p><p>ç„¶åå°±ç›´æ¥æŠŠå‡ºæ¥çš„ç»“æœï¼Œå…¨éƒ½å¤åˆ¶ç²˜è´´è¿›å»ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±æ”¹å§æ”¹å§ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-4d7b6f9db8025faab39ad271e41494d3_720w.webp" alt="img"></p><p>éƒ½æ‰”è¿›å»ä¹‹åï¼Œç‚¹é‚£ä¸ªé»„çš„btnï¼Œç›´æ¥å¼€è·‘ï¼Œé€Ÿåº¦æŒºå¿«çš„ï¼Œå¤§æ¦‚å‡ åç§’å°±å‡ºæ¥äº†ã€‚</p><p>è¯´å®è¯ï¼Œè¿™ä¸ªå‡ºæ¥ç”·å£°ï¼Œè®©æˆ‘æœ‰ç‚¹å¿ƒåŠ¨äº†ã€‚ã€‚ã€‚</p><p><img src="https://picx.zhimg.com/v2-c9a5ec7df34a0b29e0ab5d6f9a7fbb75.jpg?source=382ee89a" alt="img"></p><p>02:00</p><p>å½“ç„¶ï¼Œå‡ºæ¥çš„æ­Œï¼Œä½ ä¸ä»…å¯ä»¥æ‹¿å»ç›´æ¥å‘ï¼Œä½ è¿˜å¯ä»¥ç©ä¸€äº›éªšæ“ä½œï¼Œæ¯”å¦‚é…åˆSVCï¼Œåˆ†ç¦»æ¢å£°ï¼Œæ¢æˆè‡ªå·±çš„ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹ï¼š</p><p><a href="https://link.zhihu.com/?target=http://mp.weixin.qq.com/s?__biz=MzIyMzA5NjEyMA==&mid=2647661219&idx=1&sn=74299c51f67863360c044b45a48658cf&chksm=f007c6f4c7704fe2875e409f0c7379fdac20524ec4199af2f3eaf7cfe34348c77afe7f486141&scene=21%23wechat_redirect">AIå”±æ­Œä¹‹ç»ˆæå–‚é¥­æ•™ç¨‹ - SVCçš„æé™å°±åœ¨è¿™äº†</a></p><p>æ›´å¤šçš„æ­Œï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»Sunoä¸Šè·‘ç€ç©ï¼Œä½“éªŒä¸€ä¸‹AIéŸ³ä¹çš„é­…åŠ›ï¼Œè¿™ç§ç›´å‡ºçš„æ„Ÿè§‰ï¼Œè¿˜æ˜¯éå¸¸çˆ½çš„ã€‚</p><p>è™½ç„¶å¯¹å¾ˆå¤šä¸“ä¸šæ­Œæ‰‹æˆ–è€…ä¸“ä¸šåˆ¶ä½œäººæ¥è¯´ï¼Œå¯èƒ½è§‰å¾—è¿˜åç©å…·ï¼Œå¯æ§æ€§å·®ï¼Œä¸å¥½ç¼–è¾‘ç­‰ç­‰ã€‚</p><p>ä½†è‡³å°‘ï¼Œä¸€å®šè¾¾åˆ°äº†å¤§å¤šæ•°æ™®é€šäººçš„æ°´å‡†ã€‚</p><p>ä¸”è¿™ä¸ªè¶‹åŠ¿ï¼Œä¸€å®šæ˜¯ä¸€ä¸ªä¸å¯é€†çš„æœªæ¥ã€‚</p><p>è¿™è‚¡å­é£ï¼Œç°åœ¨ï¼Œç»ˆäºåˆ°äº†éŸ³ä¹ã€‚</p><p>AIéŸ³ä¹çš„â€ChatGPTâ€æ—¶åˆ»ï¼Œæˆ‘è§‰å¾—ï¼Œç»ˆäºåˆ°æ¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aiæ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GPT-sovits=è‡ªå®šä¹‰AIè¯­è¨€æ¨¡å‹è®­ç»ƒ</title>
      <link href="/2024/03/28/Ai%E7%A7%91%E6%8A%80/GPT-sovits-%E8%87%AA%E5%AE%9A%E4%B9%89AI%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/"/>
      <url>/2024/03/28/Ai%E7%A7%91%E6%8A%80/GPT-sovits-%E8%87%AA%E5%AE%9A%E4%B9%89AI%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/</url>
      
        <content type="html"><![CDATA[<p>GPT-SoVITSæ˜¯ä¸€ä¸ªå¼€æºçš„TTSé¡¹ç›®ï¼Œåªéœ€è¦1åˆ†é’Ÿçš„éŸ³é¢‘æ–‡ä»¶å°±å¯ä»¥å…‹éš†å£°éŸ³ï¼Œæ”¯æŒå°†æ±‰è¯­ã€è‹±è¯­ã€æ—¥è¯­ä¸‰ç§è¯­è¨€çš„æ–‡æœ¬è½¬ä¸ºå…‹éš†å£°éŸ³ï¼Œä½œè€…å·²æµ‹è¯•ï¼Œéƒ¨ç½²å¾ˆæ–¹ä¾¿ï¼Œè®­ç»ƒé€Ÿåº¦å¾ˆå¿«ï¼Œæ•ˆæœå¾ˆå¥½ã€‚é¡¹ç›®å‘å¸ƒä¸åˆ°1ä¸ªæœˆå°±æœ‰äº†9.3k starã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-baee8b7310451f87541d8cfeeec5547c_720w.webp" alt="img"></p><p>ç›´æ¥çœ‹ä½œè€…æµ‹è¯•çš„æ•ˆæœï¼Œèƒ½å¤Ÿä»¥å‡ä¹±çœŸäº†ã€‚</p><p><a href="https://pan.baidu.com/link/zhihu/7dhFzeuQhvi1SkF3YmM1RYJ2Z5R1IDWwdqhm=="><img src="https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_other.svg" alt="img">ä¸­æ–‡_åŸå£°.wav307.9KÂ·ç™¾åº¦ç½‘ç›˜</a><a href="https://pan.baidu.com/link/zhihu/7hhDzRuUhSi0R2lHtGaKJx0iafLwYTdwZC9W=="><img src="https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_other.svg" alt="img">ä¸­æ–‡_å…‹éš†å£°.wav262.4KÂ·ç™¾åº¦ç½‘ç›˜</a><a href="https://pan.baidu.com/link/zhihu/75h0zVuRhLikYQNXllRids1kM5RRJlUQUtEF=="><img src="https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_other.svg" alt="img">è‹±è¯­_å…‹éš†å£°.wav423.7KÂ·ç™¾åº¦ç½‘ç›˜</a><a href="https://pan.baidu.com/link/zhihu/7IhzzXuMhwiUS6Vkl2MFN6NEcidPdlVwdXhU=="><img src="https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_other.svg" alt="img">æ—¥è¯­_å…‹éš†å£°.wav979.2KÂ·ç™¾åº¦ç½‘ç›˜</a></p><p><strong>GPT-SoVITSé¡¹ç›®åœ°å€</strong><br><a href="https://link.zhihu.com/?target=https://github.com/RVC-Boss/GPT-SoVITS">https://github.com/RVC-Boss/GPT-SoVITS</a></p><p><strong>ä»¥ä¸‹æ˜¯è¯¦ç»†æ•™ç¨‹ï¼Œé˜…è¯»å‰è¯·æ³¨æ„ï¼š</strong><br>1.æœ¬æ–‡ç¯‡å¹…è¾ƒé•¿ï¼Œæˆªå›¾è¾ƒå¤šï¼Œå»ºè®®å…ˆæ”¶è—å†é˜…è¯»ã€‚<br>2.æœ¬æ–‡åŸºäºgoogle colabè¿è¡Œï¼Œæœ¬åœ°éƒ¨ç½²åŠautodläº‘ç«¯éƒ¨ç½²ä¹Ÿå¯å‚è€ƒï¼ŒåŸºæœ¬ç›¸åŒã€‚<br>3.å¦‚éœ€æœ¬åœ°ä¸€é”®å®‰è£…åŒ…ï¼Œå¯å…³æ³¨å…¬ä¼—å·â€AIæŠ€æœ¯å®æˆ˜â€ï¼Œå›å¤â€å£°éŸ³å…‹éš†â€è·å–ã€‚</p><h2 id="1-éƒ¨ç½²è¿è¡Œ"><a href="#1-éƒ¨ç½²è¿è¡Œ" class="headerlink" title="1.éƒ¨ç½²è¿è¡Œ"></a>1.éƒ¨ç½²è¿è¡Œ</h2><p>GPT-SoVITSæä¾›äº†colabçš„notebookï¼Œå¹¶ä¸”æä¾›äº†web-uiï¼Œå¯ä»¥ä¸€é”®éƒ¨ç½²ï¼Œéå¸¸æ–¹ä¾¿ã€‚ç‚¹å‡»ä¸‹å›¾ä¸­â€COLABâ€å³å¯æ‰“å¼€colab notebookã€‚ä¹Ÿå¯ä»¥ç›´æ¥æ‰“å¼€é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https://colab.research.google.com/github/RVC-Boss/GPT-SoVITS/blob/main/colab_webui.ipynb">https://colab.research.google.com/github/RVC-Boss/GPT-SoVITS/blob/main/colab_webui.ipynb</a></p><p><img src="https://pic2.zhimg.com/80/v2-e192c1e5e187755a6d8ddd73c8ddf201_720w.webp" alt="img"></p><p>è¿›å…¥colabç¬”è®°æœ¬ï¼Œç‚¹å‡»â€å…¨éƒ¨è¿è¡Œâ€ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-9090b24d23587c81cea38e7d159aa1fa_720w.webp" alt="img"></p><p>ç­‰å¾…è¿è¡Œå®Œæˆï¼Œéœ€è¦ç­‰å¾…10å‡ åˆ†é’Ÿå·¦å³ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-98531f14cdf62fa398414647d6dda7dc_720w.webp" alt="img"></p><p>å½“çœ‹åˆ°æ—¥å¿—å‡ºç°Running on public URLæ—¶ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼Œç‚¹å‡»è¿™ä¸ªurlï¼Œæ‰“å¼€webç•Œé¢</p><p><img src="https://pic4.zhimg.com/80/v2-dd957cd33a0f8d47c1a4bade31e6cadf_720w.webp" alt="img"></p><p>æ‰“å¼€çš„webç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="https://pic3.zhimg.com/80/v2-62194ebde7ca70e8092ee3312e97b4fa_720w.webp" alt="img"></p><h2 id="2-å£°éŸ³ä¸Šä¼ å’Œå¤„ç†"><a href="#2-å£°éŸ³ä¸Šä¼ å’Œå¤„ç†" class="headerlink" title="2.å£°éŸ³ä¸Šä¼ å’Œå¤„ç†"></a>2.å£°éŸ³ä¸Šä¼ å’Œå¤„ç†</h2><p>å‡†å¤‡1åˆ†é’Ÿä»¥ä¸Šçš„å¹²å£°éŸ³é¢‘æ–‡ä»¶ç”¨äºè®­ç»ƒï¼Œæœ€å¥½æ˜¯åœ¨å®‰é™çš„ç¯å¢ƒä¸‹å½•åˆ¶ï¼Œå¦‚æœéŸ³é¢‘æ–‡ä»¶ä¸­æœ‰èƒŒæ™¯å£°éŸ³æˆ–å…¶ä»–å£°éŸ³ï¼Œåˆ™å¿…é¡»è¿›è¡Œä¸‹é¢çš„å¤„ç†ï¼Œå¦åˆ™éå¿…é¡»ï¼Œä½†æ˜¯å»ºè®®å¤„ç†ã€‚</p><h3 id="2-1-äººå£°åˆ†ç¦»"><a href="#2-1-äººå£°åˆ†ç¦»" class="headerlink" title="2.1 äººå£°åˆ†ç¦»"></a>2.1 äººå£°åˆ†ç¦»</h3><p>è¿™ä¸€æ­¥æ“ä½œæ˜¯ä½¿ç”¨UVR5(ä¸€ä¸ªå¤„ç†å£°éŸ³çš„è½¯ä»¶)æå–å‡ºå¹²å‡€çš„äººå£°ï¼Œåé¢æˆ‘ä»¬ä¼šä½¿ç”¨æå–å‡ºæ¥çš„å¹²å£°éŸ³é¢‘è®­ç»ƒã€‚è¿›å…¥ç•Œé¢ï¼ŒæŒ‰ä¸‹å›¾é€‰ä¸­Open UVR5-Webuiã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-ca34e3ac1e986f9cb248c671f6d4765c_720w.webp" alt="img"></p><p>åœ¨colabæ§åˆ¶å°ä¼šè¾“å‡ºä¸€ä¸ªUVR5çš„webç•Œé¢é“¾æ¥</p><p><img src="https://pic3.zhimg.com/80/v2-94d17a8f66f9d209e8e1d74fc133affe_720w.webp" alt="img"></p><p>æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œè¿›å…¥åˆ°UVR5çš„ç•Œé¢ï¼ŒæŒ‰å¦‚ä¸‹æ–¹å¼æ“ä½œï¼š</p><p><img src="https://pic3.zhimg.com/80/v2-560803bee13b5996333e1a866a8a8416_720w.webp" alt="img"></p><p>ç­‰å¾…å¤„ç†å®Œæˆ</p><p><img src="https://pic3.zhimg.com/80/v2-8d286b04a9704911d39b8ab7197d6a02_720w.webp" alt="img"></p><p>å¤„ç†æˆåŠŸ</p><p><img src="https://pic3.zhimg.com/80/v2-1a6e2a668739384d08d3e67dd908b35e_720w.webp" alt="img"></p><p>å›åˆ°colabç•Œé¢ï¼ŒæŒ‰ç…§å¦‚ä¸‹è·¯å¾„æ‰“å¼€ï¼Œå¯çœ‹åˆ°äººå£°å·²ç»è¢«æå–å‡ºæ¥äº†</p><p><img src="https://pic1.zhimg.com/80/v2-78e9466031cace0dff832f25b8da0230_720w.webp" alt="img"></p><p>æŠŠinstrumentå¼€å¤´çš„æ–‡ä»¶åˆ é™¤ï¼Œåªä¿ç•™äººå£°</p><p><img src="https://pic4.zhimg.com/80/v2-33a57e382c1ea050a68555849ef2423b_720w.webp" alt="img"></p><p>ä½¿ç”¨DeEchoAggressiveæŠŠå¹²å£°å†å¤„ç†ä¸€æ¬¡ï¼Œæ³¨æ„è·¯å¾„è¦å†™å¯¹ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-32305f00331e5ce83e1b2f0448506b01_720w.webp" alt="img"></p><p>è½¬æ¢æˆåŠŸ</p><p><img src="https://pic3.zhimg.com/80/v2-07c3b9a7ba05316af57effaa1a0e9436_720w.webp" alt="img"></p><p>ä¸‹é¢ç®­å¤´æŒ‡çš„å°±æ˜¯æœ€ç»ˆæå–å‡ºçš„äººå£°ï¼ŒæŠŠå…¶ä»–ä¸¤ä¸ªéƒ½åˆ é™¤ï¼Œæ–‡ä»¶å¤¹ä¸­åªä¿ç•™è¿™ä¸€ä¸ªæ–‡ä»¶ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-96f36352de43e3ee78d907adec9544c7_720w.webp" alt="img"></p><p>å¹²å£°æå–æˆåŠŸåï¼ŒUVR5çš„ç•Œé¢å°±å¯ä»¥å…³æ‰äº†ï¼Œå› ä¸ºåé¢è¿˜ä¼šæ‰“å¼€å‡ ä¸ªç•Œé¢ï¼Œæ‹…å¿ƒä¸ç†Ÿæ‚‰çš„æœ‹å‹ä¼šæ‡µï¼Œä¸å…³ä¹Ÿå¯ä»¥ã€‚</p><h3 id="2-2-åˆ‡å‰²éŸ³é¢‘"><a href="#2-2-åˆ‡å‰²éŸ³é¢‘" class="headerlink" title="2.2 åˆ‡å‰²éŸ³é¢‘"></a>2.2 åˆ‡å‰²éŸ³é¢‘</h3><p>è¿™ä¸€æ­¥è¦å°†å¹²å£°éŸ³é¢‘åˆ‡å‰²ï¼Œå¿…é¡»åšï¼Œå¦åˆ™ä¼šçˆ†æ˜¾å­˜ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-c7e27efd75ac24d59f2b22f559566941_720w.webp" alt="img"></p><p>ç­‰å¾…åˆ‡å‰²å®Œæˆ</p><p><img src="https://pic3.zhimg.com/80/v2-474c1611ae108fe6dca81c27829de8e2_720w.webp" alt="img"></p><p>å›åˆ°colabé¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°éŸ³é¢‘è¢«åˆ‡å‰²ä¸ºå¤šä¸ªå°æ®µéŸ³é¢‘</p><p><img src="https://pic1.zhimg.com/80/v2-673284722c4641b62bb83a97f22dff3c_720w.webp" alt="img"></p><h3 id="2-3-æ‰“æ ‡"><a href="#2-3-æ‰“æ ‡" class="headerlink" title="2.3 æ‰“æ ‡"></a>2.3 æ‰“æ ‡</h3><p>å…¶å®å°±æ˜¯è‡ªåŠ¨å°†è¾“å…¥çš„å¹²å£°éŸ³é¢‘è½¬ä¸ºæ–‡å­—ï¼Œç”¨æ¥å‘Šè¯‰è®­ç»ƒç³»ç»Ÿï¼ŒéŸ³é¢‘ä¸­çš„å“ªä¸ªæ—¶é—´è¯´çš„æ˜¯ä»€ä¹ˆå­—ã€‚æ³¨æ„è¾“å…¥çš„è·¯å¾„æ˜¯ä¸Šä¸€æ­¥åˆ‡å‰²åçš„éŸ³é¢‘è·¯å¾„ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-e138cdd8b0210bd2a1fe370ee1404e9e_720w.webp" alt="img"></p><p>å¼€å§‹æ‰§è¡Œäº†</p><p><img src="https://pic1.zhimg.com/80/v2-fb71c8923355ec5ada2192c6db5f7b10_720w.webp" alt="img"></p><p>å¯ä»¥åœ¨colabæ§åˆ¶å°çœ‹åˆ°æ—¥å¿—</p><p><img src="https://pic1.zhimg.com/80/v2-4f3e5836bdf350b9363e031af12109e8_720w.webp" alt="img"></p><p>ç¨ç­‰ä¸€ä¼šï¼Œåœ¨ç•Œé¢å¯ä»¥çœ‹åˆ°ä»»åŠ¡å®Œæˆ</p><p><img src="https://pic1.zhimg.com/80/v2-ff9f92c0962e4615dc2edb721809c028_720w.webp" alt="img"></p><p>åœ¨colabæ–‡ä»¶å¤¹å¯ä»¥çœ‹åˆ°è¿™ä¸ªç›®å½•ï¼Œ.listæ–‡ä»¶å°±æ˜¯è‡ªåŠ¨æ‰“æ ‡ç”Ÿæˆçš„æ–‡ä»¶ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-621d5a5fd296718824c1f32cad484fab_720w.webp" alt="img"></p><h3 id="2-4-äººå·¥æ ¡å¯¹"><a href="#2-4-äººå·¥æ ¡å¯¹" class="headerlink" title="2.4 äººå·¥æ ¡å¯¹"></a>2.4 äººå·¥æ ¡å¯¹</h3><p>å› ä¸ºä¸Šä¸€æ­¥æ˜¯è‡ªåŠ¨åšçš„ï¼Œå¯èƒ½æœ‰äº›è¯†åˆ«çš„ä¸å‡†ï¼Œæ‰€ä»¥äººå·¥æ ¡å¯¹ä¸€ä¸‹ï¼Œè¿½æ±‚å®Œç¾å¯ä»¥æ ¡å¯¹ï¼Œå¦åˆ™å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ï¼Œç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«çš„å·²ç»å¾ˆå‡†ç¡®äº†ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-9a09d54f69125378f5f31d45fc8a228f_720w.webp" alt="img"></p><p>å¯ä»¥çœ‹åˆ°æ§åˆ¶å°åˆè¾“å‡ºä¸€ä¸ªurlï¼Œæ‰“å¼€</p><p><img src="https://pic1.zhimg.com/80/v2-31be372c39fb396b418f7691c6676288_720w.webp" alt="img"></p><p>ä»¥ä¸‹æ˜¯æ ¡å¯¹çš„webç•Œé¢ï¼Œåˆ—å‡ºäº†éƒ¨åˆ†è‡ªåŠ¨è¯†åˆ«ç»“æœï¼Œå¯æ ¹æ®æƒ…å†µä¿®æ”¹ï¼Œè¿™ä¸€æ­¥ä½œè€…æ²¡åšï¼Œæœ‰äº›åŠŸèƒ½ä¸å¤ªæ¸…æ¥šï¼Œè¯»è€…æœ‰éœ€è¦çš„è¯è¯·è‡ªè¡Œç ”ç©¶ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-b2ccbf41c9a9a9bd6ca37c7cc6cb0a27_720w.webp" alt="img"></p><h2 id="3-è®­ç»ƒ"><a href="#3-è®­ç»ƒ" class="headerlink" title="3.è®­ç»ƒ"></a>3.è®­ç»ƒ</h2><p>å£°éŸ³å¤„ç†å®Œæˆï¼Œç»ˆäºè¦å¼€å§‹è®­ç»ƒäº†ã€‚</p><h3 id="3-1æ•°æ®é›†æ ¼å¼åŒ–"><a href="#3-1æ•°æ®é›†æ ¼å¼åŒ–" class="headerlink" title="3.1æ•°æ®é›†æ ¼å¼åŒ–"></a>3.1æ•°æ®é›†æ ¼å¼åŒ–</h3><p>è¿›å…¥ç•Œé¢ï¼ŒæŒ‰ç…§ä¸‹å›¾å¡«å†™ï¼Œè¿˜æ˜¯è¦æ³¨æ„å„è·¯å¾„è¦å†™å¯¹ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-b4bc41e24ffaf2e3f8e6c88f574cb205_720w.webp" alt="img"></p><p>å¡«å†™å®Œæˆåï¼Œåˆ†åˆ«ç‚¹å‡»ä¸‹é¢ä¸‰ä¸ªæŒ‰é’®ï¼Œæ¯ä¸ªæŒ‰é’®ç‚¹å®Œåï¼Œç­‰å¾…æ‰§è¡Œç»“æŸå†ç‚¹å‡»ä¸‹ä¸€ä¸ªã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-997575ff0316da0437cf364d0b3fd67f_720w.webp" alt="img"></p><h3 id="3-2-SoVITSè®­ç»ƒ"><a href="#3-2-SoVITSè®­ç»ƒ" class="headerlink" title="3.2 SoVITSè®­ç»ƒ"></a>3.2 SoVITSè®­ç»ƒ</h3><p>å¡«å†™æ¨¡å‹åç§°ï¼Œè®¾ç½®batch sizeï¼Œå»ºè®®batch_sizeè®¾ç½®ä¸ºæ˜¾å­˜çš„ä¸€åŠï¼Œé«˜äº†ä¼šçˆ†æ˜¾å­˜ã€‚<br>æ¥ç€è®¾ç½®è½®æ•°(total epoch)ï¼ŒSoVITSæ¨¡å‹è½®æ•°ï¼ˆä¸‹å›¾ç®­å¤´4)ï¼Œå¯ä»¥è®¾ç½®çš„é«˜ä¸€ç‚¹ï¼ŒGPTæ¨¡å‹è½®æ•°ï¼ˆä¸‹å›¾ç®­å¤´7ï¼‰ä¸èƒ½é«˜äº20ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ï¼‰å»ºè®®è®¾ç½®10ã€‚<br>ç‚¹å‡»â€Start SoVITS trainingâ€ï¼ˆä¸‹å›¾ç®­å¤´5ï¼‰ï¼Œæ³¨æ„ç‚¹äº†ç®­å¤´5ä¹‹åï¼Œä¸è¦å†ç‚¹ç®­å¤´7ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-0e3508babaa7cd91bfefcb24b8762c51_720w.webp" alt="img"></p><p>ç‚¹å‡»Start SoVITS traingä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å¼€å§‹è®­ç»ƒäº†ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-af0e9d8feb6c45cbfc8332ec1a21efdb_720w.webp" alt="img"></p><p>è®­ç»ƒçš„æ—¶å€™å¯ä»¥æŸ¥çœ‹æ˜¾å¡å ç”¨ï¼Œçˆ†æ˜¾å­˜äº†å°±è°ƒä½batch sizeï¼Œæˆ–è€…å­˜åœ¨è¿‡é•¿çš„éŸ³é¢‘ï¼Œéœ€è¦åœ¨åˆ‡å‰²éŸ³é¢‘ç¯èŠ‚å°†è¿‡é•¿éŸ³é¢‘å†æ¬¡åˆ‡å‰²ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-727d85223fe43e3f29c392b78d893862_720w.webp" alt="img"></p><p>SoVITSè®­ç»ƒå®Œæˆåä¼šæœ‰æç¤ºã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-1f7a0e4d00b5978b2cbf0ff6787b5eb6_720w.webp" alt="img"></p><p>å¯ä»¥çœ‹åˆ°SoVITS_weightsç›®å½•ä¸­å¤šäº†å‡ ä¸ªæ¨¡å‹ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-2b919abc4866021a329027c0afe48659_720w.webp" alt="img"></p><p>SoVITSè®­ç»ƒå®Œæˆï¼Œå¯ä»¥ç‚¹å‡»â€Start GPT traingâ€å¼€å§‹GPTè®­ç»ƒäº†ï¼ŒåŒæ ·ç‚¹å®Œç­‰å¾…ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-0bc1f74bd39f28208bd9e37d34cf0679_720w.webp" alt="img"></p><p>GPTä¹Ÿè®­ç»ƒå®Œæˆäº†ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-09bcf4faa6978d6a565f4a7696f3361c_720w.webp" alt="img"></p><h2 id="4-æ¨ç†"><a href="#4-æ¨ç†" class="headerlink" title="4.æ¨ç†"></a>4.æ¨ç†</h2><p>ç»ˆäºå¯ä»¥ä½¿ç”¨çœ‹æ•ˆæœäº†ï¼æ¨ç†åˆæ˜¯å¦å¤–ä¸€ä¸ªç•Œé¢äº†ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-ade19a682228be3f9b7e25833af51000_720w.webp" alt="img"></p><p>å›åˆ°colabç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°åˆå¤šäº†ä¸€ä¸ªURLï¼Œæ‰“å¼€è¿™ä¸ªURL</p><p><img src="https://pic4.zhimg.com/80/v2-7c79c3b862a11627f63c1ce196e0480b_720w.webp" alt="img"></p><p>è¿™ä¸ªå°±æ˜¯æ¨ç†ç•Œé¢äº†ã€‚æŒ‰ç…§ä¸‹å›¾æ–¹å¼è®¾ç½®ï¼Œå¼€å§‹æ–‡æœ¬è½¬è¯­éŸ³ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-047e4ab154be22a216b98ee5142732f6_720w.webp" alt="img"></p><p>ä¸å‡ºæ„å¤–çš„è¯ï¼Œç¨ç­‰ä¸€ä¼šè¯­éŸ³å°±åˆæˆå¥½äº†ï¼Œå¯ä»¥è¯•å¬ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»å³è¾¹çš„ä¸‰ä¸ªå°åœ†ç‚¹ä¸‹è½½åˆ°æœ¬åœ°ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-55c20b17cf15d2bd51f178e54d8411ba_720w.webp" alt="img"></p><blockquote><p>ä¸Šé¢å‚è€ƒéŸ³é¢‘ï¼Œå»ºè®®æ˜¯æ•°æ®é›†ä¸­çš„éŸ³é¢‘ã€‚æœ€å¥½5ç§’ã€‚å‚è€ƒéŸ³é¢‘å¾ˆé‡è¦ï¼ä¼šå­¦ä¹ è¯­é€Ÿå’Œè¯­æ°”ï¼Œè¯·è®¤çœŸé€‰æ‹©ã€‚å‚è€ƒéŸ³é¢‘çš„æ–‡æœ¬æ˜¯å‚è€ƒéŸ³é¢‘è¯´ä»€ä¹ˆå°±å¡«ä»€ä¹ˆï¼Œå¿…é¡»è¦å¡«ã€‚è¯­ç§ä¹Ÿè¦å¯¹åº”ã€‚</p><p>åˆ‡åˆ†å»ºè®®æ— è„‘é€‰50å­—ä¸€åˆ‡ï¼Œä½äº50å­—çš„ä¸ä¼šåˆ‡ã€‚å¦‚æœ50å­—ä¸€åˆ‡æŠ¥é”™çš„è¯å°±æ˜¯æ˜¾å­˜å¤ªå°äº†å¯ä»¥æŒ‰å¥å·åˆ‡ã€‚å¦‚æœä¸åˆ‡ï¼Œæ˜¾å­˜è¶Šå¤§èƒ½åˆæˆçš„è¶Šå¤šï¼Œå®æµ‹4090å¤§çº¦1000å­—ï¼Œä½†å·²ç»èƒ¡è¨€ä¹±è¯­äº†ï¼Œæ‰€ä»¥å“ªæ€•ä½ æ˜¯4090ä¹Ÿå»ºè®®åˆ‡åˆ†ç”Ÿæˆã€‚åˆæˆçš„è¿‡é•¿å¾ˆå®¹æ˜“èƒ¡è¨€ä¹±è¯­ã€‚å¦‚æœå‡ºç°åå­—ï¼Œé‡å¤ï¼Œå‚è€ƒéŸ³é¢‘æ··å…¥çš„æƒ…å†µï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚ä¸æ˜¯æ¨¡å‹ç‚¼å·®äº†ï¼Œä¸ç”¨ä¸ºæ¨¡å‹æ‹…å¿ƒã€‚æ”¹å–„çš„æ–¹æ³•æœ‰ä½¿ç”¨è¾ƒä½è½®æ•°çš„GPTæ¨¡å‹ã€åˆæˆæ–‡æœ¬å†çŸ­ç‚¹ã€æ¢å‚è€ƒéŸ³é¢‘ã€‚å®˜æ–¹ä¹Ÿåœ¨åŠªåŠ›ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><h2 id="5-ä¿å­˜æ¨¡å‹ç”¨äºä»¥åæ¨ç†"><a href="#5-ä¿å­˜æ¨¡å‹ç”¨äºä»¥åæ¨ç†" class="headerlink" title="5.ä¿å­˜æ¨¡å‹ç”¨äºä»¥åæ¨ç†"></a>5.ä¿å­˜æ¨¡å‹ç”¨äºä»¥åæ¨ç†</h2><p>å¦‚æœå¯¹æ¨¡å‹æ¯”è¾ƒæ»¡æ„çš„è¯ï¼Œå¯ä»¥å°†æ¨¡å‹ä¿å­˜ä¸‹æ¥ï¼Œä»¥åç›´æ¥ä½¿ç”¨æ¨¡å‹æ¨ç†ï¼Œä¸éœ€è¦å†æµªè´¹æ—¶é—´è®­ç»ƒäº†ã€‚è¿›å…¥colabæ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§ä¸‹å›¾æ–¹å¼ä¸‹è½½å³å¯ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-6d3028353a22b89aa301e2d9d9fa51de_720w.webp" alt="img"></p><p>å½“ç„¶ä¹Ÿå¯ä»¥ä¿å­˜åˆ°googleäº‘ç›˜ï¼Œè¿™æ ·ä¸‹æ¬¡ä½¿ç”¨colabçš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ä»googleäº‘ç›˜è·å–æ¨¡å‹ã€‚ä¸‹é¢æ˜¯ä¿å­˜åˆ°googleäº‘ç›˜çš„æ­¥éª¤ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-40c0c15bba643722ec56e7be63918ff2_720w.webp" alt="img"></p><p>ä¸Šé¢ç‚¹å®Œä¹‹åï¼Œå³è¾¹ä¼šè‡ªåŠ¨å¤šå‡ºæŒ‚è½½äº‘ç›˜çš„ä»£ç å—ï¼Œè¿è¡Œå³å¯ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-08a5a5c816bbe31c678a00bf3fbc3a35_720w.webp" alt="img"></p><p>æŒ‚è½½æˆåŠŸä¹‹åï¼Œåˆ·æ–°å·¦è¾¹çš„æ–‡ä»¶ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°driveæ–‡ä»¶å¤¹ï¼Œå°±æ˜¯googleäº‘ç›˜ï¼Œå¯ä»¥å°†ä¸Šé¢çš„GPT-SoVITSæ–‡ä»¶å¤¹ä¸­çš„æ¨¡å‹æ–‡ä»¶æ‹–åŠ¨åˆ°googleäº‘ç›˜ä¸­ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-87eb0df27cdf5aec7a231ea0ecc049d7_720w.webp" alt="img"></p><p>ä»¥åéœ€è¦æ¨ç†æ—¶ï¼Œå°†GPTæ¨¡å‹ï¼ˆckptåç¼€ï¼‰æ”¾å…¥GPT_weightsæ–‡ä»¶å¤¹ï¼ŒSoVITSæ¨¡å‹ï¼ˆpthåç¼€ï¼‰æ”¾å…¥SoVITS_weightsæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ç•Œé¢ä¸­ç‚¹å‡»åˆ·æ–°æ¨¡å‹ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›æ¨¡å‹è¿›è¡Œæ¨ç†äº†ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-0270d11f2fbcd2d239465040f3786cd2_720w.webp" alt="img"></p><h2 id="6-æœ¬åœ°éƒ¨ç½²è¦æ±‚"><a href="#6-æœ¬åœ°éƒ¨ç½²è¦æ±‚" class="headerlink" title="6.æœ¬åœ°éƒ¨ç½²è¦æ±‚"></a>6.æœ¬åœ°éƒ¨ç½²è¦æ±‚</h2><p><strong>è®­ç»ƒï¼š</strong><br>1.Windows10&#x2F;11ç³»ç»Ÿï¼Œæ”¯æŒ CUDA çš„8Gä»¥ä¸Šæ˜¾å­˜çš„nVIDIA æ˜¾å¡;<br>2.macOS 12.3æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ­è½½AppleèŠ¯ç‰‡ï¼ˆMç³»åˆ—èŠ¯ç‰‡ï¼‰æˆ–AMD GPUçš„Macï¼ˆå¦‚2019æ¬¾Mac Proï¼‰<br><strong>æ¨ç†ï¼š</strong><br>1.Windows10&#x2F;11ç³»ç»Ÿï¼Œæ”¯æŒ CUDA çš„4Gä»¥ä¸Šæ˜¾å­˜çš„nVIDIA æ˜¾å¡;<br>2.macOS 12.3æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ­è½½AppleèŠ¯ç‰‡ï¼ˆMç³»åˆ—èŠ¯ç‰‡ï¼‰æˆ–AMD GPUçš„Macï¼ˆå¦‚2019æ¬¾Mac Proï¼‰</p><video src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/tmppool7hke.wav" />]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aiæ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sdç»˜ç”»æ­å»ºä¸€æ¡è·¯æœåŠ¡</title>
      <link href="/2024/03/28/Ai%E7%A7%91%E6%8A%80/sd%E7%BB%98%E7%94%BB%E6%90%AD%E5%BB%BA%E4%B8%80%E6%9D%A1%E8%B7%AF%E6%9C%8D%E5%8A%A1/"/>
      <url>/2024/03/28/Ai%E7%A7%91%E6%8A%80/sd%E7%BB%98%E7%94%BB%E6%90%AD%E5%BB%BA%E4%B8%80%E6%9D%A1%E8%B7%AF%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p><strong>ä¸€ã€æœ¬åœ°éƒ¨ç½² Stable Diffusion</strong></p><p><strong>å‰è¨€</strong></p><p>ç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒæƒå¨ï¼Œå¹¶èƒ½ç”¨äºå·¥ä½œä¸­çš„AIç»˜ç”»è½¯ä»¶å…¶å®å°±ä¸¤æ¬¾ã€‚ä¸€ä¸ªå«Midjourneyï¼ˆç®€ç§°MJï¼‰ï¼Œå¦ä¸€ä¸ªå«Stable-Diffusionï¼ˆç®€ç§°SDï¼‰ã€‚MJéœ€è¦ä»˜è´¹ä½¿ç”¨ï¼Œè€ŒSDå¼€æºå…è´¹ï¼Œä½†æ˜¯ä¸Šæ‰‹éš¾åº¦å’Œå­¦ä¹ æˆæœ¬ç•¥å¤§ï¼Œå¹¶ä¸”éå¸¸åƒç”µè„‘é…ç½®ï¼ˆæ˜¾å¡ã€å†…å­˜ï¼‰ã€‚</p><p>Eå’ŒMidjourneyç›¸æ¯”ï¼ŒStable Diffusion æœ€å¤§çš„ä¼˜åŠ¿æ˜¯å¼€æºï¼Œè¿™æ„å‘³ç€Stable Diffusionçš„æ½œåŠ›å·¨å¤§ã€å‘å±•é£å¿«ã€‚ç”±äºå¼€æºå…è´¹å±æ€§ï¼ŒSD å·²ç»æ”¶è·äº†å¤§é‡æ´»è·ƒç”¨æˆ·ï¼Œå¼€å‘è€…ç¤¾ç¾¤å·²ç»ä¸ºæ­¤æä¾›äº†å¤§é‡å…è´¹é«˜è´¨é‡çš„å¤–æ¥é¢„è®­ç»ƒæ¨¡å‹ï¼ˆfine-tuneï¼‰å’Œæ’ä»¶ï¼Œå¹¶ä¸”åœ¨æŒç»­ç»´æŠ¤æ›´æ–°ã€‚åœ¨ç¬¬ä¸‰æ–¹æ’ä»¶å’Œæ¨¡å‹çš„åŠ æŒä¸‹ï¼ŒSDæ‹¥æœ‰æ¯”Midjourneyæ›´åŠ ä¸°å¯Œçš„ä¸ªæ€§åŒ–åŠŸèƒ½ï¼Œåœ¨ç»è¿‡ä½¿ç”¨è€…è°ƒæ•™åå¯ä»¥ç”Ÿæˆæ›´è´´è¿‘éœ€æ±‚çš„å›¾ç‰‡ï¼Œç”šè‡³åœ¨ AI è§†é¢‘ç‰¹æ•ˆã€AIéŸ³ä¹ç”Ÿæˆç­‰é¢†åŸŸï¼ŒStable Diffusion ä¹Ÿå æ®äº†ä¸€å¸­ä¹‹åœ°ã€‚</p><p>Stable Diffusionæ˜¯ä¸€ç§æ½œåœ¨æ‰©æ•£æ¨¡å‹ï¼ˆLatent Diffusion Modelï¼‰ï¼Œèƒ½å¤Ÿä»æ–‡æœ¬æè¿°ä¸­ç”Ÿæˆè¯¦ç»†çš„å›¾åƒã€‚å®ƒè¿˜å¯ä»¥ç”¨äºå›¾åƒä¿®å¤ã€å›¾åƒç»˜åˆ¶ã€æ–‡æœ¬åˆ°å›¾åƒå’Œå›¾åƒåˆ°å›¾åƒç­‰ä»»åŠ¡ã€‚ç®€å•åœ°è¯´ï¼Œæˆ‘ä»¬åªè¦ç»™å‡ºæƒ³è¦çš„å›¾ç‰‡çš„æ–‡å­—æè¿°åœ¨æStable Diffusionå°±èƒ½ç”Ÿæˆç¬¦åˆä½ è¦æ±‚çš„é€¼çœŸçš„å›¾åƒï¼</p><p><img src="https://pic3.zhimg.com/80/v2-ddc6c5960c6d609ff4f49d31390fb3aa_720w.webp" alt="img"></p><p><strong>ç”µè„‘é…ç½®</strong></p><p>ç”µè„‘é…ç½®æœ€æ ¸å¿ƒçš„å…³é”®ç‚¹ï¼šçœ‹æ˜¾å¡ã€çœ‹å†…å­˜ã€çœ‹ç¡¬ç›˜ã€çœ‹CPUã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯çœ‹æ˜¾å¡ã€‚Nå¡ï¼ˆè‹±ä¼Ÿè¾¾Nvidaç‹¬ç«‹æ˜¾å¡ï¼‰é¦–é€‰ï¼Œæ•ˆç‡è¿œè¶…é›†æ˜¾&#x2F;AMD&#x2F;Intelæ˜¾å¡å’ŒCPUæ¸²æŸ“ï¼Œæœ€ä½10ç³»èµ·æ­¥ï¼Œä½“éªŒæ„Ÿä½³ç”¨40ç³»ï¼Œæ˜¾å­˜æœ€ä½4Gï¼Œ6GåŠæ ¼ï¼Œä¸Šä¸å°é¡¶ï¼›å†…å­˜æœ€ä½8Gï¼Œ16GåŠæ ¼ï¼Œä¸Šä¸å°é¡¶ï¼›ç¡¬ç›˜å¯ç”¨ç©ºé—´æœ€å¥½æœ‰ä¸ª500Gæœä¸Šï¼Œå›ºæ€æœ€ä½³ã€‚</p><p>ç³»ç»Ÿè¦æ±‚ï¼šæ”¯æŒ Win10&#x2F;Win11&#x2F;macOSï¼ˆä»…é™Apple Siliconï¼ŒIntel ç‰ˆæœ¬çš„ Mac æ— æ³•è°ƒç”¨ Radeon æ˜¾å¡ï¼‰å’Œ Linux ç³»ç»Ÿï¼Œè‹¹æœç‰ˆ SD å…¼å®¹çš„æ’ä»¶æ•°é‡è¾ƒå°‘ï¼ŒåŠŸèƒ½æ€§ä¸åŠ Windows ä¸ Linux ç”µè„‘ã€‚</p><p>å¦‚æœèº«è¾¹æ²¡æœ‰åˆé€‚çš„ç”µè„‘å¯ä»¥è€ƒè™‘è´­ä¹°äº‘ä¸»æœºï¼Œæ¯”å¦‚è…¾è®¯GPUäº‘æœåŠ¡å™¨ã€‚è‹¥æ— æ³•ä½¿ç”¨ç‹¬ç«‹æ˜¾å¡å’Œäº‘æœåŠ¡ï¼Œäº¦å¯ä¿®æ”¹å¯åŠ¨é…ç½®ï¼Œä½¿ç”¨CPUæ¸²æŸ“ï¼ˆå…¼å®¹æ€§å¼ºï¼Œå‡ºå›¾é€Ÿåº¦æ…¢ï¼Œéœ€è¦16Gä»¥ä¸Šå†…å­˜ï¼‰ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-f0ba84744604aff06fb0a6462b355f96_720w.webp" alt="img"></p><p>ä»å›¾ä¸­å¯çœ‹å‡ºï¼Œä¸AMDæˆ–è‹±ç‰¹å°”çš„ä»»ä½•äº§å“ç›¸æ¯”ï¼ŒNvidiaçš„GPUæä¾›äº†å“è¶Šçš„æ€§èƒ½â€“æœ‰æ—¶æ˜¯ä»¥å·¨å¤§çš„ä¼˜åŠ¿ã€‚éšç€Torchçš„DLLä¿®å¤åˆ°ä½ï¼ŒRTX 4090çš„æ€§èƒ½æ¯”å¸¦æœ‰xformersçš„RTX 3090 Tié«˜å‡º50%ï¼Œè€Œæ²¡æœ‰xformersçš„æ€§èƒ½åˆ™é«˜å‡º43%ã€‚ç”Ÿæˆæ¯å¼ å›¾ç‰‡åªéœ€è¦ä¸‰ç§’å¤šã€‚</p><p><strong>å®‰è£…æ–¹æ³•</strong></p><p>SDå¼€æºåœ°å€ï¼š<a href="https://link.zhihu.com/?target=https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki">https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki</a></p><p>ç›®å‰å¤§å®¶æ™®éé‡‡ç”¨çš„Stable Diffusion Web UIæ˜¯å‘å¸ƒäºå¼€æºç¨‹åºåˆ†äº«ç½‘ç«™ Github çš„ Python é¡¹ç›®ï¼Œå’Œå¹³å¸¸è½¯ä»¶å®‰è£…æ–¹æ³•æœ‰æ‰€ä¸åŒï¼Œä¸æ˜¯ä¸‹è½½å®‰è£…å³å¯ç”¨çš„è½¯ä»¶ï¼Œéœ€è¦å‡†å¤‡æ‰§è¡Œç¯å¢ƒã€ç¼–è¯‘æºç ï¼Œé’ˆå¯¹ä¸åŒæ“ä½œç³»ç»Ÿï¼ˆæ“ä½œç³»ç»Ÿä¾èµ–ï¼‰ã€ä¸åŒç”µè„‘ï¼ˆç¡¬ä»¶ä¾èµ–ï¼‰è¿˜æœ‰åšäº›æ‰‹å·¥è°ƒæ•´ï¼Œè¿™éœ€è¦ä½¿ç”¨è€…æ‹¥æœ‰ä¸€å®šçš„ç¨‹åºå¼€å‘ç»éªŒï¼ˆå¯ä»¥ç°å­¦ï¼‰ï¼Œå·²ç»æœ‰å¾ˆå¤šå¤§ä½¬ä»¬å†™äº†è¯¦ç»†çš„å®‰è£…æ•™ç¨‹ã€‚ï¼ˆå¦‚<a href="https://link.zhihu.com/?target=https://www.tonyisstark.com/846.html">https://www.tonyisstark.com/846.html</a> @æ‰˜å°¼ä¸æ˜¯å¡”å…‹ï¼‰</p><p>å¦‚æœåƒæˆ‘ä¸€æ ·æ˜¯å°ç™½ä¸ä¼šè£…ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨å¤§ä½¬ä»¬åšçš„ä¸€é”®å¯åŠ¨ç¨‹åºåŒ…ï¼Œæ¯”å¦‚å›½å†…@ç§‹è‘‰aaakiå¤§å¤§å¼€å‘çš„æ•´åˆåŒ…ï¼Œæå¤§çš„é™ä½äº†å®‰è£…é—¨æ§›ï¼ˆå¼ºçƒˆæ¨èï¼ï¼‰</p><p><img src="https://pic2.zhimg.com/80/v2-89894ef22d19fa2382153cbaedc2f21d_720w.webp" alt="img"></p><p>ï¼ˆè¯¦è§<a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/BV1ne4y1V7QU">https://www.bilibili.com/video/BV1ne4y1V7QU</a>ï¼‰ä¸€é”®å¯åŠ¨åŒ…åªæ˜¯å°è£…äº†å¯è§†åŒ–çš„ä¸€é”®ç•Œé¢ï¼Œä¸å½±å“å‡ºå›¾æ•ˆæœï¼Œåªæ˜¯é™ä½äº†æœ¬åœ°éƒ¨ç½²çš„é—¨æ§›ã€‚</p><p>Nvidia æ˜¾å¡ç”¨æˆ·é¡»çŸ¥ï¼šåœ¨ä½¿ç”¨SDå‰ï¼Œè¯·ç™»å½• Nvidia å®˜ç½‘<a href="https://link.zhihu.com/?target=https://www.nvidia.cn/geforce/drivers/">https://www.nvidia.cn/geforce/drivers/</a>ä¸‹è½½å®‰è£…å¯¹åº”æ˜¾å¡æœ€æ–°ç‰ˆé©±åŠ¨ç¨‹åºï¼Œä¸<a href="https://link.zhihu.com/?target=https://blog.csdn.net/weixin_44177494/article/details/120444922">https://blog.csdn.net/weixin_44177494&#x2F;article&#x2F;details&#x2F;120444922</a>æ˜¾å¡æ”¯æŒçš„æœ€æ–°ç‰ˆ CUDA é©±åŠ¨ã€‚</p><p><strong>å¯åŠ¨SD</strong></p><p>è¿›å…¥SDå®‰è£…æ–‡ä»¶å¤¹ï¼ŒåŒå‡» webui-user.batï¼Œå¾…å…¶åŠ è½½å®Œæˆæ–¹å¯ä½¿ç”¨æµè§ˆå™¨ï¼ˆChrome&#x2F;Edgeï¼‰ç™»å½•é»˜è®¤çš„åŠ è½½IP <a href="https://link.zhihu.com/?target=http://127.0.0.1:7860/">http://127.0.0.1:7860/</a></p><p><img src="https://pic2.zhimg.com/80/v2-e9cfefe29dd80365fa9ff7bc1517f47d_720w.webp" alt="img"></p><p><strong>ç•Œé¢æ±‰åŒ–</strong></p><p>å¦‚æœéœ€è¦ä¸­æ–‡è¯­è¨€åŒ…ï¼Œå¯ä»¥ä¸‹è½½å¦‚ä¸‹ä¸­æ–‡è¯­è¨€åŒ…æ‰©å±•ï¼Œä¸‹è½½ç•Œé¢ç½‘å€ä¸ºï¼š<a href="https://link.zhihu.com/?target=https://github.com/VinsonLaro/stable-diffusion-webui-chinese">https://github.com/VinsonLaro/stable-diffusion-webui-chinese</a></p><p>æ–¹æ³•1ï¼šé€šè¿‡WebUIæ‹“å±•è¿›è¡Œå®‰è£…<br>1.æ‰“å¼€stable diffusion webuiï¼Œè¿›å…¥â€Extensionsâ€é€‰é¡¹å¡<br>2.ç‚¹å‡»â€Install from URLâ€ï¼Œæ³¨æ„â€URL for extensionâ€™s git repositoryâ€ä¸‹æ–¹çš„è¾“å…¥æ¡†<br>3.ç²˜è´´æˆ–è¾“å…¥æœ¬Gitä»“åº“åœ°å€<a href="https://link.zhihu.com/?target=https://github.com/VinsonLaro/stable-diffusion-webui-chinese">https://github.com/VinsonLaro/stable-diffusion-webui-chinese</a><br>4.ç‚¹å‡»ä¸‹æ–¹çš„é»„è‰²æŒ‰é’®â€Installâ€å³å¯å®Œæˆå®‰è£…ï¼Œç„¶åé‡å¯WebUI(ç‚¹å‡»â€Install from URLâ€å·¦æ–¹çš„â€Installedâ€ï¼Œç„¶åç‚¹å‡»é»„è‰²æŒ‰é’®â€Apply and restart UIâ€ç½‘é¡µä¸‹æ–¹çš„â€Reload UIâ€å®Œæˆé‡å¯)<br>5.ç‚¹å‡»â€Settingsâ€ï¼Œå·¦ä¾§ç‚¹å‡»â€User interfaceâ€ç•Œé¢ï¼Œåœ¨ç•Œé¢é‡Œæœ€ä¸‹æ–¹çš„â€Localization (requires restart)â€ï¼Œé€‰æ‹©â€Chinese-Allâ€æˆ–è€…â€Chinese-Englishâ€<br>6.ç‚¹å‡»ç•Œé¢æœ€ä¸Šæ–¹çš„é»„è‰²æŒ‰é’®â€Apply settingsâ€ï¼Œå†ç‚¹å‡»å³ä¾§çš„â€Reload UIâ€å³å¯å®Œæˆæ±‰åŒ–</p><p><strong>äºŒã€ç•Œé¢åŸºç¡€</strong></p><p><strong>äº†è§£ç•Œé¢</strong></p><p>æ¥ä¸‹æ¥æ˜¯å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ç®€ä»‹ã€‚ç›®å‰SDå¹¶ä¸å­˜åœ¨é€šè¡Œå¯é çš„ä½¿ç”¨è§„èŒƒï¼Œæ¯ä¸ªäººçš„ç”µè„‘é…ç½®ã€éœ€æ±‚éƒ½ä¸å°½ç›¸åŒï¼Œcpkd&#x2F;Safetensorså¤§æ¨¡å‹ã€VAEã€embedingã€loraç­‰AIæ¨¡å‹ã€å„ç±»æ’ä»¶ã€æç¤ºè¯ã€è¾“å‡ºå‚æ•°çš„ç»„åˆç‰µä¸€å‘åˆ™åŠ¨å…¨èº«ï¼Œéœ€è¦å¤§å®¶æœ‰è¶³å¤Ÿçš„è€å¿ƒæŸ¥é˜…æ’ä»¶å¼€å‘è€…çš„è¯´æ˜æ–‡æ¡£å’Œæ¥è‡ª<a href="https://link.zhihu.com/?target=https://civitai.com/">https://civitai.com/</a>ç­‰åˆ†äº«ç½‘ç«™çš„ä½¿ç”¨å¿ƒå¾—ï¼Œå¤§å®¶å¯ä»¥å…ˆåˆ°civitaiä¸Šæœç´¢ä¸­æ„çš„å›¾ä¾‹ï¼Œå¤ç”¨åŸä½œè€…çš„å‡ºå›¾æç¤ºè¯ã€å‚æ•°å’Œæ¨¡å‹ï¼Œå†ä»¥æ­¤ä¿®æ”¹ï¼Œè¿™æ ·å­¦ä¹ çš„æ•ˆæœæœ€ä¸ºç›´è§‚ã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-8712f8736f92b80fb19dff0d8f220d0a_720w.webp" alt="img"></p><p><strong>æ–‡ç”Ÿå›¾</strong>ï¼šæ ¹æ®æ–‡æœ¬æç¤ºç”Ÿæˆå›¾åƒ<br><strong>å›¾ç”Ÿå›¾</strong>ï¼šæ ¹æ®æä¾›çš„å›¾åƒä½œä¸ºèŒƒæœ¬ã€ç»“åˆæ–‡æœ¬æç¤ºç”Ÿæˆå›¾åƒ<br><strong>æ›´å¤š</strong>ï¼šä¼˜åŒ–(æ¸…æ™°ã€æ‰©å±•)å›¾åƒ<br><strong>å›¾ç‰‡ä¿¡æ¯</strong>ï¼šæ˜¾ç¤ºå›¾åƒåŸºæœ¬ä¿¡æ¯,åŒ…å«æç¤ºè¯å’Œæ¨¡å‹ä¿¡æ¯ï¼ˆé™¤éä¿¡æ¯è¢«éšè—ï¼‰<br><strong>æ¨¡å‹åˆå¹¶</strong>ï¼šæŠŠå·²æœ‰çš„æ¨¡å‹æŒ‰ä¸åŒæ¯”ä¾‹è¿›è¡Œåˆå¹¶ç”Ÿæˆæ–°æ¨¡å‹<br>è®­ç»ƒï¼šæ ¹æ®æä¾›çš„å›¾ç‰‡è®­ç»ƒå…·æœ‰æŸç§å›¾åƒé£æ ¼çš„æ¨¡å‹</p><p><img src="https://pic3.zhimg.com/80/v2-f3a273c5f3e0f8c02822091f1cb9858a_720w.webp" alt="img"></p><p>æè¿°è¯­åˆ†ä¸ºæ­£å‘&#x2F;è´Ÿå‘æè¿°ï¼Œå®ƒä»¬ä¹Ÿå«tag(æ ‡ç­¾ï¼‰æˆ–prompt(æç¤ºè¯ï¼‰<br><strong>æ­£é¢æç¤ºè¯</strong>ï¼šç›¸æ¯”Midjourneyéœ€è¦å†™å¾—æ›´ç²¾å‡†å’Œç»†è‡´ï¼Œæè¿°å°‘å°±ç»™AIæ›´å¤šè‡ªç”±å‘æŒ¥ç©ºé—´ã€‚<br><strong>è´Ÿé¢æç¤ºè¯</strong>ï¼šä¸æƒ³è®©SDç”Ÿæˆçš„å†…å®¹ã€‚<br>æ­£å‘ï¼šmasterpiece, best quality, æ›´å¤šç”»è´¨è¯ï¼Œç”»é¢æè¿°<br>åå‘ï¼šnsfw, lowres, bad anatomy, bad hands, text, error, missing fingers,extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry,æ ¹æ®ç”»é¢äº§å‡ºåŠ ä¸æƒ³å‡ºç°çš„ç”»é¢ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-5ada42c007dbdbf9b941cc82113acf8c_720w.webp" alt="img"></p><p><strong>ç”Ÿæˆä¸‹é¢çš„5ä¸ªå°å›¾æ ‡ï¼ˆä»å·¦åˆ°å³ä¾æ¬¡åˆ†åˆ«æ˜¯ï¼‰</strong></p><ul><li>å¤åŸä¸Šæ¬¡ç”Ÿæˆå›¾ç‰‡çš„æç¤ºè¯ï¼ˆè‡ªåŠ¨è®°å½•ï¼‰</li><li>æ¸…ç©ºå½“å‰æ‰€æœ‰æç¤ºè¯</li><li>æ‰“å¼€æ¨¡å‹é€‰æ‹©ç•Œé¢</li><li>åº”ç”¨é€‰æ‹©çš„é£æ ¼æ¨¡æ¿åˆ°å½“å‰çš„æç¤ºè¯</li><li>å­˜æ¡£å½“å‰çš„æ­£åå‘æç¤ºè¯</li></ul><p><img src="https://pic1.zhimg.com/80/v2-91b6f73a0a896678425fb672114f5830_720w.webp" alt="img"></p><p><strong>é‡‡æ ·æ–¹æ³•</strong><br>1.å»ºè®®æ ¹æ®è‡ªå·±ä½¿ç”¨çš„checkpointä½¿ç”¨è„šæœ¬è·‘ç½‘æ ¼å›¾ï¼ˆç”¨è‡ªå·±å…³å¿ƒçš„å‚æ•°ï¼‰ç„¶åé€‰æ‹©è‡ªå·±æƒ³è¦çš„ç»“æœã€‚<br>2.æ‡’å¾—å¯¹æ¯”ï¼šè¯·ä½¿ç”¨DPM++ 2Mæˆ–DPM++ 2M Karrasï¼ˆäºŒæ¬¡å…ƒå›¾ï¼‰æˆ–UniPCï¼Œæƒ³è¦ç‚¹æƒŠå–œå’Œå˜åŒ–ï¼ŒEuler aã€DPM++ SDEã€DPM++ SDE Karrasï¼ˆå†™å®å›¾ï¼‰ã€DPM2 a Karrasï¼ˆæ³¨æ„è°ƒæ•´å¯¹åº”etaå€¼ï¼‰<br>3.etaå’Œsigmaéƒ½æ˜¯å¤šæ ·æ€§ç›¸å…³çš„ï¼Œä½†æ˜¯å®ƒä»¬çš„å¤šæ ·æ€§æ¥è‡ªæ­¥æ•°çš„å˜åŒ–ï¼Œè¿½æ±‚æ›´å¤§å¤šæ ·æ€§çš„è¯åº”è¯¥å…³æ³¨seedçš„å˜åŒ–ï¼Œè¿™ä¸¤é¡¹å‚æ•°åº”è¯¥æ˜¯åœ¨å›¾ç‰‡æ¡†æ¶è¢«é€‰å®šåï¼Œå†åœ¨æ­¤åŸºç¡€ä¸Šåšå¾®è°ƒæ—¶ä½¿ç”¨çš„å‚æ•°ã€‚</p><p><strong>é‡‡æ ·æ­¥æ•°</strong><br>ç¨³å®šæ‰©æ•£é€šè¿‡ä»å……æ»¡å™ªéŸ³çš„ç”»å¸ƒå¼€å§‹åˆ›å»ºå›¾åƒï¼Œå¹¶é€æ¸å»å™ªä»¥è¾¾åˆ°æœ€ç»ˆè¾“å‡ºã€‚æ­¤å‚æ•°æ§åˆ¶è¿™äº›å»å™ªæ­¥éª¤çš„æ•°é‡ã€‚é€šå¸¸è¶Šé«˜è¶Šå¥½ï¼Œä½†åœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨çš„é»˜è®¤å€¼æ˜¯25ä¸ªæ­¥éª¤ã€‚ä»¥ä¸‹æ˜¯ä¸åŒæƒ…å†µä¸‹ä½¿ç”¨å“ªä¸ªæ­¥éª¤ç¼–å·çš„ä¸€èˆ¬æŒ‡å—ï¼š</p><ul><li>å¦‚æœæ‚¨æ­£åœ¨æµ‹è¯•æ–°çš„æç¤ºï¼Œå¹¶å¸Œæœ›è·å¾—å¿«é€Ÿç»“æœæ¥è°ƒæ•´æ‚¨çš„è¾“å…¥ï¼Œè¯·ä½¿ç”¨10-15ä¸ªæ­¥éª¤</li><li>å½“æ‚¨æ‰¾åˆ°æ‚¨å–œæ¬¢çš„æç¤ºæ—¶ï¼Œè¯·å°†æ­¥éª¤å¢åŠ åˆ°25</li><li>å¦‚æœæ˜¯æœ‰æ¯›çš®çš„åŠ¨ç‰©æˆ–æœ‰çº¹ç†çš„ä¸»é¢˜ï¼Œç”Ÿæˆçš„å›¾åƒç¼ºå°‘ä¸€äº›ç»†èŠ‚ï¼Œå°è¯•å°†å…¶æé«˜åˆ°40</li></ul><p><img src="https://pic3.zhimg.com/80/v2-0cd6be5cc8b6bc5f9813638ef9cb8a1e_720w.webp" alt="img"></p><p><strong>é¢éƒ¨ä¿®å¤</strong>ï¼šä¿®å¤äººç‰©çš„é¢éƒ¨ï¼Œä½†æ˜¯éå†™å®é£æ ¼çš„äººç‰©å¼€å¯é¢éƒ¨ä¿®å¤å¯èƒ½å¯¼è‡´é¢éƒ¨å´©åã€‚<br><strong>å¹³é“º</strong>ï¼šç”Ÿæˆä¸€å¼ å¯ä»¥å¹³é“ºçš„å›¾åƒ<br><strong>é«˜åˆ†è¾¨ç‡é‡ç»˜</strong>ï¼šä½¿ç”¨ä¸¤ä¸ªæ­¥éª¤çš„è¿‡ç¨‹è¿›è¡Œç”Ÿæˆï¼Œä»¥è¾ƒå°çš„åˆ†è¾¨ç‡åˆ›å»ºå›¾åƒï¼Œç„¶ååœ¨ä¸æ”¹å˜æ„å›¾çš„æƒ…å†µä¸‹æ”¹è¿›å…¶ä¸­çš„ç»†èŠ‚ï¼Œé€‰ä¸­è¯¥é€‰é¡¹ä¼šæœ‰ä¸€ç³»åˆ—æ–°çš„å‚æ•°ï¼Œ<br>å…¶ä¸­é‡è¦çš„æ˜¯ï¼š<br><strong>æ”¾å¤§ç®—æ³•</strong>ï¼šLatent åœ¨è®¸å¤šæƒ…å†µä¸‹æ•ˆæœä¸é”™ï¼Œä½†é‡ç»˜å¹…åº¦å°äº 0.5 åå°±ä¸ç”šç†æƒ³ã€‚ESRGAN_4xã€SwinR 4x å¯¹ 0.5 ä»¥ä¸‹çš„é‡ç»˜å¹…åº¦æœ‰è¾ƒå¥½æ”¯æŒã€‚<br><strong>æ”¾å¤§å€æ•°</strong>: é€šå¸¸2å€å³å¯<br><strong>é‡ç»˜å¹…åº¦</strong>ï¼šå†³å®šç®—æ³•å¯¹å›¾åƒå†…å®¹çš„ä¿ç•™ç¨‹åº¦ã€‚è¯¥å€¼è¶Šé«˜ï¼Œæ”¾å¤§åå›¾åƒå°±æ¯”æ”¾å¤§å‰å›¾åƒå·®åˆ«è¶Šå¤§ã€‚ä½ denoising æ„å‘³ç€ä¿®æ­£åŸå›¾ï¼Œé«˜ denoising å°±å’ŒåŸå›¾å°±æ²¡æœ‰å¤§çš„ç›¸å…³æ€§äº†ã€‚ä¸€èˆ¬æ¥è®²é˜ˆå€¼æ˜¯ 0.7 å·¦å³ï¼Œè¶…è¿‡ 0.7 å’ŒåŸå›¾åŸºæœ¬ä¸Šæ— å…³ï¼Œ0.3 ä»¥ä¸‹å°±æ˜¯ç¨å¾®æ”¹ä¸€äº›ï¼Œ0ä»€ä¹ˆéƒ½ä¸ä¼šæ”¹å˜ï¼Œ1ä¼šå¾—åˆ°ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å›¾åƒã€‚å…·ä½“çš„æ‰§è¡Œæ­¥éª¤ä¸º é‡ç»˜å¼ºåº¦ * é‡ç»˜æ­¥æ•°ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-59dd1d7689b46313cd27b5fd9a85201f_720w.webp" alt="img"></p><p><strong>é•¿å®½å°ºå¯¸</strong>(åˆ†è¾¨ç‡ï¼‰<br>é•¿å®½å°ºå¯¸å¹¶éæ•°å€¼è¶Šå¤§è¶Šå¥½ï¼Œæœ€ä½³çš„èŒƒå›´åº”åœ¨512è‡³768åƒç´ ä¹‹é—´ï¼Œæ¯”å¦‚æ­£æ–¹å½¢å›¾å¤šæ˜¯512<em>512å’Œ768</em>768ï¼Œäººåƒè‚–åƒ 512x768ï¼Œé£æ™¯ç”» 768Ã—512ï¼Œå¯æŒ‰æ¯”ä¾‹åŠ å¤§æˆ–å‡å°ï¼Œè¿™ä¸ªå€¼å¿…é¡»æ˜¯ 8 çš„å€æ•°ã€‚å¦‚æœä¸å¸Œæœ›ä¸»é¢˜å¯¹è±¡å‡ºç°é‡å¤ï¼Œåº”åœ¨æ­¤èŒƒå›´å†…é€‰æ‹©é€‚å½“çš„å°ºå¯¸ã€‚å¦‚æœéœ€è¦æ›´é«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå»ºè®®å…ˆä½¿ç”¨SDæ¨¡å‹ç”Ÿæˆå›¾ç‰‡ï¼Œç„¶åå†ä½¿ç”¨åˆé€‚çš„æ¨¡å‹è¿›è¡Œupscaleã€‚</p><p><strong>ç”Ÿæˆæ‰¹æ¬¡</strong>ï¼šæ¯æ¬¡ç”Ÿæˆå›¾åƒçš„ç»„æ•°ã€‚ä¸€æ¬¡è¿è¡Œç”Ÿæˆå›¾åƒçš„æ•°é‡ä¸ºç”Ÿæˆæ‰¹æ¬¡ * æ¯æ‰¹æ•°é‡ã€‚<br><strong>æ¯æ‰¹æ•°é‡</strong>ï¼šåŒæ—¶ç”Ÿæˆå¤šå°‘ä¸ªå›¾åƒã€‚å¢åŠ è¿™ä¸ªå€¼å¯ä»¥æé«˜æ€§èƒ½ï¼Œä½†ä½ ä¹Ÿéœ€è¦æ›´å¤šçš„ VRAMã€‚å›¾åƒæ€»æ•°æ˜¯è¿™ä¸ªå€¼ä¹˜ä»¥æ‰¹æ¬¡æ•°ã€‚é™¤ 4090 ç­‰é«˜çº§æ˜¾å¡ä»¥å¤–é€šå¸¸ä¿æŒä¸º 1ã€‚</p><p><strong>æç¤ºè¯ç›¸å…³æ€§CFG</strong>ï¼šè¾ƒé«˜çš„æ•°å€¼å°†æé«˜ç”Ÿæˆç»“æœä¸æç¤ºçš„åŒ¹é…åº¦ã€‚<br>OpenArtä¸Šä½¿ç”¨çš„é»˜è®¤CFGæ˜¯7ï¼Œè¿™åœ¨åˆ›é€ åŠ›å’Œç”Ÿæˆä½ æƒ³è¦çš„ä¸œè¥¿ä¹‹é—´æä¾›äº†æœ€ä½³å¹³è¡¡ã€‚é€šå¸¸ä¸å»ºè®®ä½äº5ã€‚<br>CFGé‡è¡¨å¯ä»¥åˆ†ä¸ºä¸åŒçš„èŒƒå›´ï¼Œæ¯ä¸ªèŒƒå›´éƒ½é€‚åˆä¸åŒçš„æç¤ºç±»å‹å’Œç›®æ ‡<br>CFG 2 â€“ 6ï¼šæœ‰åˆ›æ„ï¼Œä½†å¯èƒ½å¤ªæ‰­æ›²ï¼Œæ²¡æœ‰éµå¾ªæç¤ºã€‚å¯¹äºç®€çŸ­çš„æç¤ºæ¥è¯´ï¼Œå¯ä»¥å¾ˆæœ‰è¶£å’Œæœ‰ç”¨<br>CFG 710ï¼šæ¨èç”¨äºå¤§å¤šæ•°æç¤ºã€‚åˆ›é€ åŠ›å’Œå¼•å¯¼ä¸€ä»£ä¹‹é—´çš„è‰¯å¥½å¹³è¡¡<br>CFG 10-15ï¼šå½“æ‚¨ç¡®å®šæ‚¨çš„æç¤ºæ˜¯è¯¦ç»†ä¸”éå¸¸æ¸…æ™°çš„ï¼Œæ‚¨å¸Œæœ›å›¾åƒæ˜¯ä»€ä¹ˆæ ·å­æ—¶<br>CFG 16-20ï¼šé™¤éæç¤ºéå¸¸è¯¦ç»†ï¼Œå¦åˆ™é€šå¸¸ä¸æ¨èã€‚å¯èƒ½å½±å“ä¸€è‡´æ€§å’Œè´¨é‡<br>CFG &gt;20ï¼šå‡ ä¹æ— æ³•ä½¿ç”¨</p><p><strong>éšæœºç§å­ï¼ˆSeedï¼‰</strong>:ç”Ÿæˆæ¯å¼ å›¾ç‰‡æ—¶çš„éšæœºç§å­ï¼Œè¿™ä¸ªç§å­æ˜¯ç”¨æ¥ä½œä¸ºç¡®å®šæ‰©æ•£åˆå§‹çŠ¶æ€çš„åŸºç¡€ã€‚ä¸æ‡‚çš„è¯ï¼Œç”¨éšæœºçš„å³å¯ã€‚</p><p><strong>æç¤ºè¯ç”Ÿæˆ</strong></p><p>å¼€å§‹ä¸çŸ¥é“æ€ä¹ˆå†™æç¤ºè¯ï¼Œå¯ä»¥å…ˆå‚è€ƒä¼˜ç§€çš„é£æ ¼æ¨¡æ¿ä½œä¸ºèµ·æ‰‹å¼ï¼Œè¿˜å¯ä»¥å€ŸåŠ©æè¿°è¯­å·¥å…·å’Œç½‘ç«™ï¼Œå¤šå‡ºå›¾å¤šç ”ç©¶ï¼ŒæŒæ¡äº†å‡ºå›¾è§„å¾‹ï¼Œæ…¢æ…¢å°±å¯ä»¥è‡ªå·±å†™æç¤ºè¯å•¦ï¼Œå†™æç¤ºè¯è¦å°½å¯èƒ½å†™çš„è¯¦ç»†ã€‚è·‘AIçš„è¿‡ç¨‹å°±åƒæŠ½å¡ï¼ŒæŠ½å‡ºä¸€å †å¡ï¼Œé€‰å‡ºä½ å®¡ç¾èŒƒç•´é‡Œè§‰å¾—å¥½çœ‹çš„ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-189f1c9b48f41d2c2939757ddd9b610c_720w.webp" alt="img"></p><p>æ‰¾tagå…³é”®è¯ç½‘ç«™ï¼š<br>å¯å‚è€ƒCivitai | Stable Diffusion models, embeddings, hypernetworks and moreä¸­ä¼˜ç§€ä½œå“çš„æç¤ºè¯ä½œä¸ºæ¨¡æ¿ã€‚<br>å…¶ä»–ç½‘ç«™è¿˜æœ‰ï¼š<br>ChatGPTï¼š<a href="https://link.zhihu.com/?target=https://chat.openai.com/">https://chat.openai.com/</a><br>AI Creatorï¼š<a href="https://link.zhihu.com/?target=https://ai-creator.net/arts">https://ai-creator.net/arts</a><br>NovelAIï¼š<a href="https://link.zhihu.com/?target=https://spell.novelai.dev">https://spell.novelai.dev</a><br>é­”å’’ç™¾ç§‘è¯å…¸ï¼š<a href="https://link.zhihu.com/?target=https://aitag.top">https://aitag.top</a><br>AIå’’æœ¯ç”Ÿæˆå™¨ï¼š<a href="https://link.zhihu.com/?target=https://tag.redsex.cc/">https://tag.redsex.cc/</a><br>AIè¯æ±‡åŠ é€Ÿå™¨ AcceleratorI Promptï¼š<br>è¯å›¾ PromptToolï¼š<a href="https://link.zhihu.com/?target=https://www.prompttool.com/NovelAI">https://www.prompttool.com/NovelAI</a><br>é³–å“²æ³•å…¸ï¼š<a href="https://link.zhihu.com/?target=http://tomxlysplay.com.cn/%23/">http://tomxlysplay.com.cn/#/</a><br>Danbooru tagï¼šTag Groups Wiki | Danbooru (<a href="https://link.zhihu.com/?target=http://donmai.us">http://donmai.us</a>)</p><p><strong>Promptæ ¼å¼ä¼˜åŒ–</strong></p><p>ç¬¬ä¸€æ®µï¼šç”»è´¨tagï¼Œç”»é£tag<br>ç¬¬äºŒæ®µï¼šç”»é¢ä¸»ä½“ï¼Œä¸»ä½“å¼ºè°ƒï¼Œä¸»ä½“ç»†èŠ‚æ¦‚æ‹¬ï¼ˆä¸»ä½“å¯ä»¥æ˜¯äººã€äº‹ã€ç‰©ã€æ™¯ï¼‰ç”»é¢æ ¸å¿ƒå†…å®¹<br>ç¬¬ä¸‰æ®µï¼šç”»é¢åœºæ™¯ç»†èŠ‚ï¼Œæˆ–äººç‰©ç»†èŠ‚ï¼Œembedding tagã€‚ç”»é¢ç»†èŠ‚å†…å®¹<br>ç¬¬äºŒæ®µä¸€èˆ¬æä¾›äººæ•°ï¼Œäººç‰©ä¸»è¦ç‰¹å¾ï¼Œä¸»è¦åŠ¨ä½œï¼ˆä¸€èˆ¬ç½®äºäººç‰©ä¹‹å‰ï¼‰ï¼Œç‰©ä½“ä¸»è¦ç‰¹å¾ï¼Œä¸»æ™¯æˆ–æ™¯è‰²æ¡†æ¶ç­‰</p><p><strong>ä¸¾ä¸ªä¾‹å­</strong><br>(å…·ä½“åœºæ™¯è¿˜æ˜¯è¦çµæ´»åº”ç”¨ï¼Œå¤šå°è¯•ï¼Œæ‰¾åˆ°åˆé€‚è‡ªå·±çš„èŠ‚å¥å’Œé£æ ¼ï¼‰<br>ç¬¬ä¸€æ®µï¼šmasterpiece, best quality, 4k, ( Pixar - style :1.4)<br>ç¬¬äºŒæ®µï¼š1boy,(Cute,handsome,wearing outdoor sportswear :0.7), 3D,(Face close-up :1.2), (at night, surrounded by glowing plants, flowers, flying fireflies, bonfires), (Ultra detailed, aesthetic, beautiful composition, rich bright colors, volumetric soft light).<br>ç¬¬ä¸‰æ®µï¼šInspired by Alice in Wonderland, magic, fairy tales. unreal Engine, octane render, cuteness render, awe inspiring, beautiful, <a href="lora:blindbox_V1Mix:1">lora:blindbox_V1Mix:1</a></p><p><img src="https://pic3.zhimg.com/80/v2-abe713ec346a9e8d82398373aaf5444e_720w.webp" alt="img"></p><p><strong>Promptè§„åˆ™ç»†èŠ‚</strong></p><p>\1. è¶Šé å‰çš„Tagæƒé‡è¶Šå¤§ã€‚<br>\2. ç”Ÿæˆå›¾ç‰‡çš„å¤§å°ä¼šå½±å“Promptçš„æ•ˆæœï¼Œå›¾ç‰‡è¶Šå¤§éœ€è¦çš„Promptè¶Šå¤šï¼Œä¸ç„¶Promptä¼šç›¸äº’æ±¡æŸ“ã€‚<br>3.Stable-diffusionä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ‹¬å·äººå·¥ä¿®æ”¹æç¤ºè¯çš„æƒé‡ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š<br>(word) - å°†æƒé‡æé«˜ 1.1 å€<br>((word)) - å°†æƒé‡æé«˜ 1.21 å€ï¼ˆ&#x3D; 1.1 * 1.1ï¼‰<br>[word] - å°†æƒé‡é™ä½è‡³åŸå…ˆçš„ 90.91%<br>(word:1.5) - å°†æƒé‡æé«˜ 1.5 å€<br>(word:0.25) - å°†æƒé‡å‡å°‘ä¸ºåŸå…ˆçš„ 25%<br>è¯·æ³¨æ„ï¼Œæƒé‡å€¼æœ€å¥½ä¸è¦è¶…è¿‡ 1.5</p><p><img src="https://pic3.zhimg.com/80/v2-8af7500f4597553e3348f0bebb4f0fa2_720w.webp" alt="img"></p><p>\4. Promptæ”¯æŒä½¿ç”¨emojiï¼Œå¯é€šè¿‡æ·»åŠ emojiè¾¾åˆ°è¡¨ç°æ•ˆæœã€‚å¦‚ å½¢å®¹è¡¨æƒ…ï¼Œ å¯ä¿®æ‰‹ã€‚<br>5.â€œ+â€ ï¼Œ â€œ ANDâ€ ï¼Œ â€œ|â€ ç”¨æ³•ï¼šâ€œ+â€å’Œâ€œ AND â€éƒ½æ˜¯ç”¨äºè¿æ¥çŸ­Tagï¼Œä½†ANDä¸¤ç«¯è¦åŠ ç©ºæ ¼ã€‚â€+â€çº¦ç­‰äºâ€ and â€œï¼›â€œ|â€ ä¸ºå¾ªç¯ç»˜åˆ¶ç¬¦å·ï¼ˆèåˆç¬¦å·ï¼‰(Prompt A: w1)|(Prompt B: w2)<br>ä»¥ä¸Šè¡¨è¾¾é€‚ç”¨äºWebUIï¼Œw1ã€w2ä¸ºæƒé‡ã€‚AIä¼šå¯¹Aã€ Bä¸¤Promptè¿›è¡Œå¾ªç¯ç»˜åˆ¶ã€‚å¯å¾€åæ— é™åŠ å…¥Promptã€‚<br>6.tagä¸ä¸€å®šæ˜¯å¤šä¹ˆå……æ»¡ç»†èŠ‚ï¼Œåªè¦æ¨¡å‹ç¨³å®šã€‚å°å›¾+é«˜åˆ†è¾¨ç‡é‡ç»˜ã€‚800<em>400çš„å›¾å˜æˆ1600</em>800ï¼Œåˆè¯†å°å›¾å‡å°‘å´©åæ¦‚ç‡ã€‚<br>7.å…³é”®è¯æœ€å¥½å…·æœ‰ç‰¹å¼‚æ€§ï¼Œè­¬å¦‚ Anime(åŠ¨æ¼«)ä¸€è¯å°±ç›¸å¯¹æ³›åŒ–ï¼Œè€ŒJojoä¸€è¯å°±èƒ½æ¸…æ™°åœ°æŒ‡å‘ JojoåŠ¨æ¼«çš„ç”»é£ã€‚æªè¾è¶Šä¸æŠ½è±¡è¶Šå¥½ï¼Œå°½å¯èƒ½é¿å…ç•™ä¸‹è§£é‡Šç©ºé—´çš„æªè¾ã€‚</p><p><strong>ä¸‰ã€äº†è§£æ¨¡å‹</strong></p><p><strong>ä¸‹è½½æ¨¡å‹</strong></p><p>ä¸»æµæ¨¡å‹ä¸‹è½½ç½‘ç«™ï¼š<br>Hugging faceæ˜¯ä¸€ä¸ªä¸“æ³¨äºæ„å»ºã€è®­ç»ƒå’Œéƒ¨ç½²å…ˆè¿›å¼€æºæœºå™¨å­¦ä¹ æ¨¡å‹çš„ç½‘ç«™ï¼š<a href="https://link.zhihu.com/?target=https://huggingface.co/">https://huggingface.co/</a><br>Civitaiæ˜¯ä¸€ä¸ªä¸“ä¸ºStable Diffusion AIè‰ºæœ¯æ¨¡å‹è®¾è®¡çš„ç½‘ç«™ï¼Œæ˜¯éå¸¸å¥½çš„AIæ¨¡å‹åº“ï¼š<a href="https://link.zhihu.com/?target=https://civitai.com/">https://civitai.com/</a><br>ä¸»æµæ¨¡å‹è¢«åˆ é™¤å¯ä»¥å»å¤‡ç”¨æ¨¡å‹ç«™ä¸‹è½½ï¼š<a href="https://link.zhihu.com/?target=https://www.4b3.com">https://www.4b3.com</a></p><p><img src="https://pic2.zhimg.com/80/v2-45091ab3c9ea33d2c4cc12eb8bdcc031_720w.webp" alt="img"></p><p><strong>æ¨¡å‹é€‰æ‹©</strong></p><p>å¦‚ä½•é€‰æ‹©åˆé€‚æ¨¡å‹æ˜¯æœ€é‡è¦çš„ã€‚<br>ä»ä½ æƒ³ç”»çš„é£æ ¼ï¼ˆå†™å®ã€äºŒæ¬¡å…ƒã€å¡é€šç›²ç›’ç­‰ï¼‰æ¥é€‰æ‹©å¤§æ¨¡å‹ï¼Œå†æ­é…åˆé€‚çš„Loraã€‚</p><p><strong>1.Checkpoint</strong><br>ä½“ç§¯è¾ƒå¤§ï¼Œä¹Ÿè¢«ç§°ä¸ºå¤§æ¨¡å‹ï¼Œä¸åŒçš„å¤§æ¨¡å‹ä½¿ç”¨ä¸åŒçš„å›¾ç‰‡è®­ç»ƒè€Œæˆï¼Œå¯¹åº”ä¸åŒçš„é£æ ¼ï¼Œç›¸å½“äºæœ€åº•å±‚çš„å¼•æ“ã€‚æœ‰æ—¶å€™éœ€è¦å¤§æ¨¡å‹+VAE+emb+Loraè”åˆæ­é…ä½¿ç”¨ä»¥è¾¾åˆ°éœ€è¦çš„æ•ˆæœã€‚<br>ä¸‹è½½çš„å¤§æ¨¡å‹å¯æ”¾ç½®äºSDæ–‡ä»¶å¤¹&#x2F;models&#x2F;Stable-diffusionå†…ã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-dcefdb6c297905e79e1880f5aed650ed_720w.webp" alt="img"></p><p><strong>2.Lora</strong></p><p>Loraæ˜¯ç‰¹å¾æ¨¡å‹ï¼Œä½“ç§¯è¾ƒå°ï¼Œæ˜¯åŸºäºæŸä¸ªç¡®å®šçš„è§’è‰²ã€ç¡®å®šçš„é£æ ¼æˆ–è€…å›ºå®šçš„åŠ¨ä½œè®­ç»ƒè€Œæˆçš„æ¨¡å‹ï¼Œå¯ä½¿ç”¨æƒé‡æ§åˆ¶ï¼Œç¡®å®šæ€§è¦è¿œå¼ºäºembeddingã€‚embeddingå’ŒLoraæœ‰åŠŸèƒ½äº¤é›†çš„éƒ¨åˆ†ï¼Œä¹Ÿæœ‰äº’ç›¸ä¸å¯å–ä»£çš„åœ°æ–¹ã€‚</p><p>åœ¨ckptå¤§æ¨¡å‹ä¸Šé™„åŠ ä½¿ç”¨ï¼Œå¯¹äººç‰©ã€å§¿åŠ¿ã€ç‰©ä½“è¡¨ç°è¾ƒå¥½ã€‚åœ¨webuiç•Œé¢çš„Additional Networksä¸‹å‹¾çº¿Enableå¯ç”¨ï¼Œç„¶ååœ¨Modelä¸‹é€‰æ‹©æ¨¡å‹ï¼Œå¹¶å¯ç”¨Weightè°ƒæ•´æƒé‡ã€‚æƒé‡è¶Šå¤§ï¼Œè¯¥ Lora çš„å½±å“ä¹Ÿè¶Šå¤§ã€‚ä¸å»ºè®®æƒé‡è¿‡å¤§ï¼ˆè¶…è¿‡1.2ï¼‰ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç°æ‰­æ›²çš„ç»“æœã€‚</p><p>å¤šä¸ªLoraæ¨¡å‹æ··åˆä½¿ç”¨å¯ä»¥èµ·åˆ°å åŠ æ•ˆæœï¼Œè­¬å¦‚ä¸€ä¸ªæ§åˆ¶é¢éƒ¨çš„Lora é…åˆä¸€ä¸ªæ§åˆ¶ç”»é£çš„ Loraå°±å¯ä»¥ç”Ÿæˆå…·æœ‰ç‰¹å®šç”»é£çš„ç‰¹å®šäººç‰©ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨å¤šä¸ªä¸“æ³¨äºä¸åŒæ–¹é¢ä¼˜åŒ–çš„Loraï¼Œåˆ†åˆ«è°ƒæ•´æƒé‡ï¼Œç»“åˆå‡ºè‡ªå·±æƒ³è¦å®ç°çš„æ•ˆæœã€‚</p><p>LoHA æ¨¡å‹æ˜¯ä¸€ç§ LORA æ¨¡å‹çš„æ”¹è¿›ã€‚<br>LoCon æ¨¡å‹ä¹Ÿä¸€ç§ LORA æ¨¡å‹çš„æ”¹è¿›ï¼Œæ³›åŒ–èƒ½åŠ›æ›´å¼ºã€‚<br>ä¸‹è½½çš„Loraå¯æ”¾ç½®äºSDæ–‡ä»¶å¤¹&#x2F;models&#x2F;Loraå†…ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-fda222f7c354e0b7777c3f5177e71d10_720w.webp" alt="img"></p><p><strong>3.VAE</strong><br>VAEæ¨¡å‹ç±»ä¼¼æ»¤é•œï¼Œå¯¹ç”»é¢è¿›è¡Œè°ƒè‰²ä¸å¾®è°ƒï¼Œä¸€èˆ¬éœ€è¦æ­é…ç›¸åº”çš„æ¨¡å‹ä¸€èµ·ä½¿ç”¨ã€‚ï¼ˆå¦‚æœå›¾ç‰‡æ¯”è¾ƒç°ï¼Œé¢œè‰²ä¸å¤ªé“ä¸½ï¼Œå°±å¯èƒ½æ˜¯æ²¡åŠ è½½vae)<br>ä¸‹è½½çš„VAEå¯æ”¾ç½®äºSDæ–‡ä»¶å¤¹&#x2F;models&#x2F;VAEå†…ã€‚</p><p><strong>4.Textual inversionï¼ˆembeddingï¼‰</strong><br>å…³é”®è¯é¢„è®¾æ¨¡å‹ï¼Œå³å…³é”®è¯æ‰“åŒ…ï¼Œå³ç­‰äºé¢„è®¾å¥½ä¸€ç¯®å­å…³é”®è¯a,b,cæ‰“åŒ…ï¼Œè¿›è€Œæ¥æŒ‡ä»£ç‰¹å®šçš„å¯¹è±¡&#x2F;é£æ ¼ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹è½½Textual inversionè¿›è¡Œä½¿ç”¨ã€‚<br>ä¸‹è½½çš„embeddingå¯æ”¾ç½®äºSDæ–‡ä»¶å¤¹&#x2F;embeddingså†…ã€‚</p><p><strong>å››ã€ControlNet</strong></p><p>ControlNetä½¿å¾—SDä»ç©å…·å˜æˆåšå•†ä¸šé¡¹ç›®çš„ç¥å™¨ï¼Œæ¥ä¸‹æ¥ä¼šé‡ä¸­ä¹‹é‡æ¥è¯¦ç»†è®²è§£ä¸€ä¸‹ã€‚<br>ControlNetæ˜¯æ–¯å¦ç¦å¤§å­¦ç ”ç©¶äººå‘˜å¼€å‘çš„Stable Diffusionçš„æ‰©å±•ï¼Œä½¿åˆ›ä½œè€…èƒ½å¤Ÿè½»æ¾åœ°æ§åˆ¶AIå›¾åƒå’Œè§†é¢‘ä¸­çš„å¯¹è±¡ã€‚å®ƒå°†æ ¹æ®è¾¹ç¼˜æ£€æµ‹ã€è‰å›¾å¤„ç†æˆ–äººä½“å§¿åŠ¿ç­‰å„ç§æ¡ä»¶æ¥æ§åˆ¶å›¾åƒç”Ÿæˆã€‚ControlNetå¯ä»¥æ¦‚æ‹¬ä¸ºä¸€ç§ç®€å•çš„ç¨³å®šæ‰©æ•£å¾®è°ƒæ–¹æ³•ã€‚ControlNetçš„å·¥ä½œåŸç†æ˜¯å°†å¯è®­ç»ƒçš„ç½‘ç»œæ¨¡å—é™„åŠ åˆ°ç¨³å®šæ‰©æ•£æ¨¡å‹çš„U-Net ï¼ˆå™ªå£°é¢„æµ‹å™¨ï¼‰çš„å„ä¸ªéƒ¨åˆ†ã€‚Stable Diffusion æ¨¡å‹çš„æƒé‡æ˜¯é”å®šçš„ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å®ƒä»¬æ˜¯ä¸å˜çš„ã€‚åœ¨è®­ç»ƒæœŸé—´ä»…ä¿®æ”¹é™„åŠ æ¨¡å—ã€‚</p><p><strong>å®‰è£…</strong><br>ä»githubä¸Šæ‰¾åˆ°å¹¶æŠŠç½‘å€å¡«åˆ°æ‰©å±•é‡Œå®‰è£…ï¼Œå®‰è£…å®Œåè®°å¾—ç‚¹å‡» Apply and restart UIï¼ˆ<a href="https://link.zhihu.com/?target=https://github.com/Mikubill/sd-webui-controlnet">https://github.com/Mikubill/sd-webui-controlnet</a>ï¼‰</p><p><img src="https://pic4.zhimg.com/80/v2-c08d40337960bebab28092dce6b331b7_720w.webp" alt="img"></p><p>1.å°†ControlNetæ¨¡å‹ï¼ˆ.ptã€.pthã€.ckptæˆ–.safetensorsï¼‰æ”¾å…¥models&#x2F;ControlNetæ–‡ä»¶å¤¹ã€‚<br>2.æ‰“å¼€â€œtxt2imgâ€æˆ–â€œimg2imgâ€é€‰é¡¹å¡ï¼Œå†™ä¸‹æ‚¨çš„æç¤ºã€‚<br>3.æŒ‰â€œåˆ·æ–°æ¨¡å‹â€ï¼Œé€‰æ‹©è¦ä½¿ç”¨çš„æ¨¡å‹ã€‚ï¼ˆè‹¥æ²¡æœ‰å‡ºç°ï¼Œè¯·å°è¯•é‡æ–°åŠ è½½&#x2F;é‡æ–°å¯åŠ¨webuiï¼‰<br>4.ä¸Šä¼ æ‚¨çš„å›¾åƒå¹¶é€‰æ‹©é¢„å¤„ç†å™¨ï¼Œå®Œæˆã€‚<br>ç›®å‰ï¼Œå®ƒæ”¯æŒå®Œæ•´å‹å·å’Œä¿®å‰ªå‹å·ã€‚ä½¿ç”¨extract_controlnet.pyä»åŸå§‹.pthæ–‡ä»¶ä¸­æå–controlnetã€‚<br>é¢„è®­ç»ƒæ¨¡å‹ï¼š<a href="https://link.zhihu.com/?target=https://huggingface.co/lllyasviel/ControlNet/tree/main/models">https://huggingface.co/lllyasviel/ControlNet/tree/main/models</a></p><p><strong>ç•Œé¢ä»‹ç»</strong></p><p><img src="https://pic1.zhimg.com/80/v2-934c4f18855d9fbd10d25549d44158b4_720w.webp" alt="img"></p><p><strong>å¼€å¯</strong> :é€‰ä¸­æ­¤æ¡†ä»¥å¯ç”¨ControlNetã€‚<br><strong>é¢œè‰²åè½¬</strong>ï¼šäº¤æ¢é»‘è‰²å’Œç™½è‰²ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥åœ¨æ‚¨ä¸Šä¼ æ¶‚é¸¦æ—¶ä½¿ç”¨ã€‚ControlNet éœ€è¦é»‘è‰²èƒŒæ™¯å’Œç™½è‰²æ¶‚é¸¦ã€‚å¦‚æœæ‚¨ä½¿ç”¨ç™½è‰²èƒŒæ™¯çš„å¤–éƒ¨è½¯ä»¶åˆ›å»ºæ¶‚é¸¦ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ­¤é€‰é¡¹ã€‚å¦‚æœæ‚¨ä½¿ç”¨ ControlNet çš„ç•Œé¢åˆ›å»ºæ¶‚é¸¦ï¼Œåˆ™ä¸éœ€è¦ä½¿ç”¨æ­¤é€‰é¡¹ã€‚<br><strong>RGBè½¬ä¸ºBGR</strong> :ç”¨äºæ£€æµ‹ç”¨æˆ·å¯¼å…¥å›¾åƒä¸­çš„é¢œè‰²ä¿¡æ¯ã€‚æœ‰æ—¶å›¾åƒä¸­çš„é¢œè‰²ä¿¡æ¯å¯èƒ½ä¸æ‰©å±•æ‰€æœŸæœ›çš„ä¸åŒã€‚å¦‚æœæ‚¨ä¸Šä¼ å›¾åƒå¹¶ä½¿ç”¨é¢„å¤„ç†ï¼Œåˆ™æ— éœ€é€‰ä¸­æ­¤æ¡†ã€‚<br><strong>ä½æ˜¾å­˜</strong>:è¿™å°†å‡ç¼“ETAè¿›ç¨‹ï¼Œä½†æœ‰åŠ©äºä½¿ç”¨æ›´å°‘çš„è®¡ç®—ç©ºé—´(æ˜¾å­˜å°äº8 GB VRAMå»ºè®®ä½¿ç”¨)ï¼Œæ£€æŸ¥æ‚¨æ˜¯å¦ç”¨å®Œäº† GPU å†…å­˜ï¼Œæˆ–è€…æƒ³è¦å¢åŠ å¤„ç†çš„å›¾åƒæ•°é‡ã€‚<br><strong>æ¨æµ‹æ¨¡å¼</strong>:ControlNetè‡ªåŠ¨è¯†åˆ«å›¾åƒ(ä¸éœ€è¦æç¤ºå’Œè´Ÿé¢æç¤º)ä¸é€‰å®šçš„é¢„å¤„ç†å™¨ã€‚å®ƒå¼ºåˆ¶ ControlNet ç¼–ç å™¨éµå¾ªè¾“å…¥æ§åˆ¶å›¾ï¼ˆå¦‚æ·±åº¦ã€è¾¹ç¼˜ç­‰)ï¼Œå³ä½¿æ²¡æœ‰æç¤ºä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½¿ç”¨æ­¤æ¨¡å¼æ—¶ä½¿ç”¨æ›´é«˜çš„æ­¥è¿›ï¼Œä¾‹å¦‚50ï¼Œä½†æ˜¯è¿™ä¸ªæ•ˆæœä¸ä¸€å®šå¥½ã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-7a2d84822fb58596f7e2f1758a2226ac_720w.webp" alt="img"></p><p>**æƒé‡ï¼ˆWeight)**ï¼šä»£è¡¨ä½¿ç”¨ ControlNet ç”Ÿæˆå›¾ç‰‡æ—¶è¢«åº”ç”¨çš„æƒé‡å æ¯”ã€‚<br>**å¼•å¯¼ä»‹å…¥æ—¶æœºï¼ˆGuidance Start)**ï¼šåœ¨ç†è§£æ­¤åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆçŸ¥é“ç”Ÿæˆå›¾ç‰‡çš„ Sampling steps é‡‡æ ·æ­¥æ•°åŠŸèƒ½ï¼Œæ­¥æ•°ä»£è¡¨ç”Ÿæˆä¸€å¼ å›¾ç‰‡è¦åˆ·æ–°è®¡ç®—å¤šå°‘æ¬¡ï¼ŒGuidance Start(T) è®¾ç½®ä¸º 0 å³ä»£è¡¨å¼€å§‹æ—¶å°±ä»‹å…¥ï¼Œé»˜è®¤ä¸º 0ï¼Œè®¾ç½®ä¸º 0.5 æ—¶å³ä»£è¡¨ ControlNet ä» 50% æ­¥æ•°æ—¶å¼€å§‹ä»‹å…¥è®¡ç®—ã€‚<br>**å¼•å¯¼é€€å‡ºæ—¶æœºï¼ˆGuidance End)**ï¼šå’Œå¼•å¯¼ä»‹å…¥æ—¶æœºç›¸å¯¹åº”ï¼Œå¦‚è®¾ç½®ä¸º1ï¼Œåˆ™è¡¨ç¤ºåœ¨100%è®¡ç®—å®Œæ—¶æ‰ä¼šé€€å‡ºä»‹å…¥ä¹Ÿå°±æ˜¯ä¸é€€å‡ºï¼Œé»˜è®¤ä¸º 1ï¼Œå¯è°ƒèŠ‚èŒƒå›´ 0-1ï¼Œå¦‚è®¾ç½®ä¸º 0.8 æ—¶å³ä»£è¡¨ä»80% æ­¥æ•°æ—¶é€€å‡ºä»‹å…¥ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-557a54044f165ca8d0ec1a7e0b043173_720w.webp" alt="img"></p><p>è°ƒæ•´å¤§å°æ¨¡å¼æä¾›äº†è°ƒæ•´ControlNetå¤§å°å’Œä¸Šä¼ å›¾åƒçš„çºµæ¨ªæ¯”ã€‚<br><strong>Just Resize</strong>:ä¸ä¿ç•™çºµæ¨ªæ¯”çš„æƒ…å†µä¸‹ï¼Œæ”¹å˜ControlNetå›¾åƒçš„å¤§å°ä»¥åŒ¹é…Txt2Imgè®¾ç½®çš„å®½åº¦å’Œé«˜åº¦ã€‚è¿™åŒ…æ‹¬æ‹‰ä¼¸æˆ–å‹ç¼©å›¾åƒä»¥é€‚åº”æŒ‡å®šçš„å°ºå¯¸ã€‚<br><strong>Scale to Fit (Inner Fit)</strong>:è°ƒæ•´ControlNetå›¾åƒçš„å¤§å°ä»¥é€‚åº”Txt2Imageçš„å°ºå¯¸ã€‚å®ƒå°†è°ƒæ•´å›¾åƒçš„å¤§å°ï¼Œç›´åˆ°å®ƒèƒ½å¤Ÿé€‚åº”Txt2Imageè®¾ç½®çš„å®½åº¦å’Œé«˜åº¦ã€‚<br><strong>Envelope (Outer Fit)</strong>:è°ƒæ•´Txt2Imageçš„å¤§å°ä»¥é€‚åº”ControlNetå›¾åƒçš„å°ºå¯¸ã€‚å®ƒå°†è°ƒæ•´å›¾åƒçš„å¤§å°ï¼Œç›´åˆ°Txt2Imageè®¾ç½®å¯ä»¥é€‚åˆControlNetå›¾åƒã€‚<br><strong>ç”»å¸ƒå®½åº¦ å’Œ ç”»å¸ƒé«˜åº¦</strong> æä¾›æ‰‹åŠ¨åˆ›å»ºç»˜å›¾æˆ–è‰å›¾ä»¥ï¼Œä¸ä¸Šä¼ ä»»ä½•å›¾åƒï¼ˆæœ€å¥½ä½¿ç”¨ Scribble é¢„å¤„ç†å™¨ä»¥è·å¾—è‰¯å¥½çš„è¾“å‡ºï¼‰ã€‚å®ƒä¼šè°ƒæ•´ç©ºç™½ç”»å¸ƒçš„å¤§å°æ¥è¿›è¡Œç»˜åˆ¶ï¼Œä¸ä¼šå½±å“ä¸Šä¼ çš„åŸå§‹å›¾åƒã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-7468dde77697fbb5543c4e56149acb41_720w.webp" alt="img"></p><p><strong>é¢„è§ˆå›¾ç‰‡å¤„ç†ç»“æœ</strong>ï¼šèƒ½å¤Ÿå¿«é€ŸæŸ¥çœ‹é€‰æ‹©çš„é¢„å¤„ç†å™¨æ˜¯å¦‚ä½•å°†ä¸Šä¼ çš„å›¾åƒæˆ–ç»˜å›¾è½¬æ¢ä¸º ControlNetçš„æ£€æµ‹å›¾ã€‚å¯¹åœ¨æ¸²æŸ“è¾“å‡ºå›¾åƒä¹‹å‰å°è¯•å„ç§é¢„å¤„ç†å™¨æœ‰ç”¨ï¼Œå¯èŠ‚çœæˆ‘ä»¬çš„æ—¶é—´ã€‚<br><strong>éšè—å¤„ç†ç»“æœ</strong>ï¼šåˆ é™¤é¢„è§ˆå›¾åƒã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-937665d029d4e7197cbc5c4e18945937_720w.webp" alt="img"></p><p>é¢„å¤„ç†å™¨å’Œæ¨¡å‹æ˜¯ControlNetçš„ä¸»è¦é€‰é¡¹ã€‚<br><strong>é¢„å¤„ç†å™¨</strong>ï¼šç”¨äºå¯¹è¾“å…¥å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œä¾‹å¦‚æ£€æµ‹è¾¹ç¼˜ã€æ·±åº¦å’Œæ³•çº¿è´´å›¾ã€‚Noneä½¿ç”¨è¾“å…¥å›¾åƒä½œä¸ºæ§åˆ¶å›¾ã€‚ æ ¹æ®æ‰€éœ€çš„è¾“å‡ºï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©ç›¸åº”çš„æ§åˆ¶æ–¹æ³•ã€‚<br><strong>æ¨¡å‹</strong>ï¼šå¦‚æœæ‚¨é€‰æ‹©äº†é¢„å¤„ç†å™¨ï¼Œæ‚¨é€šå¸¸ä¼šé€‰æ‹©ç›¸åº”çš„æ¨¡å‹ã€‚ä½†æ˜¯å®ƒå¹¶ä¸é™åˆ¶ä½ æ··åˆå’ŒåŒ¹é…æ‰€æœ‰çš„é¢„å¤„ç†å™¨å’Œæ¨¡å‹ï¼Œä½†æ˜¯æ··åˆå¤šäº†å°±ä¼šäº§ç”Ÿè´Ÿé¢æ•ˆæœï¼Œæ‰€ä»¥æœ€å¥½ä½¿ç”¨æ›´åŠ åŒ¹é…çš„æ¨¡å‹å¹¶ä¸”è¶Šå°‘è¶Šå¥½ã€‚ControlNetæ¨¡å‹ä¸åœ¨AUTOMATIC1111 GUIé¡¶éƒ¨é€‰æ‹©çš„ç¨³å®šæ‰©æ•£æ¨¡å‹ä¸€èµ·ä½¿ç”¨ã€‚</p><p><strong>é¢„å¤„ç†å™¨</strong></p><p>ä¸‹é¢æˆ‘ä»¬ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ ControlNetï¼Œå¹¶åœ¨ä¸‹é¢ä¸¾ä¾‹è¯´æ˜å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><p><strong>1ã€Cannyè¾¹ç¼˜æ£€æµ‹</strong><br>Cannyé€šè¿‡ä½¿ç”¨è¾¹ç¼˜æ£€æµ‹å™¨åˆ›å»ºé«˜å¯¹æ¯”åº¦åŒºåŸŸçš„è½®å»“æ¥æ£€æµ‹è¾“å…¥å›¾åƒã€‚çº¿æ¡å¯ä»¥æ•æ‰åˆ°éå¸¸è¯¦ç»†çš„ä¿¡æ¯ï¼Œä½†å¦‚æœä½ çš„å›¾åƒèƒŒæ™¯ä¸­æœ‰ä¸€äº›ç‰©ä½“ï¼Œå®ƒå¾ˆå¯èƒ½ä¼šæ£€æµ‹åˆ°ä¸éœ€è¦çš„ç‰©ä½“ã€‚æ‰€ä»¥èƒŒæ™¯ä¸­ç‰©ä½“è¶Šå°‘æ•ˆæœè¶Šå¥½ã€‚ç”¨äºæ­¤é¢„å¤„ç†å™¨çš„æœ€ä½³æ¨¡å‹æ˜¯control_sd15_cannyã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-b1c53af984360b0217ccd3e2c4887ad6_720w.webp" alt="img"></p><p><strong>2ã€Depth &amp; Depth Leres</strong><br>è¿™ä¸ªé¢„å¤„ç†å™¨æœ‰åŠ©äºç”Ÿæˆè¾“å…¥å›¾åƒçš„æ·±åº¦ä¼°è®¡ã€‚æ·±åº¦é€šå¸¸ç”¨äºæ§åˆ¶å›¾åƒå†…ç‰©ä½“çš„ç©ºé—´å®šä½ã€‚æµ…è‰²åŒºåŸŸæ„å‘³ç€å®ƒç¦»ç”¨æˆ·æ›´è¿‘ï¼Œè€Œæ·±è‰²åŒºåŸŸåˆ™ç¦»ç”¨æˆ·æ›´è¿œã€‚<br>åœ¨å¤§å›¾åƒæ—¶å®ƒå¯èƒ½ä¼šä¸¢å¤±å›¾åƒå†…éƒ¨çš„ç»†èŠ‚(é¢éƒ¨è¡¨æƒ…ç­‰)ã€‚ä¸€èˆ¬ä¼šä¸control_sd15_depthæ¨¡å‹ç»„åˆä½¿ç”¨ã€‚Midas Resolutionå‡½æ•°ç”¨äºå¢åŠ æˆ–å‡å°‘detectmapä¸­çš„å¤§å°å’Œç»†èŠ‚çº§åˆ«ã€‚å®ƒçš„çº§åˆ«è¶Šé«˜ï¼Œå°†ä½¿ç”¨æ›´å¤šçš„VRAMï¼Œä½†å¯ä»¥ç”Ÿæˆæ›´é«˜è´¨é‡çš„å›¾åƒï¼Œåä¹‹äº¦ç„¶ã€‚<br>Depth Leresæœ‰ä¸Depth ç›¸åŒçš„åŸºæœ¬æ¦‚å¿µï¼Œä½†åœ¨åœ°å›¾ä¸­åŒ…å«æ›´å¹¿æ³›çš„èŒƒå›´ã€‚ä½†æœ‰æ—¶å®ƒä¼šä»å›¾ç‰‡ä¸­æ•è·äº†å¤ªå¤šä¿¡æ¯ï¼Œå¯èƒ½ä¼šç”Ÿæˆä¸åŸå§‹å›¾åƒç•¥æœ‰ä¸åŒçš„å›¾åƒã€‚æ‰€ä»¥æœ€å¥½å…ˆè¯•ç”¨ä¸¤ç§é¢„å¤„ç†å™¨ï¼Œç„¶åå†³å®šå“ªä¸€ç§ã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-9a694ed81408f57cb3dac6ea6d32a11f_720w.webp" alt="img"></p><p><strong>3ã€HED (Holistically-Nested Edge Detection)</strong><br>Hedå¯ä»¥åœ¨ç‰©ä½“å‘¨å›´åˆ›å»ºæ¸…æ™°å’Œç²¾ç»†çš„è¾¹ç•Œï¼Œè¾“å‡ºç±»ä¼¼äºCannyï¼Œä½†å‡å°‘äº†å™ªå£°å’Œæ›´æŸ”è½¯çš„è¾¹ç¼˜ã€‚å®ƒçš„æœ‰æ•ˆæ€§åœ¨äºèƒ½å¤Ÿæ•æ‰å¤æ‚çš„ç»†èŠ‚å’Œè½®å»“ï¼ŒåŒæ—¶ä¿ç•™ç»†èŠ‚ç‰¹å¾(é¢éƒ¨è¡¨æƒ…ã€å¤´å‘ã€æ‰‹æŒ‡ç­‰)ã€‚Hedé¢„å¤„ç†å™¨å¯ç”¨äºä¿®æ”¹å›¾åƒçš„é£æ ¼å’Œé¢œè‰²ã€‚ç”¨äºæ­¤é¢„å¤„ç†å™¨çš„æœ€ä½³æ¨¡å‹æ˜¯control_sd15_hedã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-1c2337626e557a396beff1e7a1c74b5a_720w.webp" alt="img"></p><p><strong>4ã€MLSD ( Mobile Line Segment Detection)</strong><br>MLSD Preprocessor æœ€é€‚åˆç”Ÿæˆå¼ºæœ‰åŠ›çš„çº¿æ¡ï¼Œè¿™äº›çº¿æ¡èƒ½å¤Ÿæ£€æµ‹å‡ºéœ€è¦ç‹¬ç‰¹å’Œåˆšæ€§è½®å»“çš„å»ºç­‘å’Œå…¶ä»–äººé€ ä½œå“ã€‚ä½†æ˜¯å®ƒä¸é€‚ç”¨äºå¤„ç†éåˆšæ€§æˆ–å¼¯æ›²çš„ç‰©ä½“ã€‚MLSDé€‚ç”¨äºç”Ÿæˆå®¤å†…å¸ƒå±€æˆ–å»ºç­‘ç»“æ„ï¼Œå› ä¸ºå®ƒå¯ä»¥çªå‡ºç›´çº¿å’Œè¾¹ç¼˜ã€‚ç”¨äºæ­¤é¢„å¤„ç†å™¨çš„æœ€ä½³æ¨¡å‹æ˜¯control_sd15_mlsdã€‚</p><p><img src="https://pic2.zhimg.com/80/v2-523d96396c2af3d266688bc27f941c1d_720w.webp" alt="img"></p><p><strong>5ã€Normal map</strong><br>æ³•çº¿å›¾ä½¿ç”¨äº†ä¸‰ç§ä¸»è¦é¢œè‰²(çº¢ã€ç»¿ã€è“)ï¼Œé€šè¿‡ä¸åŒçš„è§’åº¦æ¥ç²¾ç¡®å®šä½ç‰©ä½“çš„ç²—ç³™åº¦å’Œå…‰æ»‘ç¨‹åº¦ã€‚å®ƒç”Ÿæˆæ³•çº¿å›¾çš„åŸºæœ¬ä¼°è®¡ï¼Œå¯ä»¥ä¿ç•™ç›¸å½“å¤šçš„ç»†èŠ‚ï¼Œä½†å¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œå› ä¸ºæ³•çº¿å›¾å®Œå…¨æ¥è‡ªå›¾åƒï¼Œè€Œä¸æ˜¯åœ¨3Då»ºæ¨¡è½¯ä»¶ä¸­æ„å»ºçš„ã€‚<br>æ³•çº¿å›¾æœ‰åˆ©äºçªå‡ºå¤æ‚çš„ç»†èŠ‚å’Œè½®å»“ï¼Œå¹¶ä¸”åœ¨å®šä½å¯¹è±¡æ–¹é¢ä¹Ÿå¾ˆæœ‰æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨æ¥è¿‘åº¦å’Œè·ç¦»æ–¹é¢ã€‚â€œNormal Background Thresholdâ€ç”¨äºè°ƒæ•´èƒŒæ™¯æˆåˆ†ã€‚è®¾ç½®ä¸€ä¸ªæ›´é«˜çš„é˜ˆå€¼å¯ä»¥ç§»é™¤èƒŒæ™¯çš„è¿œå¤„éƒ¨åˆ†(å°†å…¶æ··åˆæˆç´«è‰²)ã€‚é™ä½é˜ˆå€¼å°†å‘½ä»¤AIä¿ç•™ç”šè‡³æ˜¾ç¤ºé¢å¤–çš„èƒŒæ™¯å…ƒç´ ã€‚ç”¨äºæ­¤é¢„å¤„ç†å™¨çš„æœ€ä½³æ¨¡å‹æ˜¯control_sd15_normalã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-f1e80b5281beced419c71ee884c8d1ff_720w.webp" alt="img"></p><p><strong>6ã€OpenPose</strong><br>è¿™ä¸ªé¢„å¤„ç†å™¨ç”Ÿæˆäº†ä¸€ä¸ªåŸºæœ¬çš„éª¨éª¼ç«æŸ´äººå½¢è±¡ã€‚è¿™ç§æŠ€æœ¯è¢«å¹¿æ³›é‡‡ç”¨ï¼Œå› ä¸ºå¤šä¸ª OpenPoseéª¨æ¶å¯ä»¥ç»„åˆæˆä¸€ä¸ªå›¾åƒï¼Œè¿™æœ‰åŠ©äºå¼•å¯¼ç¨³å®šæ‰©æ•£ç”Ÿæˆå¤šä¸ªä¸€è‡´çš„ä¸»é¢˜ã€‚éª¨æ¶å›¾æœ‰å¾ˆå¤šå…³èŠ‚ç‚¹ï¼Œæ¯ä¸ªç‚¹ä»£è¡¨å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://pic1.zhimg.com/80/v2-5979d8f2284d698c10c55646546816ac_720w.webp" alt="img"></p><p><strong>7ã€Scribble</strong><br>æ¶‚é¸¦çš„ç›®çš„æ˜¯ä»ç®€å•çš„é»‘ç™½çº¿æ¡ç”»å’Œè‰å›¾ç”Ÿæˆå›¾åƒã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨â€œCanvasâ€é€‰é¡¹åˆ›å»ºç‰¹å®šå¤§å°çš„ç©ºç™½ç”»å¸ƒï¼Œç”¨äºæ‰‹åŠ¨ç´ æï¼ˆä¹Ÿå¯ä»¥ç›´æ¥ä¸Šä¼ å›¾åƒï¼‰ã€‚å¦‚æœè‰å›¾å’Œç»˜å›¾ç”±ç™½è‰²èƒŒæ™¯ä¸Šçš„é»‘çº¿ç»„æˆï¼Œåˆ™éœ€è¦é€‰ä¸­â€œInvert Input Colorâ€å¤é€‰æ¡†ã€‚ç”¨äºè¿™ä¸ªé¢„å¤„ç†å™¨çš„æœ€ä½³æ¨¡å‹æ˜¯control_sd15_openposeã€‚</p><p><img src="https://pic3.zhimg.com/80/v2-dfca58146adafab31b4a77037647fa56_720w.webp" alt="img"></p><p><strong>8ã€Segmentation</strong><br>åˆ†å‰²é¢„å¤„ç†å™¨æ£€æµ‹å¹¶å°†ä¸Šä¼ çš„å›¾åƒåˆ†å‰²ä¸ºåŒä¸€å›¾åƒå†…çš„æ®µæˆ–åŒºåŸŸã€‚è¯¥æ¨¡å‹åœ¨ç”Ÿæˆä¸€ç»„æ–°çš„å›¾åƒæ—¶ï¼Œå°†detectmapå›¾åƒåº”ç”¨äºæ–‡æœ¬æç¤ºã€‚ç”¨äºæ­¤é¢„å¤„ç†å™¨çš„æœ€ä½³æ¨¡å‹æ˜¯control_sd15_segã€‚</p><p><img src="https://pic4.zhimg.com/80/v2-5347107433e8bd44fba0ab6101a36b83_720w.webp" alt="img"></p><p><strong>é™„å½•ï¼šé¢„å¤„ç†å™¨ä¸å¯¹åº”æ¨¡å‹æ¸…å•</strong></p><p><img src="https://pic1.zhimg.com/80/v2-2f68a20f9ff5f97601b90e4df3f6e9f8_720w.webp" alt="img"></p><p><strong>æ€»ç»“</strong></p><p>ä½¿ç”¨AIç»˜å›¾å·¥å…·Stable Diffusionç¡®å®èƒ½æé«˜ç¾æœ¯å·¥ä½œè€…çš„ç”Ÿäº§æ•ˆç‡ï¼Œä½†æ˜¯è¯·è®°ä½ï¼šäººå·¥æ™ºèƒ½ï¼Œæ²¡æœ‰äººå·¥å°±æ²¡æœ‰æ™ºèƒ½ã€‚Stable Diffusionå¹¶ä¸æ˜¯ç®€å•æ˜“ä¸Šæ‰‹çš„APPï¼Œæˆ‘ä»¬éœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´å’Œç²¾åŠ›å»å­¦ä¹ å’Œä¸æ–­è°ƒè¯•ï¼Œæ‰èƒ½ä½¿å…¶çœŸæ­£ä¸ºæˆ‘ä»¬æ‰€ç”¨ï¼Œé«˜æ•ˆäº§å‡ºæ•ˆæœç¬¦åˆéœ€æ±‚çš„å›¾ç‰‡ã€‚</p><p>æœ€åï¼Œæˆ‘ä¸ºå¤§å®¶ç®€å•ç½—åˆ—ä¸€ä¸‹ä½¿ç”¨SDçš„å‡ é¡¹æ ¸å¿ƒèƒ½åŠ›ï¼š<br>1.Githubä½¿ç”¨èƒ½åŠ›ï¼Œä½¿ç”¨è€…åœ¨ç†Ÿç»ƒæŒæ¡Githubå¼€æºé¡¹ç›®çš„å®‰è£…ã€è°ƒå‚ã€æ’é”™ã€ç¼–ç¨‹ç¯å¢ƒè®¾ç½®ç­‰æŠ€èƒ½åï¼Œå°±ä¸ä¼šåœ¨SDæŠ¥é”™æ—¶å…­ç¥æ— ä¸»äº†ã€‚<br>2.åŸºç¡€å‡ºå›¾è°ƒè¯•èƒ½åŠ›ï¼Œè¿™é¡¹èƒ½åŠ›èƒ½å¤Ÿè®©ä½¿ç”¨è€…æ— éœ€ååŠ©å°±èƒ½è‡ªè¡Œæ‘¸ç´¢ç¨³å®šè¾“å‡ºå¯ç”¨çš„å›¾ç‰‡ã€‚<br>3.Controlnetæ„å›¾èƒ½åŠ›ï¼ŒåŸºäºControlnetçš„æ„å›¾æ§åˆ¶æ˜¯ç¾æœ¯ä»ä¸šè€…é©¾é©­SDçš„ç¼°ç»³ï¼Œä¸ä¼šç”¨Controlnetï¼Œä½ åªä¼šè¢«éšæœºå™ªå£°ç‰µç€èµ°ã€‚<br>4.å­¦ä¹ æ’ä»¶å¹¶ç»„åˆä½¿ç”¨çš„èƒ½åŠ›ã€‚<br>5.Loraç­‰å°æ¨¡å‹çš„è®­ç»ƒèƒ½åŠ›ï¼ˆè¿›é˜¶ï¼‰ã€‚</p><p>å¦‚æœ¬æ–‡å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å°†å…¶åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï½å…³æ³¨æˆ‘ï¼Œæ¥ä¸‹æ¥ä¼šåˆ†äº«æ›´å¤šå…³äºStable Diffusionçš„è¿›é˜¶å†…å®¹å’Œå•†ä¸šè½åœ°é¡¹ç›®ã€‚</p><p><strong>ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š</strong></p><p><a href="https://link.zhihu.com/?target=https://avoid.overfit.cn/post/acbb609d015a40fc8d0cd26f8e215dd9">https://avoid.overfit.cn/post/acbb609d015a40fc8d0cd26f8e215dd9</a><br><a href="https://link.zhihu.com/?target=https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Features%23attentionemphasis">https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Features#attentionemphasis</a><br><a href="https://link.zhihu.com/?target=https://muhou.net/document/236688.html">https://muhou.net/document/236688.html</a><br><a href="https://link.zhihu.com/?target=https://guide.novelai.dev/guide/prompt-engineering/practice">https://guide.novelai.dev/guide/prompt-engineering/practice</a><br><a href="https://zhuanlan.zhihu.com/p/619721909">https://zhuanlan.zhihu.com/p/619721909</a><br><a href="https://zhuanlan.zhihu.com/p/612572004">https://zhuanlan.zhihu.com/p/612572004</a><br><a href="https://link.zhihu.com/?target=https://www.163.com/dy/article/I22IV66G0518R7MO.html">https://www.163.com/dy/article/I22IV66G0518R7MO.html</a><br><a href="https://link.zhihu.com/?target=https://stable-diffusion-art.com/controlnet/">https://stable-diffusion-art.com</a></p>]]></content>
      
      
      <categories>
          
          <category> Aiç§‘æŠ€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> aiç»˜ç”» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºTimeSeaçš„sdç»˜ç”»æ¥å£ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘FC</title>
      <link href="/2024/03/17/IT%E7%AC%94%E8%AE%B0/%E5%9F%BA%E4%BA%8ETimeSea%E7%9A%84sd%E7%BB%98%E7%94%BB%E6%8E%A5%E5%8F%A3%E4%BF%AE%E6%94%B9%E4%B8%BA%E9%98%BF%E9%87%8C%E4%BA%91FC/"/>
      <url>/2024/03/17/IT%E7%AC%94%E8%AE%B0/%E5%9F%BA%E4%BA%8ETimeSea%E7%9A%84sd%E7%BB%98%E7%94%BB%E6%8E%A5%E5%8F%A3%E4%BF%AE%E6%94%B9%E4%B8%BA%E9%98%BF%E9%87%8C%E4%BA%91FC/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»£ç ä¿®æ”¹"><a href="#ä»£ç ä¿®æ”¹" class="headerlink" title="ä»£ç ä¿®æ”¹"></a>ä»£ç ä¿®æ”¹</h2><p>ä¸‹è½½æ—¶é—´æµ·å¤§ä½¬çš„æºç ï¼š<a href="https://gitee.com/dulaiduwang_hjx_bilibili/time_sea_chatgpt">TIME SEA CHATGPT: åŸºäºSpringBoot3 å¼€å‘çš„ åŒç«¯Ai (å«å°ç¨‹åº H5, ç½‘é¡µæ”¯æŒå·²é€‚é…æ‰‹æœº)å¹³å° , é€‚é… åŠŸèƒ½ ChatGPTã€æ•°å­—äººè§†é¢‘ç”Ÿæˆã€NewBing ã€Claudeã€è‡ªå®šä¹‰å¯¹è¯ã€è‡ªå®šä¹‰è§’è‰²ã€ SDç»˜å›¾ ã€GPTç»˜å›¾ã€MJç»˜å›¾, ç½‘é¡µæ•°æ®å’Œå°ç¨‹åºç«¯åŒæ­¥ ç™»å½•æ–¹å¼åˆ†ä¸º é‚®ç®±ç™»å½• æˆ– å¾®ä¿¡æ‰«ä¸€æ‰«ç™»å½• , ç»˜å›¾å†…å« ç™¾åº¦ç¿»è¯‘ é»„å›¾é‰´æƒ , æ”¯æŒ å°ç¨‹åºæµé‡ä¸»åŠŸèƒ½ åŒç«¯è‡ªå¸¦ ç®¡ç†ç³»ç»Ÿ (gitee.com)</a></p><p>é‡Œé¢æœ‰åç«¯çš„éƒ¨ç½²æ•™ç¨‹å“¦~</p><p>ç›´æ¥è¿›å…¥Webæ¨¡å—ï¼Œé‡Œé¢å…¨å±€æœç´¢DrawingTextView.vueæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„ä»£ç å…¨éƒ¨æ›¿æ¢ä¸ºä¸‹é¢çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;demo-image__placeholder&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;block&quot;&gt;</span><br><span class="line">      &lt;span class=&quot;demonstration&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;el-image :src=&quot;src&quot;&gt;&lt;/el-image&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">      ç›®å‰PCç‰ˆæ˜¾ç¤ºå¯èƒ½æœ‰äº›é—®é¢˜ï¼Œå»ºè®®ç¼©å°ç½‘é¡µæˆ–ä½¿ç”¨æ‰‹æœºç«¯</span><br><span class="line">  &lt;br/&gt;</span><br><span class="line">      æ­£å‘æç¤ºè¯(è‹±æ–‡æ›´å‡†ç¡®~):</span><br><span class="line">      &lt;el-input</span><br><span class="line">          type=&quot;textarea&quot;</span><br><span class="line">          :rows=&quot;2&quot;</span><br><span class="line">          placeholder=&quot;è¯·è¾“å…¥ç»˜ç”»æç¤ºè¯&quot;</span><br><span class="line">          v-model=&quot;prompt&quot;&gt;</span><br><span class="line">      &lt;/el-input&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      ç»˜ç”»æ¨¡å‹:</span><br><span class="line">      &lt;el-select v-model=&quot;value&quot; placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;</span><br><span class="line">        &lt;el-option</span><br><span class="line">            v-for=&quot;item in options&quot;</span><br><span class="line">            :key=&quot;item.value&quot;</span><br><span class="line">            :label=&quot;item.label&quot;</span><br><span class="line">            :value=&quot;item.value&quot;&gt;</span><br><span class="line">        &lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      é‡‡æ ·å™¨:</span><br><span class="line">      &lt;el-select v-model=&quot;value2&quot; placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;</span><br><span class="line">        &lt;el-option</span><br><span class="line">            v-for=&quot;item in options2&quot;</span><br><span class="line">            :key=&quot;item.value2&quot;</span><br><span class="line">            :label=&quot;item.label2&quot;</span><br><span class="line">            :value=&quot;item.value2&quot;&gt;</span><br><span class="line">        &lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      å¤§å°:</span><br><span class="line">      &lt;el-select v-model=&quot;height&quot; placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;</span><br><span class="line">        &lt;el-option</span><br><span class="line">            v-for=&quot;item in shape&quot;</span><br><span class="line">            :key=&quot;item.height&quot;</span><br><span class="line">            :label=&quot;item.label3&quot;</span><br><span class="line">            :value=&quot;item.height&quot;&gt;</span><br><span class="line">        &lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      æ­¥æ•°(è¶Šé«˜è¶Šä¸°å¯Œ,è¶Šä½è¶Šç®€çº¦):</span><br><span class="line">      &lt;el-select v-model=&quot;step&quot; placeholder=&quot;è¯·é€‰æ‹©&quot;&gt;</span><br><span class="line">        &lt;el-option</span><br><span class="line">            v-for=&quot;item in options3&quot;</span><br><span class="line">            :key=&quot;item.step&quot;</span><br><span class="line">            :label=&quot;item.label3&quot;</span><br><span class="line">            :value=&quot;item.step&quot;&gt;</span><br><span class="line">        &lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-button type=&quot;primary&quot; @click=&quot;requestImage&quot;&gt;å¼€å§‹ç»˜ç”»&lt;/el-button&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      (ç”»å¥½åè®°å¾—ä¿å­˜åˆ°æœ¬åœ°å“¦~)</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line">      &lt;div v-if=&quot;loading===1&quot;&gt;</span><br><span class="line">        &lt;h1&gt;</span><br><span class="line">          &lt;span&gt;åŠ &lt;/span&gt;</span><br><span class="line">          &lt;span&gt;è½½&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;ä¸­&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;.&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;.&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;.&lt;/span&gt;</span><br><span class="line">        &lt;/h1&gt;</span><br><span class="line">        (é¢„è®¡éœ€è¦1åˆ†é’Ÿï¼Œè¯·å‹¿åˆ·æ–°ç½‘é¡µæˆ–ç‚¹å‡»æŒ‰é’®)</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div v-if=&quot;loading===2&quot;&gt;</span><br><span class="line">        &lt;div v-if=&quot;decodedImages.length&quot;&gt;</span><br><span class="line">          &lt;div v-for=&quot;(img, index) in decodedImages&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">            &lt;img :src=&quot;img&quot; alt=&quot;image&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div v-if=&quot;loading===3&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;milky&quot;&gt;AIç»˜ç”»è°ƒç”¨å¤±è´¥T_T&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;DrawingView&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      src: &#x27;https://img2.imgtp.com/2024/03/17/3qkbcd2h.png&#x27;,</span><br><span class="line">      textarea: &#x27;&#x27;,</span><br><span class="line">      loading: &#x27;0&#x27;,</span><br><span class="line">      decodedImages: [],</span><br><span class="line">      prompt: &#x27;lovely girl&#x27;,</span><br><span class="line">      step: &#x27;&#x27;,</span><br><span class="line"></span><br><span class="line">      options: [&#123;</span><br><span class="line">        value: &#x27;mixProV4.Cqhm.safetensors&#x27;,</span><br><span class="line">        label: &#x27;ç»å…¸æ¨¡å‹&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        value: &#x27;Anime_Art_SDXL.safetensors&#x27;,</span><br><span class="line">        label: &#x27;ä¼˜ç¾åŠ¨æ¼«é£æ ¼&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        value: &#x27;majicMIX realistic_v6.safetensors&#x27;,</span><br><span class="line">        label: &#x27;å†™çœŸäººç‰©&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        value: &#x27;Counterfeit-V2.5_v30.safetensors&#x27;,</span><br><span class="line">        label: &#x27;ä¸°å¯ŒäºŒæ¬¡å…ƒ&#x27;</span><br><span class="line">      &#125;],</span><br><span class="line">      value: &#x27;&#x27;,</span><br><span class="line">      options2: [&#123;</span><br><span class="line">        value2: &#x27;Euler a&#x27;,</span><br><span class="line">        label2: &#x27;Euler a(é»˜è®¤æ¨è)&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        value2: &#x27;Euler&#x27;,</span><br><span class="line">        label2: &#x27;Euler&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        value2: &#x27;LMS&#x27;,</span><br><span class="line">        label2: &#x27;LMS&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        value2: &#x27;DPM++ 2M&#x27;,</span><br><span class="line">        label2: &#x27;DPM++ 2M&#x27;</span><br><span class="line">      &#125;],</span><br><span class="line"></span><br><span class="line">      options3: [&#123;</span><br><span class="line">        step: &#x27;10&#x27;,</span><br><span class="line">        label3: &#x27;10&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        step: &#x27;20&#x27;,</span><br><span class="line">        label3: &#x27;20&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        step: &#x27;30&#x27;,</span><br><span class="line">        label3: &#x27;30&#x27;</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        step: &#x27;40&#x27;,</span><br><span class="line">        label3: &#x27;40&#x27;</span><br><span class="line">      &#125;],</span><br><span class="line">      height: &#x27;512&#x27;,</span><br><span class="line">      width: &#x27;512&#x27;,</span><br><span class="line">      value2: &#x27;&#x27;,</span><br><span class="line">      shape: [&#123;</span><br><span class="line">        height: 512,</span><br><span class="line">        width: 512,</span><br><span class="line">        label3: &quot;1 : 1(æ­£æ–¹å½¢)&quot;</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        height: 1485,</span><br><span class="line">        width: 810,</span><br><span class="line">        label3: &quot;16 : 9(ç”µè„‘å±å¹•)&quot;</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        height: 512,</span><br><span class="line">        width: 1024,</span><br><span class="line">        label3: &quot;1 : 2(æ‰‹æœºå±å¹•)&quot;</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        height: 750,</span><br><span class="line">        width: 1000,</span><br><span class="line">        label3: &quot;3 : 4(å°çº¢ä¹¦)&quot;</span><br><span class="line">      &#125;,&#123;</span><br><span class="line">        height: 1440,</span><br><span class="line">        width: 2560,</span><br><span class="line">        label3: &quot;2k (ä»·æ ¼æ˜‚è´µå°‘ç”¨...)&quot;</span><br><span class="line">      &#125;],</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    requestImage() &#123;</span><br><span class="line">      console.log(&quot;å¼€å§‹å‘é€è¯·æ±‚&quot;);</span><br><span class="line">      this.loading=1;</span><br><span class="line">      //TODO è®¾ç½®é˜¿é‡Œäº‘ç»˜ç”»åœ°å€</span><br><span class="line">      axios.post(&quot;http://ä½ çš„é˜¿é‡Œäº‘sdç»˜ç”»æ¥å£&quot;, &#123;</span><br><span class="line">        &quot;prompt&quot;: this.prompt,</span><br><span class="line">        &quot;step&quot;: 10,</span><br><span class="line">        &quot;height&quot;: this.height,</span><br><span class="line">        &quot;width&quot;: this.width,</span><br><span class="line">        &quot;override_settings&quot;: &#123;</span><br><span class="line">          &quot;sd_model_checkpoint&quot;: this.value,</span><br><span class="line">          // &quot;sd_model_checkpoint&quot;: &quot;majicMIX realistic_v6.safetensors&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        headers: &#123;</span><br><span class="line">          &quot;Authorization&quot;: &quot;Basic Og==&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).then(response =&gt; &#123;</span><br><span class="line">        console.log(response.status);</span><br><span class="line">        this.loading = 2;</span><br><span class="line">        this.decodeImages(response.data.images); // è§£ç å¹¶å±•ç¤ºå›¾åƒæ•°æ®</span><br><span class="line">        this.costMoney();</span><br><span class="line">      &#125;).catch(err =&gt; &#123;</span><br><span class="line">        console.error(err);</span><br><span class="line">        this.loading = 3;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    decodeImages(images) &#123;</span><br><span class="line">      const decodedImages = images.map(img =&gt; this.base64Decode(img));</span><br><span class="line">      this.decodedImages = decodedImages;</span><br><span class="line">    &#125;,</span><br><span class="line">    base64Decode(base64) &#123;</span><br><span class="line">      const binaryString = window.atob(base64);</span><br><span class="line">      const len = binaryString.length;</span><br><span class="line">      const bytes = new Uint8Array(len);</span><br><span class="line">      for (let i = 0; i &lt; len; ++i) &#123;</span><br><span class="line">        bytes[i] = binaryString.charCodeAt(i);</span><br><span class="line">      &#125;</span><br><span class="line">      const blob = new Blob([bytes.buffer], &#123; type: &#x27;image/png&#x27; &#125;);</span><br><span class="line">      return URL.createObjectURL(blob); // å°†è§£ç åçš„å›¾åƒæ•°æ®è½¬æ¢ä¸ºURL</span><br><span class="line">    &#125;,</span><br><span class="line">    //æœªå®Œæˆçš„æ‰£è´¹ç³»ç»Ÿ</span><br><span class="line">    costMoney()&#123;</span><br><span class="line">      axios.post(&quot;http://localhost:8625/drawing/sd/gpt/text&quot;</span><br><span class="line">      ).then(re =&gt;&#123;</span><br><span class="line">        console.log(re.status)</span><br><span class="line">      &#125;).catch(err =&gt;&#123;</span><br><span class="line">        console.log(err);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  setup()&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">:deep(.el-textarea) &#123;</span><br><span class="line">  .el-textarea__inner &#123;</span><br><span class="line">    background: var(--bgColor2);</span><br><span class="line">    box-shadow: none;</span><br><span class="line">    max-height: 400px;</span><br><span class="line">    padding: 10px;</span><br><span class="line">    font-size: 10px;</span><br><span class="line">    color: var(--textColor2);</span><br><span class="line"></span><br><span class="line">    &amp;:hover &#123;</span><br><span class="line">      box-shadow: none;</span><br><span class="line">      background: var(--bgColor2);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ::placeholder &#123;</span><br><span class="line">    color: var(--textColor4); /* å°†é¢œè‰²å€¼ä¿®æ”¹ä¸ºæ‚¨æƒ³è¦çš„å ä½ç¬¦æ–‡å­—é¢œè‰² */</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /* å…¼å®¹æ€§å¤„ç† */</span><br><span class="line">  :-ms-input-placeholder &#123;</span><br><span class="line">    color: var(--textColor4); /* å°†é¢œè‰²å€¼ä¿®æ”¹ä¸ºæ‚¨æƒ³è¦çš„å ä½ç¬¦æ–‡å­—é¢œè‰² */</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">h1 span &#123;</span><br><span class="line">  top: 20px; /*å­—ç¬¦ä¸Šä¸‹æµ®åŠ¨*/</span><br><span class="line">  position: relative;</span><br><span class="line">  animation: loading 0.3s ease 0s infinite alternate; /*å¼•ç”¨åŠ¨ç”»*/</span><br><span class="line">  /* animation: åŠ¨ç”»åç§° åŠ¨ç”»æ—¶é—´ åŠ¨ç”»æ›²çº¿ ä½•æ—¶å¼€å§‹ æ’­æ”¾æ¬¡æ•° æ˜¯å¦åæ–¹å‘;</span><br><span class="line">  alternate:è¡¨ç¤ºåŠ¨ç”»å…ˆæ­£å¸¸è¿è¡Œå†åæ–¹å‘è¿è¡Œï¼Œå¹¶æŒç»­äº¤æ›¿</span><br><span class="line">  infinite:è¡¨ç¤ºæ— é™å¾ªç¯*/</span><br><span class="line">  font-size: 100px;</span><br><span class="line">  color: white;</span><br><span class="line">  text-shadow: 0 1px 0  #CCC,</span><br><span class="line">  0 2px 0 #CCC,</span><br><span class="line">  0 3px 0 #CCC,</span><br><span class="line">  0 4px 0 #CCC,</span><br><span class="line">  0 5px 0 #CCC,</span><br><span class="line">  0 6px 0 #CCC,</span><br><span class="line">  0 7px 0 #CCC,</span><br><span class="line">  0 8px 0 #CCC,</span><br><span class="line">  0 9px 0 #CCC,</span><br><span class="line">  0 10px 10px rgba(0, 0, 0, 0.5);</span><br><span class="line">  /*text-shadow: æ°´å¹³é˜´å½±ä½ç½®(å¿…é¡») å‚ç›´é˜´å½±ä½ç½®(å¿…é¡») æ¨¡ç³Šè·ç¦»(å¯é€‰) é˜´å½±é¢œè‰²(å¯é€‰);</span><br><span class="line">    text-shadow: h-shadow v-shadow blur color; */</span><br><span class="line">&#125;</span><br><span class="line">h1 span:nth-child(2) &#123;</span><br><span class="line">  animation-delay: 0.1s;</span><br><span class="line">&#125;</span><br><span class="line">h1 span:nth-child(3) &#123;</span><br><span class="line">  animation-delay: 0.2s;</span><br><span class="line">&#125;</span><br><span class="line">h1 span:nth-child(4) &#123;</span><br><span class="line">  animation-delay: 0.3s;</span><br><span class="line">&#125;</span><br><span class="line">h1 span:nth-child(5) &#123;</span><br><span class="line">  animation-delay: 0.4s;</span><br><span class="line">&#125;</span><br><span class="line">h1 span:nth-child(6) &#123;</span><br><span class="line">  animation-delay: 0.5s;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes loading &#123;  /* å®šä¹‰åŠ¨ç”»*/</span><br><span class="line">  100% &#123;</span><br><span class="line">    top: -20px;  /*å­—ç¬¦ä¸Šä¸‹æµ®åŠ¨*/</span><br><span class="line">    text-shadow: 0 1px 0 #CCC,</span><br><span class="line">    0 2px 0 #CCC,</span><br><span class="line">    0 3px 0 #CCC,</span><br><span class="line">    0 4px 0 #CCC,</span><br><span class="line">    0 5px 0 #CCC,</span><br><span class="line">    0 6px 0 #CCC,</span><br><span class="line">    0 7px 0 #CCC,</span><br><span class="line">    0 8px 0 #CCC,</span><br><span class="line">    0 9px 0 #CCC,</span><br><span class="line">    0 50px 25px rgba(0, 0, 0, 0.3);</span><br><span class="line">    /*ä¸Šå‡çš„æ—¶å€™é˜´å½±è¦åœ¨æ–‡å­—ä¸‹é¢ä¸€äº›ï¼Œæ‰€ä»¥å‚ç›´é˜´å½±çš„ä½ç½®åæ ‡å’Œæ¨¡ç³Šè·ç¦»è¦å¤§ä¸€äº›*/</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.milky&#123;</span><br><span class="line">  font-size: 80px;   /*è®¾ç½®æ–‡å­—å¤§å°*/</span><br><span class="line">  color:#3366FF;  /*è®¾ç½®æ–‡å­—é¢œè‰²*/</span><br><span class="line">  text-shadow: 0 8px 10px #6699FF;  /*è®¾ç½®æ–‡å­—é˜´å½±*/</span><br><span class="line">  font-weight: bolder;  /*è®¾ç½®æ–‡å­—å®½åº¦*/</span><br><span class="line">  text-align: center;  /*è®¾ç½®æ–‡å­—å±…ä¸­*/</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®°å¾—ä¿®æ”¹TODOå¤„çš„ç»˜ç”»åœ°å€å“¦~</p><p>ç„¶ååœ¨æ ¹ç›®å½•ä¸‹cmdè¿è¡Œnpm run buildå³å¯</p><p>æ¨¡å‹é€‰æ‹©è¦è‡ªå·±é…ç½®ä¸‹è½½çš„æ¨¡å‹å“¦ï¼Œé»˜è®¤éƒ½æœ‰ç¬¬ä¸€ä¸ªç»å…¸æ¨¡å‹</p><h2 id="é˜¿é‡Œäº‘FCå‡½æ•°è®¡ç®—ç”³è¯·"><a href="#é˜¿é‡Œäº‘FCå‡½æ•°è®¡ç®—ç”³è¯·" class="headerlink" title="é˜¿é‡Œäº‘FCå‡½æ•°è®¡ç®—ç”³è¯·"></a>é˜¿é‡Œäº‘FCå‡½æ•°è®¡ç®—ç”³è¯·</h2><p>åœ¨é˜¿é‡Œäº‘å®˜ç½‘æ‰¾åˆ°FCå‡½æ•°è®¡ç®—ï¼šï¼ˆæ–°äººæœ‰å…è´¹çš„280å…ƒé¢åº¦ï¼‰<img src="https://img2.imgtp.com/2024/03/17/zUtJ5ldk.png"></p><p>ç®—äº†ä¸æƒ³å†™äº†ï¼Œçœ‹bç«™æ•™ç¨‹å§ï¼š<a href="https://www.bilibili.com/video/BV19u411x7Bk/?spm_id_from=333.1007.top_right_bar_window_default_collection.content.click">https://www.bilibili.com/video/BV19u411x7Bk/?spm_id_from=333.1007.top_right_bar_window_default_collection.content.click</a></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hexoæ·»åŠ live2dæ¨¡å‹</title>
      <link href="/2024/03/09/IT%E7%AC%94%E8%AE%B0/hexo%E6%B7%BB%E5%8A%A0live2d%E6%A8%A1%E5%9E%8B/"/>
      <url>/2024/03/09/IT%E7%AC%94%E8%AE%B0/hexo%E6%B7%BB%E5%8A%A0live2d%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/cungudafa/article/details/104282643">Hexoï¼ˆsakuraï¼‰æ·»åŠ live2dçœ‹æ¿åŠ¨ç”»ï¼ˆå¯å¯¹è¯ï¼Œæ¢è£…äº’åŠ¨ï¼‰_hexo-helper-live2d å¯¹è¯æ¡†-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/m0_62976227/article/details/129364748">Hexo+live2d | å¦‚ä½•æŠŠlive2dè€å©†æ”¾è¿›è‡ªå·±çš„åšå®¢_l2d.js moc3æ–‡ä»¶-CSDNåšå®¢</a></p><p><a href="https://gitcode.com/xiazeyu/live2d-widget-models/overview">é¡¹ç›®æ¦‚è§ˆ - live2d-widget-models - GitCode</a></p><p><a href="https://blog.csdn.net/qq_36239569/article/details/104104894">Hexoæ·»åŠ Live2Dçœ‹æ¿å¨˜æœ€æ–°æ•™ç¨‹_hexo live2d-CSDNåšå®¢</a></p><p><a href="https://www.bilibili.com/read/cv13728205/?spm_id_from=333.999.0.0">ã€åºã€‘å°†è‡ªåˆ¶live2dæ”¾å…¥è‡ªåˆ¶ç½‘é¡µä¸­-å¯¹ç›®å‰ç½‘ä¸Šçš„ç½‘é¡µæ·»åŠ live2dçš„æŠ€æœ¯åšäº†ä¸€ä¸ªå°æ•´ç† - å“”å“©å“”å“© (bilibili.com)</a></p><p>æœ€å¼€å§‹æ˜¯æœ‰ä½åŒå­¦æ¥æ‰¾æˆ‘æƒ³åœ¨hexoåšå®¢é‡Œæ·»åŠ ä¸€ä¸ªlive2dæ¨¡å‹ï¼Œç ”ç©¶äº†ä¸€å¤©ï¼Œæœ¬æ¥æƒ³ç€æ˜¯å¼„ä¸ªè‡ªå®šä¹‰çš„æ¨¡å‹ï¼Œæœ€åè¿˜æ˜¯åªèƒ½å¼„ä¸ªç½‘ä¸Šç°æœ‰çš„æ¨¡å‹ã€‚ä¸è¿‡ç½‘ä¸Šçš„æ¨¡å‹ä¹Ÿæ˜¯æŒºå¤šçš„ï¼Œä¹Ÿå¯ä»¥è¯•è¯•ææï¼Œå…ˆä¸Šæˆæœå›¾ï¼š</p><p><img src="https://img2.imgtp.com/2024/03/09/lLiRchOt.png"></p><h2 id="æ™®é€šæ¨¡å‹"><a href="#æ™®é€šæ¨¡å‹" class="headerlink" title="æ™®é€šæ¨¡å‹"></a>æ™®é€šæ¨¡å‹</h2><p>é¦–å…ˆåœ¨åšå®¢æ ¹ç›®å½•cmdè¿è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯æ£€æŸ¥æœ‰æ— å·²ç»å®‰è£…live2d,ä¸‹é¢çš„æ‰æ˜¯å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>å…ˆæ¥ä¸ªç®€å•çš„æ¨¡å‹ï¼Œç»§ç»­è¾“å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-shizuku</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶ï¼ˆ_config.ymlï¼‰é‡Œæ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Live2Dçœ‹æ¿å¨˜</span></span><br><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="comment">#æ¨¡æ¿ç›®å½•ï¼Œåœ¨node_modulesé‡Œ</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-shizuku</span>  </span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span>  <span class="comment">#å·¦å³æ˜¾ç¤º</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">300</span> </span><br><span class="line">    <span class="attr">height:</span> <span class="number">600</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="comment"># åœ¨æ‰‹æœºç«¯æ˜¾ç¤º</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">false</span>   </span><br><span class="line">  <span class="attr">rect:</span></span><br><span class="line">    <span class="string">opacity:0.7</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åè€æ–¹æ³•hexo g + hexo s  å¯ä»¥è¿è¡ŒæŸ¥çœ‹ä¸‹æ•ˆæœ</p><p>å¦‚æœä½ ä¸å–œæ¬¢è¿™ä¸ªæ¨¡å‹ï¼Œå¯ä»¥å‚è€ƒè¿™é‡Œçš„æ¨¡å‹åº“ï¼š<a href="https://gitcode.com/xiazeyu/live2d-widget-models/overview">é¡¹ç›®æ¦‚è§ˆ - live2d-widget-models - GitCode</a>ï¼Œå®‰è£…å¯¹åº”çš„æ¨¡å‹åè®°å¾—ä¿®æ”¹_config.ymlåˆšåˆšé…ç½®çš„use: åé¢çš„ä¸œè¥¿ã€‚</p><h2 id="é«˜çº§æ¨¡å‹"><a href="#é«˜çº§æ¨¡å‹" class="headerlink" title="é«˜çº§æ¨¡å‹"></a>é«˜çº§æ¨¡å‹</h2><p>æ¥ä¸‹æ¥æ˜¯æ›´é«˜çº§çš„æ¨¡å‹é…ç½®ï¼Œå°±æ˜¯æˆ‘ä¸»é¡µé¢å·¦è¾¹çš„æ¨¡å‹ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå¯ä»¥æ¢äººç‰©å’Œè¡£æœç­‰åŠŸèƒ½ï¼Œæ¨èä½¿ç”¨è¿™ä¸ªé«˜çº§ç©æ„å„¿å“¦ï¼Œå½“ç„¶ä½ å–œæ¬¢ç®€æ´çš„è¯å°±åˆšåˆšçš„å§ã€‚</p><p>å¦‚æœä¸æƒ³è¦ä¸€è¾¹ä¸€ä¸ªè¿™æ ·çš„æ ·å­å°±åˆ é™¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-helper-live2d</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å¤§ç¥<a href="https://github.com/stevenjoezhang/live2d-widget">ä¼˜åŒ–ç‰ˆlive2d-widget</a>ï¼›<br>å…¶æ¬¡ï¼Œ åœ¨<code>ä¸»ç›®å½•\themes\shoka\source</code>ç›®å½•ä¸‹æ–°å»ºç›®å½•live2d-widgetï¼›<br>æœ€åï¼Œå°†ä¸‹è½½å†…å®¹è§£å‹åˆ°è¯¥ç›®å½•ä¸‹ã€‚</p><p>ä¿®æ”¹autoload.jsæ–‡ä»¶ï¼Œå°†å¤§ç¥è·¯å¾„æ”¹ä¸ºç»å¯¹è·¯å¾„<br>è¯´æ˜ï¼šè¿™ä¸ªç»å¯¹è·¯å¾„æ˜¯ç¼–è¯‘å <strong>æ ¹ç›®å½•</strong> ä½ç½®åœ¨<code>themes/sakura/source</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// æ³¨æ„ï¼šlive2d_path å‚æ•°åº”ä½¿ç”¨ç»å¯¹è·¯å¾„</span><br><span class="line">//const live2d_path = &quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/&quot;;</span><br><span class="line">const live2d_path = &quot;/live2d-widget/&quot;;</span><br><span class="line">123</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>\MyWeb\themes\sakura\layout\_partial</code>ç›®å½•ä¸‹çš„head.ejs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--è‡ªå®šä¹‰çœ‹æ¿å¨˜--&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;/live2d-widget/autoload.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css&quot;/&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨<code>\MyWeb\_config.yml</code>æ–‡æœ«æ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span> <span class="comment">##è‡ªå®šä¹‰çœ‹æ¿å¨˜åŠ¨ç”»</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>è®°å¾—æ³¨é‡Šæ‰æ™®é€šæ¨¡å‹çš„yml</p><p>æƒ³ä¿®æ”¹çœ‹æ¿å¨˜å¤§å°ã€ä½ç½®ã€æ ¼å¼ã€æ–‡æœ¬å†…å®¹ç­‰ï¼Œå¯æŸ¥çœ‹å¹¶ä¿®æ”¹ waifu-tips.js ã€ waifu-tips.json å’Œ waifu.cssã€‚<br>å…¶å®çœ‹æ¿å¨˜å¯ä»¥ä¾§è¾¹éšè—ï¼Œå¯¹æ ·æœ¬çš„ä¿®æ”¹å½±å“ä¹Ÿä¸å¤§ã€‚</p><h2 id="MOC3æ¨¡å‹"><a href="#MOC3æ¨¡å‹" class="headerlink" title="MOC3æ¨¡å‹"></a>MOC3æ¨¡å‹</h2><p>æƒ³è¦æ·»åŠ è‡ªå®šä¹‰çš„æ¨¡å‹ï¼Œä½†æ˜¯ç°åœ¨çš„æ–°æ¨¡å‹å¤§å¤šæ•°éƒ½æ˜¯moc3æ ¼å¼çš„äº†ï¼Œä¸å†æ˜¯mocæ ¼å¼äº†ï¼Œå¦‚æœæƒ³è¦æ·»åŠ moc3æ¨¡å‹ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« :</p><p><a href="https://blog.csdn.net/m0_62976227/article/details/129364748">Hexo+live2d | å¦‚ä½•æŠŠlive2dè€å©†æ”¾è¿›è‡ªå·±çš„åšå®¢_l2d.js moc3æ–‡ä»¶-CSDNåšå®¢</a></p><p><strong>æˆ‘è‡ªå·±çš„æ–¹æ³•æ˜¯ç›´æ¥ä¿®æ”¹public çš„index.html æ–‡ä»¶äº†ï¼Œå°±ä¸æ¨èæˆ‘è¿™ç§æ–¹æ³•äº†ï¼Œæƒ³è¦äº†è§£çš„è¯å¯ä»¥å¾€ä¸‹é¢çœ‹çœ‹</strong></p><p>moc3æ¨èæ¨¡å‹åº“ï¼š<a href="https://github.com/nuke777/AzurLaneL2DViewer">nuke777&#x2F;AzurLaneL2DViewer (github.com)</a></p><p>ä¹Ÿå¯ä»¥ä¸‹è½½åclone åˆ°è‡ªå·±çš„æœ¬åœ°ç„¶åæ·»åŠ è‡ªå·±çš„æ¨¡å‹åœ¨assetsé‡Œã€‚</p><p>index.htmlé‡Œæ·»åŠ :</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;theme-color&quot;</span> <span class="attr">content</span>=<span class="string">&quot;#FFF&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;180x180&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/images/apple-touch-icon.png&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/ico&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;32x32&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/images/favicon.ico&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache-Control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-transform&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache-Control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-siteapp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;Canvas&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;L2dCanvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> config = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">width</span>: <span class="number">800</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">height</span>: <span class="number">600</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">left</span>: <span class="string">&#x27;0px&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">bottom</span>: <span class="string">&#x27;0px&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">basePath</span>: <span class="string">&#x27;https://cdn.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">role</span>: <span class="string">&#x27;bisimai_2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// background: &#x27;https://cdn.jsdelivr.net/gh/alg-wiki/AzurLaneL2DViewer@gh-pages/assets/bg/bg_church_jp.png&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">opacity</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">mobile</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> v = <span class="keyword">new</span> <span class="title class_">Viewer</span>(config);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹åº”æ·»åŠ å°±è¡Œï¼Œæ¯”å¦‚headçš„éƒ¨åˆ†å°±åŠ åˆ°headé‡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonè°ƒç”¨sdç»˜ç”»æ¥å£</title>
      <link href="/2024/03/08/IT%E7%AC%94%E8%AE%B0/python%E8%B0%83%E7%94%A8sd%E7%BB%98%E7%94%BB%E6%8E%A5%E5%8F%A3/"/>
      <url>/2024/03/08/IT%E7%AC%94%E8%AE%B0/python%E8%B0%83%E7%94%A8sd%E7%BB%98%E7%94%BB%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p>bvipcçš„æ¥å£ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> base64 <span class="keyword">import</span> b64encode, b64decode</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®APIçš„URL</span></span><br><span class="line">url = <span class="string">&quot;https://qwq.bvipc.com/sdapi/v1/txt2img&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è´¦å·å’Œå¯†ç ç”¨äºBasic Authè®¤è¯</span></span><br><span class="line">account_id = <span class="string">&quot;xxxxx&quot;</span></span><br><span class="line">account_password = <span class="string">&quot;xxxxxxxxxxxx&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†å¤‡Basic Authçš„å¤´éƒ¨</span></span><br><span class="line">credentials = <span class="string">f&quot;<span class="subst">&#123;account_id&#125;</span>:<span class="subst">&#123;account_password&#125;</span>&quot;</span></span><br><span class="line">encoded_credentials = b64encode(credentials.encode(<span class="string">&quot;utf-8&quot;</span>)).decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">auth_header = &#123;</span><br><span class="line">    <span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Basic <span class="subst">&#123;encoded_credentials&#125;</span>&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®APIçš„è¦æ±‚è°ƒæ•´è¯·æ±‚æ•°æ®</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;prompt&quot;</span>: <span class="string">&quot;draw a lovely girly&quot;</span>,</span><br><span class="line">    <span class="string">&quot;steps&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">&quot;width&quot;</span>: <span class="number">512</span>,</span><br><span class="line">    <span class="string">&quot;height&quot;</span>: <span class="number">512</span>,</span><br><span class="line">    <span class="string">&quot;cfg_scale&quot;</span>: <span class="number">7.5</span>,</span><br><span class="line">    <span class="string">&quot;seed&quot;</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;sampler_index&quot;</span>: <span class="string">&quot;Euler a&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘é€POSTè¯·æ±‚ï¼ŒåŒ…å«Basic Authå¤´éƒ¨å’ŒJSONæ•°æ®</span></span><br><span class="line">response = requests.post(url, data=json.dumps(data), headers=auth_header)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å“åº”</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    response_data = response.json()</span><br><span class="line">    images = response_data.get(<span class="string">&#x27;images&#x27;</span>, [])</span><br><span class="line">    <span class="keyword">for</span> i, image_base64 <span class="keyword">in</span> <span class="built_in">enumerate</span>(images, start=<span class="number">1</span>):</span><br><span class="line">        <span class="comment"># è§£ç Base64ç¼–ç çš„å›¾åƒæ•°æ®</span></span><br><span class="line">        image_data = b64decode(image_base64)</span><br><span class="line">        <span class="comment"># ä¸ºæ¯ä¸ªå›¾åƒåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å</span></span><br><span class="line">        image_filename = <span class="string">f&quot;image_<span class="subst">&#123;i&#125;</span>.png&quot;</span></span><br><span class="line">        <span class="comment"># å°†å›¾åƒæ•°æ®å†™å…¥æ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(image_filename, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> image_file:</span><br><span class="line">            image_file.write(image_data)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å›¾åƒå·²ä¿å­˜ä¸ºï¼š<span class="subst">&#123;image_filename&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error:&quot;</span>, response.status_code, response.text)</span><br></pre></td></tr></table></figure><p>é˜¿é‡Œäº‘sdç»˜ç”»apiæ¥å£ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line">endpoint = <span class="string">&quot;http://sd.xxxxxxx.cn-hangzhou.fc.devsapp.net&quot;</span></span><br><span class="line">username = <span class="string">&quot;&quot;</span></span><br><span class="line">password = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">resp = requests.post(</span><br><span class="line">    <span class="string">&quot;%s/sdapi/v1/txt2img&quot;</span> % endpoint,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;Authorization&quot;</span>: <span class="string">&quot;Basic %s&quot;</span> % (</span><br><span class="line">            base64.b64encode((<span class="string">&quot;%s:%s&quot;</span> % (username, password)).encode(<span class="string">&quot;utf-8&quot;</span>)).decode(<span class="string">&quot;utf-8&quot;</span>)),  <span class="comment"># å¦‚æœæœªå¼€å¯ API é‰´æƒï¼Œå¯å¿½ç•¥è¯¥éƒ¨åˆ†</span></span><br><span class="line">    &#125;,</span><br><span class="line">    json=&#123;</span><br><span class="line">        <span class="string">&quot;prompt&quot;</span>: <span class="string">&quot;a lovely girlyï¼Œavatar&quot;</span>,<span class="comment">#æç¤ºè¯</span></span><br><span class="line">        <span class="string">&quot;step&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">&quot;height&quot;</span>: <span class="number">512</span>,</span><br><span class="line">        <span class="string">&quot;width&quot;</span>: <span class="number">1024</span>,</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;override_settings&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;sd_model_checkpoint&quot;</span>: <span class="string">&quot;mixProV4.Cqhm.safetensors&quot;</span>,</span><br><span class="line">            <span class="comment"># &quot;sd_model_checkpoint&quot;: &quot;majicMIX realistic_v6.safetensors&quot;,</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> resp.status_code == <span class="number">200</span>:</span><br><span class="line">    data = resp.json()</span><br><span class="line">    <span class="keyword">for</span> i, img <span class="keyword">in</span> <span class="built_in">enumerate</span>(data[<span class="string">&quot;images&quot;</span>]):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;%s.png&quot;</span> % (i), <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            b = base64.b64decode(img)</span><br><span class="line">            f.write(b)</span><br><span class="line"></span><br><span class="line">    data[<span class="string">&quot;images&quot;</span>] = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(resp.status_code, resp.text)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Pythonè¿›é˜¶ä¹‹æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2024/03/08/IT%E7%AC%94%E8%AE%B0/Python%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2024/03/08/IT%E7%AC%94%E8%AE%B0/Python%E8%BF%9B%E9%98%B6%E4%B9%8B%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><strong>text</strong>&#x3D;â€asdjasdj124lashasl324hoasgfqwfps45j4543466fhjkhs7897dkhfspfsdfjls67576593dâ€</p><ul><li><strong>æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ•°å­—</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.findall(<span class="string">r&quot;\d&quot;</span>,text)</span><br></pre></td></tr></table></figure><p>è¾“å‡º: [â€˜1â€™, â€˜2â€™, â€˜4â€™, â€˜3â€™, â€˜2â€™, â€˜4â€™, â€˜4â€™, â€˜5â€™, â€˜4â€™, â€˜5â€™, â€˜4â€™, â€˜3â€™, â€˜4â€™, â€˜6â€™, â€˜6â€™, â€˜7â€™, â€˜8â€™, â€˜9â€™, â€˜7â€™, â€˜6â€™, â€˜7â€™, â€˜5â€™, â€˜7â€™, â€˜6â€™, â€˜5â€™, â€˜9â€™, â€˜3â€™]</p><ul><li><strong>æ‰¾å‡ºå­—ç¬¦ä¸²æ‰€æœ‰è¿ç»­æ•°å­—</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.findall(<span class="string">r&quot;\d+&quot;</span>,text)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š[â€˜124â€™, â€˜324â€™, â€˜45â€™, â€˜4543466â€™, â€˜7897â€™, â€˜67576593â€™]</p><ul><li><strong>æ‰¾å‡ºæ‰€æœ‰å•ä¸ªå­—ç¬¦</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">r&quot;\w&quot;</span>,text))</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š[â€˜aâ€™, â€˜sâ€™, â€˜dâ€™, â€˜jâ€™, â€˜aâ€™, â€˜sâ€™, â€˜dâ€™, â€˜jâ€™, â€˜1â€™, â€˜2â€™, â€˜4â€™, â€˜lâ€™, â€˜aâ€™, â€˜sâ€™, â€˜hâ€™, â€˜aâ€™, â€˜sâ€™, â€˜lâ€™, â€˜3â€™, â€˜2â€™, â€˜4â€™, â€˜hâ€™, â€˜oâ€™, â€˜aâ€™, â€˜sâ€™, â€˜gâ€™, â€˜fâ€™, â€˜qâ€™, â€˜wâ€™, â€˜fâ€™, â€˜pâ€™, â€˜sâ€™, â€˜4â€™, â€˜5â€™, â€˜jâ€™, â€˜4â€™, â€˜5â€™, â€˜4â€™, â€˜3â€™, â€˜4â€™, â€˜6â€™, â€˜6â€™, â€˜fâ€™, â€˜hâ€™, â€˜jâ€™, â€˜kâ€™, â€˜hâ€™, â€˜sâ€™, â€˜7â€™, â€˜8â€™, â€˜9â€™, â€˜7â€™, â€˜dâ€™, â€˜kâ€™, â€˜hâ€™, â€˜fâ€™, â€˜sâ€™, â€˜pâ€™, â€˜fâ€™, â€˜sâ€™, â€˜dâ€™, â€˜fâ€™, â€˜jâ€™, â€˜lâ€™, â€˜sâ€™, â€˜6â€™, â€˜7â€™, â€˜5â€™, â€˜7â€™, â€˜6â€™, â€˜5â€™, â€˜9â€™, â€˜3â€™, â€˜dâ€™]</p><ul><li><strong>æ‰¾å‡ºé•¿åº¦ä¸ºn-mçš„æ•°å­—</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">r&quot;\d&#123;1,3&#125;&quot;</span>,text))</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š[â€˜124â€™, â€˜324â€™, â€˜45â€™, â€˜454â€™, â€˜346â€™, â€˜6â€™, â€˜789â€™, â€˜7â€™, â€˜675â€™, â€˜765â€™, â€˜93â€™]</p><p><strong>text2</strong>&#x3D;â€ç”µè¯1ï¼š023-234723947,ç”µè¯2ï¼š0234-823957223,ç”µè¯3ï¼š19812876402,ç”µè¯3ï¼š0642-98346,ç”µè¯4ï¼š21387645609â€</p><ul><li><strong>æ‰¾å‡ºæŒ‡å®šé•¿åº¦å’Œå½¢çŠ¶çš„å­—ç¬¦ä¸²</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">r&quot;\d&#123;3,4&#125;-\d&#123;7,8&#125;|1\d&#123;10&#125;&quot;</span>,text2))</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š[â€˜023-23472394â€™, â€˜0234-82395722â€™, â€˜19812876402â€™]</p><p>è¿™å¥æ„æ€æ˜¯æ‰¾å‡º-å‰é¢æ•°å­—é•¿åº¦ä¸º3-4ä¸”-åé¢ä¸ºæ•°å­—é•¿åº¦ä¸º7-8çš„å’Œ1å¼€å¤´ä¸”åé¢ä½æ•°ä¸º10çš„ã€‚â€œ|â€è¿™ä¸ªæ˜¯â€œå’Œâ€çš„æ„æ€</p><p><strong>text3</strong>&#x3D;â€barbar carcar harhelâ€</p><ul><li><strong>æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç›¸åŒçš„å­—æ®µå¹¶ä»¥åˆ—è¡¨å…ƒç»„è¿”å›</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(re.findall(<span class="string">r&quot;(\w&#123;3&#125;)(\1)&quot;</span>,text3))</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š[(â€˜barâ€™, â€˜barâ€™), (â€˜carâ€™, â€˜carâ€™)]</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GPT-SoVITSæ­å»º</title>
      <link href="/2024/03/01/IT%E7%AC%94%E8%AE%B0/GPT-SoVITS%E6%90%AD%E5%BB%BA/"/>
      <url>/2024/03/01/IT%E7%AC%94%E8%AE%B0/GPT-SoVITS%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p><strong>å›¾åº“è·‘è·¯äº†æ‰€ä»¥å›¾ç‰‡çœ‹ä¸äº†äº†</strong></p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>ä¸‹è½½åœ°å€ï¼š</p><p>GPT-SoVITSå¼€æºgithubå‘å¸ƒåœ°å€ï¼ˆä¸ä¼šç¼–ç¨‹çš„ä¸è¦ä¸‹è¿™ä¸ªï¼Œä¸‹è½½æ¥¼ä¸‹çš„æ•´åˆåŒ…ï¼‰<br><a href="https://github.com/RVC-Boss/GPT-SoVITS">https://github.com/RVC-Boss/GPT-SoVITS</a><br>è®­ç»ƒæ¨ç†æ•´åˆåŒ…åœ°å€ï¼š<br><a href="https://pan.baidu.com/s/1OE5qL0KreO-ASHwm6Zl9gA?pwd=mqpi%EF%BC%88%E5%BA%A6%E7%9B%98%E8%A6%81%E6%B0%AA%E8%B6%85%E7%BA%A7%E4%BC%9A%E5%91%98%E6%89%8D%E8%83%BD%E6%BB%A1%E9%80%9F%E4%B8%8B%E8%BD%BD%EF%BC%89">https://pan.baidu.com/s/1OE5qL0KreO-ASHwm6Zl9gA?pwd=mqpiï¼ˆåº¦ç›˜è¦æ°ªè¶…çº§ä¼šå‘˜æ‰èƒ½æ»¡é€Ÿä¸‹è½½ï¼‰</a><br><a href="https://www.123pan.com/s/5tIqVv-GVRcv.html%EF%BC%88%E5%8F%AF%E6%BB%A1%E9%80%9F%E4%B8%8B%E8%BD%BD%E4%BD%86%E6%98%AF%E8%A6%81%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7%EF%BC%89">https://www.123pan.com/s/5tIqVv-GVRcv.htmlï¼ˆå¯æ»¡é€Ÿä¸‹è½½ä½†æ˜¯è¦æ³¨å†Œè´¦å·ï¼‰</a><br>äº‘ç«¯è®­ç»ƒåœ°å€<a href="https://www.codewithgpu.com/i/RVC-Boss/GPT-SoVITS/GPT-SoVITS-Official">https://www.codewithgpu.com/i/RVC-Boss/GPT-SoVITS/GPT-SoVITS-Official</a></p><p>â€”by bilibili èŠ±å„¿ä¸å“­</p><p><strong>è¿™é‡Œä½¿ç”¨çš„æ•´åˆåŒ…</strong></p><p>è§£å‹åè¿è¡Œæ ¹ç›®å½•ä¸‹çš„go-webui.bat</p><p><img src="https://img2.imgtp.com/2024/03/02/CtUI6mNw.png"></p><p>æ‰“å¼€åå¦‚æœæç¤ºæœ‰é£é™©ç‚¹å‡»é«˜çº§å¹¶ç»§ç»­è¿è¡Œï¼Œä¼šå¼¹å‡ºæ¥ä¸ªå‘½ä»¤çª—ç­‰ä¸ªä¸€ä¼šå„¿å°±ä¼šè‡ªåŠ¨å¼¹å‡ºç½‘é¡µï¼Œåœ°å€ä¸ºlocalhost:9874</p><p>å‡†å¤‡ä¸€æ®µ2åˆ†é’Ÿå·¦å³çš„å½•åˆ¶éŸ³é¢‘ï¼Œï¼ˆè¦æ±‚ä¸ºçº¯äººå£°å½•åˆ¶ï¼Œç¯å¢ƒå™ªéŸ³å°½é‡æ²¡æœ‰ï¼Œç›®å‰ä»…æ”¯æŒä¸­æ–‡å½•éŸ³ï¼Œå¯ä»¥ç›´æ¥åœ¨æ‰‹æœºé‡Œå½•éŸ³ï¼Œå½•éŸ³æ ¼å¼æœ€å¥½é€‰æ‹©wavæ ¼å¼ï¼‰å¦‚æœä½ æƒ³è®­ç»ƒåˆ«äººçš„å£°éŸ³ä½†æ˜¯æœ‰ç¯å¢ƒå™ªéŸ³ï¼Œå¯ä»¥ä½¿ç”¨UVR5-WebUIè¾“å‡ºé™å™ªåçš„éŸ³é¢‘ï¼š</p><p><img src="https://img2.imgtp.com/2024/03/02/SjpB5h48.png"></p><p>ç‚¹å‡»ååŠ è½½ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœè‡ªåŠ¨æ‰“å¼€äº†ä¸€ä¸ªæ–°ç½‘é¡µå°±è¯´æ˜æˆåŠŸäº†ï¼Œåœ¨è¿™ä¸ªæ–°ç½‘é¡µé‡Œé¢ä¸Šä¼ éŸ³é¢‘ï¼Œæ¨¡å‹å¯ä»¥æ ¹æ®ç½‘é¡µçš„æ–‡å­—æç¤ºæ¥é€‰æ‹©ï¼Œè¾“å‡ºæ ¼å¼å°±é€‰æ‹©æ¯”è¾ƒå¥½çš„wavå§ã€‚è¾“å‡ºååœ¨ä½ é€‰æ‹©çš„ç›®æ ‡æ–‡ä»¶å¤¹é‡Œã€‚</p><p>ä¹‹åå›åˆ°ä¹‹å‰çš„ç½‘é¡µï¼Œå‡†å¤‡å¼€å§‹è¯­éŸ³åˆ‡å‰²ï¼Œæ ¹æ®è¦æ±‚å¡«å°±è¡Œäº†ï¼š<img src="https://img2.imgtp.com/2024/03/02/zaGYkQj8.png"></p><p>å¦‚æœå‘ç°åˆ‡å‰²åçš„éŸ³é¢‘æœ‰20ç§’ä»¥ä¸Šçš„å¯èƒ½å°±éœ€è¦é‡æ–°è®¾ç½®å‚æ•°å¹¶åˆ‡å‰²äº†</p><p>ä¸‹ä¸€æ­¥ æ‰“æ ‡ï¼Œå…ˆå¡«å†™å‚æ•°ï¼Œè¾“å…¥è·¯å¾„å°±æ˜¯åˆšåˆšåˆ‡å‰²å¥½çš„éŸ³é¢‘æ–‡ä»¶å¤¹è·¯å¾„</p><p><img src="https://img2.imgtp.com/2024/03/02/5qnJXyFM.png"></p><p>ç„¶åä¼šåœ¨ç›®æ ‡æ–‡ä»¶å¤¹è¾“å‡ºä¸€ä¸ªslicer.listæ–‡ä»¶ï¼Œç‚¹å‡»å¤åˆ¶å®ƒçš„æ–‡ä»¶è·¯å¾„åˆ°ä¸‹ä¸€æ¿å—ï¼š</p><p><img src="https://img2.imgtp.com/2024/03/02/zwHgZXEs.png"></p><p>ç„¶åç‚¹å‡»â€æ˜¯å¦å¼€å¯è¾¾æ ‡WebUIâ€ï¼Œç­‰å¾…å®ƒæ‰“å¼€ï¼Œç„¶åå°±å¼€å§‹ä¿®æ”¹è¯­éŸ³è½¬æ¢çš„æ–‡å­—æœ‰æ²¡æœ‰é”™è¯¯ï¼Œæˆ–è€…æ˜¯æœ‰åœé¡¿çš„åœ°æ–¹æ²¡æœ‰é€—å·ç­‰ã€‚æ”¹å®Œä¸€é¡µåç‚¹å‡»ä¸Šé¢çš„Submit Textï¼ˆä¿å­˜ï¼‰ï¼Œç„¶åç‚¹Next indexï¼ˆä¸‹ä¸€é¡µï¼‰ã€‚æ¯æ¬¡åˆ‡æ¢éƒ½è¦ç‚¹ä¸€ä¸‹Submit Textä¿å­˜ã€‚æœ€åå¼„å¥½åç‚¹å‡»ä¸Šé¢çš„Save File ä¿å­˜åè¿”å›ä¸»é¡µé¢ï¼Œå…³é—­â€æ˜¯å¦å¼€å¯æ‰“æ ‡WebUIâ€ï¼Œå°†åˆšåˆšçš„ä¿®æ”¹åçš„listæ–‡ä»¶å‡†å¤‡å¥½ï¼ˆæœ€å¥½å¤åˆ¶åˆ°ä¸€ä¸ªåœ°æ–¹ï¼‰</p><h2 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h2><p>è¯·å…ˆå‡†å¤‡å¥½6gbä»¥ä¸Šçš„æ˜¾å­˜</p><p>ï¼ˆåæ­£å¯ä»¥å»è¯•è¯•ï¼Œé…ç½®å¤ªä½çš„ä¼šæŠ¥â€œå¾ˆé—æ†¾æ‚¨è¿™æ²¡æœ‰èƒ½ç”¨çš„æ˜¾å¡æ¥æ”¯æŒæ‚¨è®­ç»ƒâ€æˆ–è€…åŸå› æ˜¯æ•´åˆåŒ…ä¸‹çš„torchç‰ˆæœ¬ä¸æˆ‘çš„cudaç‰ˆæœ¬ä¸å…¼å®¹<br>psï¼šå…·æœ‰ç›¸åŒé—®é¢˜çš„æœ‹å‹å¯ä»¥åœ¨æ•´åˆåŒ…ä¸‹çš„runtimeæ–‡ä»¶å¤¹è¿è¡Œcmdï¼Œè¾“å…¥python.exe -c â€œimport torch; print(torch.cuda.is_available())â€<br>è‹¥è¿”å›ç»“æœä¸ºFalseï¼Œåˆ™æ˜¯ä¸æˆ‘ç›¸åŒçš„é—®é¢˜ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ•…äº‹ï¼ˆ2024å¯’å‡ï¼‰</title>
      <link href="/2024/02/24/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%882024%E5%AF%92%E5%81%87%EF%BC%89/"/>
      <url>/2024/02/24/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%882024%E5%AF%92%E5%81%87%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>æ²¡é”™æˆ‘åˆæ¥äº†ï¼Œ2024å¤§äºŒä¸Šå¯’å‡æ±‡æŠ¥</p><p>å¯’å‡å¼€å§‹ï¼Œæˆ‘å»äº†è§£äº†ä¸‹å¤§æ•°æ®é›†ç¾¤ï¼ŒHadoopï¼Œç©äº†ç©å‘ç°ç”µè„‘é…ç½®å¤ªä½äº†ï¼Œå†…å­˜ä¸å¤Ÿç©èµ·å¡ï¼Œä¹Ÿå°±å¯¹è™šæ‹Ÿæœºå’Œlinuxç³»ç»Ÿå¢ç†Ÿäº†ç‚¹å„¿æ˜ åƒã€‚åé¢å°±å›å»ç»§ç»­æJavaäº†ï¼Œå¾®æœåŠ¡é¡¹ç›®å­¦æˆåœ¨çº¿ï¼Œé‚£ä¸ªé¡¹ç›®æ˜¯çœŸçš„å¤§ï¼Œæˆ‘å·²ç»ä¸æƒ³å†™äº†ï¼Œå†™åˆ°åª’èµ„ç®¡ç†ï¼Œä¸­é€”å†™çš„æ—¶å€™ç¡¬æ˜¯å‡ºç°äº†å¥½å¤šbugï¼Œæœ‰çš„æ—¶å€™ä¸€ä¸ªbugå¡æˆ‘ä¸¤å¤©ï¼Œä¸è¿‡è¿˜æ˜¯éƒ½è§£å†³äº†ï¼Œä¸»è¦æ˜¯è™šæ‹Ÿæœºæ˜¯æˆ‘è‡ªå·±é…çš„ï¼Œä¸ç„¶åº”è¯¥ä¹Ÿä¸ä¼šå‡ºç°é‚£ä¹ˆå¤šbugï¼Œè¿˜æ˜¯è¦å¯¹linuxæ“ä½œç³»ç»Ÿäº†è§£æ›´æ·±æ‰è¡Œï¼Œè¿˜æœ‰dockerè¿™ä¸ªéƒ¨ç½²çš„ç©æ„å„¿ã€‚<br>å‘ç°è·Ÿç€æ•™å­¦è§†é¢‘å†™è¿˜æ˜¯æŒºæµç•…çš„ï¼Œä½†æ˜¯è‡ªå·±ä¸çœ‹æ•™ç¨‹åªçœ‹æ¥å£æ–‡æ¡£è¿˜æ˜¯æ¯”è¾ƒéš¾ä¸‹æ‰‹çš„ï¼Œåé¢è¦æ‰¾å®ä¹ äº†æ‰¾ä¸ªå•ä½“æ¶æ„é¡¹ç›®ç»ƒç»ƒæ‰‹å§ã€‚ä¹‹åæˆ‘å°±é‡æ–°æŠŠæˆ‘çš„åšå®¢ç¿»æ–°äº†ä¸‹ï¼Œç”¨Hexo+Shokaæ­å»ºçš„ï¼Œä¹Ÿæ˜¯èŠ±äº†æˆ‘è¿‘ä¸€å‘¨çš„æ—¶é—´ï¼Œæœç´¢åŠŸèƒ½å’Œè¯„è®ºå•¥çš„ç ”ç©¶äº†åŠå¤©ã€‚è¿‡å¹´çš„é‚£å‡ å¤©å°±æ²¡æ€ä¹ˆæäº†ä¸€ç›´æ‰“æ¸¸æˆï¼Œå¶å°”æ¬è¿æ¬è¿åšæ–‡åˆ°æ–°åšå®¢ã€‚ä¹‹åæœ‰ä½è‹±å›½ç•™å­¦ç”Ÿç½‘å‹æ‰¾åˆ°æˆ‘å–Šæˆ‘ä¸€èµ·åšé¡¹ç›®ï¼Œå½“æ—¶æˆ‘æ­£å¥½ä¹Ÿæƒ³åšé¡¹ç›®ï¼Œå¼„ä¸ªã€Šé¡¹ç›®å¯¼èˆªã€‹çš„é¡¹ç›®ï¼Œç±»ä¼¼çŸ¥è¯†ä»˜è´¹é‚£ç§ï¼Œå–çš„æ˜¯å„ç§é¡¹ç›®çš„æ¥å£å’Œæ•™ç¨‹ï¼Œè€Œæˆ‘ä»¬æ‰“ç®—å¼„çš„é¡¹ç›®å›´ç»•AIGCè¿›è¡Œå¼€å‘ï¼Œä¸‰äººå°ç»„å›¢é˜Ÿï¼Œè¿˜æœ‰ä½è´Ÿè´£å¼•æµï¼Œç›®å‰é¡¹ç›®å·²ç»è¿›å…¥æµ‹è¯•çŠ¶æ€äº†ï¼Œç­‰åŠ äº›èµ„æºï¼Œå®Œå–„bot,å¤‡æ¡ˆå®Œå°±å¯ä»¥æ­£å¼ä¸Šçº¿äº†ã€‚å¸Œæœ›èƒ½æˆåŠŸå§ï¼Œæ¯•ç«Ÿæ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªåˆä½œæçš„é¡¹ç›®ï¼Œä»¥å‰éƒ½æ˜¯ä¸ªäººä¸”æ²¡æœ‰å•†ç”¨ä»·å€¼çš„ã€‚</p><p>è¿™ä¸ªå¯’å‡ä¹Ÿæ˜¯è¿‡å¾—éå¸¸ç´¯ï¼Œæ™šä¸Šå®ˆåº—ï¼ŒåŠå¤œæè¿™äº›ï¼Œè¿˜è¦æ‰“æ¸¸æˆï¼Œä¸€å¤©æ²¡æ—¶é—´å¾—ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueçŸ¥è¯†+è°ƒç”¨åç«¯</title>
      <link href="/2024/02/17/IT%E7%AC%94%E8%AE%B0/vue%E7%9F%A5%E8%AF%86+%E7%BB%83%E6%89%8B%E9%A1%B9%E7%9B%AE/"/>
      <url>/2024/02/17/IT%E7%AC%94%E8%AE%B0/vue%E7%9F%A5%E8%AF%86+%E7%BB%83%E6%89%8B%E9%A1%B9%E7%9B%AE/</url>
      
        <content type="html"><![CDATA[<p> åˆ›å»ºvue é¡¹ç›®æ•™ç¨‹:<a href="https://hepingan.top/2024/02/04/%E5%89%8D%E7%AB%AF/%E9%80%9A%E8%BF%87node-js%E9%83%A8%E7%BD%B2vue%E9%A1%B9%E7%9B%AE/">é€šè¿‡node.jséƒ¨ç½²vueé¡¹ç›® - å‰ç«¯ | ç»ƒç«¹å›­ &#x3D; ä½•å¹³å®‰ &#x3D; ä¸–ç•Œå¾ˆå¤§ï¼Œä»£ç è¿æ¥ä¸–ç•Œ (hepingan.top)</a></p><p>é¡¹ç›®ç›®å½•ä»‹ç»ï¼š<img src="https://img2.imgtp.com/2024/02/17/GRnBp6y0.png"></p><p>è·¯ç”±å°±æ˜¯ä¸€ä¸ªurlåœ°å€ï¼Œçœ‹App.vueçš„ä»£ç å’Œindex.jså°±çŸ¥é“äº†</p><ul><li>App.vueæ˜¯æ‰€æœ‰é¡µé¢çš„å…¥å£</li></ul><h2 id="Element-ui"><a href="#Element-ui" class="headerlink" title="Element-ui"></a>Element-ui</h2><p>å®˜ç½‘ï¼š<a href="https://element.eleme.cn/#/zh-CN/component/installation">ç»„ä»¶ | Element</a></p><p>å°±æ˜¯ä¸€ä¸ªå¥½çœ‹çš„ç»„ä»¶åº“ï¼Œä¸ç”¨ä½ è‡ªå·±å†™cssäº†ã€‚</p><p>æ¨èä½¿ç”¨ npm çš„æ–¹å¼å®‰è£…ï¼Œå®ƒèƒ½æ›´å¥½åœ°å’Œ <a href="https://webpack.js.org/">webpack</a> æ‰“åŒ…å·¥å…·é…åˆä½¿ç”¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i element-ui -S</span><br></pre></td></tr></table></figure><p><strong>CDN</strong></p><p>ç›®å‰å¯ä»¥é€šè¿‡ <a href="https://unpkg.com/element-ui/">unpkg.com&#x2F;element-ui</a> è·å–åˆ°æœ€æ–°ç‰ˆæœ¬çš„èµ„æºï¼Œåœ¨é¡µé¢ä¸Šå¼•å…¥ js å’Œ css æ–‡ä»¶å³å¯å¼€å§‹ä½¿ç”¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥æ ·å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥ç»„ä»¶åº“ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¼•å…¥ä½¿ç”¨ï¼š</p><p>åœ¨ main.js ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¾¿å®Œæˆäº† Element çš„å¼•å…¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ ·å¼æ–‡ä»¶éœ€è¦å•ç‹¬å¼•å…¥ã€‚</p><h4 id="æŒ‰éœ€å¼•å…¥"><a href="#æŒ‰éœ€å¼•å…¥" class="headerlink" title="æŒ‰éœ€å¼•å…¥"></a>æŒ‰éœ€å¼•å…¥</h4><p>å€ŸåŠ© <a href="https://github.com/QingWei-Li/babel-plugin-component">babel-plugin-component</a>ï¼Œæˆ‘ä»¬å¯ä»¥åªå¼•å…¥éœ€è¦çš„ç»„ä»¶ï¼Œä»¥è¾¾åˆ°å‡å°é¡¹ç›®ä½“ç§¯çš„ç›®çš„ã€‚</p><p>é¦–å…ˆï¼Œå®‰è£… babel-plugin-componentï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-component -D</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°† .babelrc ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span><span class="string">&quot;es2015&quot;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;component&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;libraryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;element-ui&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;styleLibraryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œå¦‚æœä½ åªå¸Œæœ›å¼•å…¥éƒ¨åˆ†ç»„ä»¶ï¼Œæ¯”å¦‚ Button å’Œ Selectï¼Œé‚£ä¹ˆéœ€è¦åœ¨ main.js ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Select</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Button</span>.<span class="property">name</span>, <span class="title class_">Button</span>);</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Select</span>.<span class="property">name</span>, <span class="title class_">Select</span>);</span><br><span class="line"><span class="comment">/* æˆ–å†™ä¸º</span></span><br><span class="line"><span class="comment"> * Vue.use(Button)</span></span><br><span class="line"><span class="comment"> * Vue.use(Select)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ç»„ä»¶"><a href="#æµ‹è¯•ç»„ä»¶" class="headerlink" title="æµ‹è¯•ç»„ä»¶"></a>æµ‹è¯•ç»„ä»¶</h3><p>éšä¾¿æµ‹è¯•ä¸ªç»„ä»¶ï¼Œæˆ‘è¿™é‡Œæ‹¿ä¸ªæŒ‰é’®ï¼šç›´æ¥åœ¨App.vueé‡Œå†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot;&gt;ä¸»è¦æŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨assetsé‡Œæ·»åŠ ä¸€ä¸ªglobal.cssé‡Œé¢å†™ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„æ€å°±æ˜¯å°†é»˜è®¤çš„æ ·å¼è®¾ç½®ä¸ºé—´è·ä¸º0ä¸”å…¨éƒ¨é»˜è®¤ä¸ºç›’å­</p><p>æœ‰äº†è¿™ç©æ„å„¿å†™é¡µé¢å°±ç®€å•äº†</p><h2 id="è°ƒç”¨æ¥å£"><a href="#è°ƒç”¨æ¥å£" class="headerlink" title="è°ƒç”¨æ¥å£"></a>è°ƒç”¨æ¥å£</h2><p>æˆ‘å­¦vueå•çº¯åªæ˜¯ä¸ºäº†è°ƒç”¨æˆ‘çš„åç«¯æ¥å£ï¼Œæ‰€ä»¥æ‰å­¦åˆ°è¿™å„¿çš„ï¼Œå…¶å®ä¹‹å‰ä¹Ÿåœ¨å­¦æ ¡å­¦äº†vueçš„ï¼Œä½†é‚£ä¸ªçœŸçš„æ˜¯è¿vueçš„é¡¹ç›®éƒ½æ²¡æ•™ä½ æ€ä¹ˆåˆ›å»ºï¼Œå°±å«ä½ vue.jsçš„ä¸€äº›å…¥é—¨è¯­æ³•ï¼Œå¤ªåƒåœ¾äº†ï¼Œæœç„¶ITè¿˜æ˜¯è¦è‡ªå­¦ã€‚</p><p><strong>è¿™é‡Œä»¥ç™»å½•æ¥å£ä¸ºä¾‹</strong></p><p>åœ¨srcä¸‹æ–°å»ºä¸ªutils&#x2F;request.jsï¼Œé‡Œé¢å°è£…ä¸€ä¸ªè¯·æ±‚åç«¯çš„é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;@/router&quot;</span>;</span><br><span class="line"><span class="comment">// import &#123;serverIp&#125; from &quot;../../public/config&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line"><span class="comment">//è¯·æ±‚åœ°å€</span></span><br><span class="line">    <span class="attr">baseURL</span>: <span class="string">`http://localhost:9090`</span>,</span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">30000</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// request æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">// å¯ä»¥è‡ªè¯·æ±‚å‘é€å‰å¯¹è¯·æ±‚åšä¸€äº›å¤„ç†</span></span><br><span class="line"><span class="comment">// æ¯”å¦‚ç»Ÿä¸€åŠ tokenï¼Œå¯¹è¯·æ±‚å‚æ•°ç»Ÿä¸€åŠ å¯†</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> user = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;user&quot;</span>) ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;user&quot;</span>)) : <span class="literal">null</span></span><br><span class="line">    <span class="keyword">if</span> (user) &#123;</span><br><span class="line">        config.<span class="property">headers</span>[<span class="string">&#x27;token&#x27;</span>] = user.<span class="property">token</span>;  <span class="comment">// è®¾ç½®è¯·æ±‚å¤´</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// response æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">// å¯ä»¥åœ¨æ¥å£å“åº”åç»Ÿä¸€å¤„ç†ç»“æœ</span></span><br><span class="line">request.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> res = response.<span class="property">data</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœæ˜¯è¿”å›çš„æ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">config</span>.<span class="property">responseType</span> === <span class="string">&#x27;blob&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å…¼å®¹æœåŠ¡ç«¯è¿”å›çš„å­—ç¬¦ä¸²æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> res === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">            res = res ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res) : res</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å½“æƒé™éªŒè¯ä¸é€šè¿‡çš„æ—¶å€™ç»™å‡ºæç¤º</span></span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">code</span> === <span class="string">&#x27;401&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// ElementUI.Message(&#123;</span></span><br><span class="line">            <span class="comment">//     message: res.msg,</span></span><br><span class="line">            <span class="comment">//     type: &#x27;error&#x27;</span></span><br><span class="line">            <span class="comment">// &#125;);</span></span><br><span class="line">            router.<span class="title function_">push</span>(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;err&#x27;</span> + error) <span class="comment">// for debug</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è®°å¾—å»ä¿®æ”¹é‡Œé¢çš„è¯·æ±‚åœ°å€</p><p>ç„¶åæ–°å»ºä¸ªloginé¡µé¢ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">        style=&quot;margin: 200px auto; background-color: #fff; width: 350px; height: 300px; padding: 20px; border-radius: 10px&quot;&gt;</span><br><span class="line">      &lt;div style=&quot;margin: 20px 0; text-align: center; font-size: 24px&quot;&gt;&lt;b&gt;ç™» å½•&lt;/b&gt;&lt;/div&gt;</span><br><span class="line">      &lt;el-form :model=&quot;user&quot; :rules=&quot;rules&quot; ref=&quot;userForm&quot;&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;username&quot;&gt;</span><br><span class="line">          &lt;el-input size=&quot;medium&quot; style=&quot;margin: 10px 0&quot; prefix-icon=&quot;el-icon-user&quot; v-model=&quot;user.username&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">          &lt;el-input size=&quot;medium&quot; style=&quot;margin: 10px 0&quot; prefix-icon=&quot;el-icon-lock&quot; show-password</span><br><span class="line">                    v-model=&quot;user.password&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item style=&quot;margin: 10px 0; text-align: right&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;warning&quot; size=&quot;small&quot; autocomplete=&quot;off&quot; @click=&quot;$router.push(&#x27;/register&#x27;)&quot;&gt;æ³¨å†Œ&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; size=&quot;small&quot; autocomplete=&quot;off&quot; @click=&quot;login&quot;&gt;ç™»å½•&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;setRoutes&#125; from &quot;@/router&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;Login&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      user: &#123;&#125;,</span><br><span class="line">      rules: &#123;</span><br><span class="line">        username: [</span><br><span class="line">          &#123;required: true, message: &#x27;è¯·è¾“å…¥ç”¨æˆ·å&#x27;, trigger: &#x27;blur&#x27;&#125;,</span><br><span class="line">          &#123;min: 3, max: 10, message: &#x27;é•¿åº¦åœ¨ 3 åˆ° 5 ä¸ªå­—ç¬¦&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">        ],</span><br><span class="line">        password: [</span><br><span class="line">          &#123;required: true, message: &#x27;è¯·è¾“å…¥å¯†ç &#x27;, trigger: &#x27;blur&#x27;&#125;,</span><br><span class="line">          &#123;min: 1, max: 20, message: &#x27;é•¿åº¦åœ¨ 1 åˆ° 20 ä¸ªå­—ç¬¦&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    login() &#123;</span><br><span class="line">      this.$refs[&#x27;userForm&#x27;].validate((valid) =&gt; &#123;</span><br><span class="line">        if (valid) &#123;  // è¡¨å•æ ¡éªŒåˆæ³•</span><br><span class="line">          this.request.post(&quot;/user/login&quot;, this.user).then(res =&gt; &#123;</span><br><span class="line">            if (res.code === &#x27;200&#x27;) &#123;</span><br><span class="line">              localStorage.setItem(&quot;user&quot;, JSON.stringify(res.data))  // å­˜å‚¨ç”¨æˆ·ä¿¡æ¯åˆ°æµè§ˆå™¨</span><br><span class="line">              localStorage.setItem(&quot;menus&quot;, JSON.stringify(res.data.menus))  // å­˜å‚¨ç”¨æˆ·ä¿¡æ¯åˆ°æµè§ˆå™¨</span><br><span class="line">              // åŠ¨æ€è®¾ç½®å½“å‰ç”¨æˆ·çš„è·¯ç”±</span><br><span class="line">              setRoutes()</span><br><span class="line">              this.$message.success(&quot;ç™»å½•æˆåŠŸ&quot;)</span><br><span class="line"></span><br><span class="line">              if (res.data.role === &#x27;ROLE_STUDENT&#x27;) &#123;</span><br><span class="line">                this.$router.push(&quot;/front/home&quot;)</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                this.$router.push(&quot;/&quot;)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              this.$message.error(res.msg)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.wrapper &#123;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  background-image: linear-gradient(to bottom right, #FC466B, #3F5EFB);</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>ã€‚ã€‚ã€‚æ˜å¤©å†å†™</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ£é¼“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨SpringMvcç™»å½•æ‹¦æˆªHexoåšå®¢</title>
      <link href="/2024/02/13/IT%E7%AC%94%E8%AE%B0/SpringMvc%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AAHexo/"/>
      <url>/2024/02/13/IT%E7%AC%94%E8%AE%B0/SpringMvc%E7%99%BB%E5%BD%95%E6%8B%A6%E6%88%AAHexo/</url>
      
        <content type="html"><![CDATA[<p><strong>å›¾åº“è·‘è·¯äº†æ‰€ä»¥å›¾ç‰‡çœ‹ä¸äº†äº†</strong></p><p><strong>SpringMvCä¸­çš„MVCæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>MVCæ˜¯ä¸€ç§<strong>è®¾è®¡æ¨¡å¼</strong>ï¼Œè¿™ç§æ¨¡å¼çš„ç†å¿µæ˜¯å°†å¤æ‚çš„ä»£ç åˆ†ä¸ºä¸‰ä¸ªæ¨¡å¼ï¼ŒMVCä¸»è¦è§£å†³è¡¨ç°å±‚çš„é—®é¢˜ã€‚</p><p>æµè§ˆå™¨è®¿é—®è¡¨ç°å±‚ï¼ˆControllerï¼‰â€“&gt;è¡¨ç°å±‚è®¿é—®ä¸šåŠ¡å±‚â€“&gt;å°†æ•°æ®å°è£…åˆ°(Model)â€“&gt;å†é€šè¿‡ï¼ˆViewï¼‰æ¸²æŸ“</p><p>ä¸šåŠ¡é€»è¾‘å’Œå®ç°æ€è·¯ï¼šå¯¹æˆ‘çš„åšå®¢æƒ³æ·»åŠ ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œå³éœ€è¦å¯¹æˆ‘åšå®¢ä¸‹çš„æ‰€æœ‰åœ°å€è¿›è¡Œæ‹¦æˆªï¼Œè€Œè¿™ä¸å¹³æ—¶æ‰€ç»ƒçš„æ¥å£æ‹¦æˆªå·®ä¸å¤šï¼Œå› ä¸ºç™»å½•åšå®¢é¡µé¢ä¹Ÿæ˜¯ä¸ªgetè¯·æ±‚ã€‚é‡‡ç”¨JWTä»¤ç‰Œè¿›è¡Œæ ¡éªŒã€‚è‡³äºä¸ºä»€ä¹ˆè¦å¯¹æˆ‘çš„åšå®¢è¿›è¡Œæ‹¦æˆªï¼Œåé¢æˆ‘çš„æ–°é¡¹ç›®ä½ å°±çŸ¥é“ç­”æ¡ˆäº†awa~</p><p>å…ˆç”¨IDEAæ–°å»ºä¸€ä¸ªé¡¹ç›®</p><p><img src="https://img2.imgtp.com/2024/02/13/kNQ4F5pi.png"></p><p><img src="https://img2.imgtp.com/2024/02/13/JYBWJ0TC.png"></p><p>é‡Œé¢åˆ›å»ºå¥½å¦‚ä¸‹çš„ç›®å½•ï¼š</p><p><img src="https://img2.imgtp.com/2024/02/13/qM3YgrHX.png"></p><p>userç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String token;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°æ®åº“çš„è¯å°±ä¸‰ä¸ªåˆ—ï¼Œid ä¸»é”®é€’å¢ï¼Œname å’Œ password</p><p>å†åœ¨applicationé‡Œé…ç½®ä¸‹è‡ªå·±çš„æ•°æ®åº“åœ°å€ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxx</span></span><br><span class="line">    <span class="attr">url:</span>  <span class="string">jdbc:mysql://localhost:3306/user?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure><p>controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> LoginMapper loginMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String LOGIN_SUCCESS=<span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String LOGIN_FAIL=<span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œç™»å½•å¤±è´¥&quot;</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...å…¶ä»–å¤„ç†è¯·æ±‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;ç”¨æˆ·åï¼š&#123;&#125;&quot;</span>, user.getName());</span><br><span class="line">        <span class="comment">// è°ƒç”¨Mapperæ–¹æ³•ï¼Œæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span>loginMapper.login(user);</span><br><span class="line">        <span class="keyword">return</span> u!=<span class="literal">null</span>?LOGIN_SUCCESS: LOGIN_FAIL;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Mapperå±‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Mapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM users WHERE name = #&#123;name&#125; AND password = #&#123;password&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¥ä¸‹æ¥å°±æ˜¯æœ€å…³é”®çš„jwtä»¤ç‰Œå’Œç™»å½•æ‹¦æˆªäº†~</strong></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+Shokaåšå®¢æ­å»ºå’Œå…¨åŠŸèƒ½å®Œå–„</title>
      <link href="/2024/02/07/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/Hexo-Shoka%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%92%8C%E5%85%A8%E5%8A%9F%E8%83%BD%E5%AE%8C%E5%96%84/"/>
      <url>/2024/02/07/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/Hexo-Shoka%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%92%8C%E5%85%A8%E5%8A%9F%E8%83%BD%E5%AE%8C%E5%96%84/</url>
      
        <content type="html"><![CDATA[<p>è½¬è½½æ–‡ç« ï¼š<a href="https://blog.csdn.net/weixin_43642577/article/details/126713252">Hexo+shokaä¸»é¢˜+github&#x2F;æœåŠ¡å™¨æ­å»ºä¸ªäººåšå®¢-CSDNåšå®¢</a></p><p><a href="https://shoka.lostyu.me/tags/Hexo/">æ ‡ç­¾ï¼šHexo | Yume Shoka &#x3D; å„ªèŒåˆè¯ &#x3D; æœ‰å¤¢æ›¸æ¶ (lostyu.me)</a></p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p><p>shokaä¸»é¢˜ï¼š<a href="https://shoka.lostyu.me/">https://shoka.lostyu.me/</a></p><p>æˆ‘çš„åšå®¢ï¼š<a href="http://ai.hepingan.top/">http://ai.hepingan.top</a><br>æ¬¢è¿æ¥å‚è§‚ï¼Œä¹Ÿæ¬¢è¿åŠ å‹é“¾~</p><h2 id="Iã€å®‰è£…"><a href="#Iã€å®‰è£…" class="headerlink" title="Iã€å®‰è£…"></a>Iã€å®‰è£…</h2><blockquote><ol><li><strong>å®‰è£…node.jså’Œgit</strong></li><li><strong>ä¸‹è½½Hexo</strong></li></ol></blockquote><ol><li><strong>å®‰è£…node.jså’Œgit</strong></li></ol><p>é¦–å…ˆç¡®å®šè‡ªå·±çš„node.jså’Œgitæ˜¯å¦å·²ç»å®‰è£…äº†ã€‚ç”¨ä¸€ä¸‹å‘½ä»¤æ£€æµ‹ï¼Œæœªå®‰è£…<a href="https://so.csdn.net/so/search?q=%E7%99%BE%E5%BA%A6%E4%B8%80%E4%B8%8B&spm=1001.2101.3001.7020">ç™¾åº¦ä¸€ä¸‹</a>å®‰è£…å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">git --version</span><br><span class="line">123</span><br></pre></td></tr></table></figure><ol><li><strong>ä¸‹è½½Hexo</strong></li></ol><p>çœ‹å®˜ç½‘ï¼š(<strong>è®°å¾—ä»¥ç®¡ç†å‘˜è¿è¡Œå“¦</strong>)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure><h2 id="IIã€å»ºç«™"><a href="#IIã€å»ºç«™" class="headerlink" title="IIã€å»ºç«™"></a>IIã€å»ºç«™</h2><blockquote><ol><li><strong>åˆå§‹åŒ–é¡¹ç›® hexo init</strong></li><li><strong>å¯åŠ¨æœåŠ¡å™¨ hexo server</strong></li></ol></blockquote><ol><li><strong>åˆå§‹åŒ–é¡¹ç›®</strong></li></ol><p>å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œmyblogï¼Œè¿›å…¥ç»ˆç«¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init  <span class="comment">#åˆå§‹åŒ–hexo</span></span><br><span class="line"><span class="comment"># æ²¡æœ‰æå‰åˆ›å»ºæ–‡ä»¶å¤¹å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤</span></span><br><span class="line">hexo init myblog</span><br></pre></td></tr></table></figure><p>è™½ç„¶æœ‰æŠ¥é”™ï¼Œä½†æ˜¯çœ‹å¤§æ¦‚æ„æ€æ˜¯ä¸€å¼€å§‹é“¾æ¥å¤±è´¥ï¼Œåé¢é‡ç½®äº†æˆåŠŸäº†ã€‚æ–°å»ºäº†<a href="https://so.csdn.net/so/search?q=hexo&spm=1001.2101.3001.7020">hexo</a>é¡¹ç›®çš„æ–‡ä»¶ç›®å½•é•¿è¿™æ ·ï¼š</p><p><img src="https://img-blog.csdnimg.cn/img_convert/fa29f5e0a247c884c8771fc8795aaa79.png" alt="img"></p><ol><li><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong></p><p>åœ¨å½“å‰åšå®¢ç›®å½•ä¸‹è¿è¡Œï¼š</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm i <span class="comment"># å…¶å®ä¸çŸ¥é“è¿™ä¸ªæ˜¯å®‰è£…ä»€ä¹ˆä¾èµ–</span></span><br><span class="line">npm install hexo-deployer-git --save   <span class="comment"># å®‰è£…æ’ä»¶</span></span><br><span class="line">hexo server  <span class="comment"># å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥ä¸ç”¨å®‰è£…ä¾èµ–å’Œæ’ä»¶ï¼Œç›´æ¥å¯åŠ¨æœåŠ¡å™¨ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>å¯åŠ¨äº†æœåŠ¡å™¨äº†ï¼Œè®¿é—®ä¸‹åœ°å€ï¼š<a href="http://localhost:4000/">http://localhost:4000/</a></p><p>é•¿è¿™æ ·ï¼Œæ„Ÿè§‰ä¸å’‹å¥½çœ‹ã€‚åˆ°æ—¶å€™å¾—æ¢æˆé‚£ä¸ªå°‘å¥³ç²‰çš„ä¸»é¢˜å˜»å˜»</p><h2 id="IIIã€éƒ¨ç½²åˆ°GitHub"><a href="#IIIã€éƒ¨ç½²åˆ°GitHub" class="headerlink" title="IIIã€éƒ¨ç½²åˆ°GitHub"></a>IIIã€éƒ¨ç½²åˆ°GitHub</h2><blockquote><ol><li><strong>åˆ›å»ºä¸ªä»“åº“ dabing85.github.io</strong></li><li><strong>å®‰è£… hexo-deployer-git éƒ¨ç½²æ’ä»¶</strong></li><li><strong>ä¿®æ”¹_config.ymlæ–‡ä»¶</strong></li><li><strong>ä»£ç éƒ¨ç½²åˆ°gitå¹¶æˆæƒ</strong></li><li><strong>è®¿é—®ï¼š</strong><code>dabing85.github.io</code></li></ol></blockquote><p>å…ˆéƒ¨ç½²åˆ°githubå§ï¼Œåé¢ç­‰å¤‡æ¡ˆäº†éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå»å˜»å˜»ã€‚åº”è¯¥å°±æ˜¯ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ã€‚</p><ol><li><strong>åˆ›å»ºä¸ªä»“åº“ dabing85.github.io</strong></li><li><strong>å®‰è£… hexo-deployer-git éƒ¨ç½²æ’ä»¶</strong></li></ol><p>åˆšåˆšå°±å®‰è£…è¿‡äº†ï¼Œå°±æ˜¯è¿™ä¸ªå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save   <span class="comment"># å®‰è£…æ’ä»¶</span></span><br></pre></td></tr></table></figure><ol><li><strong>ä¿®æ”¹_config.ymlæ–‡ä»¶</strong></li></ol><p>éƒ¨ç½²æ¨èç”¨sshå¯†é’¥çš„æ–¹å¼å¿«ä¸€äº›ã€‚æ€ä¹ˆç”Ÿæˆ<a href="https://so.csdn.net/so/search?q=%E5%85%AC%E9%92%A5&spm=1001.2101.3001.7020">å…¬é’¥</a>ï¼Œå¯å‚è€ƒï¼š</p><p>é…è¿‡æœ¬æœºå…¬é’¥å°±ä¸ç”¨ç®¡äº†ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:dabing85/dabing85.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><ol><li><strong>è¿è¡Œä¸‹é¢å‡ ä¸ªå‘½ä»¤</strong></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g<span class="comment"># ç”Ÿæˆé™æ€æ–‡ä»¶</span></span><br><span class="line">hexo d<span class="comment"># éƒ¨ç½²ä»£ç åˆ°GitHubä¸Šï¼Œä¹‹åä¼šè·³å‡ºgithubæˆæƒçš„æ¡†</span></span><br></pre></td></tr></table></figure><ol><li><strong>è®¿é—®ï¼š</strong><code>dabing85.github.io</code></li></ol><h2 id="â…£ã€ç¾åŒ–åšå®¢"><a href="#â…£ã€ç¾åŒ–åšå®¢" class="headerlink" title="â…£ã€ç¾åŒ–åšå®¢"></a>â…£ã€ç¾åŒ–åšå®¢</h2><blockquote><ol><li>å®‰è£…éœ€è¦çš„ä¾èµ–æ’ä»¶</li><li>ä¸‹è½½ä¸»é¢˜</li><li>ä¿®æ”¹&#x2F;_config.yml é…ç½®åˆ‡æ¢ä¸»é¢˜</li><li>é‡æ–°ç¼–è¯‘å‘å¸ƒ hexo clean &amp; hexo deploy</li><li>è®¿é—®<code>dabing85.github.io</code></li><li>ä¿®æ”¹å¯¹åº”çš„é…ç½®æ–‡ä»¶</li></ol></blockquote><p>çœ‹ä¸Šè¿™ä¸ªå°‘å¥³ç²‰çš„ä¸»é¢˜äº†ï¼Œæ©™æ€»ä»‹ç»çš„ï¼š<a href="https://shoka.lostyu.me/">shoka.lostyu.me</a></p><p>æ–‡æ¡£è¯´æ˜ï¼š<a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/</a></p><p>åŸºæœ¬é…ç½®: <a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/config/">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/config/</a></p><p>é¡µé¢é…ç½®: <a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/display/">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/display/</a></p><p>ä¾èµ–æ’ä»¶: <a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/dependents/">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/dependents/</a></p><p>ä¸ºäº†å¯è§†åŒ–ï¼Œæˆ‘ç›´æ¥ç”¨ideaæ‰“å¼€mybolgåœ¨ideaçš„ç»ˆæ­¢æ‰§è¡Œå‘½ä»¤ã€‚ä¹Ÿå¯ä»¥çœ‹çœ‹éƒ½æ·»åŠ äº†äº›ä»€ä¹ˆæ–‡ä»¶ã€‚</p><h3 id="1-ä¾èµ–æ’ä»¶å®‰è£…"><a href="#1-ä¾èµ–æ’ä»¶å®‰è£…" class="headerlink" title="1- ä¾èµ–æ’ä»¶å®‰è£…"></a>1- ä¾èµ–æ’ä»¶å®‰è£…</h3><p>å‚è€ƒä¸Šæ–¹é“¾æ¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-renderer-multi-markdown-it --save</span><br><span class="line">npm i hexo-autoprefixer --save</span><br><span class="line">npm i  hexo-algolia --save</span><br><span class="line">npm i hexo-algoliasearch --save</span><br><span class="line">npm i hexo-symbols-count-time --save</span><br><span class="line">npm i hexo-feed --save</span><br></pre></td></tr></table></figure><p><img src="https://image.dabing.cool/image/1655638217584-b2acf7bc-eb29-430c-a973-7e0d6ec57d4c.png" alt="img"></p><p>å¯¹åº”çš„ä¾èµ–é…ç½®ç›´æ¥å¤åˆ¶æ–‡æ¡£é‡Œçš„å†…å®¹åˆ° <code>themes/shoka/_config.yml</code>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ã€‚è¿™ä¸ªè·¯å¾„ç°åœ¨è¿˜æ²¡æœ‰ï¼Œç­‰ä¼šä¸‹è½½å®Œä¸»é¢˜å°±æœ‰äº†ã€‚</p><h3 id="2-ä¸‹è½½ä¸»é¢˜"><a href="#2-ä¸‹è½½ä¸»é¢˜" class="headerlink" title="2- ä¸‹è½½ä¸»é¢˜"></a>2- ä¸‹è½½ä¸»é¢˜</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/amehime/hexo-theme-shoka.git ./themes/shoka</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®Œæ¯•å¤šäº†è¿™ä¹ˆä¸ªæ–‡ä»¶å¤¹ã€‚</p><p>è®©è¿™ä¸ªä¸»é¢˜èµ·æ•ˆï¼š<br>ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>/_config.yml </code>ï¼ŒæŠŠä¸»é¢˜æ”¹ä¸º shoka</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">shoka</span></span><br></pre></td></tr></table></figure><p>é‡æ–°ç¼–è¯‘éƒ¨ç½²ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>è®¿é—®ä¸€ä¸‹<code>https://dabing85.github.io/</code>å‘ï¼Œé•¿è¿™æ ·ï¼š</p><p><img src="https://image.dabing.cool/image/1655640206227-f6aef02a-bf45-4b1d-bbd5-dcf3451a4fc9.png" alt="img"></p><h3 id="3-ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶-shoka-config-yml"><a href="#3-ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶-shoka-config-yml" class="headerlink" title="3- ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶&#x2F;shoka&#x2F;_config.yml"></a>3- ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶&#x2F;shoka&#x2F;_config.yml</h3><p>å‚è€ƒä¸»é¢˜ï¼š<a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/config/">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/config/</a></p><p>è¦ä¿®æ”¹ä¸€äº›å›¾ç‰‡å¦‚å¤´åƒï¼Œå¯ä»¥åœ¨<code>\themes\shoka\source\images</code>è·¯å¾„ä¸‹ä¿®æ”¹ï¼Œç›´æ¥æ›¿æ¢ï¼Œè¦<strong>åŒå</strong>ï¼ï¼ï¼</p><p>ä¸‹é¢æ˜¯æˆ‘çš„é…ç½®æ–‡ä»¶ç»™å¤§å®¶å‚è€ƒä¸€äº›ï¼Œä¹Ÿå¯èƒ½ä¸å¤Ÿå®Œå–„ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Alternate site name</span></span><br><span class="line"><span class="attr">alternate:</span> <span class="string">Dabing</span></span><br><span class="line"></span><br><span class="line"><span class="attr">open_graph:</span></span><br><span class="line">  <span class="comment">#twitter_id:</span></span><br><span class="line">  <span class="comment">#google_plus:</span></span><br><span class="line">  <span class="comment">#fb_admins:</span></span><br><span class="line">  <span class="comment">#fb_app_id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Assets</span></span><br><span class="line"><span class="attr">statics:</span> <span class="string">/</span>    <span class="comment">#/ #//cdn.jsdelivr.net/gh/username/RepositoryName@latest/</span></span><br><span class="line"><span class="attr">css:</span> <span class="string">css</span></span><br><span class="line"><span class="attr">js:</span> <span class="string">js</span></span><br><span class="line"><span class="attr">images:</span> <span class="string">images</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># themes/shoka/source/images/***</span></span><br><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/apple-touch-icon.png</span></span><br><span class="line">  <span class="comment">#safari_pinned_tab: /logo.svg</span></span><br><span class="line">  <span class="comment">#android_manifest: /manifest.json</span></span><br><span class="line">  <span class="comment">#ms_browserconfig: /browserconfig.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dark Mode</span></span><br><span class="line"><span class="comment"># By default, the page judges whether to turn on the dark mode according to the device settings or user selection</span></span><br><span class="line"><span class="comment"># if `true`, the page will be displayed directly as Dark Mode, unless the user makes another choice</span></span><br><span class="line"><span class="comment"># å¤œé—´æ¨¡å¼</span></span><br><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># By default the page will automatically scroll to the last viewed position</span></span><br><span class="line"><span class="comment"># if `false`, automatic positioning will be turned off</span></span><br><span class="line"><span class="comment"># è‡ªåŠ¨å®šä½ è‡ªåŠ¨å®šä½åˆ°ä¸Šæ¬¡æµè§ˆçš„ä½ç½®</span></span><br><span class="line"><span class="attr">auto_scroll:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Whether to show the loading cat</span></span><br><span class="line"><span class="comment"># æ˜¯å¦æ˜¾ç¤ºé¡µé¢åŠ è½½åŠ¨æ¼« å°±æ˜¯æ¯æ¬¡éƒ½çœ‹åˆ°çš„é‚£ä¸ªçŒ«çŒ«</span></span><br><span class="line"><span class="attr">loader:</span></span><br><span class="line">  <span class="attr">start:</span> <span class="literal">true</span> <span class="comment"># When entering the page</span></span><br><span class="line">  <span class="attr">switch:</span> <span class="literal">true</span> <span class="comment"># When switching to another page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># click with Firework</span></span><br><span class="line"><span class="comment"># é¡µé¢ç‰¹æ•ˆ å•å‡»é¡µé¢çš„çƒŸèŠ±æ•ˆæœ</span></span><br><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span></span><br><span class="line">    <span class="comment"># - &quot;rgba(255,182,185,.9)&quot;</span></span><br><span class="line">    <span class="comment"># - &quot;rgba(250,227,217,.9)&quot;</span></span><br><span class="line">    <span class="comment"># - &quot;rgba(187,222,214,.9)&quot;</span></span><br><span class="line">    <span class="comment"># - &quot;rgba(138,198,209,.9)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½è°·æ­Œå­—ä½“</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Mulish</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for alternate title.</span></span><br><span class="line">  <span class="comment"># å¤‡ç”¨å­—ä½“</span></span><br><span class="line">  <span class="attr">logo:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Fredericka</span> <span class="string">the</span> <span class="string">Great</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">3.5</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for site title.</span></span><br><span class="line">  <span class="comment"># ç«™ç‚¹å­—ä½“</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">JP</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">2.5</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts.</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Inconsolata</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># project of https://www.iconfont.cn/</span></span><br><span class="line"><span class="comment"># //at.alicdn.com/t/font_1832207_c8i9n1ulxlt.css =&gt; 1832207_c8i9n1ulxlt</span></span><br><span class="line"><span class="attr">iconfont:</span> <span class="string">&quot;1832207_igi8uaupcus&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># èœå•</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">é¦–é¡µ:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="string">å…³äº:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span></span><br><span class="line">  <span class="string">æ–‡ç« :</span></span><br><span class="line">    <span class="attr">default:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">feather</span></span><br><span class="line">    <span class="string">å½’æ¡£:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">list-alt</span></span><br><span class="line">    <span class="string">åˆ†ç±»:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br><span class="line">    <span class="string">æ ‡ç­¾:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line"><span class="comment">#  friends: /friends/ || heart</span></span><br><span class="line"><span class="comment">#  links: /links/ || magic</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Social Links</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon || color`</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target permalink,</span></span><br><span class="line"><span class="comment"># secend value is the name of Font icon.</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">github:</span> <span class="string">https://github.com/dabing85</span> <span class="string">||</span> <span class="string">github</span> <span class="string">||</span> <span class="string">&quot;#191717&quot;</span></span><br><span class="line">  <span class="comment">#google: https://plus.google.com/yourname || google</span></span><br><span class="line">  <span class="comment">#twitter: https://twitter.com/yourname || twitter || &quot;#00aff0&quot;</span></span><br><span class="line">  <span class="comment">#zhihu: https://www.zhihu.com/people/yourname || zhihu || &quot;#1e88e5&quot;</span></span><br><span class="line">  <span class="comment">#music: https://music.163.com/#/user/home?id=yourid || cloud-music || &quot;#e60026&quot;</span></span><br><span class="line">  <span class="comment">#weibo: https://weibo.com/yourname || weibo || &quot;#ea716e&quot;</span></span><br><span class="line">  <span class="comment">#about: https://about.me/yourname || address-card || &quot;#3b5998&quot;</span></span><br><span class="line">  <span class="comment">#email: mailto:yourname@mail.com || envelope || &quot;#55acd5&quot;</span></span><br><span class="line">  <span class="comment">#facebook: https://www.facebook.com/yourname || facebook</span></span><br><span class="line">  <span class="comment">#stackoverflow: https://stackoverflow.com/yourname || stack-overflow</span></span><br><span class="line">  <span class="comment">#youtube: https://youtube.com/yourname || youtube</span></span><br><span class="line">  <span class="comment">#instagram: https://instagram.com/yourname || instagram</span></span><br><span class="line">  <span class="comment">#skype: skype:yourname?call|chat || skype</span></span><br><span class="line">  <span class="comment">#douban: https://www.douban.com/people/yourname/ || douban</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position.</span></span><br><span class="line">  <span class="comment"># position: left</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">  <span class="comment"># Replace the default avatar image and set the url here.</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">avatar.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="attr">widgets:</span></span><br><span class="line">  <span class="comment"># if true, will show random posts</span></span><br><span class="line">  <span class="comment"># æ˜¾ç¤ºéšæœºæ–‡ç« </span></span><br><span class="line">  <span class="attr">random_posts:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># if true, will show recent comments</span></span><br><span class="line">  <span class="comment"># æ˜¾ç¤ºæœ€è¿‘è¯„è®º</span></span><br><span class="line">  <span class="attr">recent_comments:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the date when the site was setup. If not defined, current year will be used.</span></span><br><span class="line">  <span class="comment"># é¡µå°¾å…¨ç«™ç»Ÿè®¡å±€</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2010</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">sakura</span> <span class="string">rotate</span></span><br><span class="line">    <span class="comment"># Change the color of icon, using Hex Code.</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;#ffc0cb&quot;</span></span><br><span class="line">  <span class="comment"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ç« ç•Œé¢ç»Ÿè®¡</span></span><br><span class="line"><span class="attr">post:</span></span><br><span class="line">  <span class="comment"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¥–åŠ± è¿™é‡Œæˆ‘ä¸éœ€è¦</span></span><br><span class="line"><span class="comment"># Reward (Donate)</span></span><br><span class="line"><span class="comment">#reward:</span></span><br><span class="line"><span class="comment">#  # If true, reward will be displayed in every article by default.</span></span><br><span class="line"><span class="comment">#  enable: true</span></span><br><span class="line"><span class="comment">#  account:</span></span><br><span class="line"><span class="comment">#    wechatpay: /wechatpay.png</span></span><br><span class="line"><span class="comment">#    alipay: /alipay.png</span></span><br><span class="line"><span class="comment">#    paypal: /paypal.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># TagCloud settings for tags page.</span></span><br><span class="line"><span class="attr">tagcloud:</span></span><br><span class="line">  <span class="comment"># All values below are same as default, change them by yourself.</span></span><br><span class="line">  <span class="attr">min:</span> <span class="number">16</span> <span class="comment"># Minimun font size in px</span></span><br><span class="line">  <span class="attr">max:</span> <span class="number">22</span> <span class="comment"># Maxium font size in px</span></span><br><span class="line">  <span class="attr">start:</span> <span class="string">&quot;#72cecf&quot;</span> <span class="comment"># Start color (hex, rgba, hsla or color keywords)</span></span><br><span class="line">  <span class="attr">end:</span> <span class="string">&quot;#ffbac3&quot;</span> <span class="comment"># End color (hex, rgba, hsla or color keywords)</span></span><br><span class="line">  <span class="attr">amount:</span> <span class="number">200</span> <span class="comment"># Amount of tags, change it if you have more than 200 tags</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Third Party Plugins &amp; Services Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># See: https://creativecommons.org/share-your-work/licensing-types-examples</span></span><br><span class="line"><span class="comment"># Available values of license: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></span><br><span class="line"><span class="comment"># You can set a language value if you prefer a translated version of CC license, e.g. deed.zh</span></span><br><span class="line"><span class="comment"># CC licenses are available in 39 languages, you can find the specific and correct abbreviation you need on https://creativecommons.org</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-CN</span>  <span class="comment"># deed.zh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Comments</span></span><br><span class="line"><span class="comment"># Valine</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/amehime/MiniValine</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="comment"># é…ç½®ä½ çš„appId</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="comment"># é…ç½®ä½ çš„appKey</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">ãƒ½(â—‹Â´âˆ€`)ï¾‰â™ª</span> <span class="comment"># Comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mp</span> <span class="comment"># Gravatar style : mp, identicon, monsterid, wavatar, robohash, retro</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-CN</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">true</span> <span class="comment"># Article reading statistic æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">NoRecordIP:</span> <span class="literal">false</span> <span class="comment"># Whether to record the commenter IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></span><br><span class="line">  <span class="attr">powerMode:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tagMeta:</span></span><br><span class="line">    <span class="attr">visitor:</span> <span class="string">æ–°æœ‹å‹</span></span><br><span class="line">    <span class="attr">master:</span> <span class="string">ä¸»äºº</span></span><br><span class="line">    <span class="attr">friend:</span> <span class="string">å°ä¼™ä¼´</span></span><br><span class="line">    <span class="attr">investor:</span> <span class="string">é‡‘ä¸»ç²‘ç²‘</span></span><br><span class="line">  <span class="attr">tagColor:</span></span><br><span class="line">    <span class="attr">master:</span> <span class="string">&quot;var(--color-orange)&quot;</span></span><br><span class="line">    <span class="attr">friend:</span> <span class="string">&quot;var(--color-aqua)&quot;</span></span><br><span class="line">    <span class="attr">investor:</span> <span class="string">&quot;var(--color-pink)&quot;</span></span><br><span class="line">  <span class="attr">tagMember:</span></span><br><span class="line">    <span class="attr">master:</span></span><br><span class="line">      <span class="comment"># - hash of master@email.com</span></span><br><span class="line">      <span class="comment"># - hash of master2@email.com</span></span><br><span class="line">    <span class="attr">friend:</span></span><br><span class="line">      <span class="comment"># - hash of friend@email.com</span></span><br><span class="line">      <span class="comment"># - hash of friend2@email.com</span></span><br><span class="line">    <span class="attr">investor:</span></span><br><span class="line">      <span class="comment"># - hash of investor1@email.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bgm èƒŒæ™¯éŸ³ä¹</span></span><br><span class="line"><span class="attr">audio:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">title:</span> <span class="string">åˆ—è¡¨1</span></span><br><span class="line">    <span class="attr">list:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">https://music.163.com/#/playlist?id=2943811283</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">https://music.163.com/#/playlist?id=2297706586</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">title:</span> <span class="string">åˆ—è¡¨2</span></span><br><span class="line">    <span class="attr">list:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">https://music.163.com/#/playlist?id=2031842656</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># random image api</span></span><br><span class="line"><span class="comment"># éšæœºå›¾åº“</span></span><br><span class="line"><span class="attr">image_server:</span> <span class="comment"># &quot;https://acg.xydwz.cn/api/api.php&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="comment"># For more information: https://www.algolia.com</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/amehime/hexo-renderer-multi-markdown-it</span></span><br><span class="line"><span class="attr">pangu:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Quicklink Support</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/GoogleChromeLabs/quicklink</span></span><br><span class="line"><span class="attr">quicklink:</span></span><br><span class="line">  <span class="comment"># Custom a time in milliseconds by which the browser must execute prefetching.</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">3000</span></span><br><span class="line">  <span class="comment"># Default (true) will attempt to use the fetch() API if supported (rather than link[rel=prefetch]).</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># For more flexibility you can add some patterns (RegExp, Function, or Array) to ignores.</span></span><br><span class="line">  <span class="comment"># See: https://github.com/GoogleChromeLabs/quicklink#custom-ignore-patterns</span></span><br><span class="line">  <span class="attr">ignores:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># analytics &amp; SEO Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="attr">baidu_analytics:</span> <span class="comment"># &lt;app_id&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable Baidu transformation on mobile devices.</span></span><br><span class="line"><span class="attr">disable_baidu_transformation:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically add external URL with Base64 encrypt &amp; decrypt.</span></span><br><span class="line"><span class="attr">exturl:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Google Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://www.google.com/webmasters</span></span><br><span class="line"><span class="attr">google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bing Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://www.bing.com/webmaster</span></span><br><span class="line"><span class="attr">bing_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Yandex Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://webmaster.yandex.ru</span></span><br><span class="line"><span class="attr">yandex_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Webmaster tools verification.</span></span><br><span class="line"><span class="comment"># See: https://ziyuan.baidu.com/site</span></span><br><span class="line"><span class="attr">baidu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable baidu push so that the blog will push the url to baidu automatically which is very helpful for SEO.</span></span><br><span class="line"><span class="attr">baidu_push:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸²æŸ“mdæ–‡ä»¶</span></span><br><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">render:</span> <span class="comment"># æ¸²æŸ“å™¨è®¾ç½®</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">false</span> <span class="comment"># è¿‡æ»¤ HTML æ ‡ç­¾</span></span><br><span class="line">    <span class="attr">xhtmlOut:</span> <span class="literal">true</span> <span class="comment"># ä½¿ç”¨ &#x27;/&#x27; æ¥é—­åˆå•æ ‡ç­¾ ï¼ˆæ¯”å¦‚ &lt;br /&gt;ï¼‰ã€‚</span></span><br><span class="line">    <span class="attr">breaks:</span> <span class="literal">true</span> <span class="comment"># è½¬æ¢æ®µè½é‡Œçš„ &#x27;\n&#x27; åˆ° &lt;br&gt;ã€‚</span></span><br><span class="line">    <span class="attr">linkify:</span> <span class="literal">true</span> <span class="comment"># å°†ç±»ä¼¼ URL çš„æ–‡æœ¬è‡ªåŠ¨è½¬æ¢ä¸ºé“¾æ¥ã€‚</span></span><br><span class="line">    <span class="attr">typographer:</span></span><br><span class="line">    <span class="attr">quotes:</span> <span class="string">&#x27;â€œâ€â€˜â€™&#x27;</span></span><br><span class="line">  <span class="attr">plugins:</span> <span class="comment"># markdown-it æ’ä»¶è®¾ç½®</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">markdown-it-toc-and-anchor</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">options:</span> <span class="comment"># æ–‡ç« ç›®å½•ä»¥åŠé”šç‚¹åº”ç”¨çš„ class åç§°ï¼Œshoka ä¸»é¢˜å¿…é¡»è®¾ç½®æˆè¿™æ ·</span></span><br><span class="line">          <span class="attr">tocClassName:</span> <span class="string">&#x27;toc&#x27;</span></span><br><span class="line">          <span class="attr">anchorClassName:</span> <span class="string">&#x27;anchor&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">markdown-it-multimd-table</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">options:</span></span><br><span class="line">          <span class="attr">multiline:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">rowspan:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">headerless:</span> <span class="literal">true</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">./markdown-it-furigana</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">options:</span></span><br><span class="line">          <span class="attr">fallbackParens:</span> <span class="string">&quot;()&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">./markdown-it-spoiler</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">options:</span></span><br><span class="line">          <span class="attr">title:</span> <span class="string">&quot;ä½ çŸ¥é“å¾—å¤ªå¤šäº†&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># minify é…ç½®ï¼Œå‹ç¼©css/js/html</span></span><br><span class="line"><span class="attr">minify:</span></span><br><span class="line">  <span class="attr">html:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">exclude:</span> <span class="comment"># æ’é™¤ hexo-feed ç”¨åˆ°çš„æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/json.ejs&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/atom.ejs&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/rss.ejs&#x27;</span></span><br><span class="line">  <span class="attr">css:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/*.min.css&#x27;</span></span><br><span class="line">  <span class="attr">js:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">mangle:</span></span><br><span class="line">      <span class="attr">toplevel:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">output:</span></span><br><span class="line">    <span class="attr">compress:</span></span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»£ç é«˜äº®</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">autoprefixer:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;*.min.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨å±€æœç´¢</span></span><br><span class="line"><span class="attr">algolia:</span></span><br><span class="line">  <span class="attr">appId:</span>  <span class="comment">#Your appId</span></span><br><span class="line">  <span class="attr">apiKey:</span>  <span class="comment">#Your apiKey</span></span><br><span class="line">  <span class="attr">adminApiKey:</span>  <span class="comment">#Your adminApiKey</span></span><br><span class="line">  <span class="attr">chunkSize:</span> <span class="number">5000</span></span><br><span class="line">  <span class="attr">indexName:</span> <span class="string">&quot;&quot;</span> <span class="comment">#&quot;shoka&quot;</span></span><br><span class="line">  <span class="attr">fields:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">title</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">path</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">categories</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">content:strip:truncate,0,2000</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gallery</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tags</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">java,git,springcloud</span> <span class="comment">#ç«™ç‚¹å…³é”®è¯ï¼Œç”¨ â€œ,â€ åˆ†éš”</span></span><br><span class="line"></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">&quot;-date&quot;</span></span><br><span class="line">  <span class="attr">tag_dir:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">category_dir:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">rss:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">template:</span> <span class="string">&quot;themes/shoka/layout/_alternate/rss.ejs&quot;</span></span><br><span class="line">    <span class="attr">output:</span> <span class="string">&quot;rss.xml&quot;</span></span><br><span class="line">  <span class="attr">atom:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">template:</span> <span class="string">&quot;themes/shoka/layout/_alternate/atom.ejs&quot;</span></span><br><span class="line">    <span class="attr">output:</span> <span class="string">&quot;atom.xml&quot;</span></span><br><span class="line">  <span class="attr">jsonFeed:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">template:</span> <span class="string">&quot;themes/shoka/layout/_alternate/json.ejs&quot;</span></span><br><span class="line">    <span class="attr">output:</span> <span class="string">&quot;feed.json&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#! ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#! DO NOT EDIT THE FOLLOWING `vendors` SETTINGS</span></span><br><span class="line"><span class="comment">#! UNLESS YOU KNOW WHAT YOU ARE DOING</span></span><br><span class="line"><span class="comment">#! Script dependencies will be combined with jsDelivr (cdn.jsdelivr.net)</span></span><br><span class="line"><span class="comment">#! ---------------------------------------------------------------</span></span><br><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="attr">css:</span></span><br><span class="line">    <span class="attr">katex:</span> <span class="string">npm/katex@0.12.0/dist/katex.min.css</span></span><br><span class="line">    <span class="attr">comment:</span> <span class="string">css/comment.css</span></span><br><span class="line">    <span class="attr">fancybox:</span> <span class="string">combine/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css</span></span><br><span class="line">  <span class="attr">js:</span></span><br><span class="line">    <span class="attr">pace:</span> <span class="string">npm/pace-js@1.0.2/pace.min.js</span></span><br><span class="line">    <span class="attr">pjax:</span> <span class="string">npm/pjax@0.2.8/pjax.min.js</span></span><br><span class="line">    <span class="attr">fetch:</span> <span class="string">npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js</span></span><br><span class="line">    <span class="attr">anime:</span> <span class="string">npm/animejs@3.2.0/lib/anime.min.js</span></span><br><span class="line">    <span class="attr">algolia:</span> <span class="string">npm/algoliasearch@4/dist/algoliasearch-lite.umd.js</span></span><br><span class="line">    <span class="attr">instantsearch:</span> <span class="string">npm/instantsearch.js@4/dist/instantsearch.production.min.js</span></span><br><span class="line">    <span class="attr">lazyload:</span> <span class="string">npm/lozad@1/dist/lozad.min.js</span></span><br><span class="line">    <span class="attr">quicklink:</span> <span class="string">npm/quicklink@2/dist/quicklink.umd.js</span></span><br><span class="line">    <span class="attr">fancybox:</span> <span class="string">combine/npm/jquery@3.5.1/dist/jquery.min.js,npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js,npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js</span></span><br><span class="line">    <span class="attr">valine:</span> <span class="string">gh/amehime/MiniValine@4.2.2-beta10/dist/MiniValine.min.js</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="string">npm/katex@0.12.0/dist/contrib/copy-tex.min.js</span></span><br><span class="line">    <span class="attr">chart:</span> <span class="string">npm/frappe-charts@1.5.0/dist/frappe-charts.min.iife.min.js</span></span><br></pre></td></tr></table></figure><h3 id="4-ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶-config-yml"><a href="#4-ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶-config-yml" class="headerlink" title="4-ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶ _config.yml"></a>4-ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶ _config.yml</h3><p>å‚è€ƒå®˜ç½‘ï¼š<a href="https://hexo.io/zh-cn/docs/configuration">https://hexo.io/zh-cn/docs/configuration</a></p><p>è¦è¯´æ˜ä¸€ä¸‹çš„åˆ†ç±»å’Œæ ‡ç­¾çš„é…ç½®ï¼š</p><p><img src="https://image.dabing.cool/image/1655788779816-0938393b-2931-4d4a-94e3-9bad58aef34a.png" alt="img"></p><p>åŸºæœ¬ç…§ç€å®˜ç½‘æ¥å°±å¥½ï¼Œæ²¡å•¥è¦æ”¹çš„ã€‚æˆ‘çš„ç»™å‚è€ƒä¸€ä¸‹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;ä¸åœ¨èƒ½çŸ¥ï¼Œä¹ƒåœ¨èƒ½è¡Œ&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;æ¬¢è¿æ¥åˆ°å¤§å†°çš„ç¬”è®°ç©ºé—´~è¿™é‡Œä¸»è¦ä¼šè®°å½•ç¼–ç¨‹å­¦ä¹ ç¬”è®°ğŸŒ¸&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Dabing-He</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://example.com</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:title/</span>  <span class="comment">#:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># Apply to the whole site</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="comment"># è¿™é‡Œé…ç½®åˆ†ç±»å’Œæ ‡ç­¾</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span> </span><br><span class="line"><span class="attr">tag_map:</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Metadata elements</span></span><br><span class="line"><span class="comment">## https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta</span></span><br><span class="line"><span class="attr">meta_generator:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br><span class="line"><span class="comment">## updated_option supports &#x27;mtime&#x27;, &#x27;date&#x27;, &#x27;empty&#x27;</span></span><br><span class="line"><span class="attr">updated_option:</span> <span class="string">&#x27;mtime&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Include / Exclude file(s)</span></span><br><span class="line"><span class="comment">## include:/exclude: options only apply to the &#x27;source/&#x27; folder</span></span><br><span class="line"><span class="attr">include:</span></span><br><span class="line"><span class="attr">exclude:</span></span><br><span class="line"><span class="attr">ignore:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">shoka</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:dabing85/dabing85.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><p>å†æ¥ä¸€éä¸‰è¿ hexo clean ã€hexo generateã€hexo deploy å³å¯</p><h2 id="Vã€å…¶ä»–"><a href="#Vã€å…¶ä»–" class="headerlink" title="Vã€å…¶ä»–"></a>Vã€å…¶ä»–</h2><h3 id="1-è¦å†™ä¸€ç¯‡æ–‡ç« ï¼š"><a href="#1-è¦å†™ä¸€ç¯‡æ–‡ç« ï¼š" class="headerlink" title="1- è¦å†™ä¸€ç¯‡æ–‡ç« ï¼š"></a>1- è¦å†™ä¸€ç¯‡æ–‡ç« ï¼š</h3><p>å¦‚æˆ‘è¦å†™ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å°±è¿™ä¹ˆå†™ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: SpringCloud2020</span><br><span class="line">date: 2022/04/30 20:46:25</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> å¾®æœåŠ¡</span><br><span class="line">tags:</span><br><span class="line"><span class="section">- å¾®æœåŠ¡</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line">balabala......</span><br></pre></td></tr></table></figure><p>æˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹cmdè¾“å…¥hexo new â€œæ ‡é¢˜â€</p><p><strong>åˆ†ç±»</strong></p><p>åœ¨ä½ çš„æ ¹ç›®å½• &#x2F;source&#x2F;_post&#x2F;hexo&#x2F; ä¸‹æ”¾ä¸€å¼ è¯¥åˆ†ç±»çš„å°é¢å›¾ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨åœ¨é¦–é¡µæ˜¾ç¤ºè¿™ä¸ªåˆ†ç±»äº†ã€‚</p><p><img src="https://image.dabing.cool/image/image-20221021113905502.png"></p><h3 id="2-jsdelivr-è¢«å¢™"><a href="#2-jsdelivr-è¢«å¢™" class="headerlink" title="2- jsdelivr è¢«å¢™"></a>2- jsdelivr è¢«å¢™</h3><p>æˆ‘åœ¨shokaè¯„è®ºåŒºæ‰¾åˆ°çš„ï¼Œè¯„è®ºå†…å®¹å¦‚ä¸‹ï¼š</p><p>æ‚¨å¥½ï¼Œæˆ‘è¿™è¾¹å¤§æ¦‚å»äº†è§£äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªé—®é¢˜åº”è¯¥æ˜¯ä¸ jsdelivr è¢«å¢™æœ‰å…³ï¼Œå¯å‚è€ƒ <a href="https://github.com/amehime/hexo-theme-shoka/issues/65">å…³äºjsdeliveråœ¨å›½å†…çš„ICPè®¸å¯è¯è¢«åŠé”€ #65</a> é‡Œçš„è®¨è®ºï¼Œä»¥åŠ <a href="https://blog.liq2.com/article/768b74a2">jsDelivré™æ€æ–‡ä»¶CDNåŠ é€Ÿå¤±æ•ˆä¹‹åè§£å†³æ–¹æ¡ˆ</a> è¿™ä¸€åšå®¢çš„è¯„è®ºåŒºã€‚æˆ‘ç›®å‰é‡‡å–çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p><ul><li>ä¿®æ”¹ \themes\shoka\source\js_app è·¯å¾„ä¸‹çš„ utils.js æ–‡ä»¶ï¼šå°† cdn.jsdelivr.net æ›¿æ¢æˆ fastly.jsdelivr.net</li><li>ä¿®æ”¹ \themes\shoka\scripts\helpers è·¯å¾„ä¸‹çš„ asset.js æ–‡ä»¶ï¼šå°† cdn.jsdelivr.net æ›¿æ¢æˆ fastly.jsdelivr.net</li><li>ä¿®æ”¹ shoka ä¸»é¢˜ _config.yml æ–‡ä»¶ï¼ˆå¦‚æœæ²¡æœ‰åœ¨åšå®¢æ ¹ç›®å½•æ–°å¢ _config.shoka.yml æ–‡ä»¶çš„è¯ï¼‰ä¸­çš„ statics è®¾ç½®ï¼Œè¾“å…¥å®Œæ•´çš„ fastly.jsdelivr é™æ€æ–‡ä»¶ç½‘å€ï¼Œå³ï¼Œè®¾ç½®ä¸º <a href="https://fastly.jsdelivr.net/gh/%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D/%E5%8D%9A%E5%AE%A2%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BB%93%E5%BA%93%E5%90%8D@latest/">https://fastly.jsdelivr.net/gh/ä½ çš„githubç”¨æˆ·å/åšå®¢å¯¹åº”çš„ä»“åº“å@latest/</a> ï¼Œä¾‹å¦‚æˆ‘çš„è®¾ç½®ï¼š<a href="https://fastly.jsdelivr.net/gh/jiankychen/jiankychen.github.io@latest/">https://fastly.jsdelivr.net/gh/jiankychen/jiankychen.github.io@latest/</a> ï¼ˆæ³¨ï¼šæˆ‘ä¸å¤ªç¡®å®š \themes\shoka\source\js_app è·¯å¾„ä¸‹ global.js æ–‡ä»¶ä¸­çš„ var statics &#x3D; CONFIG.statics.indexOf(â€˜&#x2F;&#x2F;â€˜) &gt; 0 ? CONFIG.statics : CONFIG.root è¿™ä¸€è¡Œä»£ç çš„é€»è¾‘ï¼Œä¸ºäº†ç¡®ä¿æˆ‘ä»¬åœ¨ _config.yml ä¸­è®¾ç½®çš„ statics èƒ½å¤Ÿå¥æ•ˆï¼Œæ‰€ä»¥æˆ‘åœ¨è®¾ç½® _config.yml çš„ statics æ—¶åŠ ä¸Šäº† https: è¿™ä¸€å‰ç¼€ï¼Œä»¥ç¡®ä¿ CONFIG.statics.indexOf(â€˜&#x2F;&#x2F;â€˜) &gt; 0 ä¸º true ï¼‰</li><li>å¦‚æœæ‚¨é…ç½®äº† valine è¯„è®ºç³»ç»Ÿï¼Œåˆ™è¿˜éœ€è¦å°† <a href="https://fastly.jsdelivr.net/gh/amehime/MiniValine@4.2.2-beta10/dist/">https://fastly.jsdelivr.net/gh/amehime/MiniValine@4.2.2-beta10/dist/</a> ä¸­çš„ MiniValine.min.js ä¸‹è½½åˆ°æœ¬åœ°å¹¶åšä¸€å®šçš„ä¿®æ”¹ï¼ŒåŒæ—¶ä¿®æ”¹ shoka ä¸»é¢˜ _config.yml æ–‡ä»¶çš„ valine: js&#x2F;MiniValine.min.js è¿™ä¸€é¡¹è®¾ç½®ï¼Œè¿™ä¸€éƒ¨åˆ†å·¥ä½œæˆ‘æš‚æ—¶ä¹Ÿè¿˜æ²¡èƒ½è§£å†³ï¼ˆç›®å‰æˆ‘çš„ valine è¯„è®ºç³»ç»Ÿä»éœ€ç¿»å¢™æ‰èƒ½åŠ è½½å‡ºæ¥ï¼‰ï¼Œæ‰€ä»¥æ— æ³•ä¸ºæ‚¨æä¾›æ›´è¯¦ç»†çš„ä¿®æ”¹å»ºè®®ã€‚</li></ul><p>é™„æ³¨ï¼šjsdelivr ç¼“å­˜åˆ·æ–°è¾ƒæ…¢ï¼Œæ®è¯´å¯èƒ½è¦ 24 å°æ—¶å·¦å³ï¼Œæ‰€ä»¥ï¼ŒæŒ‰ç…§ä¸Šè¿°æ“ä½œè¿›è¡Œä¿®æ”¹åï¼Œå¯èƒ½éœ€è€å¿ƒç­‰å¾… jsdelivr ç¼“å­˜åˆ·æ–°åæ‰èƒ½ æ­£å¸¸è®¿é—®åšå®¢ ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æŸ¥æ‰¾æœ‰å…³ åˆ·æ–° jsdelivr ç¼“å­˜ çš„èµ„æ–™è¿›ä¸€æ­¥è§£å†³ã€‚</p><h2 id="â…¥ã€æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½"><a href="#â…¥ã€æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½" class="headerlink" title="â…¥ã€æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½"></a>â…¥ã€æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½</h2><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://lemonman.cn/Shoka%E4%B8%BB%E9%A2%98%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2/">Hexo Shoka ä¸»é¢˜æœ¬åœ°æœç´¢ - shoka - hexo | Lemonmanâ€™s Blog &#x3D; å—é¢¨æœªèµ·</a></p><p>æ¨èä½¿ç”¨ç«™å†…æœç´¢æ–¹å¼ï¼Œä¹Ÿæœ‰å¦ä¸€ç§ä½¿ç”¨algoliaæœç´¢ï¼š<a href="https://blog.csdn.net/m0_45234510/article/details/116885792">https://blog.csdn.net/m0_45234510/article/details/116885792</a></p><h3 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><p>æœ¬åœ°æœç´¢é€šè¿‡ hexo-generator-searchdb æ’ä»¶å®ç°ï¼Œéœ€è¦å…ˆå®‰è£…æ’ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ–‡ä»¶é…ç½®"><a href="#ä¿®æ”¹æ–‡ä»¶é…ç½®" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶é…ç½®"></a>ä¿®æ”¹æ–‡ä»¶é…ç½®</h3><h4 id="ä¿®æ”¹page-is"><a href="#ä¿®æ”¹page-is" class="headerlink" title="ä¿®æ”¹page.is"></a>ä¿®æ”¹page.is</h4><p>shoka&#x2F;source&#x2F;js&#x2F;_app&#x2F;page.js ä¸­ localSearch() ä¿®æ”¹åçš„æ–‡ä»¶å¦‚ä¸‹ï¼Œå°†æ•´ä¸ª localSearch å¤åˆ¶åˆ°ä¸»é¢˜çš„ shoka&#x2F;source&#x2F;js&#x2F;_app&#x2F;page.js ä¸­å³å¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> localSearch = <span class="keyword">function</span>(<span class="params">pjax</span>) &#123;</span><br><span class="line">  <span class="comment">// å‚è€ƒ hexo next ä¸»é¢˜çš„é…ç½®æ–¹æ³•</span></span><br><span class="line">  <span class="comment">// å‚è€ƒ https://qiuyiwu.github.io/2019/01/25/Hexo-LocalSearch/ åšæ–‡</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span> === <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!siteSearch) &#123;</span><br><span class="line">    siteSearch = <span class="variable constant_">BODY</span>.<span class="title function_">createChild</span>(<span class="string">&#x27;div&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;search&#x27;</span>,</span><br><span class="line">      <span class="attr">innerHTML</span>: <span class="string">&#x27;&lt;div class=&quot;inner&quot;&gt;&lt;div class=&quot;header&quot;&gt;&lt;span class=&quot;icon&quot;&gt;&lt;i class=&quot;ic i-search&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;div class=&quot;search-input-container&quot;&gt;&lt;input class=&quot;search-input&quot;autocompvare=&quot;off&quot;placeholder=&quot;&#x27;</span>+<span class="variable constant_">LOCAL</span>.<span class="property">search</span>.<span class="property">placeholder</span>+<span class="string">&#x27;&quot;spellcheck=&quot;false&quot;type=&quot;text&quot;id=&quot;local-search-input&quot;&gt;&lt;/div&gt;&lt;span class=&quot;close-btn&quot;&gt;&lt;i class=&quot;ic i-times-circle&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;results&quot;id=&quot;search-results&quot;&gt;&lt;div class=&quot;inner&quot;&gt;&lt;div id=&quot;search-stats&quot;&gt;&lt;/div&gt;&lt;div id=&quot;search-hits&quot;&gt;&lt;/div&gt;&lt;div id=&quot;search-pagination&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> isFetched = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">var</span> datas;</span><br><span class="line">  <span class="keyword">var</span> isXml = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">var</span> current_page = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> pageSize = <span class="built_in">parseInt</span>(<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span>.<span class="property">pageSize</span>, <span class="number">10</span>);</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">isNaN</span>(pageSize)) pageSize = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">var</span> total_pages = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> max_page_on_show = <span class="number">7</span>; <span class="comment">// ä¸€æ¬¡æœ€å¤šæ˜¾ç¤º 7 ä¸ªé¡µç </span></span><br><span class="line">  <span class="keyword">var</span> start_page = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> end_page = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> resultItems = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// search DB path</span></span><br><span class="line">  <span class="keyword">var</span> searchPath = <span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span>.<span class="property">path</span>;</span><br><span class="line">  <span class="keyword">if</span> (searchPath.<span class="property">length</span> == <span class="number">0</span>) &#123;</span><br><span class="line">    searchPath = <span class="string">&#x27;search.xml&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (searchPath.<span class="title function_">endsWith</span>(<span class="string">&#x27;json&#x27;</span>)) &#123;</span><br><span class="line">    isXml = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> input = $(<span class="string">&#x27;.search-input&#x27;</span>); <span class="comment">// document.querySelector(&#x27;.search-input&#x27;);</span></span><br><span class="line">  <span class="keyword">const</span> resultContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;search-hits&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> paginationContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;search-pagination&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> getIndexByWord = <span class="keyword">function</span>(<span class="params">word, text, caseSensitive</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span>.<span class="property">unescape</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">      div.<span class="property">innerText</span> = word;</span><br><span class="line">      word = div.<span class="property">innerHTML</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> wordLen = word.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">if</span> (wordLen === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> startPosition = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> position = [];</span><br><span class="line">    <span class="keyword">var</span> index = [];</span><br><span class="line">    <span class="keyword">if</span> (!caseSensitive) &#123;</span><br><span class="line">      text = text.<span class="title function_">toLowerCase</span>();</span><br><span class="line">      word = word.<span class="title function_">toLowerCase</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ((position = text.<span class="title function_">indexOf</span>(word, startPosition)) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">      index.<span class="title function_">push</span>(&#123;<span class="attr">position</span>:position, <span class="attr">word</span>:word&#125;);</span><br><span class="line">      startPosition = position + wordLen;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Merge hits into slices</span></span><br><span class="line">  <span class="keyword">const</span> mergeIntoSlice = <span class="keyword">function</span>(<span class="params">start, end, index, searchText</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> item = index[index.<span class="property">length</span> - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">var</span> position = item.<span class="property">position</span>;</span><br><span class="line">    <span class="keyword">var</span> word = item.<span class="property">word</span>;</span><br><span class="line">    <span class="keyword">var</span> hits = [];</span><br><span class="line">    <span class="keyword">var</span> searchTextCountInSlice = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (position + word.<span class="property">length</span> &lt;= end &amp;&amp; index.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (word === searchText) &#123;</span><br><span class="line">        searchTextCountInSlice++;</span><br><span class="line">      &#125;</span><br><span class="line">      hits.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">position</span>:position,</span><br><span class="line">        <span class="attr">length</span>: word.<span class="property">length</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> wordEnd = position + word.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Move to next position of hit</span></span><br><span class="line">      index.<span class="title function_">pop</span>();</span><br><span class="line">      <span class="keyword">while</span> (index.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">        item = index[index.<span class="property">length</span> - <span class="number">1</span>];</span><br><span class="line">        position = item.<span class="property">position</span>;</span><br><span class="line">        word = item.<span class="property">word</span>;</span><br><span class="line">        <span class="keyword">if</span> (wordEnd &gt; position) &#123;</span><br><span class="line">          index.<span class="title function_">pop</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">hits</span>:hits,</span><br><span class="line">      <span class="attr">start</span>:start,</span><br><span class="line">      <span class="attr">end</span>:end,</span><br><span class="line">      <span class="attr">searchTextCount</span>: searchTextCountInSlice</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Highlight title and content</span></span><br><span class="line">  <span class="keyword">const</span> highlightKeyword = <span class="keyword">function</span>(<span class="params">text, slice</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> result = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> prevEnd = slice.<span class="property">start</span>;</span><br><span class="line">    slice.<span class="property">hits</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">hit</span>)  &#123;</span><br><span class="line">      result += text.<span class="title function_">substring</span>(prevEnd, hit.<span class="property">position</span>);</span><br><span class="line">      <span class="keyword">var</span> end = hit.<span class="property">position</span> + hit.<span class="property">length</span>;</span><br><span class="line">      result += <span class="string">&#x27;&lt;mark&gt;&#x27;</span>+ text.<span class="title function_">substring</span>(hit.<span class="property">position</span>, end)+<span class="string">&#x27;&lt;/mark&gt;&#x27;</span>;</span><br><span class="line">      prevEnd = end;</span><br><span class="line">    &#125;);</span><br><span class="line">    result += text.<span class="title function_">substring</span>(prevEnd, slice.<span class="property">end</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> pagination = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> addPrevPage = <span class="keyword">function</span>(<span class="params">current_page</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> classContent = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">var</span> numberContent = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">if</span> (current_page === <span class="number">0</span>) &#123;</span><br><span class="line">        classContent = <span class="string">&#x27;#search-pagination pagination-item disabled-item&#x27;</span>;</span><br><span class="line">        numberContent = <span class="string">&#x27;&lt;span class=&quot;#search-pagination page-number&quot;&gt;&lt;i class=&quot;ic i-angle-left&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        classContent = <span class="string">&#x27;#search-pagination pagination-item&#x27;</span>;</span><br><span class="line">        numberContent = <span class="string">&#x27;&lt;a class=&quot;#search-pagination page-number&quot; aria-label=&quot;Prev&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;ic i-angle-left&quot;&gt;&lt;/i&gt;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> prevPage = <span class="string">&#x27;&lt;li class=&quot;&#x27;</span>+ classContent +<span class="string">&#x27;&quot; id=&quot;prev-page&quot;&gt;&#x27;</span>+ numberContent+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> prevPage;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> addNextPage = <span class="keyword">function</span>(<span class="params">current_page</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> classContent = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">var</span> numberContent = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">if</span> ((current_page + <span class="number">1</span>) === total_pages) &#123;</span><br><span class="line">        classContent = <span class="string">&#x27;#search-pagination pagination-item disabled-item&#x27;</span>;</span><br><span class="line">        numberContent = <span class="string">&#x27;&lt;span class=&quot;#search-pagination page-number&quot;&gt;&lt;i class=&quot;ic i-angle-right&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        classContent = <span class="string">&#x27;#search-pagination pagination-item&#x27;</span>;</span><br><span class="line">        numberContent = <span class="string">&#x27;&lt;a class=&quot;#search-pagination page-number&quot;aria-label=&quot;Next&quot;href=&quot;#&quot;&gt;&lt;i class=&quot;ic i-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> nextPage = <span class="string">&#x27;&lt;li class=&quot;&#x27;</span> + classContent +<span class="string">&#x27;&quot;id=&quot;next-page&quot;&gt;&#x27;</span>+ numberContent +<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> nextPage;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> addPage = <span class="keyword">function</span>(<span class="params">index, current_page</span>)  &#123;</span><br><span class="line">      <span class="keyword">var</span> classContent = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">var</span> numberContent = <span class="string">&#x27;&lt;a class=&quot;#search-pagination page-number&quot;aria-label=&quot;&#x27;</span>+ (index + <span class="number">1</span>) +<span class="string">&#x27;&quot;href=&quot;#&quot;&gt;&#x27;</span>+(index+<span class="number">1</span>)+<span class="string">&#x27;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">if</span> (index === current_page) &#123;</span><br><span class="line">        classContent = <span class="string">&#x27;#search-pagination pagination-item current&#x27;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        classContent = <span class="string">&#x27;#search-pagination pagination-item&#x27;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> page = <span class="string">&#x27;&lt;li class=&quot;&#x27;</span>+classContent+<span class="string">&#x27;&quot; id=&quot;page-&#x27;</span>+(index + <span class="number">1</span>)+<span class="string">&#x27;&quot;&gt;&#x27;</span>+numberContent+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> addPaginationEvents = <span class="keyword">function</span>(<span class="params">start_page, end_page</span>)  &#123;</span><br><span class="line">      <span class="keyword">if</span> (total_pages &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> onPrevPageClick = <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (current_page &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          current_page -= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (current_page &lt; start_page) &#123;</span><br><span class="line">          start_page = current_page;</span><br><span class="line">          end_page = <span class="title class_">Math</span>.<span class="title function_">min</span>(end_page, start_page + max_page_on_show);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">pagination</span>();</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">const</span> onNextPageClick = <span class="keyword">function</span>(<span class="params">event</span>)  &#123;</span><br><span class="line">        <span class="keyword">if</span> ((current_page + <span class="number">1</span>) &lt; total_pages) &#123;</span><br><span class="line">          current_page += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (current_page &gt; end_page) &#123;</span><br><span class="line">          end_page = current_page;</span><br><span class="line">          start_page = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0</span>, end_page - max_page_on_show);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">pagination</span>();</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">const</span> onPageClick = <span class="keyword">function</span>(<span class="params">event</span>)  &#123;</span><br><span class="line">        <span class="keyword">var</span> page_number = <span class="built_in">parseInt</span>(event.<span class="property">target</span>.<span class="property">ariaLabel</span>);</span><br><span class="line">        current_page = page_number - <span class="number">1</span>; <span class="comment">// note minus 1 here</span></span><br><span class="line">        <span class="title function_">pagination</span>();</span><br><span class="line">      &#125;;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">var</span> prevPage = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;prev-page&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span>(prevPage != <span class="literal">null</span>)prevPage.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, onPrevPageClick);</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">var</span> nextPage = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;next-page&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span>(nextPage != <span class="literal">null</span>) nextPage.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, onNextPageClick);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = start_page; i &lt; end_page; i += <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> page = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;page-&#x27;</span>+(i + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">if</span>(page != <span class="literal">null</span>)page.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, onPageClick);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    paginationContent.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span>; <span class="comment">// clear</span></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">var</span> begin_index = <span class="title class_">Math</span>.<span class="title function_">min</span>(current_page * pageSize, resultItems.<span class="property">length</span>);</span><br><span class="line">    <span class="keyword">var</span> end_index = <span class="title class_">Math</span>.<span class="title function_">min</span>(begin_index + pageSize, resultItems.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line">    resultContent.<span class="property">innerHTML</span> = resultItems.<span class="title function_">slice</span>(begin_index, end_index).<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">result</span>) &#123;<span class="keyword">return</span> result.<span class="property">item</span>&#125;).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">    start_page = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0</span>, total_pages - max_page_on_show);</span><br><span class="line">    end_page = start_page + <span class="title class_">Math</span>.<span class="title function_">min</span>(total_pages, max_page_on_show);</span><br><span class="line">    <span class="keyword">var</span> pageContent = <span class="string">&#x27;&lt;div class=&quot;#search-pagination&quot;&gt;&#x27;</span>;</span><br><span class="line">    pageContent += <span class="string">&#x27;&lt;div class=&quot;#search-pagination pagination&quot;&gt;&#x27;</span>;</span><br><span class="line">    pageContent += <span class="string">&#x27;&lt;ul&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span> (total_pages &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// add prev page arrow, when no prev page not selectable</span></span><br><span class="line">      pageContent += <span class="title function_">addPrevPage</span>(current_page);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = start_page; i &lt; end_page; i += <span class="number">1</span>) &#123;</span><br><span class="line">        pageContent += <span class="title function_">addPage</span>(i, current_page);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// add next page arrow, when no next page not selectable</span></span><br><span class="line">      pageContent += <span class="title function_">addNextPage</span>(current_page);</span><br><span class="line">    &#125;</span><br><span class="line">    pageContent += <span class="string">&#x27;&lt;/ul&gt;&#x27;</span>;</span><br><span class="line">    pageContent += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    pageContent += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    paginationContent.<span class="property">innerHTML</span> = pageContent;</span><br><span class="line">    <span class="title function_">addPaginationEvents</span>(start_page, end_page);</span><br><span class="line">    resultContent.<span class="property">scrollTop</span> = <span class="number">0</span>;  <span class="comment">// scroll to top</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">pjax</span> &amp;&amp; <span class="variable language_">window</span>.<span class="property">pjax</span>.<span class="title function_">refresh</span>(resultContent);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> inputEventFunction = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isFetched) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Data not fetched.&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> searchText = input.<span class="property">value</span>.<span class="title function_">trim</span>().<span class="title function_">toLowerCase</span>();</span><br><span class="line">    <span class="keyword">var</span> keywords = searchText.<span class="title function_">split</span>(<span class="regexp">/[-\s]+/</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (keywords.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      keywords.<span class="title function_">push</span>(searchText);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    resultItems = [];</span><br><span class="line">    <span class="keyword">if</span> (searchText.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// Perform local searching</span></span><br><span class="line">      datas.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">index</span>) &#123;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">var</span> categories = index.<span class="property">categories</span>, title=index.<span class="property">title</span>, content=index.<span class="property">content</span>, url=index.<span class="property">url</span>;</span><br><span class="line">        <span class="keyword">var</span> titleInLowerCase = title.<span class="title function_">toLowerCase</span>();</span><br><span class="line">        <span class="keyword">var</span> contentInLowerCase = content.<span class="title function_">toLowerCase</span>();</span><br><span class="line">        <span class="keyword">var</span> indexOfTitle = [];</span><br><span class="line">        <span class="keyword">var</span> indexOfContent = [];</span><br><span class="line">        <span class="keyword">var</span> searchTextCount = <span class="number">0</span>;</span><br><span class="line">        keywords.<span class="title function_">forEach</span>( <span class="keyword">function</span>(<span class="params">keyword</span>) &#123;</span><br><span class="line">          indexOfTitle = indexOfTitle.<span class="title function_">concat</span>(<span class="title function_">getIndexByWord</span>(keyword, titleInLowerCase, <span class="literal">false</span>));</span><br><span class="line">          indexOfContent = indexOfContent.<span class="title function_">concat</span>(<span class="title function_">getIndexByWord</span>(keyword, contentInLowerCase, <span class="literal">false</span>));</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Show search results</span></span><br><span class="line">        <span class="keyword">if</span> (indexOfTitle.<span class="property">length</span> &gt; <span class="number">0</span> || indexOfContent.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> hitCount = indexOfTitle.<span class="property">length</span> + indexOfContent.<span class="property">length</span>;</span><br><span class="line">          <span class="comment">// Sort index by position of keyword</span></span><br><span class="line">          [indexOfTitle, indexOfContent].<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">index</span>)  &#123;</span><br><span class="line">            index.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">itemLeft, itemRight</span>)  &#123;</span><br><span class="line">              <span class="keyword">if</span> (itemRight.<span class="property">position</span> !== itemLeft.<span class="property">position</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> itemRight.<span class="property">position</span> - itemLeft.<span class="property">position</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> itemLeft.<span class="property">word</span>.<span class="property">length</span> - item.<span class="property">word</span>.<span class="property">length</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> slicesOfTitle = [];</span><br><span class="line">          <span class="keyword">if</span> (indexOfTitle.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> tmp = <span class="title function_">mergeIntoSlice</span>(<span class="number">0</span>, title.<span class="property">length</span>, indexOfTitle, searchText);</span><br><span class="line">            searchTextCount += tmp.<span class="property">searchTextCountInSlice</span>;</span><br><span class="line">            slicesOfTitle.<span class="title function_">push</span>(tmp);</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          <span class="keyword">var</span> slicesOfContent = [];</span><br><span class="line">          <span class="keyword">while</span> (indexOfContent.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> item = indexOfContent[indexOfContent.<span class="property">length</span> - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">var</span> position = item.<span class="property">position</span>;</span><br><span class="line">            <span class="keyword">var</span> word = item.<span class="property">word</span>;</span><br><span class="line">            <span class="comment">// Cut out 100 characters</span></span><br><span class="line">            <span class="keyword">var</span> start = position - <span class="number">20</span>;</span><br><span class="line">            <span class="keyword">var</span> end = position + <span class="number">30</span>;</span><br><span class="line">            <span class="keyword">if</span> (start &lt; <span class="number">0</span>) &#123;</span><br><span class="line">              start = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (end &lt; position + word.<span class="property">length</span>) &#123;</span><br><span class="line">              end = position + word.<span class="property">length</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (end &gt; content.<span class="property">length</span>) &#123;</span><br><span class="line">              end = content.<span class="property">length</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> tmp = <span class="title function_">mergeIntoSlice</span>(start, end, indexOfContent, searchText);</span><br><span class="line">            searchTextCount += tmp.<span class="property">searchTextCountInSlice</span>;</span><br><span class="line">            slicesOfContent.<span class="title function_">push</span>(tmp);</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          </span><br><span class="line">          <span class="comment">// Sort slices in content by search text&#x27;s count and hits&#x27; count</span></span><br><span class="line">          slicesOfContent.<span class="title function_">sort</span>( <span class="keyword">function</span>(<span class="params">sliceLeft, sliceRight</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sliceLeft.<span class="property">searchTextCount</span> !== sliceRight.<span class="property">searchTextCount</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> sliceRight.<span class="property">searchTextCount</span> - sliceLeft.<span class="property">searchTextCount</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sliceLeft.<span class="property">hits</span>.<span class="property">length</span> !== sliceRight.<span class="property">hits</span>.<span class="property">length</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> sliceRight.<span class="property">hits</span>.<span class="property">length</span> - sliceLeft.<span class="property">hits</span>.<span class="property">length</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sliceLeft.<span class="property">start</span> - sliceRight.<span class="property">start</span>;</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// Select top N slices in content</span></span><br><span class="line">          <span class="keyword">var</span> upperBound = <span class="built_in">parseInt</span>(<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span>.<span class="property">pageSize</span>, <span class="number">10</span>);</span><br><span class="line">          <span class="keyword">if</span> (upperBound &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            slicesOfContent = slicesOfContent.<span class="title function_">slice</span>(<span class="number">0</span>, upperBound);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> resultItem = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">          resultItem += <span class="string">&#x27;&lt;div class=&quot;#search-hits item&quot;&gt;&#x27;</span>;</span><br><span class="line">          <span class="comment">// resultItem += &#x27;&lt;div class=&quot;#search-hits&quot;&gt;&#x27;;</span></span><br><span class="line">          <span class="comment">// resultItem += &#x27;&lt;ol class=&quot;item&quot;&gt;&#x27;</span></span><br><span class="line">          resultItem += <span class="string">&#x27;&lt;li&gt;&#x27;</span></span><br><span class="line">          <span class="comment">// resultItem += &#x27;&lt;li&gt;&#x27;;</span></span><br><span class="line">          <span class="keyword">var</span> cats = categories !== <span class="literal">undefined</span> ? <span class="string">&#x27;&lt;span&gt;&#x27;</span> + categories.<span class="title function_">join</span>(<span class="string">&#x27;&lt;i class=&quot;ic i-angle-right&quot;&gt;&lt;/i&gt;&#x27;</span>) + <span class="string">&#x27;&lt;/span&gt;&#x27;</span> : <span class="string">&#x27;&lt;span&gt;No categories&lt;/span&gt;&#x27;</span>;</span><br><span class="line">          resultItem += <span class="string">&#x27;&lt;a href=&quot;&#x27;</span>+url+<span class="string">&#x27;&quot;&gt;&#x27;</span> + cats;</span><br><span class="line">          <span class="keyword">if</span> (slicesOfTitle.<span class="property">length</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// resultItem += &#x27;&lt;li&gt;&lt;a href=&quot;&#x27;+url&#125;&quot;&gt;&#x27;+highlightKeyword(title, slicesOfTitle[0])&#125;&lt;/a&gt;&#x27;;</span></span><br><span class="line">            resultItem += <span class="string">&#x27;&lt;b&gt;&#x27;</span>+<span class="title function_">highlightKeyword</span>(title, slicesOfTitle[<span class="number">0</span>])+<span class="string">&#x27;&lt;/b&gt;&lt;br&gt;&#x27;</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// resultItem += &#x27;&lt;li&gt;&lt;a href=&quot;&#x27;+url&#125;&quot;&gt;&#x27;+title&#125;&lt;/a&gt;&#x27;;</span></span><br><span class="line">            resultItem += <span class="string">&#x27;&lt;b&gt;&#x27;</span>+title+<span class="string">&#x27;&lt;/b&gt;&lt;br&gt;&#x27;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">          slicesOfContent.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">slice</span>)  &#123;</span><br><span class="line">            <span class="keyword">return</span> resultItem += <span class="string">&#x27;&lt;li class=&quot;#search-hits subitem&quot;&gt;&#x27;</span>+<span class="title function_">highlightKeyword</span>(content, slice)+<span class="string">&#x27; ...&lt;/li&gt;&#x27;</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="comment">// resultItem += &#x27;&lt;/li&gt;&#x27;;</span></span><br><span class="line">          resultItem += <span class="string">&#x27;&lt;/a&gt;&#x27;</span>;</span><br><span class="line">          resultItem += <span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">          <span class="comment">// resultItem += &#x27;&lt;/ol&gt;&#x27;;</span></span><br><span class="line">          resultItem += <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">          resultItems.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">item</span>: resultItem,</span><br><span class="line">            id  : resultItems.<span class="property">length</span>,</span><br><span class="line">            <span class="attr">hitCount</span>:hitCount,</span><br><span class="line">            <span class="attr">searchTextCount</span>:searchTextCount</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (keywords.<span class="property">length</span> === <span class="number">1</span> &amp;&amp; keywords[<span class="number">0</span>] === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">      resultContent.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;div id=&quot;no-result&quot;&gt;&lt;i&gt;&lt;/i&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (resultItems.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      resultContent.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;div id=&quot;no-result&quot;&gt;&lt;i&gt;&lt;/i&gt;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resultItems.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">resultLeft, resultRight</span>)  &#123;</span><br><span class="line">        <span class="keyword">if</span> (resultLeft.<span class="property">searchTextCount</span> !== resultRight.<span class="property">searchTextCount</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> resultRight.<span class="property">searchTextCount</span> - resultLeft.<span class="property">searchTextCount</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (resultLeft.<span class="property">hitCount</span> !== resultRight.<span class="property">hitCount</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> resultRight.<span class="property">hitCount</span> - resultLeft.<span class="property">hitCount</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultRight.<span class="property">id</span> - resultLeft.<span class="property">id</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Do pagination</span></span><br><span class="line">    total_pages = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(resultItems.<span class="property">length</span> / pageSize);</span><br><span class="line">    <span class="title function_">pagination</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> fetchData = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="variable constant_">CONFIG</span>.<span class="property">root</span> + searchPath)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;<span class="keyword">return</span> response.<span class="title function_">text</span>()&#125; )</span><br><span class="line">      .<span class="title function_">then</span>( <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">        <span class="comment">// Get the contents from search data</span></span><br><span class="line">        isFetched = <span class="literal">true</span>;</span><br><span class="line">        datas = isXml ? [<span class="keyword">new</span> <span class="title class_">DOMParser</span>().<span class="title function_">parseFromString</span>(res, <span class="string">&#x27;text/xml&#x27;</span>).<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;entry&#x27;</span>)].<span class="title function_">map</span>( <span class="keyword">function</span>(<span class="params">element</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            title  : element.<span class="title function_">querySelector</span>(<span class="string">&#x27;title&#x27;</span>).<span class="property">textContent</span>,</span><br><span class="line">            <span class="attr">content</span>: element.<span class="title function_">querySelector</span>(<span class="string">&#x27;content&#x27;</span>).<span class="property">textContent</span>,</span><br><span class="line">            url    : element.<span class="title function_">querySelector</span>(<span class="string">&#x27;url&#x27;</span>).<span class="property">textContent</span></span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;) : <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res);</span><br><span class="line">        <span class="comment">// Only match articles with not empty titles</span></span><br><span class="line">        datas = datas.<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;<span class="keyword">return</span> data.<span class="property">title</span>&#125; ).<span class="title function_">map</span>( <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">          data.<span class="property">title</span> = data.<span class="property">title</span>.<span class="title function_">trim</span>();</span><br><span class="line">          data.<span class="property">content</span> = data.<span class="property">content</span> ? data.<span class="property">content</span>.<span class="title function_">trim</span>().<span class="title function_">replace</span>(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">&#x27;&#x27;</span>) : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">          data.<span class="property">url</span> = <span class="built_in">decodeURIComponent</span>(data.<span class="property">url</span>).<span class="title function_">replace</span>(<span class="regexp">/\/&#123;2,&#125;/g</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">          <span class="keyword">return</span> data;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// Remove loading animation</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;search-hits&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;i&gt;&lt;/i&gt;&#x27;</span>;</span><br><span class="line">        <span class="title function_">inputEventFunction</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span>.<span class="property">preload</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fetch data.&quot;</span>);</span><br><span class="line">    <span class="title function_">fetchData</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span>.<span class="property">trigger</span> === <span class="string">&#x27;auto&#x27;</span>) &#123;</span><br><span class="line">    input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, inputEventFunction);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.search-icon&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, inputEventFunction);</span><br><span class="line">    input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keypress&#x27;</span>,<span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&#x27;Enter&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">inputEventFunction</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle and trigger popup window</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.popup-trigger&#x27;</span>).<span class="title function_">forEach</span>( <span class="keyword">function</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)  &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.search-pop-overlay&#x27;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;search-active&#x27;</span>);</span><br><span class="line">      input.<span class="title function_">focus</span>();</span><br><span class="line">      <span class="keyword">if</span> (!isFetched) <span class="title function_">fetchData</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Handle and trigger popup window</span></span><br><span class="line">  $.<span class="title function_">each</span>(<span class="string">&#x27;.search&#x27;</span>, <span class="keyword">function</span>(<span class="params">element</span>) &#123;</span><br><span class="line">    element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">      <span class="title function_">transition</span>(siteSearch, <span class="string">&#x27;shrinkIn&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">          $(<span class="string">&#x27;.search-input&#x27;</span>).<span class="title function_">focus</span>();</span><br><span class="line">        &#125;) <span class="comment">// transition.shrinkIn</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Monitor main search box</span></span><br><span class="line">  <span class="keyword">const</span> onPopupClose = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="title function_">transition</span>(siteSearch, <span class="number">0</span>); <span class="comment">// &quot;transition.shrinkOut&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  siteSearch.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">target</span> === siteSearch) &#123;</span><br><span class="line">      <span class="title function_">onPopupClose</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  $(<span class="string">&#x27;.close-btn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, onPopupClose);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:success&#x27;</span>, onPopupClose);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&#x27;Escape&#x27;</span>) &#123;</span><br><span class="line">      <span class="title function_">onPopupClose</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹-script-js"><a href="#ä¿®æ”¹-script-js" class="headerlink" title="ä¿®æ”¹ script.js"></a>ä¿®æ”¹ script.js</h4><p>shoka&#x2F;scripts&#x2F;generaters&#x2F;script.js ä¸­ä¸»è¦æ˜¯è¯»å–é…ç½®,æ‰¾åˆ°config.algoliaçš„é…ç½®ï¼Œå¤§æ¦‚åœ¨45è¡Œï¼š<img src="https://img2.imgtp.com/2024/02/07/UtqNiQ90.png"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">...........  <span class="comment">// çœç•¥è‹¥å¹²ä»£ç </span></span><br><span class="line"><span class="keyword">if</span>(config.<span class="property">algolia</span>) &#123;</span><br><span class="line">    siteConfig.<span class="property">search</span> = &#123;</span><br><span class="line">      appID    : config.<span class="property">algolia</span>.<span class="property">appId</span>,</span><br><span class="line">      apiKey   : config.<span class="property">algolia</span>.<span class="property">apiKey</span>,</span><br><span class="line">      <span class="attr">indexName</span>: config.<span class="property">algolia</span>.<span class="property">indexName</span>,</span><br><span class="line">      hits     : theme.<span class="property">search</span>.<span class="property">hits</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä¸ºéœ€è¦æ·»åŠ çš„ä»£ç </span></span><br><span class="line"><span class="keyword">if</span>(config.<span class="property">search</span>) &#123;</span><br><span class="line">    siteConfig.<span class="property">localSearch</span> = &#123;</span><br><span class="line">      <span class="attr">enable</span>: config.<span class="property">search</span>.<span class="property">enable</span>,</span><br><span class="line">      <span class="attr">path</span>: config.<span class="property">search</span>.<span class="property">path</span>,</span><br><span class="line">      <span class="attr">field</span>: config.<span class="property">search</span>.<span class="property">field</span>,</span><br><span class="line">      <span class="attr">format</span>: config.<span class="property">search</span>.<span class="property">format</span>,</span><br><span class="line">      <span class="attr">limit</span>: config.<span class="property">search</span>.<span class="property">limit</span>,</span><br><span class="line">      <span class="attr">content</span>: config.<span class="property">search</span>.<span class="property">content</span>,</span><br><span class="line">      <span class="attr">unescape</span>: config.<span class="property">search</span>.<span class="property">unescape</span>,</span><br><span class="line">      <span class="attr">preload</span>:  config.<span class="property">search</span>.<span class="property">preload</span>,</span><br><span class="line">      <span class="attr">trigger</span>: config.<span class="property">search</span>.<span class="property">trigger</span>,</span><br><span class="line">      <span class="attr">pageSize</span>: config.<span class="property">search</span>.<span class="property">pageSize</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å…¶å®æœ‰äº†è¿™æ¡å‘½ä»¤å°±å¯ä»¥æŠŠpage.jsé‡Œçš„const algoliaSearchçš„éƒ¨åˆ†ç»™åˆ äº†â€¦å å†…å­˜qwq</p><h4 id="ä¿®æ”¹pjax-js"><a href="#ä¿®æ”¹pjax-js" class="headerlink" title="ä¿®æ”¹pjax.js"></a>ä¿®æ”¹pjax.js</h4><p>shoka&#x2F;source&#x2F;js&#x2F;_app&#x2F;pjax.js ä¸­æ˜¯å¯åŠ¨æœç´¢åŠŸèƒ½çš„éƒ¨åˆ†ï¼Œè¿™é‡Œåœ¨ä¸¤ä¸ªé…ç½®éƒ½æœ‰çš„æƒ…å†µä¸‹é»˜è®¤ä½¿ç”¨æœ¬åœ°æœç´¢è€Œä¸æ˜¯ Algoliaã€‚ä¿®æ”¹ä»£ç ä½ç½®å¤§çº¦åœ¨125è¡Œä½ç½®æˆ–è€…ç›´æ¥æœç´ algoliaSearch(pjax)å°†å®ƒåˆ æ‰å¹¶æ›¿æ¢æˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable constant_">CONFIG</span>.<span class="property">localSearch</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="title function_">localSearch</span>(pjax)</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable constant_">CONFIG</span>.<span class="property">search</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="title function_">algoliaSearch</span>(pjax)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ é…ç½®"><a href="#æ·»åŠ é…ç½®" class="headerlink" title="æ·»åŠ é…ç½®"></a>æ·»åŠ é…ç½®</h4><p> æœ€ååœ¨ hexo é…ç½®ï¼ˆæœ€å¤–å±‚çš„ _config.yml ï¼‰ä¸­æ·»åŠ  search é…ç½®ï¼Œå°±å¤§åŠŸå‘Šæˆäº†</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.json</span> <span class="comment"># search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">true</span>  </span><br><span class="line">  <span class="attr">preload:</span>  <span class="literal">true</span>  </span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">&quot;auto&quot;</span> </span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°è¿è¡Œå³å¯</p><h2 id="â…¦ã€æ·»åŠ åšå®¢è¯„è®ºæ¨¡å—"><a href="#â…¦ã€æ·»åŠ åšå®¢è¯„è®ºæ¨¡å—" class="headerlink" title="â…¦ã€æ·»åŠ åšå®¢è¯„è®ºæ¨¡å—"></a>â…¦ã€æ·»åŠ åšå®¢è¯„è®ºæ¨¡å—</h2><p>åŸæ–‡é“¾æ¥ï¼šæ— åç«¯è¯„è®ºç³»ç»Ÿvalineçš„é…ç½®å‚è€ƒï¼š<a href="https://valine.js.org/quickstart.html">https://valine.js.org/quickstart.html</a></p><p>ç™»å½•leancloudï¼š<a href="https://www.leancloud.cn/">LeanCloud</a>ï¼Œè¿›å…¥åéœ€å®Œæˆå®åè®¤è¯å’Œé‚®ç®±è®¤è¯æ‰å¯ä½¿ç”¨</p><h3 id="è·å–APP-ID-å’Œ-APP-Key"><a href="#è·å–APP-ID-å’Œ-APP-Key" class="headerlink" title="è·å–APP ID å’Œ APP Key"></a>è·å–APP ID å’Œ APP Key</h3><p>è¿›å…¥<a href="https://leancloud.cn/dashboard/applist.html#/apps">æ§åˆ¶å°</a>åç‚¹å‡»å·¦ä¸‹è§’<a href="https://leancloud.cn/dashboard/applist.html#/newapp">åˆ›å»ºåº”ç”¨</a>ï¼š</p><p><img src="https://i.loli.net/2019/06/21/5d0c995c86fac81746.jpg" alt="img"></p><p>åº”ç”¨åˆ›å»ºå¥½ä»¥åï¼Œè¿›å…¥åˆšåˆšåˆ›å»ºçš„åº”ç”¨ï¼Œé€‰æ‹©å·¦ä¸‹è§’çš„<code>è®¾ç½®</code>&gt;<code>åº”ç”¨Key</code>ï¼Œç„¶åå°±èƒ½çœ‹åˆ°ä½ çš„<code>APP ID</code>å’Œ<code>APP Key</code>äº†ï¼š</p><p><img src="https://i.loli.net/2019/06/21/5d0c997a60baa24436.jpg" alt="img"></p><h3 id="å®‰å…¨åŸŸå"><a href="#å®‰å…¨åŸŸå" class="headerlink" title="å®‰å…¨åŸŸå"></a>å®‰å…¨åŸŸå</h3><p>ä¸ºäº†ä½ çš„æ•°æ®å®‰å…¨ï¼Œè¯·è®¾ç½®è‡ªå·±çš„<code>å®‰å…¨åŸŸå</code>ï¼š</p><p><img src="https://i.loli.net/2019/06/21/5d0c995bddd4f99219.jpg" alt="è®¾ç½®å®‰å…¨åŸŸå"></p><p>æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹<a href="https://valine.js.org/configuration.html">é…ç½®é¡¹</a>ã€‚</p><h3 id="é…ç½®-config-yml"><a href="#é…ç½®-config-yml" class="headerlink" title="é…ç½®_config.yml"></a>é…ç½®_config.yml</h3><p>åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="comment">#Your_appId</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="comment">#Your_appkey</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">ãƒ½(â—‹Â´âˆ€`)ï¾‰â™ª</span> <span class="comment"># Comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mp</span> <span class="comment"># Gravatar style : mp, identicon, monsterid, wavatar, robohash, retro</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># Pagination size</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-CN</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">true</span> <span class="comment"># æ–‡ç« è®¿é—®é‡ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">NoRecordIP:</span> <span class="literal">false</span> <span class="comment"># ä¸è®°å½• IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span></span><br><span class="line">  <span class="attr">powerMode:</span> <span class="literal">true</span> <span class="comment"># é»˜è®¤æ‰“å¼€è¯„è®ºæ¡†è¾“å…¥ç‰¹æ•ˆ</span></span><br><span class="line">  <span class="attr">tagMeta:</span></span><br><span class="line">    <span class="attr">visitor:</span> <span class="string">æ–°æœ‹å‹</span></span><br><span class="line">    <span class="attr">master:</span> <span class="string">ä¸»äºº</span></span><br><span class="line">    <span class="attr">friend:</span> <span class="string">å°ä¼™ä¼´</span></span><br><span class="line">    <span class="attr">investor:</span> <span class="string">é‡‘ä¸»ç²‘ç²‘</span></span><br><span class="line">  <span class="attr">tagColor:</span></span><br><span class="line">    <span class="attr">master:</span> <span class="string">&quot;var(--color-orange)&quot;</span></span><br><span class="line">    <span class="attr">friend:</span> <span class="string">&quot;var(--color-aqua)&quot;</span></span><br><span class="line">    <span class="attr">investor:</span> <span class="string">&quot;var(--color-pink)&quot;</span></span><br><span class="line">  <span class="attr">tagMember:</span></span><br><span class="line">    <span class="attr">master:</span></span><br><span class="line">      <span class="comment"># - hash of master@email.com</span></span><br><span class="line">      <span class="comment"># - hash of master2@email.com</span></span><br><span class="line">    <span class="attr">friend:</span></span><br><span class="line">      <span class="comment"># - hash of friend@email.com</span></span><br><span class="line">      <span class="comment"># - hash of friend2@email.com</span></span><br><span class="line">    <span class="attr">investor:</span></span><br><span class="line">      <span class="comment"># - hash of investor1@email.com</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>tag æ ‡ç­¾æ˜¾ç¤ºåœ¨è¯„è®ºè€…åå­—çš„åé¢ï¼Œé»˜è®¤æ˜¯ tagMeta.visitor å¯¹åº”çš„å€¼ã€‚ åœ¨ tagMeta å’Œ tagColor ä¸­ï¼Œé™¤äº† visitor è¿™ä¸ª key ä¸èƒ½ä¿®æ”¹å¤–ï¼Œå…¶ä»– key éƒ½å¯ä»¥æ¢ä¸€æ¢ï¼Œä½†éœ€è¦ä¿è¯ä¸€è‡´æ€§ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tagMeta:</span></span><br><span class="line">    <span class="attr">visitor:</span> <span class="string">æ¸¸å®¢</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="string">ç®¡ç†å‘˜</span></span><br><span class="line">    <span class="attr">waifu:</span> <span class="string">æˆ‘è€å©†</span></span><br><span class="line">  <span class="attr">tagColor:</span></span><br><span class="line">    <span class="attr">visitor:</span> <span class="string">&quot;#855194&quot;</span></span><br><span class="line">    <span class="attr">admin:</span> <span class="string">&quot;#a77c59&quot;</span></span><br><span class="line">    <span class="attr">waifu:</span> <span class="string">&quot;#ed6ea0&quot;</span></span><br><span class="line">  <span class="attr">tagMember:</span></span><br><span class="line">    <span class="attr">admin:</span></span><br><span class="line">      <span class="comment"># - hash of admin@email.com</span></span><br><span class="line">    <span class="attr">waifu:</span></span><br><span class="line">      <span class="comment"># - hash of waifu@email.com</span></span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ç«  Front Matter ä¸­ä¹Ÿå¯ä»¥é…ç½®ä¸Šè¿°å‚æ•°ï¼Œè®¿é—®è¯¥æ–‡ç« é¡µé¢æ—¶ï¼Œå°†è¦†ç›–å…¨å±€é…ç½®ã€‚ å°¤å…¶å¯ä»¥ç”¨æ¥é…ç½®ä¸€ä¸ªç‰¹æ®Šçš„ placeholderã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">&quot;ç‚¹å‡»è¯„è®ºæœ¬æ–‡~&quot;</span></span><br></pre></td></tr></table></figure><p>è¯„è®ºé€šçŸ¥ä¸ç®¡ç†å·¥å…·å»ºè®®ä½¿ç”¨è¿™ä¸ª Valine-Adminã€‚ æ³¨æ„ SITE_URL éœ€è¦ä»¥ &#x2F; ç»“å°¾ã€‚ å¦‚æœæŸä¸€ç¯‡æ–‡ç« éœ€è¦å…³é—­è¯„è®ºåŠŸèƒ½ï¼Œåˆ™åœ¨æ–‡ç«  Front Matter ä¸­é…ç½®ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">title: xxx</span><br><span class="line">comment: false</span><br></pre></td></tr></table></figure><p>æ›´å¤šé…ç½®è¯·è·³è½¬åŸæ–‡ï¼š<a href="https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/config/">Step.2 åŸºæœ¬é…ç½® - Theme Shoka Documentation - äºŒè¿›åˆ¶æ‚è°ˆ - è®¡ç®—æœºç§‘å­¦ | Yume Shoka &#x3D; å„ªèŒåˆè¯ &#x3D; æœ‰å¤¢æ›¸æ¶ (lostyu.me)</a></p><h2 id="â…§ã€åŸŸåè§£ægithub-page"><a href="#â…§ã€åŸŸåè§£ægithub-page" class="headerlink" title="â…§ã€åŸŸåè§£ægithub page"></a>â…§ã€åŸŸåè§£ægithub page</h2><blockquote><ol><li>ä¹°åŸŸå âœ”</li><li>åŸŸåå¤‡æ¡ˆ âœ”</li><li>è§£æåŸŸå è§ä¸‹</li><li>åˆ°github pageè®¾ç½®è‡ªå®šä¹‰åŸŸå è§ä¸‹</li></ol></blockquote><p><strong>ç¬¬ä¸‰æ­¥ï¼ŒåŸŸåè§£æ</strong>ï¼šè®°å½•ç±»å‹CNAMEï¼Œè®°å½•å€¼å†™ï¼šä½ çš„githubå.github.io</p><p><img src="https://image.dabing.cool/image/1656126371608-7c89ca76-dddd-46a4-a6d5-8a1843af2388.png"></p><p><strong>ç¬¬å››æ­¥</strong>ï¼šåˆ°githubæ‰¾åˆ°<code>ä½ çš„githubå.github.io</code>ä»“åº“ï¼Œsettingï¼Œæ‰¾åˆ°github pagesï¼Œæ·»åŠ ä¸Šä½ çš„åŸŸåå³å¯ã€‚</p><p>ç­‰ä¸ªåå‡ åˆ†é’Ÿå°±å»è®¿é—®ä¸‹ä½ çš„åšå®¢çœ‹çœ‹å’¯ã€‚æˆ‘çš„ <a href="https://blog.dabing.cool/">blog.dabing.cool</a></p><p><img src="https://image.dabing.cool/image/1656126177215-71010ed0-7373-4947-806a-fcefe95094ea.png"></p><h2 id="â…¨ã€ä½¿ç”¨Github-Actionè‡ªåŠ¨éƒ¨ç½²hexoåˆ°GitHub-pages"><a href="#â…¨ã€ä½¿ç”¨Github-Actionè‡ªåŠ¨éƒ¨ç½²hexoåˆ°GitHub-pages" class="headerlink" title="â…¨ã€ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²hexoåˆ°GitHub pages"></a>â…¨ã€ä½¿ç”¨Github Actionè‡ªåŠ¨éƒ¨ç½²hexoåˆ°GitHub pages</h2><p>è¿™é‡Œé»˜è®¤ä½ æŠŠä¸Šé¢çš„éƒ½åšå¥½äº†~</p><blockquote><p>1ã€githubåˆ›å»ºä¸€ä¸ªç§äººä»“åº“ï¼Œç”¨äºå­˜æ”¾hexoçš„æºä»£ç  â€“ é…ç½®ç§é’¥</p><p>2ã€githubä¸Šçš„youname.github.ioæ˜¯å­˜æ”¾hexoçš„é™æ€ç½‘é¡µæ–‡ä»¶ â€“ é…ç½®å…¬é’¥</p><p>3ã€é…ç½®å·¥ä½œæµï¼š.github&#x2F;workflows&#x2F;deploy.yml</p></blockquote><p>æˆ‘è¸©å¤ªå¤šå‘äº†ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªåšï¼š<a href="https://www.bilibili.com/read/cv10016062/">åˆ©ç”¨GitHub Actions è‡ªåŠ¨éƒ¨ç½² Hexoåšå®¢ å…¨è‡ªåŠ¨è¿è¡Œ</a></p><p>æˆ‘çš„é…ç½®æ–‡ä»¶è¿™é‡Œè´´ä¸€ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Action çš„åå­—</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">Auto</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="comment"># è§¦å‘æ¡ä»¶1ï¼šmain åˆ†æ”¯æ”¶åˆ° push åæ‰§è¡Œä»»åŠ¡ã€‚</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="comment"># è§¦å‘æ¡ä»¶2ï¼šæ‰‹åŠ¨æŒ‰é’®</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œæ”¾ç¯å¢ƒå˜é‡,éœ€è¦æ›¿æ¢æˆä½ è‡ªå·±çš„</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="comment"># Hexo ç¼–è¯‘åä½¿ç”¨æ­¤ git ç”¨æˆ·éƒ¨ç½²åˆ° github ä»“åº“</span></span><br><span class="line">  <span class="attr">GIT_USER:</span> <span class="string">dabing85</span></span><br><span class="line">  <span class="comment"># Hexo ç¼–è¯‘åä½¿ç”¨æ­¤ git é‚®ç®±éƒ¨ç½²åˆ° github ä»“åº“</span></span><br><span class="line">  <span class="attr">GIT_EMAIL:</span> <span class="number">2261617090</span><span class="string">@qq.com</span></span><br><span class="line">  <span class="comment"># Hexo ç¼–è¯‘åè¦éƒ¨ç½²çš„ github ä»“åº“</span></span><br><span class="line">  <span class="attr">GIT_DEPLOY_REPO:</span> <span class="string">dabing85/dabing85.github.io</span></span><br><span class="line">  <span class="comment"># Hexo ç¼–è¯‘åè¦éƒ¨ç½²åˆ°çš„åˆ†æ”¯</span></span><br><span class="line">  <span class="attr">GIT_DEPLOY_BRANCH:</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  # Hexo ç¼–è¯‘åä½¿ç”¨æ­¤ gitee ç”¨æˆ·éƒ¨ç½²åˆ°giteeä»“åº“</span></span><br><span class="line"><span class="comment">#  GITEE_USER: wbsu2003</span></span><br><span class="line"><span class="comment">#  # Hexo ç¼–è¯‘åè¦éƒ¨ç½²çš„ gitee ä»“åº“</span></span><br><span class="line"><span class="comment">#  GITEE_DEPLOY_REPO: wbsu2003/wbsu2003</span></span><br><span class="line"><span class="comment">#  # Hexo ç¼–è¯‘åè¦éƒ¨ç½²åˆ°çš„åˆ†æ”¯</span></span><br><span class="line"><span class="comment">#  GITEE_DEPLOY_BRANCH: master</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€</span></span><br><span class="line">  <span class="attr">GIT_SOURCE_REPO:</span> <span class="string">git@github.com:dabing85/dabing85.github.io.git</span></span><br><span class="line">  <span class="comment"># æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€</span></span><br><span class="line"><span class="comment">#  GITEE_DESTINATION_REPO: git@gitee.com:wbsu2003/wbsu2003.git</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Build</span> <span class="string">on</span> <span class="string">node</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node_version</span> <span class="string">&#125;&#125;</span> <span class="string">and</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.os</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event.repository.owner.id</span> <span class="string">==</span> <span class="string">github.event.sender.id</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">os:</span> [<span class="string">ubuntu-18.04</span>]</span><br><span class="line">        <span class="attr">node_version:</span> [<span class="number">12.</span><span class="string">x</span>]</span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">deploy</span> <span class="string">repo</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">repository:</span> <span class="string">$&#123;&#123;</span> <span class="string">env.GIT_DEPLOY_REPO</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">ref:</span> <span class="string">$&#123;&#123;</span> <span class="string">env.GIT_DEPLOY_BRANCH</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">.deploy_git</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Use</span> <span class="string">Node.js</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node_version</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.node_version</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Configuration</span> <span class="string">environment</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">HEXO_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;secrets.HEXO_DEPLOY_KEY&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span></span><br><span class="line"><span class="string">          mkdir -p ~/.ssh/</span></span><br><span class="line"><span class="string">          echo &quot;$HEXO_DEPLOY_KEY&quot; &gt; ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          chmod 600 ~/.ssh/id_rsa</span></span><br><span class="line"><span class="string">          ssh-keyscan -t rsa github.com &gt;&gt; ~/.ssh/known_hosts</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;$GIT_USER&quot;</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;$GIT_EMAIL&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string"></span>        <span class="comment"># æ ¹æ®ä½ å®‰è£…çš„ç»„ä»¶è¿›è¡Œå®‰è£…</span></span><br><span class="line"><span class="comment">#          npm i hexo-renderer-multi-markdown-it --save</span></span><br><span class="line"><span class="comment">#          npm i hexo-autoprefixer --save</span></span><br><span class="line"><span class="comment">#          npm i  hexo-algolia --save</span></span><br><span class="line"><span class="comment">#          npm i hexo-algoliasearch --save</span></span><br><span class="line"><span class="comment">#          npm i hexo-symbols-count-time --save</span></span><br><span class="line"><span class="comment">#          npm i hexo-feed --save --egacy-peer-deps</span></span><br><span class="line"><span class="comment">#          hexo-deployer-git --save</span></span><br><span class="line">        <span class="comment"># å¤åˆ¶ä¸­æ–‡è¯­è¨€åŒ…ï¼Œè§£å†³èœå•è‹±æ–‡çš„é—®é¢˜</span></span><br><span class="line"><span class="comment">#               cp zh-CN.yml node_modules/hexo-theme-next/languages/</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">hexo</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          hexo clean</span></span><br><span class="line"><span class="string">          hexo deploy</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="comment"># ä»¥ä¸‹ä¸ºå‘å¸ƒåˆ°gitee</span></span><br><span class="line"><span class="comment">#      - name: Sync to Gitee</span></span><br><span class="line"><span class="comment">#        uses: wearerequired/git-mirror-action@master</span></span><br><span class="line"><span class="comment">#        env:</span></span><br><span class="line"><span class="comment">#          # ç›´æ¥ä½¿ç”¨äº† HEXO_DEPLOY_PRI</span></span><br><span class="line"><span class="comment">#          SSH_PRIVATE_KEY: $&#123;&#123; secrets.HEXO_DEPLOY_PRI &#125;&#125;</span></span><br><span class="line"><span class="comment">#        with:</span></span><br><span class="line"><span class="comment">#          # GitHub æºä»“åº“åœ°å€</span></span><br><span class="line"><span class="comment">#          source-repo: $&#123;&#123; env.GIT_SOURCE_REPO &#125;&#125;</span></span><br><span class="line"><span class="comment">#          # Gitee ç›®æ ‡ä»“åº“åœ°å€</span></span><br><span class="line"><span class="comment">#          destination-repo: $&#123;&#123; env.GITEE_DESTINATION_REPO &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#      - name: Build Gitee Pages</span></span><br><span class="line"><span class="comment">#        uses: yanglbme/gitee-pages-action@main</span></span><br><span class="line"><span class="comment">#        with:</span></span><br><span class="line"><span class="comment">#          # ä½ çš„ Gitee ç”¨æˆ·å</span></span><br><span class="line"><span class="comment">#          gitee-username: $&#123;&#123; env.GITEE_USER &#125;&#125;</span></span><br><span class="line"><span class="comment">#          # æ³¨æ„åœ¨ Settings-&gt;Secrets é…ç½® GITEE_PASSWORD</span></span><br><span class="line"><span class="comment">#          gitee-password: $&#123;&#123; secrets.GITEE_PASSWORD &#125;&#125;</span></span><br><span class="line"><span class="comment">#          # ä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™</span></span><br><span class="line"><span class="comment">#          gitee-repo: $&#123;&#123; env.GITEE_DEPLOY_REPO &#125;&#125;</span></span><br><span class="line"><span class="comment">#          # è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰</span></span><br><span class="line"><span class="comment">#          branch: $&#123;&#123; env.GITEE_DEPLOY_BRANCH &#125;&#125;</span></span><br></pre></td></tr></table></figure><p>è¯„è®ºé‚®ç®±æé†’åŠŸèƒ½ï¼š<a href="https://blog.dabing.cool/hexo/Valine-Admin/">ä½¿ç”¨Valine-Adminå®ç°è¯„è®ºé‚®ä»¶æé†’ - Hexo | Dabing &#x3D; &#x3D; ç¬”è®°ç©ºé—´</a></p><h2 id="â…©ã€ä¸€äº›å‘ï¼ˆä¸å…¨ï¼‰"><a href="#â…©ã€ä¸€äº›å‘ï¼ˆä¸å…¨ï¼‰" class="headerlink" title="â…©ã€ä¸€äº›å‘ï¼ˆä¸å…¨ï¼‰"></a>â…©ã€ä¸€äº›å‘ï¼ˆä¸å…¨ï¼‰</h2><p>é‡åˆ°çš„å‘ä¹Ÿæ²¡å…¨å¡«å¹³ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ä¸€äº›å‘ï¼š</p><ol><li><strong>é—®é¢˜ï¼š Hexo ä½¿ç”¨ Github Actions è‡ªåŠ¨å‘å¸ƒè‡³ Github Pages æ—¶,ç”Ÿæˆçš„ html é¡µé¢ç©ºç™½,æ²¡æœ‰css&#x2F;jsç­‰æ–‡ä»¶ã€‚</strong></li></ol><p><strong>åŸå› :</strong> ç”±äºä¸»é¢˜æ˜¯ git clone ä¸‹æ¥çš„,ä¸»é¢˜ç›®å½•ä¸‹ç”Ÿæˆäº† .git ç›®å½•,å¯¼è‡´å’Œ hexo æ ¹ç›®å½•ä¸‹ .git å†²çªäº†,commit æ—¶æ²¡æœ‰æŠŠä¸»é¢˜ push ä¸Šå»å¯¼è‡´çš„ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong> åˆ æ‰ä¸»é¢˜ä¸‹çš„.gitæ–‡ä»¶å¤¹ï¼Œé‡æ–°æäº¤ï¼Œç›®çš„æ˜¯æŠŠnextä¸»é¢˜æ–‡ä»¶å¤¹æäº¤ä¸Šå»ï¼ˆåˆ æ‰.gitæ–‡ä»¶å¤¹ågit commitä¾ç„¶æ²¡æœ‰æäº¤ä¸Šï¼Œéœ€è¦æŠŠnextæ–‡ä»¶å¤¹å‰ªåˆ‡å‡ºæ¥ågit add&amp;&amp;git commit &amp;&amp;git pushåï¼Œå†æŠŠnextæ–‡ä»¶å¤¹æ‹·è´å›æ¥ï¼Œå†git add&amp;&amp;git commit &amp;&amp;git pushå°±å¯ä»¥æäº¤æˆåŠŸäº†ï¼‰</p><p>æ³¨ï¼šè¿™é‡Œå¦‚æœç”¨ideaçš„å¯è§†åŒ–æŒ‰é”®ä¸è¡Œï¼ˆåæ­£æˆ‘çš„ä¸è¡Œï¼‰ã€‚å°±åœ¨ideaç»ˆç«¯æ‰“å‘½ä»¤ã€‚æŒ‰ç€ä¸Šé¢çš„æ¥å°±è¡Œã€‚æˆ‘è¿™é‡Œåšä¸€ä¸‹è®°å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git status  <span class="comment"># æŸ¥çœ‹æœ‰æ²¡æœ‰æœªæ·»åŠ çš„æ–‡ä»¶å¤¹ï¼Œ</span></span><br><span class="line">git add themes/shoka/   <span class="comment"># shokaæ˜¯æˆ‘çš„ä¸»é¢˜</span></span><br><span class="line">git commit -m <span class="string">&quot;shokaä¸»é¢˜å†…å®¹&quot;</span>  </span><br><span class="line">git remote add origin git@github.com:dabing85/hexoBlog.git  <span class="comment"># æˆ‘æ˜¯é‡æ–°æ­å»ºçš„ï¼Œè¿™é‡Œæ‰å…³è”è¿œç¨‹ä»“åº“ï¼Œoriginæ˜¯è¿œç¨‹ä»“åº“åå­—</span></span><br><span class="line">git branch -M main</span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure><p>2.<strong>é—®é¢˜ï¼š</strong> å®‰è£…æ’ä»¶ä¾èµ–å¤±è´¥ï¼Œè¯´å•¥è§£æå¤±è´¥ï¼Œ<strong>npm ERR! code ERESOLVE</strong></p><p><img src="https://img-blog.csdnimg.cn/img_convert/377edf796993eabd1149ae971e9d506d.png" alt="img"></p><p><strong>è§£å†³:</strong> åé¢æ·»åŠ  â€“egacy-peer-deps</p><p><strong>å‚è€ƒé“¾æ¥:</strong> <a href="https://blog.csdn.net/m0_51969330/article/details/119186416">https://blog.csdn.net/m0_51969330/article/details/119186416</a></p><ol><li><strong>é—®é¢˜ï¼š</strong><a href="https://stackoverflow.com/questions/49475492/npm-install-error-code-ebadplatform"><strong>npm install error (code EBADPLATFORM)</strong></a> <strong>è¡¨ç¤ºæ²¡æœ‰å¹³å°æ”¯æŒå®‰è£…fsevents</strong></li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/7f107c674b2c2fcc32b8f453f5c06e8f.png" alt="img"></p><p><strong>è§£å†³ï¼š</strong><a href="https://stackoverflow.com/questions/49475492/npm-install-error-code-ebadplatform">npm install error (code EBADPLATFORM)</a></p><p>è¿™é‡Œæˆ‘æ˜¯åªåˆ é™¤äº†package-lock.jsonå°±è¡Œäº†ï¼Œä½†æ˜¯è¿˜æ˜¯åšäº†è­¦å‘Šã€‚</p><ol><li><strong>é—®é¢˜ï¼šè‡ªåŠ¨éƒ¨ç½²åï¼Œgithub pagesä¸Šçš„è‡ªå®šä¹‰åŸŸåä¹Ÿä¼šè¢«æŠ¹æ‰.</strong></li></ol><p><strong>è§£å†³:</strong> <a href="https://blog.csdn.net/fake_hydra/article/details/82414965">https://blog.csdn.net/fake_hydra/article/details/82414965</a></p><p>å³ï¼šåœ¨sourceç›®å½•ä¸‹å»ºä¸€ä¸ªCNAMEæ–‡ä»¶ï¼Œæ²¡æœ‰åç¼€ï¼Œé‡Œé¢å†™ä½ çš„åŸŸåå³å¯ã€‚</p><h2 id="XIã€éƒ¨ç½²åˆ°æœåŠ¡å™¨"><a href="#XIã€éƒ¨ç½²åˆ°æœåŠ¡å™¨" class="headerlink" title="XIã€éƒ¨ç½²åˆ°æœåŠ¡å™¨"></a>XIã€éƒ¨ç½²åˆ°æœåŠ¡å™¨</h2><p>å‚è€ƒé“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_38679881/article/details/122730065">å°†Hexoæ­å»ºåˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Š</a></p><p>æœåŠ¡å™¨ï¼ˆLinuxï¼‰æˆ‘æ˜¯å…¨æŒ‰ç…§ä¸Šé¢çš„åšå®¢æ¥çš„ï¼Œæ²¡å•¥é—®é¢˜ã€‚</p><p>åˆ°å®¢æˆ·ç«¯ï¼ˆWindowsï¼‰æˆ‘æ˜¯æ–°å»ºäº†ä¸€ä¸ªhexoBlogæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯å†…å®¹å…¨éƒ¨å¤åˆ¶ä»¥å‰githubçš„æºç ï¼Œæ‰€ä»¥githubä¸Šçš„è¿˜æ˜¯èµ·æ•ˆçš„ã€‚</p><p>ç›´æ¥å¤åˆ¶æœ‰äº›è¦æ³¨æ„çš„æ˜¯ï¼š</p><ol><li><p>æœ€å¥½åˆ é™¤.gitæ–‡ä»¶ï¼ˆè¿™é‡Œçš„.gitæ˜¯åŸæ¥githubè¿œç¨‹ä»“åº“çš„ï¼‰</p></li><li><p>.ideaæ–‡ä»¶å¤¹çš„å†…å®¹æœ‰äº›æ–‡ä»¶éœ€è¦æ”¹ï¼Œå› ä¸ºé‡Œé¢è®°çš„æ˜¯åŸæ¥é¡¹ç›®çš„æ¨¡å—</p><p>ä¸‹é¢å‡ ä¸ªæ–‡ä»¶å†…å®¹çš„é¡¹ç›®åæ”¹æˆç°åœ¨çš„ï¼Œä¸æ”¾å¿ƒå¯ä»¥æ¯ä¸ªéƒ½çœ‹ä¸€ä¸‹æ›¿æ¢ä¸€ä¸‹ã€‚</p></li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/20da6a02481c63e589afd7f58c1ba5ef.png" alt="image-20220813201936397"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.jianshu.com/p/42453af0853d">GitHub Actionséƒ¨ç½²Hexoå°ç»“</a></p><p><a href="https://blog.csdn.net/wbsu2004/article/details/122661116">ç”¨GitHub Actionsè‡ªåŠ¨éƒ¨ç½²Hexo</a></p><p><a href="https://www.bilibili.com/read/cv10016062/">åˆ©ç”¨GitHub Actions è‡ªåŠ¨éƒ¨ç½² Hexoåšå®¢ å…¨è‡ªåŠ¨è¿è¡Œ</a></p><p><a href="https://blog.csdn.net/qq_38679881/article/details/122730065">å°†Hexoæ­å»ºåˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Š</a></p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä»å…¥é—¨åˆ°å…¥åœŸ</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/git%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</url>
      
        <content type="html"><![CDATA[<p>gitæ˜¯ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼</p><p>ç‰ˆæœ¬æ§åˆ¶ï¼Œå¯ä»¥åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ç”¨äºç®¡ç†æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œç›®å½•æˆ–å·¥ç¨‹ç­‰å†…å®¹çš„ä¿®æ”¹å†å²ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ›´æ”¹å†å²è®°å½•ï¼Œå¤‡ä»½ä»¥ä¾¿æ¢å¤ä»¥å‰çš„ç‰ˆæœ¬çš„è½¯ä»¶å·¥ç¨‹æŠ€æœ¯ï¼Œè€Œgitå°±å¯ä»¥å®Œæˆè¿™äº›ã€‚</p><h2 id="ä¸‰ç§ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•"><a href="#ä¸‰ç§ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•" class="headerlink" title="ä¸‰ç§ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•"></a><strong>ä¸‰ç§ç‰ˆæœ¬æ§åˆ¶æ–¹æ³•</strong></h2><p><strong>1ã€æœ¬åœ°ç‰ˆæœ¬æ§åˆ¶</strong></p><p>è®°å½•æ–‡ä»¶æ¯æ¬¡çš„æ›´æ–°ï¼Œå¯ä»¥å¯¹æ¯ä¸ªç‰ˆæœ¬åšä¸€ä¸ªå¿«ç…§ï¼Œæˆ–æ˜¯è®°å½•è¡¥ä¸æ–‡ä»¶ï¼Œé€‚åˆä¸ªäººç”¨ï¼Œå¦‚RCSã€‚</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830010509130-1770229663.png" alt="img"></p><p><strong>2ã€é›†ä¸­ç‰ˆæœ¬æ§åˆ¶  SVN</strong></p><p>æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼ŒååŒå¼€å‘è€…ä»æœåŠ¡å™¨ä¸ŠåŒæ­¥æ›´æ–°æˆ–ä¸Šä¼ è‡ªå·±çš„ä¿®æ”¹</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830010533011-1732321785.png" alt="img"></p><p>æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®éƒ½å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·çš„æœ¬åœ°åªæœ‰è‡ªå·±ä»¥å‰æ‰€åŒæ­¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸è¿ç½‘çš„è¯ï¼Œç”¨æˆ·å°±çœ‹ä¸åˆ°å†å²ç‰ˆæœ¬ï¼Œä¹Ÿæ— æ³•åˆ‡æ¢ç‰ˆæœ¬éªŒè¯é—®é¢˜ï¼Œæˆ–åœ¨ä¸åŒåˆ†æ”¯å·¥ä½œã€‚è€Œä¸”ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å•ä¸€çš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¾ˆå¤§çš„é£é™©è¿™ä¸ªæœåŠ¡å™¨ä¼šæŸåï¼Œè¿™æ ·å°±ä¼šä¸¢å¤±æ‰€æœ‰çš„æ•°æ®ï¼Œå½“ç„¶å¯ä»¥å®šæœŸå¤‡ä»½ã€‚ä»£è¡¨äº§å“ï¼šSVNã€CVSã€VSS</p><p><strong>3ã€åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ Git</strong></p><p>æ¯ä¸ªäººéƒ½æ‹¥æœ‰å…¨éƒ¨çš„ä»£ç ï¼å®‰å…¨éšæ‚£ï¼</p><p>æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯ä»“åº“å…¨éƒ¨åŒæ­¥åˆ°æœ¬åœ°çš„æ¯ä¸ªç”¨æˆ·ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬åœ°æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬å†å²ï¼Œå¯ä»¥ç¦»çº¿åœ¨æœ¬åœ°æäº¤ï¼Œåªéœ€åœ¨è¿ç½‘æ—¶pushåˆ°ç›¸åº”çš„æœåŠ¡å™¨æˆ–å…¶ä»–ç”¨æˆ·é‚£é‡Œã€‚ç”±äºæ¯ä¸ªç”¨æˆ·é‚£é‡Œä¿å­˜çš„éƒ½æ˜¯æ‰€æœ‰çš„ç‰ˆæœ¬æ•°æ®ï¼Œåªè¦æœ‰ä¸€ä¸ªç”¨æˆ·çš„è®¾å¤‡æ²¡æœ‰é—®é¢˜å°±å¯ä»¥æ¢å¤æ‰€æœ‰çš„æ•°æ®ï¼Œä½†è¿™å¢åŠ äº†æœ¬åœ°å­˜å‚¨ç©ºé—´çš„å ç”¨ã€‚</p><p>ä¸ä¼šå› ä¸ºæœåŠ¡å™¨æŸåæˆ–è€…ç½‘ç»œé—®é¢˜ï¼Œé€ æˆä¸èƒ½å·¥ä½œçš„æƒ…å†µï¼</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830010609343-1838299690.png" alt="img"></p><p>gitå®‰è£…é•œåƒç½‘ç«™ï¼š<a href="https://registry.npmmirror.com/binary.html?path=git-for-windows/">CNPM Binaries Mirror (npmmirror.com)</a></p><p>å®‰è£…å¥½gitåä¼šæœ‰ä¸‰ä¸ªç¨‹åºï¼š</p><p><strong>Git Bashï¼š</strong>Unixä¸Linuxé£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š</p><p><strong>Git CMDï¼š</strong>Windowsé£æ ¼çš„å‘½ä»¤è¡Œ</p><p><strong>Git GUI</strong>ï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤</p><h2 id="å¸¸ç”¨çš„Linuxå‘½ä»¤"><a href="#å¸¸ç”¨çš„Linuxå‘½ä»¤" class="headerlink" title="å¸¸ç”¨çš„Linuxå‘½ä»¤"></a>å¸¸ç”¨çš„Linuxå‘½ä»¤</h2><p>å¹³æ—¶ä¸€å®šè¦å¤šä½¿ç”¨è¿™äº›åŸºç¡€çš„å‘½ä»¤ï¼</p><p>1ï¼‰ã€cd : æ”¹å˜ç›®å½•ã€‚</p><p>2ï¼‰ã€cd . . å›é€€åˆ°ä¸Šä¸€ä¸ªç›®å½•ï¼Œç›´æ¥cdè¿›å…¥é»˜è®¤ç›®å½•</p><p>3ï¼‰ã€pwd : æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚</p><p>4ï¼‰ã€ls(ll):  éƒ½æ˜¯åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåªä¸è¿‡ll(ä¸¤ä¸ªll)åˆ—å‡ºçš„å†…å®¹æ›´ä¸ºè¯¦ç»†ã€‚</p><p>5ï¼‰ã€touch : æ–°å»ºä¸€ä¸ªæ–‡ä»¶ å¦‚ touch index.js å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ã€‚</p><p>6ï¼‰ã€rm:  åˆ é™¤ä¸€ä¸ªæ–‡ä»¶, rm index.js å°±ä¼šæŠŠindex.jsæ–‡ä»¶åˆ é™¤ã€‚</p><p>7ï¼‰ã€mkdir:  æ–°å»ºä¸€ä¸ªç›®å½•,å°±æ˜¯æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</p><p>8ï¼‰ã€rm -r :  åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹, rm -r src åˆ é™¤srcç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf / åˆ‡å‹¿åœ¨Linuxä¸­å°è¯•ï¼åˆ é™¤ç”µè„‘ä¸­å…¨éƒ¨æ–‡ä»¶ï¼</span><br></pre></td></tr></table></figure><p>9ï¼‰ã€mv ç§»åŠ¨æ–‡ä»¶, mv index.html src index.html æ˜¯æˆ‘ä»¬è¦ç§»åŠ¨çš„æ–‡ä»¶, src æ˜¯ç›®æ ‡æ–‡ä»¶å¤¹,å½“ç„¶, è¿™æ ·å†™,å¿…é¡»ä¿è¯æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶å¤¹åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚</p><p>10ï¼‰ã€reset é‡æ–°åˆå§‹åŒ–ç»ˆç«¯&#x2F;æ¸…å±ã€‚</p><p>11ï¼‰ã€clear æ¸…å±ã€‚</p><p>12ï¼‰ã€history æŸ¥çœ‹å‘½ä»¤å†å²ã€‚</p><p>13ï¼‰ã€help å¸®åŠ©ã€‚</p><p>14ï¼‰ã€exit é€€å‡ºã€‚</p><p>15ï¼‰ã€#è¡¨ç¤ºæ³¨é‡Š</p><h2 id="ä¸‰ä¸ªåŒºåŸŸ"><a href="#ä¸‰ä¸ªåŒºåŸŸ" class="headerlink" title="ä¸‰ä¸ªåŒºåŸŸ"></a>ä¸‰ä¸ªåŒºåŸŸ</h2><p>Gitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage&#x2F;Index)ã€èµ„æºåº“(Repositoryæˆ–Git Directory)ã€‚å¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“(Remote Directory)å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830014107578-81459083.png" alt="img"></p><ul><li>Workspaceï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯ä½ å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹</li><li>Index &#x2F; Stageï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯</li><li>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰ä½ æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬</li><li>Remoteï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä½ é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢</li></ul><h2 id="å·¥ä½œæµç¨‹"><a href="#å·¥ä½œæµç¨‹" class="headerlink" title="å·¥ä½œæµç¨‹"></a>å·¥ä½œæµç¨‹</h2><p>gitçš„å·¥ä½œæµç¨‹ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š</p><p>ï¼‘ã€åœ¨å·¥ä½œç›®å½•ä¸­æ·»åŠ ã€ä¿®æ”¹æ–‡ä»¶ï¼›</p><p>ï¼’ã€å°†éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒºåŸŸï¼›</p><p>ï¼“ã€å°†æš‚å­˜åŒºåŸŸçš„æ–‡ä»¶æäº¤åˆ°gitä»“åº“ã€‚</p><p>å› æ­¤ï¼Œgitç®¡ç†çš„æ–‡ä»¶æœ‰ä¸‰ç§çŠ¶æ€ï¼šå·²ä¿®æ”¹ï¼ˆmodifiedï¼‰,å·²æš‚å­˜ï¼ˆstagedï¼‰,å·²æäº¤(committed)</p><p>å·¥ä½œæµç¨‹å›¾ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830014527445-321493806.png" alt="img"></p><p> <strong>æ“ä½œgitä»giteeçš„å¼€æºé¡¹ç›®é‡Œå…‹éš†&#x2F;ä¸‹è½½æ–‡ä»¶</strong></p><p>å…ˆcd ç›®å½•ï¼Œè¿™å°±æ˜¯ä½ è¦ä¸‹è½½æ–‡ä»¶çš„æ–‡ä»¶å¤¹åœ°å€ï¼Œç„¶åè¾“å…¥git clone <a href="https://xxx/">https://xxx</a></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830020258174-2048646358.png" alt="img"></p><p> åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºgitä»£ç åº“ï¼šgit initï¼Œç„¶åæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çš„çŠ¶æ€ï¼šgit status </p><p>ç„¶åå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº:git add .  ï¼Œå†æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çŠ¶æ€å°±å¯ä»¥çœ‹åˆ°æ–°çš„ç»¿è‰²çŠ¶æ€äº†ã€‚</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830021452228-582547864.png" alt="img"></p><p> IDEAé¡¹ç›®ä¸­æœ‰ä¸ª.gitignoreæ–‡ä»¶ï¼Œé‡Œé¢å°±æ˜¯gitæ·»åŠ å‘½ä»¤æ—¶ä¸æ·»åŠ åˆ°åº“é‡Œé¢çš„ä¸œè¥¿ï¼Œå¿½ç•¥çš„å†…å®¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸ºæ³¨é‡Š</span></span><br><span class="line">*.txt        <span class="comment">#å¿½ç•¥æ‰€æœ‰ .txtç»“å°¾çš„æ–‡ä»¶,è¿™æ ·çš„è¯ä¸Šä¼ å°±ä¸ä¼šè¢«é€‰ä¸­ï¼</span></span><br><span class="line">!lib.txt     <span class="comment">#ä½†lib.txté™¤å¤–</span></span><br><span class="line">/temp        <span class="comment">#ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„TODOæ–‡ä»¶,ä¸åŒ…æ‹¬å…¶å®ƒç›®å½•temp</span></span><br><span class="line">build/       <span class="comment">#å¿½ç•¥build/ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</span></span><br><span class="line">doc/*.txt    <span class="comment">#ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬ doc/server/arch.txt</span></span><br></pre></td></tr></table></figure><p>åƒæˆ‘çš„è‹ç©¹å¤–å–ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230830021804060-540686763.png" alt="img"></p><h2 id="ä½¿ç”¨ç äº‘"><a href="#ä½¿ç”¨ç äº‘" class="headerlink" title="ä½¿ç”¨ç äº‘"></a>ä½¿ç”¨ç äº‘</h2><p>github æ˜¯æœ‰å¢™çš„ï¼Œæ¯”è¾ƒæ…¢ï¼Œåœ¨å›½å†…çš„è¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ gitee ï¼Œå…¬å¸ä¸­æœ‰æ—¶å€™ä¼šæ­å»ºè‡ªå·±çš„gitlabæœåŠ¡å™¨ã€‚</p><p>ç™»å½•è¿›å»å®Œå–„ä¸ªäººèµ„æ–™åæ‰¾åˆ°SSHå¯†é’¥ï¼Œåœ¨Cç›˜æ‰“å¼€PCç”¨æˆ·æ–‡ä»¶å¤¹ï¼Œæ–°å»º.sshæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢è¿è¡Œgit bushï¼Œè¾“å…¥ssh-keygen -t rsaï¼Œç„¶åä¸€ç›´å›è½¦ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä½ çš„å¯†ç ã€‚è¿™æ—¶è¿™ä¸ªæ–‡ä»¶å¤¹å°±ç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªå¸¦pubçš„æ—¶å…±æœ‰çš„ï¼Œå¦ä¸€ä¸ªæ˜¯ç§æœ‰çš„ï¼Œå°†pubçš„å¯†é’¥å¤åˆ¶åˆ°åˆšåˆšçš„ç½‘é¡µä¸Š</p><p><strong>æ–°å»ºä»“åº“</strong></p><p>è®¸å¯è¯ï¼šå¼€æºæ˜¯å¦å¯ä»¥éšæ„è½¬è½½ï¼Œå¼€æºä½†æ˜¯ä¸èƒ½å•†ä¸šä½¿ç”¨ï¼Œä¸èƒ½è½¬è½½ï¼Œâ€¦  é™åˆ¶ï¼ï¼Œä¸€èˆ¬é€‰æ‹©GPL 3.0æˆ–2.0</p><p> åˆå§‹åŒ–å¯ä»¥é€‰æ‹©å„ç§è¦æ±‚ï¼Œè·Ÿç€çœ‹å°±è¡Œã€‚</p><h2 id="IDEAé›†æˆgit"><a href="#IDEAé›†æˆgit" class="headerlink" title="IDEAé›†æˆgit"></a><strong>IDEAé›†æˆgit</strong></h2><p>æ·»åŠ è¿œç¨‹çš„gitï¼Œç›´æ¥å°†è¿œç¨‹gité‡Œé¢çš„å…¨éƒ¨æ–‡ä»¶å¤åˆ¶åˆ°æ·»åŠ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ã€‚ç„¶åé¡¹ç›®é‡Œä¼šå‡ºç°çº¢è‰²çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æ²¡æœ‰æäº¤çš„æ–‡ä»¶ï¼Œç‚¹å‡»ä¸Šé¢çš„æäº¤é€‰æ‹©å…¨éƒ¨ï¼Œç„¶åè¾“å…¥äº›å¤‡æ³¨ï¼Œæ¥ç€å°±ç›´æ¥ pushåˆ°è¿œç¨‹ä»“åº“ï¼Œæ ¹æ®æç¤ºæ¥å°±è¡Œï¼Œæˆ–è€…ç›´æ¥åœ¨ç»ˆç«¯æ“ä½œä¹‹å‰å­¦çš„gitå‘½ä»¤ã€‚</p><h2 id="GITåˆ†æ”¯"><a href="#GITåˆ†æ”¯" class="headerlink" title="GITåˆ†æ”¯"></a>GITåˆ†æ”¯</h2><p>åˆ†æ”¯åœ¨GITä¸­ç›¸å¯¹è¾ƒéš¾ï¼Œåˆ†æ”¯å°±æ˜¯ç§‘å¹»ç”µå½±é‡Œé¢çš„å¹³è¡Œå®‡å®™ï¼Œå¦‚æœä¸¤ä¸ªå¹³è¡Œå®‡å®™äº’ä¸å¹²æ‰°ï¼Œé‚£å¯¹ç°åœ¨çš„ä½ ä¹Ÿæ²¡å•¥å½±å“ã€‚ä¸è¿‡ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸¤ä¸ªå¹³è¡Œå®‡å®™åˆå¹¶äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦å¤„ç†ä¸€äº›é—®é¢˜äº†ï¼</p><p> gitåˆ†æ”¯ä¸­å¸¸ç”¨æŒ‡ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯git branch</span><br><span class="line"># åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯git branch -r</span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯git branch [branch-name]</span><br><span class="line"># æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯git checkout -b [branch]</span><br><span class="line"># åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯$ git merge [branch]</span><br><span class="line"># åˆ é™¤åˆ†æ”¯$ git branch -d [branch-name]</span><br><span class="line"># åˆ é™¤è¿œç¨‹åˆ†æ”¯$ git push origin --delete [branch-name]$ git branch -dr [remote/branch]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€å››ã€‘ï¼ˆåª’èµ„ç®¡ç†æ¨¡å—ï¼‰</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E5%9B%9B%E3%80%91%EF%BC%88%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%EF%BC%89/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E5%9B%9B%E3%80%91%EF%BC%88%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>ï¼ï¼ï¼ç§»æ­¥æˆ‘çš„è€åšå®¢ï¼š<a href="https://www.cnblogs.com/hepingan/p/18002463">ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€å››ã€‘ï¼ˆåª’èµ„ç®¡ç†æ¨¡å—ï¼‰ - ä½•å¹³å®‰ - åšå®¢å›­</a>ï¼ï¼ï¼</strong></p><p>å°é¢ä¸ºå•¥è¦ç”¨è‹ç©¹å¤–å–ï¼Œæƒ³çºªå¿µä¸‹ä¸‹ä»¥å‰çš„é¡¹ç›®ï¼Œä¸çŸ¥é“ç°åœ¨è¿˜è·‘å¾—èµ·æ¥ä¸å“ˆå“ˆå“ˆå“ˆ~</p><h1 id="ä¸Šä¼ å›¾ç‰‡"><a href="#ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="ä¸Šä¼ å›¾ç‰‡"></a>ä¸Šä¼ å›¾ç‰‡</h1><p><strong>å¤§éƒ¨åˆ†éƒ½æ˜¯æºæ–‡æ¡£çš„ä¸œè¥¿ï¼Œæ‡’å¾—å†™äº†~</strong></p><p><strong>æµç¨‹ï¼š</strong></p><p>è¯¾ç¨‹å›¾ç‰‡ä¸Šä¼ è‡³åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨è¯¾ç¨‹ä¿¡æ¯ä¸­ä¿å­˜è¯¾ç¨‹å›¾ç‰‡è·¯å¾„ï¼Œå¦‚ä¸‹æµç¨‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309205459875.png" alt="image-20230309205459875"></p><p>1ã€å‰ç«¯è¿›å…¥ä¸Šä¼ å›¾ç‰‡ç•Œé¢</p><p>2ã€ä¸Šä¼ å›¾ç‰‡ï¼Œè¯·æ±‚åª’èµ„ç®¡ç†æœåŠ¡ã€‚</p><p>3ã€åª’èµ„ç®¡ç†æœåŠ¡å°†å›¾ç‰‡æ–‡ä»¶å­˜å‚¨åœ¨MinIOã€‚</p><p>4ã€åª’èµ„ç®¡ç†è®°å½•æ–‡ä»¶ä¿¡æ¯åˆ°æ•°æ®åº“ã€‚</p><p>5ã€ä¿å­˜è¯¾ç¨‹ä¿¡æ¯ï¼Œåœ¨å†…å®¹ç®¡ç†æ•°æ®åº“ä¿å­˜å›¾ç‰‡åœ°å€ã€‚</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309205533505.png" alt="image-20230309205533505"></p><h4 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h4><p>é¦–å…ˆåœ¨minioé…ç½®bucketï¼Œbucketåç§°ä¸ºï¼šmediafilesï¼Œå¹¶è®¾ç½®bucketçš„æƒé™ä¸ºå…¬å¼€ã€‚</p><p>åœ¨nacosé…ç½®ä¸­minioçš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›å…¥media-service-dev.yaml:</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309212926866.png" alt="image-20230309212926866"></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">minio:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">http://localhost:9000</span></span><br><span class="line">  <span class="attr">accessKey:</span> <span class="string">minioadmin</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">minioadmin</span></span><br><span class="line">  <span class="attr">bucket:</span></span><br><span class="line">    <span class="attr">files:</span> <span class="string">mediafiles</span></span><br><span class="line">    <span class="attr">videofiles:</span> <span class="string">video</span></span><br></pre></td></tr></table></figure><p>åœ¨media-serviceå·¥ç¨‹ç¼–å†™minioçš„é…ç½®ç±»ï¼š</p><p>MinIOé…ç½®å±æ€§ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 21:31</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;minio&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinIOProperties</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Minioé…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.minio.MinioClient;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 21:33</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;MinIOProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinIOConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MinIOProperties minIOProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@description</span> åˆå§‹åŒ–MinIOå®¢æˆ·ç«¯,å¹¶ä¸”äº¤ç»™springç®¡ç†</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> io.minio.MinioClient</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@date</span>: 2023/3/9 21:36</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MinioClient <span class="title function_">minioClient</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> MinioClient.builder()</span><br><span class="line">                .endpoint(<span class="string">&quot;http://localhost:9000&quot;</span>)</span><br><span class="line">                .credentials(<span class="string">&quot;minioadmin&quot;</span>, <span class="string">&quot;minioadmin&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¥å£å®šä¹‰"><a href="#æ¥å£å®šä¹‰" class="headerlink" title="æ¥å£å®šä¹‰"></a>æ¥å£å®šä¹‰</h3><p>æ ¹æ®éœ€æ±‚åˆ†æï¼Œä¸‹è¾¹è¿›è¡Œæ¥å£å®šä¹‰ï¼Œæ­¤æ¥å£å®šä¹‰ä¸ºä¸€ä¸ªé€šç”¨çš„ä¸Šä¼ æ–‡ä»¶æ¥å£ï¼Œå¯ä»¥ä¸Šä¼ å›¾ç‰‡æˆ–å…¶å®ƒæ–‡ä»¶ã€‚</p><p>é¦–å…ˆåˆ†ææ¥å£ï¼š</p><p>è¯·æ±‚åœ°å€ï¼š&#x2F;media&#x2F;upload&#x2F;coursefile</p><p>è¯·æ±‚å‚æ•°ï¼š</p><p>Content-Type: multipart&#x2F;form-data;boundary&#x3D;â€¦..</p><p>FormData: filedata&#x3D;??</p><p>å“åº”å‚æ•°ï¼šæ–‡ä»¶ä¿¡æ¯ï¼Œå¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a16da7a132559daf9e1193166b3e7f52&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyId&quot;</span><span class="punctuation">:</span> <span class="number">1232141425</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyName&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;001001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/testbucket/2022/09/12/a16da7a132559daf9e1193166b3e7f52.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a16da7a132559daf9e1193166b3e7f52&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/testbucket/2022/09/12/a16da7a132559daf9e1193166b3e7f52.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timelength&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;createDate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-09-12T21:57:18&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;changeDate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auditStatus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auditMind&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileSize&quot;</span><span class="punctuation">:</span> <span class="number">248329</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨media-modelå®šä¹‰ä¸Šä¼ å“åº”æ¨¡å‹ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.model.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xuecheng.media.model.po.MediaFiles;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¸Šä¼ æ–‡ä»¶å“åº”ç»“æœç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 21:55</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadFileResultDto</span> <span class="keyword">extends</span> <span class="title class_">MediaFiles</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰æ¥å£å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * @param upload     è¡¨å•æ•°æ®</span><br><span class="line">     * @param folder     æ–‡ä»¶å¤¹å-éå¿…é¡»</span><br><span class="line">     * @param objectName æ–‡ä»¶å-éå¿…é¡»</span><br><span class="line">     * @return com.xuecheng.media.model.dto.UploadFileResultDto</span><br><span class="line">     * @description æ–‡ä»¶ä¸Šä¼ </span><br><span class="line">     * @author: woldier</span><br><span class="line">     * @date: 2023/3/9 22:09</span><br><span class="line">     */</span><br><span class="line">    @ApiOperation(&quot;æ–‡ä»¶ä¸Šä¼ &quot;)</span><br><span class="line">    @RequestMapping(value = &quot;/upload/coursefile&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span><br><span class="line">    // å®šä¹‰è¯·æ±‚urlä¸å¯æ¶ˆè´¹çš„æ–‡ä»¶æ“ä½œcontent-typeç±»å‹</span><br><span class="line">    public UploadFileResultDto upload(</span><br><span class="line">            @RequestPart(&quot;filedata&quot;) MultipartFile upload,</span><br><span class="line">            @RequestParam(value = &quot;folder&quot;, required = false) String folder,</span><br><span class="line">            @RequestParam(value = &quot;objectName&quot;, required = false) String objectName) &#123;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒå‡†å¤‡-1"><a href="#ç¯å¢ƒå‡†å¤‡-1" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><p>é¦–å…ˆåœ¨minioé…ç½®bucketï¼Œbucketåç§°ä¸ºï¼šmediafilesï¼Œå¹¶è®¾ç½®bucketçš„æƒé™ä¸ºå…¬å¼€ã€‚</p><p>åœ¨nacosé…ç½®ä¸­minioçš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›å…¥media-service-dev.yaml:</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309212926866.png" alt="image-20230309212926866"></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">minio:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="string">http://localhost:9000</span></span><br><span class="line">  <span class="attr">accessKey:</span> <span class="string">minioadmin</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">minioadmin</span></span><br><span class="line">  <span class="attr">bucket:</span></span><br><span class="line">    <span class="attr">files:</span> <span class="string">mediafiles</span></span><br><span class="line">    <span class="attr">videofiles:</span> <span class="string">video</span></span><br></pre></td></tr></table></figure><p>åœ¨media-serviceå·¥ç¨‹ç¼–å†™minioçš„é…ç½®ç±»ï¼š</p><p>MinIOé…ç½®å±æ€§ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 21:31</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;minio&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinIOProperties</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Minioé…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.minio.MinioClient;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 21:33</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;MinIOProperties.class&#125;)</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinIOConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> MinIOProperties minIOProperties;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@description</span> åˆå§‹åŒ–MinIOå®¢æˆ·ç«¯,å¹¶ä¸”äº¤ç»™springç®¡ç†</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> io.minio.MinioClient</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@date</span>: 2023/3/9 21:36</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MinioClient <span class="title function_">minioClient</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> MinioClient.builder()</span><br><span class="line">                .endpoint(<span class="string">&quot;http://localhost:9000&quot;</span>)</span><br><span class="line">                .credentials(<span class="string">&quot;minioadmin&quot;</span>, <span class="string">&quot;minioadmin&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¥å£å®šä¹‰-1"><a href="#æ¥å£å®šä¹‰-1" class="headerlink" title="æ¥å£å®šä¹‰"></a>æ¥å£å®šä¹‰</h3><p>æ ¹æ®éœ€æ±‚åˆ†æï¼Œä¸‹è¾¹è¿›è¡Œæ¥å£å®šä¹‰ï¼Œæ­¤æ¥å£å®šä¹‰ä¸ºä¸€ä¸ªé€šç”¨çš„ä¸Šä¼ æ–‡ä»¶æ¥å£ï¼Œå¯ä»¥ä¸Šä¼ å›¾ç‰‡æˆ–å…¶å®ƒæ–‡ä»¶ã€‚</p><p>é¦–å…ˆåˆ†ææ¥å£ï¼š</p><p>è¯·æ±‚åœ°å€ï¼š&#x2F;media&#x2F;upload&#x2F;coursefile</p><p>è¯·æ±‚å‚æ•°ï¼š</p><p><strong>Content-Type:</strong> multipart&#x2F;form-data;boundary&#x3D;â€¦..</p><p>FormData: <strong>filedata&#x3D;??</strong></p><p>å“åº”å‚æ•°ï¼šæ–‡ä»¶ä¿¡æ¯ï¼Œå¦‚ä¸‹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a16da7a132559daf9e1193166b3e7f52&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyId&quot;</span><span class="punctuation">:</span> <span class="number">1232141425</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyName&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;001001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/testbucket/2022/09/12/a16da7a132559daf9e1193166b3e7f52.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a16da7a132559daf9e1193166b3e7f52&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/testbucket/2022/09/12/a16da7a132559daf9e1193166b3e7f52.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timelength&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;createDate&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2022-09-12T21:57:18&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;changeDate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auditStatus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auditMind&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileSize&quot;</span><span class="punctuation">:</span> <span class="number">248329</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨media-modelå®šä¹‰ä¸Šä¼ å“åº”æ¨¡å‹ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.model.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xuecheng.media.model.po.MediaFiles;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¸Šä¼ æ–‡ä»¶å“åº”ç»“æœç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 21:55</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadFileResultDto</span> <span class="keyword">extends</span> <span class="title class_">MediaFiles</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰æ¥å£å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> upload     è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folder     æ–‡ä»¶å¤¹å-éå¿…é¡»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectName æ–‡ä»¶å-éå¿…é¡»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> com.xuecheng.media.model.dto.UploadFileResultDto</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> æ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2023/3/9 22:09</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ–‡ä»¶ä¸Šä¼ &quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/upload/coursefile&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span></span><br><span class="line">    <span class="comment">// å®šä¹‰è¯·æ±‚urlä¸å¯æ¶ˆè´¹çš„æ–‡ä»¶æ“ä½œcontent-typeç±»å‹</span></span><br><span class="line">    <span class="keyword">public</span> UploadFileResultDto <span class="title function_">upload</span><span class="params">(</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestPart(&quot;filedata&quot;)</span> MultipartFile upload,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(value = &quot;folder&quot;, required = false)</span> String folder,</span></span><br><span class="line"><span class="params">            <span class="meta">@RequestParam(value = &quot;objectName&quot;, required = false)</span> String objectName)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>controllerå±‚ä¸­æˆ‘ä»¬éœ€è¦å°†æ–‡ä»¶æš‚å­˜åœ¨æœ¬åœ°,è®©åå°†ä¸´æ—¶æ–‡ä»¶çš„åœ°å€æ”¾è¿›æœåŠ¡å±‚æ–¹æ³•å‚æ•°ä¸­</p><h3 id="æ¥å£å¼€å‘"><a href="#æ¥å£å¼€å‘" class="headerlink" title="æ¥å£å¼€å‘"></a>æ¥å£å¼€å‘</h3><p><strong>DAOå¼€å‘</strong></p><p>æ ¹æ®éœ€æ±‚åˆ†æDAOå±‚å®ç°å‘media_filesè¡¨æ’å…¥ä¸€æ¡è®°å½•ï¼Œä½¿ç”¨media_filesè¡¨ç”Ÿæˆçš„mapperå³å¯ã€‚</p><p><strong>Serviceå¼€å‘</strong></p><p>ä¸ºäº†ä½¿ä»£ç æ›´å…·æœ‰å¯è¯»æ€§ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªæšä¸¾å·¥å…·ç±»ï¼Œç”¨äºåŒºåˆ†æ•°æ®åº“å­—æ®µå€¼</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230310165611318.png" alt="image-20230310165611318"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ“ä½œmediaFileè¡¨æ—¶éœ€è¦ç”¨åˆ°è¿™ä¸¤ç§å­—æ®µï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨æšä¸¾ç®€åŒ–</p><p>åœ¨meida-modelçš„dtoåŒ…ä¸‹åˆ›å»ºå¦‚ä¸‹ä¸¤ä¸ªæšä¸¾ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.model.dto;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åª’ä½“èµ„æºç±»å‹æšä¸¾</span></span><br><span class="line"><span class="comment"> * [&#123;&quot;code&quot;:&quot;001001&quot;,&quot;desc&quot;:&quot;å›¾ç‰‡&quot;&#125;,&#123;&quot;code&quot;:&quot;001002&quot;,&quot;desc&quot;:&quot;è§†é¢‘&quot;&#125;,&#123;&quot;code&quot;:&quot;001003&quot;,&quot;desc&quot;:&quot;å…¶å®ƒ&quot;&#125;]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/10 15:45</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">MediaResourceType</span> &#123;</span><br><span class="line">    IMAGE(<span class="string">&quot;001001&quot;</span>,<span class="string">&quot;å›¾ç‰‡&quot;</span>),</span><br><span class="line">    VIDEO(<span class="string">&quot;001002&quot;</span>,<span class="string">&quot;è§†é¢‘&quot;</span>),</span><br><span class="line">    OTHER(<span class="string">&quot;001003&quot;</span>,<span class="string">&quot;å…¶å®ƒ&quot;</span>)</span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">    MediaResourceType(String code, String description) &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.model.dto;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> å®¡æ ¸çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * [&#123;&quot;code&quot;:&quot;002001&quot;,&quot;desc&quot;:&quot;å®¡æ ¸æœªé€šè¿‡&quot;&#125;,</span></span><br><span class="line"><span class="comment"> * &#123;&quot;code&quot;:&quot;002002&quot;,&quot;desc&quot;:&quot;æœªå®¡æ ¸&quot;&#125;,</span></span><br><span class="line"><span class="comment"> * &#123;&quot;code&quot;:&quot;002003&quot;,&quot;desc&quot;:&quot;å®¡æ ¸é€šè¿‡&quot;&#125;]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/10 14:55</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">MediaAuditStatus</span> &#123;</span><br><span class="line"></span><br><span class="line">    NOT_Approved(<span class="string">&quot;002001&quot;</span>,<span class="string">&quot;å®¡æ ¸æœªé€šè¿‡&quot;</span>),</span><br><span class="line"></span><br><span class="line">    Not_Audited(<span class="string">&quot;002002&quot;</span>,<span class="string">&quot;æœªå®¡æ ¸&quot;</span>),</span><br><span class="line">    Approved(<span class="string">&quot;002003&quot;</span>,<span class="string">&quot;å®¡æ ¸é€šè¿‡&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">     MediaAuditStatus(String code, String description)&#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ç”±äºæˆ‘ä»¬æ“ä½œçš„æ•°æ®è¡¨æœ‰å…¬å…±å­—æ®µï¼ŒupdateTimeï¼ŒcreateTimeã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥åŠ å…¥ä¸€ä¸ªmpçš„è‡ªåŠ¨å¡«å……åŠŸèƒ½ã€‚</p><p>åœ¨media-serviceçš„configåŒ…ä¸‹åˆ›å»ºå¦‚ä¸‹ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;P&gt;</span></span><br><span class="line"><span class="comment"> * Mybatis-Plus é…ç½®</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.xuecheng.media.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–°çš„åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment"> * éœ€è¦è®¾ç½® MybatisConfiguration#useDeprecatedExecutor = false</span></span><br><span class="line"><span class="comment"> * é¿å…ç¼“å­˜å‡ºç°é—®é¢˜(è¯¥å±æ€§ä¼šåœ¨æ—§æ’ä»¶ç§»é™¤åä¸€åŒç§»é™¤)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line"><span class="keyword">return</span> interceptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Serviceæ–¹æ³•éœ€è¦æä¾›ä¸€ä¸ªæ›´åŠ é€šç”¨çš„ä¿å­˜æ–‡ä»¶çš„æ–¹æ³•ã€‚</p><p>å®šä¹‰è¯·æ±‚å‚æ•°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.media.model.dto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ–‡ä»¶ä¸Šä¼ é€šç”¨å‚æ•°dto,è¿™é‡Œçš„å¤§éƒ¨åˆ†éƒ½æ¥è‡ªä¸ MediaFiles</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/9 22:14</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadFileParamsDto</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String filename;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶content-type</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String contentType;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶ç±»å‹ï¼ˆæ–‡æ¡£ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String fileType;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡ä»¶å¤§å°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long fileSize;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ‡ç­¾</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String tags;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ äºº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤‡æ³¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String remark;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰serviceæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">com.xuecheng.media.service.MediaFileService</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> companyId           å…¬å¸ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uploadFileParamsDto ä¸Šä¼ æ–‡ä»¶å‚æ•°ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> LocalFilePath       è¦ä¸Šä¼ çš„æ–‡ä»¶å…¶æœ¬åœ°è·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> com.xuecheng.media.model.dto.UploadFileResultDto</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2023/3/10 13:36</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    UploadFileResultDto <span class="title function_">uploadFile</span><span class="params">(Long companyId, UploadFileParamsDto uploadFileParamsDto, String LocalFilePath)</span> <span class="keyword">throws</span> XueChengPlusException;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@description</span> å°†ä¸Šä¼ çš„æ–‡ä»¶æ’å…¥æ•°æ®åº“ </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> companyId </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uploadFileParamsDto </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> md5 </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bucket </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectName  </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> com.xuecheng.media.model.po.MediaFiles </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@author</span>: woldier </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@date</span>: 2023/3/10 16:42</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">     MediaFiles <span class="title function_">insertMediaFile2DB</span><span class="params">(Long companyId, UploadFileParamsDto uploadFileParamsDto, String md5, String bucket,String objectName)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">com.xuecheng.media.service.impl.MediaFileServiceImpl</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> companyId           å…¬å¸ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uploadFileParamsDto ä¸Šä¼ æ–‡ä»¶å‚æ•°ç±»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> localFilePath       è¦ä¸Šä¼ çš„æ–‡ä»¶å…¶æœ¬åœ°è·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> com.xuecheng.media.model.dto.UploadFileResultDto</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2023/3/10 13:36</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UploadFileResultDto <span class="title function_">uploadFile</span><span class="params">(Long companyId, UploadFileParamsDto uploadFileParamsDto, String localFilePath)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 1.ä¸Šä¼ æ–‡ä»¶åˆ°minio ï¼Œæ–‡ä»¶è·¯å¾„ä¸º /&#123;æ¡¶å&#125;/&#123;å¹´&#125;/&#123;æœˆ&#125;/&#123;æ—¥&#125;/</span></span><br><span class="line"><span class="comment">         * 2.æ’å…¥æ•°æ®åº“</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="comment">/*é€šè¿‡æ‰©å±•åè·å–åª’ä½“èµ„æºç±»å‹*/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> getMimeType(uploadFileParamsDto.getFilename());</span><br><span class="line">        <span class="comment">/*ç»„è£…æ–‡ä»¶åŸºè·¯å¾„*/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">basePath</span> <span class="operator">=</span> LocalDate.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy/MM/dd/&quot;</span>));</span><br><span class="line">        <span class="comment">/*ç”±äºMinioä¸­åŒä¸€å¤©çš„æ•°æ®ä¿å­˜ä½ç½®éƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹,ä¸ºäº†é˜²æ­¢é‡åç°è±¡,ä¸èƒ½ç”¨åŸæ–‡ä»¶å,åº”è¯¥ç”¨md5å€¼åŠ åç¼€*/</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> uploadFileParamsDto.getFilename().lastIndexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        <span class="comment">//æ–‡ä»¶åç¼€</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileSuffix</span> <span class="operator">=</span> uploadFileParamsDto.getFilename().substring(index);</span><br><span class="line">        <span class="comment">//æ–‡ä»¶md5å€¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">md5</span> <span class="operator">=</span> getMd5(localFilePath);</span><br><span class="line">        <span class="comment">//æ‹¼æ¥å¾—åˆ°Minioå­˜å‚¨è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">objectName</span> <span class="operator">=</span> basePath + md5 + fileSuffix;</span><br><span class="line">        <span class="comment">//ä¸Šä¼ åˆ°minio</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">minIOUpload</span> <span class="operator">=</span> minIOUpload(localFilePath, mimeType, fileBucket, objectName);</span><br><span class="line">        <span class="keyword">if</span> (!minIOUpload) XueChengPlusException.cast(<span class="string">&quot;MinIOä¸Šä¼ å‡ºé”™&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸Šä¼ åˆ°æ•°æ®åº“</span></span><br><span class="line">        <span class="type">MediaFiles</span> <span class="variable">files</span> <span class="operator">=</span> insertMediaFile2DB(companyId, uploadFileParamsDto, md5, fileBucket, objectName);</span><br><span class="line"><span class="comment">//        MediaFileService proxy = (MediaFileService)AopContext.currentProxy();</span></span><br><span class="line"><span class="comment">//        MediaFiles files = proxy.insertMediaFile2DB(companyId, uploadFileParamsDto, md5, fileBucket,objectName);</span></span><br><span class="line">        <span class="comment">//ç»“æœä¸ºç©ºè¡¨ç¤ºä¸Šä¼ å¤±è´¥</span></span><br><span class="line">        <span class="keyword">if</span> (files == <span class="literal">null</span>) XueChengPlusException.cast(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ åä¿å­˜ä¿¡æ¯åˆ°æ•°æ®åº“å¤±è´¥&quot;</span>);</span><br><span class="line">        <span class="type">UploadFileResultDto</span> <span class="variable">uploadFileResultDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UploadFileResultDto</span>();</span><br><span class="line">        BeanUtils.copyProperties(files, uploadFileResultDto);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> uploadFileResultDto;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> companyId           å…¬å¸id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> uploadFileParamsDto ä¸Šä¼ å‚æ•°ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> md5                 md5</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bucket              æ¡¶</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectName          å¯¹è±¡å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> com.xuecheng.media.model.po.MediaFiles</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> æ’å…¥æ•°æ®åº“</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2023/3/10 15:21</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> MediaFiles <span class="title function_">insertMediaFile2DB</span><span class="params">(Long companyId, UploadFileParamsDto uploadFileParamsDto, String md5, String bucket, String objectName)</span> &#123;</span><br><span class="line">        <span class="comment">/*æ·»åŠ æ•°æ®åº“ä¹‹å‰,æ ¹æ®md5æŸ¥è¯¢è¯¥æ–‡ä»¶æ˜¯å¦å·²ç»å­˜åœ¨*/</span></span><br><span class="line">        <span class="type">MediaFiles</span> <span class="variable">files</span> <span class="operator">=</span> mediaFilesMapper.selectById(md5);</span><br><span class="line">        <span class="keyword">if</span> (files == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">/*ç”Ÿæˆæ•°æ®åº“entity*/</span></span><br><span class="line">            <span class="type">MediaFiles</span> <span class="variable">mediaFiles</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MediaFiles</span>();</span><br><span class="line">            BeanUtils.copyProperties(uploadFileParamsDto, mediaFiles);</span><br><span class="line">            <span class="comment">//è®¾ç½®uploadFileParamsDtoä¸­ä¸å­˜åœ¨çš„éƒ¨åˆ†</span></span><br><span class="line">            <span class="comment">//è®¾ç½®id</span></span><br><span class="line">            mediaFiles.setId(md5);</span><br><span class="line">            <span class="comment">//æœºæ„id</span></span><br><span class="line">            mediaFiles.setCompanyId(companyId);</span><br><span class="line">            <span class="comment">//bucket</span></span><br><span class="line">            mediaFiles.setBucket(bucket);</span><br><span class="line">            <span class="comment">//å­˜å‚¨è·¯å¾„</span></span><br><span class="line">            mediaFiles.setFilePath(objectName);</span><br><span class="line">            <span class="comment">//file_id</span></span><br><span class="line">            mediaFiles.setFileId(md5);</span><br><span class="line">            <span class="comment">//url</span></span><br><span class="line">            mediaFiles.setUrl(<span class="string">&quot;/&quot;</span> + bucket + <span class="string">&quot;/&quot;</span> + objectName);</span><br><span class="line">            <span class="comment">//ä¸Šä¼ æ—¶é—´,æ›´æ–°æ—¶é—´è‡ªåŠ¨è®¾ç½®</span></span><br><span class="line">            <span class="comment">//æ–‡ä»¶çŠ¶æ€</span></span><br><span class="line">            mediaFiles.setStatus(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">            <span class="comment">//å®¡æ ¸çŠ¶æ€</span></span><br><span class="line">            mediaFiles.setAuditStatus(MediaAuditStatus.Approved.getCode());</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">insert</span> <span class="operator">=</span> mediaFilesMapper.insert(mediaFiles);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (insert &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                log.debug(<span class="string">&quot;å‘æ•°æ®åº“ä¿å­˜æ–‡ä»¶å¤±è´¥,bucket:&#123;&#125;,objectName&#123;&#125;&quot;</span>, fileBucket, objectName);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> mediaFiles;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> files;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">getMd5</span><span class="params">(String localFilePath)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">md5</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            md5 = DigestUtils.md5Hex(Files.newInputStream(<span class="keyword">new</span> <span class="title class_">File</span>(localFilePath).toPath()));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;md5è®¡ç®—æ—¶å‡ºé”™&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> md5;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName å¸¦åç¼€æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> java.lang.String</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> æ ¹æ®æ–‡ä»¶åç¼€åè·å–MimeType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2023/3/10 13:55</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getMimeType</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fileName == <span class="literal">null</span>) fileName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">ContentInfo</span> <span class="variable">contentInfo</span> <span class="operator">=</span> ContentInfoUtil.findExtensionMatch(fileName);</span><br><span class="line">        <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> MediaType.APPLICATION_OCTET_STREAM_VALUE;</span><br><span class="line">        <span class="keyword">if</span> (contentInfo != <span class="literal">null</span>) mimeType = contentInfo.getMimeType();</span><br><span class="line">        <span class="keyword">return</span> mimeType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> localFilePath æœ¬åœ°æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileType      æ–‡ä»¶ç±»å‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bucket        æ¡¶åç§°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> boolean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span> ä¸Šä¼ æ–‡ä»¶åˆ°MinIOçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span>: 2023/3/10 13:33</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">minIOUpload</span><span class="params">(String localFilePath, String fileType, String bucket, String objectName)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ä¸Šä¼ */</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            minioClient.uploadObject(</span><br><span class="line">                    UploadObjectArgs.builder()</span><br><span class="line">                            .bucket(bucket)  <span class="comment">//æ¡¶</span></span><br><span class="line">                            .object(objectName) <span class="comment">// å¯¹è±¡å,åœ¨æ¡¶ä¸‹å­˜å‚¨çš„æ–‡ä»¶</span></span><br><span class="line">                            .filename(localFilePath)  <span class="comment">//æŒ‡å®šæœ¬åœ°æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">                            .contentType(fileType) <span class="comment">//è®¾ç½®åª’ä½“æ–‡ä»¶ç±»å‹</span></span><br><span class="line">                            .build()</span><br><span class="line">            );</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;æ–‡ä»¶ä¸Šä¼ åˆ°MinIOå‡ºé”™,buckcet:&#123;&#125;,path:&#123;&#125;,error:&#123;&#125;&quot;</span>, bucket, objectName, e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="æ¥å£ä»£ç å®Œå–„"><a href="#æ¥å£ä»£ç å®Œå–„" class="headerlink" title="æ¥å£ä»£ç å®Œå–„"></a>æ¥å£ä»£ç å®Œå–„</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> upload     è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> folder     æ–‡ä»¶å¤¹å-éå¿…é¡»</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> objectName æ–‡ä»¶å-éå¿…é¡»</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> com.xuecheng.media.model.dto.UploadFileResultDto</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@description</span> æ–‡ä»¶ä¸Šä¼ </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@author</span>: woldier</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@date</span>: 2023/3/9 22:09</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@ApiOperation(&quot;æ–‡ä»¶ä¸Šä¼ &quot;)</span></span><br><span class="line">   <span class="meta">@RequestMapping(value = &quot;/upload/coursefile&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</span></span><br><span class="line">   <span class="comment">// å®šä¹‰è¯·æ±‚urlä¸å¯æ¶ˆè´¹çš„æ–‡ä»¶æ“ä½œcontent-typeç±»å‹</span></span><br><span class="line">   <span class="keyword">public</span> UploadFileResultDto <span class="title function_">upload</span><span class="params">(</span></span><br><span class="line"><span class="params">           <span class="meta">@RequestPart(&quot;filedata&quot;)</span> MultipartFile upload,</span></span><br><span class="line"><span class="params">           <span class="meta">@RequestParam(value = &quot;folder&quot;, required = false)</span> String folder,</span></span><br><span class="line"><span class="params">           <span class="meta">@RequestParam(value = &quot;objectName&quot;, required = false)</span> String objectName)</span> <span class="keyword">throws</span> IOException, XueChengPlusException &#123;</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       *å¯¹æ¥å—åˆ°çš„æ–‡ä»¶è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="comment">/*äº§ç”Ÿä¸€ä¸ªä¸´æ—¶æ–‡ä»¶*/</span></span><br><span class="line">       <span class="type">File</span> <span class="variable">tempFile</span> <span class="operator">=</span> File.createTempFile(<span class="string">&quot;minio&quot;</span>, <span class="string">&quot;temp&quot;</span>);</span><br><span class="line">       <span class="comment">/*å°†è¯·æ±‚ä¸­çš„è¡¨å•æ•°æ®æ‹·è´åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­*/</span></span><br><span class="line">       upload.transferTo(tempFile);</span><br><span class="line">       <span class="comment">/*è·å–ç»å¯¹è·¯å¾„*/</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">absolutePath</span> <span class="operator">=</span> tempFile.getAbsolutePath();</span><br><span class="line"></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       *å¯¹ä¸Šä¼ å‚æ•°è¿›è¡Œå¤„ç†</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//ä¸Šä¼ æ–‡ä»¶å‚æ•°ç±»</span></span><br><span class="line">       <span class="type">UploadFileParamsDto</span> <span class="variable">uploadFileParamsDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UploadFileParamsDto</span>();</span><br><span class="line">       <span class="comment">//åŸå§‹æ–‡ä»¶åç§°</span></span><br><span class="line">       uploadFileParamsDto.setFilename(upload.getOriginalFilename());</span><br><span class="line">       <span class="comment">//æ–‡ä»¶å¤§å°</span></span><br><span class="line">       uploadFileParamsDto.setFileSize(upload.getSize());</span><br><span class="line">       <span class="comment">//æ–‡ä»¶ç±»å‹</span></span><br><span class="line">       uploadFileParamsDto.setFileType(MediaResourceType.IMAGE.getCode());</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       * å…¬å¸idè·å–</span></span><br><span class="line"><span class="comment">       * */</span></span><br><span class="line">       <span class="comment">//TODO ç¡¬ç¼–ç å…¬å¸id</span></span><br><span class="line">       <span class="type">Long</span> <span class="variable">companyId</span> <span class="operator">=</span> <span class="number">123456789L</span>;</span><br><span class="line"></span><br><span class="line">       <span class="type">UploadFileResultDto</span> <span class="variable">uploadFileResultDto</span> <span class="operator">=</span> mediaFileService.uploadFile(companyId, uploadFileParamsDto, absolutePath);</span><br><span class="line"></span><br><span class="line">       <span class="comment">/*åˆ é™¤ä¸´æ—¶æ–‡ä»¶*/</span></span><br><span class="line">       tempFile.deleteOnExit();</span><br><span class="line">       <span class="keyword">return</span> uploadFileResultDto;</span><br></pre></td></tr></table></figure><h3 id="serviceäº‹åŠ¡ä»£ç ä¼˜åŒ–"><a href="#serviceäº‹åŠ¡ä»£ç ä¼˜åŒ–" class="headerlink" title="serviceäº‹åŠ¡ä»£ç ä¼˜åŒ–"></a>serviceäº‹åŠ¡ä»£ç ä¼˜åŒ–</h3><p>ä¸Šè¾¹çš„serviceæ–¹æ³•ä¼˜åŒ–åå¹¶æµ‹è¯•é€šè¿‡ï¼Œç°åœ¨æ€è€ƒå…³äºuploadFileæ–¹æ³•çš„æ˜¯å¦åº”è¯¥å¼€å¯äº‹åŠ¡ã€‚</p><p>ç›®å‰æ˜¯åœ¨uploadFileæ–¹æ³•ä¸Šæ·»åŠ @Transactionalï¼Œå½“è°ƒç”¨uploadFileæ–¹æ³•å‰ä¼šå¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼Œå¦‚æœä¸Šä¼ æ–‡ä»¶è¿‡ç¨‹æ—¶é—´è¾ƒé•¿é‚£ä¹ˆæ•°æ®åº“çš„äº‹åŠ¡æŒç»­æ—¶é—´å°±ä¼šå˜é•¿ï¼Œè¿™æ ·æ•°æ®åº“é“¾æ¥é‡Šæ”¾å°±æ…¢ï¼Œæœ€ç»ˆå¯¼è‡´æ•°æ®åº“é“¾æ¥ä¸å¤Ÿç”¨ã€‚</p><p>æˆ‘ä»¬åªå°†addMediaFilesToDbæ–¹æ³•æ·»åŠ äº‹åŠ¡æ§åˆ¶å³å¯,uploadFileæ–¹æ³•ä¸Šçš„@Transactionalæ³¨è§£å»æ‰ã€‚(ä¸Šå°èŠ‚ä»£ç å·²ç»æ—¶è¿™æ ·åšçš„)</p><p>ä½†æ˜¯ç°åœ¨çš„é—®é¢˜æ˜¯,controllerè°ƒç”¨çš„serviceæ–¹æ³•uploadæ²¡ç”¨åŠ å…¥äº‹åŠ¡æ³¨è§£,ç›¸å½“äºåœ¨serviceä¸­ä¸€ä¸ªæ²¡æœ‰äº‹åŠ¡çš„æ–¹æ³•è°ƒç”¨äº†å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•,äº‹åŠ¡ä¸ç”Ÿæ•ˆ</p><p>ä¸‹è¾¹åˆ†æåŸå› ï¼š</p><p>å¦‚æœåœ¨uploadFileæ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£ï¼Œä»£ç†å¯¹è±¡æ‰§è¡Œæ­¤æ–¹æ³•å‰ä¼šå¼€å¯äº‹åŠ¡ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230310170730673.png" alt="image-20230310170730673"></p><p>å¦‚æœåœ¨uploadFileæ–¹æ³•ä¸Šæ²¡æœ‰@Transactionalæ³¨è§£ï¼Œä»£ç†å¯¹è±¡æ‰§è¡Œæ­¤æ–¹æ³•å‰</p><p>ä¸è¿›è¡Œäº‹åŠ¡æ§åˆ¶ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230310170810020.png" alt="image-20230310170810020"></p><p>ç°åœ¨åœ¨addMediaFilesToDbæ–¹æ³•ä¸Šæ·»åŠ @Transactionalæ³¨è§£ï¼Œä¹Ÿä¸ä¼šè¿›è¡Œäº‹åŠ¡æ˜¯å› ä¸ºå¹¶ä¸æ˜¯é€šè¿‡ä»£ç†å¯¹è±¡æ‰§è¡Œçš„addMediaFilesToDbæ–¹æ³•ã€‚ä¸ºäº†åˆ¤æ–­åœ¨uploadFileæ–¹æ³•ä¸­å»è°ƒç”¨addMediaFilesToDbæ–¹æ³•æ˜¯å¦æ˜¯é€šè¿‡ä»£ç†å¯¹è±¡å»è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“æ–­ç‚¹è·Ÿè¸ªã€‚</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230310170826985.png" alt="image-20230310170826985"></p><p>æˆ‘ä»¬å‘ç°åœ¨uploadFileæ–¹æ³•ä¸­å»è°ƒç”¨addMediaFilesToDbæ–¹æ³•ä¸æ˜¯é€šè¿‡ä»£ç†å¯¹è±¡å»è°ƒç”¨ã€‚</p><p>å¦‚ä½•è§£å†³å‘¢ï¼Ÿé€šè¿‡ä»£ç†å¯¹è±¡å»è°ƒç”¨addMediaFilesToDbæ–¹æ³•å³å¯è§£å†³ã€‚</p><p>æˆ‘ä»¬å…ˆè·å–ä»£ç†å¯¹è±¡,ç„¶åè°ƒç”¨ä»£ç†å¯¹è±¡çš„insertMediaFile2DBæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MediaFileService</span> <span class="variable">proxy</span> <span class="operator">=</span> (MediaFileService)AopContext.currentProxy();</span><br><span class="line"><span class="type">MediaFiles</span> <span class="variable">files</span> <span class="operator">=</span> proxy.insertMediaFile2DB(companyId, uploadFileParamsDto, md5, fileBucket,objectName);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åªä¿®æ”¹è¿™ä¸ªä»£ç å¯åŠ¨ä¼šæŠ¥é”™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot find current proxy: Set &#x27;exposeProxy&#x27; property on Advised to &#x27;true&#x27; to make it available, and ensure that AopContext.currentProxy() is invoked in the same thread as the AOP invocation context.</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨ç±»ä¸‹åŠ å…¥æ³¨è§£å¹¶ä¸”è®¾ç½®exposeProxyå±æ€§,é™¤æ­¤ä¹‹å¤–å¯èƒ½çš„æŠ¥é”™åŸå› æ˜¯æ²¡æœ‰åŠ å…¥åŒ…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@EnableAspectJAutoProxy(exposeProxy = true)</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­æ’å…¥æ•°æ®åº“åé™¤0æ¨¡æ‹Ÿé”™è¯¯,çœ‹ä¸€ä¸‹æ˜¯å¦è¿›è¡Œäº†æ•°æ®åº“å›å½’,ç»è¿‡æµ‹è¯•å¯ä»¥å‘ç°è¿›è¡Œäº†å›æ»š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230310172853142.png" alt="image-20230310172853142"></p><h3 id="æ¥å£æµ‹è¯•"><a href="#æ¥å£æµ‹è¯•" class="headerlink" title="æ¥å£æµ‹è¯•"></a>æ¥å£æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">POST &#123;&#123;gateway_host&#125;&#125;/media//upload/coursefile</span><br><span class="line">Content-Type: multipart/form-data; boundary=WebAppBoundary</span><br><span class="line"></span><br><span class="line">--WebAppBoundary</span><br><span class="line">Content-Disposition: form-data;name=<span class="string">&quot;filedata&quot;</span>; filename=<span class="string">&quot;123.jpg&quot;</span></span><br><span class="line">Content-Type: application/octet-stream</span><br><span class="line"></span><br><span class="line">&lt; d:/123.jpg</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">POST http<span class="punctuation">:</span><span class="comment">//localhost:63010/media//upload/coursefile</span></span><br><span class="line"></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">transfer-encoding<span class="punctuation">:</span> chunked</span><br><span class="line">Content-Type<span class="punctuation">:</span> application/json</span><br><span class="line">Date<span class="punctuation">:</span> Fri<span class="punctuation">,</span> <span class="number">10</span> Mar <span class="number">2023</span> <span class="number">08</span><span class="punctuation">:</span><span class="number">33</span><span class="punctuation">:</span><span class="number">46</span> GMT</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8a58662af30ace3e83f629a10ddd8662&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyId&quot;</span><span class="punctuation">:</span> <span class="number">123456789</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;companyName&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;filename&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;001001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mediafiles&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2023/03/10/8a58662af30ace3e83f629a10ddd8662.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;8a58662af30ace3e83f629a10ddd8662&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/mediafiles/2023/03/10/8a58662af30ace3e83f629a10ddd8662.jpg&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;createDate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;changeDate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;remark&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auditStatus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;002003&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auditMind&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;fileSize&quot;</span><span class="punctuation">:</span> <span class="number">9778</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="ä¸Šä¼ è§†é¢‘"><a href="#ä¸Šä¼ è§†é¢‘" class="headerlink" title="ä¸Šä¼ è§†é¢‘"></a>ä¸Šä¼ è§†é¢‘</h1>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æˆåœ¨çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€ä¸‰ã€‘ï¼ˆNacos,Gateway,Minioç¯å¢ƒæ­å»ºï¼‰</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E4%B8%89%E3%80%91%EF%BC%88Nacos-Gateway-Minio%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%89/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E4%B8%89%E3%80%91%EF%BC%88Nacos-Gateway-Minio%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>**ï¼ï¼ï¼å›¾ç‰‡å·²è¿‡æœŸï¼Œæ¢æˆ‘çš„è€åšå®¢æµè§ˆï¼š<a href="https://www.cnblogs.com/hepingan/p/18000450">ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€ä¸‰ã€‘ï¼ˆNacos,Gateway,Minioç¯å¢ƒæ­å»ºï¼‰ - ä½•å¹³å®‰ - åšå®¢å›­</a>**ï¼ï¼ï¼</p><h1 id="Nacosç½‘å…³é…ç½®"><a href="#Nacosç½‘å…³é…ç½®" class="headerlink" title="Nacosç½‘å…³é…ç½®"></a>Nacosç½‘å…³é…ç½®</h1><h2 id="æœåŠ¡å™¨ç¯å¢ƒé…ç½®"><a href="#æœåŠ¡å™¨ç¯å¢ƒé…ç½®" class="headerlink" title="æœåŠ¡å™¨ç¯å¢ƒé…ç½®"></a>æœåŠ¡å™¨ç¯å¢ƒé…ç½®</h2><p><strong>æ³¨æ„ä¸‹é¢çš„ç¯å¢ƒé…ç½®æ˜¯é’ˆå¯¹è¿œç¨‹æœåŠ¡å™¨æˆ–è‡ªå·±æ­å»ºçš„è™šæ‹Ÿæœºçš„ï¼Œé»˜è®¤èµ„æ–™çš„è™šæ‹Ÿæœºå¯ä»¥ä¸ç”¨çœ‹ï¼ï¼ï¼</strong></p><p>å…ˆæ‹‰å–1.4.1çš„é•œåƒå¹¶å¯åŠ¨ï¼š</p><p>docker pull nacos&#x2F;nacos-server:1.4.1</p><p>docker run â€“env MODE&#x3D;standalone â€“name nacos -d -p 8848:8848 nacos&#x2F;nacos-server:1.4.1</p><p>è¿›å…¥nacosé…ç½®æ–‡ä»¶ï¼š</p><p>docker exec -it nacos bash</p><p>é…ç½®MySQLï¼š</p><p>spring.datasource.platform&#x3D;mysql</p><p>db.num&#x3D;1</p><p>db.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;xxxxxxxx:3306&#x2F;nacos?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true</p><p>db.user&#x3D;root</p><p>db.password&#x3D;123456</p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p><strong>å…ˆæ€»ç»“ä¸‹ï¼šé…ç½®çš„æ—¶å€™ç¡®å®å¾ˆéº»çƒ¦ï¼Œä½†æ˜¯ä»¥åè¦ä¿®æ”¹çš„æ—¶å€™è¿˜æ˜¯æŒºå¥½ä¿®æ”¹çš„ã€‚</strong></p><p>åœ¨å†…å®¹ç®¡ç†æ¨¡å—çš„æ¥å£å·¥ç¨‹ã€ç³»ç»Ÿç®¡ç†æ¨¡å—çš„æ¥å£å·¥ç¨‹ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼Œè¿˜æœ‰éœ€è¦è°ƒç”¨httpè¯·æ±‚çš„æ¨¡å—ä¹Ÿè¦å¼•å…¥ï¼Œ<strong>å¼•å…¥åè®°å¾—åˆ·æ–°Mavenï¼ï¼</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">     &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>å…ˆç™»å½•å¹¶è®¿é—®ï¼š<a href="https://gitee.com/link?target=http://ip:8848/nacos/">http://ip:8848/nacos/</a></p><p>è´¦å·å¯†ç ï¼šnacos&#x2F;nacos</p><p>ç™»å½•æˆåŠŸï¼Œç‚¹å‡»å·¦ä¾§èœå•â€œå‘½åç©ºé—´â€è¿›å…¥å‘½åç©ºé—´ç®¡ç†ç•Œé¢ï¼Œ</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308162543252.png" alt="image-20230308162543252"></p><p>ç‚¹å‡»â€œæ–°å»ºå‘½åç©ºé—´â€ï¼Œå¡«å†™å‘½åç©ºé—´çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308162554064.png" alt="image-20230308162554064"></p><p>ä½¿ç”¨ç›¸åŒçš„æ–¹æ³•å†åˆ›å»ºâ€œæµ‹è¯•ç¯å¢ƒâ€ã€â€ç”Ÿäº§ç¯å¢ƒâ€çš„å‘½åç©ºé—´ã€‚</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308162608472.png" alt="image-20230308162608472"></p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308162612150.png" alt="image-20230308162612150"></p><p>åœ¨ç³»ç»Ÿç®¡ç†çš„æ¥å£å·¥ç¨‹çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#å¾®æœåŠ¡é…ç½®</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: system-service</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: 192.168.101.65:8848</span><br><span class="line">      discovery:</span><br><span class="line">        namespace: dev</span><br><span class="line">        group: xuecheng-plus-project</span><br></pre></td></tr></table></figure><p>åœ¨å†…å®¹ç®¡ç†çš„æ¥å£å·¥ç¨‹çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: content-service</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: 192.168.101.65:8848</span><br><span class="line">      discovery:</span><br><span class="line">        namespace: dev</span><br><span class="line">        group: xuecheng-plus-project</span><br></pre></td></tr></table></figure><h3 id="content-api-content-serviceé…ç½®"><a href="#content-api-content-serviceé…ç½®" class="headerlink" title="content-api&#x2F;content-serviceé…ç½®"></a>content-api&#x2F;content-serviceé…ç½®</h3><p>åœ¨Nacosé¡µé¢æ–°å»ºä¸€ä¸ªé…ç½®å¦‚ä¸‹ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202402/3018339-20240202003654551-1585881175.png" alt="img"></p><p>å†åœ¨pomåæ ‡é‡Œå¼•å…¥configçš„ä¾èµ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>å†åœ¨content-apiçš„ymlé‡Œç¼–å†™é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¾®æœåŠ¡é…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">content-api</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="number">47.109</span><span class="number">.74</span><span class="number">.83</span><span class="string">:8848</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">xuecheng-plus-project</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">xuecheng-plus-project</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span></span><br><span class="line">        <span class="attr">refresh-enabled:</span> <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">    <span class="attr">profiles:</span></span><br><span class="line">      <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#ç¯å¢ƒå</span></span><br></pre></td></tr></table></figure><p>æ•°æ®åº“çš„é…ç½®å°±å¯ä»¥å»æ‰äº†ï¼Œ</p><p>é€šè¿‡dataidæ‰¾åˆ°å…·ä½“çš„é…ç½®æ–‡ä»¶ï¼Œdataidæœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼Œ</p><p>æ¯”å¦‚ï¼šcontent-service-dev.yamlé…ç½®æ–‡ä»¶ ç”±ï¼ˆcontent-serviceï¼‰-ï¼ˆdevï¼‰. (yaml)ä¸‰éƒ¨åˆ†ç»„æˆ</p><p>content-serviceï¼šç¬¬ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯åœ¨application.yamlä¸­é…ç½®çš„åº”ç”¨åï¼Œå³spring.application.nameçš„å€¼ã€‚</p><p>devï¼šç¬¬äºŒéƒ¨åˆ†ï¼Œå®ƒæ˜¯ç¯å¢ƒåï¼Œé€šè¿‡spring.profiles.activeæŒ‡å®šï¼Œ</p><p>Yaml: ç¬¬ä¸‰éƒ¨åˆ†ï¼Œå®ƒæ˜¯é…ç½®æ–‡ä»¶ çš„åç¼€ï¼Œç›®å‰nacosæ”¯æŒpropertiesã€yamlç­‰æ ¼å¼ç±»å‹ï¼Œæœ¬é¡¹ç›®é€‰æ‹©yamlæ ¼å¼ç±»å‹ã€‚</p><p>æ‰€ä»¥åœ¨content-serviceå·¥ç¨‹ çš„testç›®å½•ä¸­æ·»åŠ bootstrap.yamlè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: content-service</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: remote.centos.com:8848</span><br><span class="line">      discovery:</span><br><span class="line">        namespace: dev #å‘½åç©ºé—´ï¼Œå¯éšæ„å–ä¸spring.profileä¸ä¸€å®šä¸€è‡´</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">      config:</span><br><span class="line">        namespace: dev  #å‘½åç©ºé—´ï¼Œå¯éšæ„å–ä¸spring.profileä¸ä¸€å®šä¸€è‡´</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">        file-extension: yaml</span><br><span class="line">        refresh-enabled: true</span><br><span class="line"></span><br><span class="line">#profilesé»˜è®¤ä¸ºdev</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br></pre></td></tr></table></figure><p>åœ¨å†…å®¹ç®¡ç†æ¨¡å—çš„æ¥å£å·¥ç¨‹å’Œserviceå·¥ç¨‹ã€ç³»ç»Ÿç®¡ç†çš„æ¥å£å·¥ç¨‹å’Œserviceå·¥ç¨‹é…ç½®ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆï¼Œè¿è¡Œcontent-serviceå·¥ç¨‹ çš„å•å…ƒæµ‹è¯•æ–‡ä»¶ï¼Œèƒ½å¦æ­£å¸¸æµ‹è¯•ã€‚</p><p>é€šè¿‡è¿è¡Œè§‚å¯Ÿæ§åˆ¶å°æ‰“å°å‡ºä¸‹è¾¹çš„ä¿¡æ¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[NacosRestTemplate.java:476] - HTTP method: POST, url: http://192.168.101.65:8848/nacos/v1/cs/configs/listener, body: &#123;Listening-Configs=content-service.yaml?xuecheng-plus-project??dev?content-service-dev.yaml?xuecheng-plus-project?88459b1483b8381eccc2ef462bd59182?dev?content-service?xuecheng-plus-project??dev?, tenant=dev&#125;</span><br></pre></td></tr></table></figure><p><strong>é…ç½®content-api</strong></p><p>ä»¥ç›¸åŒçš„æ–¹æ³•é…ç½®content-apiå·¥ç¨‹çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨nacosä¸­çš„å¼€å‘ç¯å¢ƒä¸­é…ç½®content-api-dev.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  servlet:</span><br><span class="line">    context-path: /content # æœåŠ¡è®¿é—®æ ¹è·¯å¾„</span><br><span class="line">  port: 63040</span><br><span class="line"># æ—¥å¿—æ–‡ä»¶é…ç½®è·¯å¾„</span><br><span class="line">logging:</span><br><span class="line">  config: classpath:log4j2-dev.xml</span><br><span class="line"># swagger æ–‡æ¡£é…ç½®</span><br><span class="line">swagger:</span><br><span class="line">  title: &quot;å­¦æˆåœ¨çº¿å†…å®¹ç®¡ç†ç³»ç»Ÿ&quot;</span><br><span class="line">  description: &quot;å†…å®¹ç³»ç»Ÿç®¡ç†ç³»ç»Ÿå¯¹è¯¾ç¨‹ç›¸å…³ä¿¡æ¯è¿›è¡Œä¸šåŠ¡ç®¡ç†æ•°æ®&quot;</span><br><span class="line">  base-package: com.xuecheng.content</span><br><span class="line">  enabled: true</span><br><span class="line">  version: 1.0.0</span><br></pre></td></tr></table></figure><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308214237689.png" alt="image-20230308214237689"></p><p>åœ¨content-apiå·¥ç¨‹ çš„æœ¬åœ°é…ç½®bootstrap.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#å¾®æœåŠ¡é…ç½®</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: content-api</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: remote.centos.com:8848</span><br><span class="line">      discovery:</span><br><span class="line">        namespace: dev #å‘½åç©ºé—´ (ä¸profile.activeæœ‰åŒºåˆ«é…ç½®æ–‡ä»¶çš„æ‹‰å–ä¸æ˜¯æ ¹æ®å‘½åç©ºé—´æ¥æ‹¼æ¥çš„)</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">      config:</span><br><span class="line">        namespace: dev</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">        file-extension: yaml</span><br><span class="line">        refresh-enabled: true</span><br><span class="line">        extension-configs:</span><br><span class="line">          - data-id: content-service-$&#123;spring.profiles.active&#125;.yaml</span><br><span class="line">            group: xuecheng-plus-project</span><br><span class="line">            refresh: true</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå› ä¸ºapiæ¥å£å·¥ç¨‹ä¾èµ–äº†serviceå·¥ç¨‹ çš„jarï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨extension-configsæ‰©å±•é…ç½®æ–‡ä»¶ çš„æ–¹å¼å¼•ç”¨serviceå·¥ç¨‹æ‰€ç”¨åˆ°çš„é…ç½®æ–‡ä»¶ã€‚</p><p>å¦‚æœæ·»åŠ å¤šä¸ªæ‰©å±•æ–‡ä»¶ï¼Œç»§ç»­åœ¨ä¸‹æ·»åŠ å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">extension-configs:</span><br><span class="line">          - data-id: content-service-$&#123;spring.profiles.active&#125;.yaml</span><br><span class="line">            group: xuecheng-plus-project</span><br><span class="line">            refresh: true</span><br><span class="line">          - data-id: å¡«å†™æ–‡ä»¶ dataid</span><br><span class="line">            group: xuecheng-plus-project</span><br><span class="line">            refresh: true        </span><br></pre></td></tr></table></figure><p>å¯åŠ¨content-apiå·¥ç¨‹ï¼ŒæŸ¥è¯¢æ§åˆ¶å°æ˜¯å¦æ‰“å°å‡ºäº†è¯·æ±‚nacosçš„æ—¥å¿—ï¼Œå¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[NacosRestTemplate.java:476] - HTTP method: POST, url: http://192.168.101.65:8848/nacos/v1/cs/configs/listener</span><br></pre></td></tr></table></figure><p>å¹¶ä½¿ç”¨Httpclientæµ‹è¯•è¯¾ç¨‹æŸ¥è¯¢æ¥å£æ˜¯å¦å¯ä»¥æ­£å¸¸æŸ¥è¯¢ã€‚</p><p><strong>å…¬ç”¨é…ç½®</strong></p><p>è¿˜æœ‰ä¸€ä¸ªä¼˜åŒ–çš„ç‚¹æ˜¯å¦‚ä½•åœ¨nacosä¸­é…ç½®é¡¹ç›®çš„å…¬ç”¨é…ç½®å‘¢ï¼Ÿ</p><p>nacosæä¾›äº†shared-configså¯ä»¥å¼•å…¥å…¬ç”¨é…ç½®ã€‚</p><p>åœ¨content-apiä¸­é…ç½®äº†swaggerï¼Œæ‰€æœ‰çš„æ¥å£å·¥ç¨‹ éƒ½éœ€è¦é…ç½®swaggerï¼Œè¿™é‡Œå°±å¯ä»¥å°†swaggerçš„é…ç½®å®šä¹‰ä¸ºä¸€ä¸ªå…¬ç”¨é…ç½®ï¼Œå“ªä¸ªé¡¹ç›®ç”¨å¼•å…¥å³å¯ã€‚</p><p>å•ç‹¬åœ¨xuecheng-plus-commonåˆ†ç»„ä¸‹åˆ›å»ºxuecheng-plusçš„å…¬ç”¨é…ç½®ï¼Œè¿›å…¥nacosçš„å¼€å‘ç¯å¢ƒï¼Œæ·»åŠ swagger-dev.yamlå…¬ç”¨é…ç½®</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308215015982.png" alt="image-20230308215015982"></p><p>åˆ é™¤<code>content-api-dev.yaml</code>ä¸­å¯¹swaggerçš„é…ç½®ã€‚</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308215550366.png" alt="image-20230308215550366"></p><p>é¡¹ç›®ä½¿ç”¨shared-configså¯ä»¥å¼•å…¥å…¬ç”¨é…ç½®ã€‚åœ¨æ¥å£å·¥ç¨‹çš„æœ¬åœ°é…ç½®æ–‡ä»¶ ä¸­å¼•å…¥å…¬ç”¨é…ç½®(å…¶ä»–é…ç½®ç±»ä¼¼,è¿™é‡Œå¿½ç•¥äº†log4jçš„é…ç½®è¿‡ç¨‹)ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#å¾®æœåŠ¡é…ç½®</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: content-api</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: remote.centos.com:8848</span><br><span class="line">      discovery:</span><br><span class="line">        namespace: dev #å‘½åç©ºé—´ (ä¸profile.activeæœ‰åŒºåˆ«é…ç½®æ–‡ä»¶çš„æ‹‰å–ä¸æ˜¯æ ¹æ®å‘½åç©ºé—´æ¥æ‹¼æ¥çš„)</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">      config:</span><br><span class="line">        namespace: dev</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">        file-extension: yaml</span><br><span class="line">        refresh-enabled: true</span><br><span class="line">        extension-configs:</span><br><span class="line">          - data-id: content-service-$&#123;spring.profiles.active&#125;.yaml</span><br><span class="line">            group: xuecheng-plus-project</span><br><span class="line">            refresh: true</span><br><span class="line">        shared-configs:</span><br><span class="line">          - data-id: swagger-$&#123;spring.profiles.active&#125;.yaml</span><br><span class="line">            group: xuecheng-plus-common</span><br><span class="line">            refresh: true</span><br><span class="line">          - data-id: logging-$&#123;spring.profiles.active&#125;.yaml</span><br><span class="line">            group: xuecheng-plus-common</span><br><span class="line">            refresh: true</span><br><span class="line"></span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆï¼Œé‡å¯content-apiæ¥å£å·¥ç¨‹ï¼Œè®¿é—®<a href="https://gitee.com/link?target=http://localhost:63040/content/swagger-ui.html">http://localhost:63040/content/swagger-ui.html</a> æŸ¥çœ‹swaggeræ¥å£æ–‡æ¡£æ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°log4j2æ—¥å¿—è¾“å‡ºæ˜¯å¦æ­£å¸¸ã€‚</p><h5 id="é…ç½®ä¼˜å…ˆçº§"><a href="#é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="é…ç½®ä¼˜å…ˆçº§"></a>é…ç½®ä¼˜å…ˆçº§</h5><p>åˆ°ç›®å‰ä¸ºæ­¢å·²å°†æ‰€æœ‰å¾®æœåŠ¡çš„é…ç½®ç»Ÿä¸€åœ¨nacosè¿›è¡Œé…ç½®ï¼Œç”¨åˆ°çš„é…ç½®æ–‡ä»¶æœ‰æœ¬åœ°çš„é…ç½®æ–‡ä»¶ bootstrap.yamlå’Œnacosä¸Šçš„é…ç½®æ–‡ä»¶ï¼Œå¼•å…¥é…ç½®æ–‡ä»¶çš„å½¢å¼æœ‰ï¼š</p><p>1ã€é€šè¿‡dataidæ–¹å¼å¼•å…¥</p><p>2ã€ä»¥æ‰©å±•é…ç½®æ–‡ä»¶æ–¹å¼å¼•å…¥</p><p>3ã€ä»¥å…±äº«é…ç½®æ–‡ä»¶ æ–¹å¼å¼•å…¥</p><p>ä¸‹è¾¹æµ‹è¯•è¿™å‡ ç§é…ç½®æ–‡ä»¶æ–¹å¼çš„ä¼˜å…ˆçº§ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨å†…å®¹ç®¡ç†æœåŠ¡ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œé¦–å…ˆåœ¨å…±äº«é…ç½®æ–‡ä»¶ swagger-dev.yamlä¸­é…ç½®å››ä¸ªé…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309134210974.png" alt="image-20230309134210974"></p><p>é…ç½®å®Œæˆå‘å¸ƒã€‚</p><p>ä¸‹è¾¹åœ¨content-apiå·¥ç¨‹çš„å¯åŠ¨ç±»ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç è¯»å–è¿™å››ä¸ªé…ç½®é¡¹çš„å€¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class ContentApplication &#123;</span><br><span class="line"></span><br><span class="line">   @Value(&quot;$&#123;test_config.a&#125;&quot;)</span><br><span class="line">   String a;</span><br><span class="line">   @Value(&quot;$&#123;test_config.b&#125;&quot;)</span><br><span class="line">   String b;</span><br><span class="line">   @Value(&quot;$&#123;test_config.c&#125;&quot;)</span><br><span class="line">   String c;</span><br><span class="line">   @Value(&quot;$&#123;test_config.d&#125;&quot;)</span><br><span class="line">   String d;</span><br><span class="line"></span><br><span class="line">   @Bean</span><br><span class="line">   public Integer getTest()&#123;</span><br><span class="line">      System.out.println(&quot;a=&quot;+a);</span><br><span class="line">      System.out.println(&quot;b=&quot;+b);</span><br><span class="line">      System.out.println(&quot;c=&quot;+c);</span><br><span class="line">      System.out.println(&quot;d=&quot;+d);</span><br><span class="line">      return new Integer(1);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">      SpringApplication.run(ContentApplication.class, args);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨content-apiå·¥ç¨‹ï¼Œåœ¨return new Integer(1);å¤„æ‰“æ–­ç‚¹ï¼Œè¿è¡Œåˆ°æ–­ç‚¹å¤„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309134251802.png" alt="image-20230309134251802"></p><p>è¿™è¯´æ˜å·²ç»æˆåŠŸè¯»å–åˆ° å››ä¸ªé…ç½®é¡¹çš„å€¼ã€‚</p><p>ä¸‹è¾¹åœ¨content-apiå·¥ç¨‹çš„æ‰©å±•é…ç½®æ–‡ä»¶ conent-service-dev.yamlä¸­é…ç½®ä¸‰ä¸ªé…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309135407678.png" alt="image-20230309135407678"></p><p>å†æ¬¡é‡å¯content-apiå·¥ç¨‹ï¼Œåœ¨return new Integer(1);å¤„æ‰“æ–­ç‚¹ï¼Œè¿è¡Œåˆ°æ–­ç‚¹å¤„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309135419829.png" alt="image-20230309135419829"></p><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ‰©å±•é…ç½®æ–‡ä»¶æ¯”å…±äº«é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é«˜ã€‚</p><p>ä¸‹è¾¹ç»§ç»­content-api-dev.yamlä¸­é…ç½®ä¸¤ä¸ªé…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">test_config:</span><br><span class="line">  a: 4a</span><br><span class="line">  b: 4b</span><br><span class="line">  c: 4c</span><br><span class="line">  d: 4d</span><br></pre></td></tr></table></figure><p>å†æ¬¡é‡å¯å†…å®¹ç®¡ç†æ¥å£å·¥ç¨‹ï¼Œåœ¨return new Integer(1);å¤„æ‰“æ–­ç‚¹ï¼Œè¿è¡Œåˆ°æ–­ç‚¹å¤„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309135654218.png" alt="image-20230309135654218"></p><p>è¿™è¯´æ˜æœ¬åœ°é…ç½®æ–‡ä»¶é…ç½®çš„å†…å®¹æ²¡æœ‰èµ·ä½œç”¨ï¼ŒåŸå› æ˜¯nacosé…ç½®æ–‡ä»¶ä¸­çš„ç›¸åŒçš„é…ç½®é¡¹è¦†ç›–äº†æœ¬åœ°çš„é…ç½®é¡¹ã€‚</p><p>åˆ°è¿™å¯ä»¥æ€»ç»“å„å„é…ç½®æ–‡ä»¶ çš„ä¼˜å…ˆçº§ï¼šé¡¹ç›®åº”ç”¨åé…ç½®æ–‡ä»¶ &gt; æ‰©å±•é…ç½®æ–‡ä»¶ &gt; å…±äº«é…ç½®æ–‡ä»¶ &gt; æœ¬åœ°é…ç½®æ–‡ä»¶ã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä»¬åœ¨æµ‹è¯•ç¨‹åºæ—¶ç›´æ¥åœ¨æœ¬åœ°åŠ ä¸€ä¸ªé…ç½®è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ—¶æˆ‘ä»¬æƒ³è®©æœ¬åœ°æœ€ä¼˜å…ˆï¼Œå¯ä»¥åœ¨nacosé…ç½®æ–‡ä»¶ ä¸­é…ç½®å¦‚ä¸‹å³å¯å®ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line"> cloud:</span><br><span class="line">  config:</span><br><span class="line">    override-none: true</span><br></pre></td></tr></table></figure><p>å†æ¬¡é‡å¯content-apiå·¥ç¨‹ï¼Œåœ¨return new Integer(1);å¤„æ‰“æ–­ç‚¹ï¼Œè¿è¡Œåˆ°æ–­ç‚¹å¤„ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309135741633.png" alt="image-20230309135741633"></p><p>å¯ä»¥çœ‹å‡ºæ­¤æ—¶æœ¬åœ°é…ç½®æœ€ä¼˜å…ˆ</p><p>é™¤æ­¤ä¹‹å¤–,æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šå¸¦æœ¬åœ°é…ç½®å†™å…¥åˆ°bootstrap.ymlä¸­è€Œæ˜¯é€šè¿‡jvmå‚æ•°</p><p>å¦‚æˆ‘ä»¬è¦å¯åŠ¨ä¸¤ä¸ªæœåŠ¡è¿›è¡Œè°ƒè¯•,é‚£ä¹ˆç«¯å£å·å°±ä¸èƒ½ä¸€è‡´,å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ jvmå‚æ•°æŒ‡å®šç«¯å£å·:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dserver.port=8088</span><br></pre></td></tr></table></figure><p>å¦‚æˆ‘ä»¬ç°åœ¨å‘å¯åŠ¨ä¸¤ä¸ªcontentæœåŠ¡</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309145108805.png" alt="image-20230309145108805"></p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309145353006.png" alt="image-20230309145353006"></p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309145419800.png" alt="image-20230309145419800"></p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309145613692.png" alt="image-20230309145613692"></p><h5 id="4-2-2-6-å¯¼å…¥é…ç½®æ–‡ä»¶"><a href="#4-2-2-6-å¯¼å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="4.2.2.6 å¯¼å…¥é…ç½®æ–‡ä»¶"></a>4.2.2.6 å¯¼å…¥é…ç½®æ–‡ä»¶</h5><p>è¯¾ç¨‹èµ„æ–™ä¸­æä¾›äº†ç³»ç»Ÿç”¨çš„æ‰€æœ‰é…ç½®æ–‡ä»¶nacos_config_export.zipï¼Œä¸‹è¾¹å°†nacos_config_export.zipå¯¼å…¥nacosã€‚</p><p>è¿›å…¥å…·ä½“çš„å‘½åç©ºé—´ï¼Œç‚¹å‡»â€œå¯¼å…¥é…ç½®â€</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309140250256.png" alt="image-20230309140250256"></p><p>æ‰“å¼€å¯¼å…¥çª—å£</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309140325306.png" alt="image-20230309140325306"></p><p>ç›¸åŒçš„é…ç½®è·³è¿‡è¦†ç›–é…ç½®ã€‚</p><p>ç‚¹å‡»â€œä¸Šä¼ æ–‡ä»¶â€é€‰æ‹©nacos_config_export.zipå¼€å§‹å¯¼å…¥ã€‚</p><p> <strong>è¿œç¨‹æœåŠ¡å™¨</strong>çš„è®°å¾—ä¿®æ”¹rabbitmq-devçš„ipåœ°å€~</p><h2 id="æ­å»ºGateway"><a href="#æ­å»ºGateway" class="headerlink" title="æ­å»ºGateway"></a>æ­å»ºGateway</h2><p>æœ¬é¡¹ç›®ä½¿ç”¨Spring Cloud Gatewayä½œä¸ºç½‘å…³ï¼Œä¸‹è¾¹åˆ›å»ºç½‘å…³å·¥ç¨‹ã€‚</p><p>æ–°å»ºä¸€ä¸ªç½‘å…³å·¥ç¨‹ã€‚</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309141037907.png" alt="image-20230309141037907"></p><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309141934603.png" alt="image-20230309141934603"></p><p>æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;!--ç½‘å…³--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--æœåŠ¡å‘ç°ä¸­å¿ƒ--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">     &lt;!-- æ’é™¤ Spring Boot ä¾èµ–çš„æ—¥å¿—åŒ…å†²çª --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">        &lt;exclusions&gt;</span><br><span class="line">            &lt;exclusion&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;</span><br><span class="line">            &lt;/exclusion&gt;</span><br><span class="line">        &lt;/exclusions&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Spring Boot é›†æˆ log4j2 --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><p>é…ç½®ç½‘å…³çš„bootstrap.yamlé…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#å¾®æœåŠ¡é…ç½®</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: gateway</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: 192.168.101.65:8848</span><br><span class="line">      discovery:</span><br><span class="line">        namespace: $&#123;spring.profiles.active&#125;</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">      config:</span><br><span class="line">        namespace: $&#123;spring.profiles.active&#125;</span><br><span class="line">        group: xuecheng-plus-project</span><br><span class="line">        file-extension: yaml</span><br><span class="line">        refresh-enabled: true</span><br><span class="line">        shared-configs:</span><br><span class="line">          - data-id: logging-$&#123;spring.profiles.active&#125;.yaml</span><br><span class="line">            group: xuecheng-plus-common</span><br><span class="line">            refresh: true</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br></pre></td></tr></table></figure><p>åœ¨nacosä¸Šé…ç½®ç½‘å…³è·¯ç”±ç­–ç•¥ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309141606145.png" alt="image-20230309141606145"></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="minio"><a href="#minio" class="headerlink" title="minio"></a>minio</h1><p>ä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨æ•°æ®çš„ä¸œè¥¿å•¦ï¼Œå¦‚æœå­¦è¿‡å¤§æ•°æ®çš„è¯å°±åº”è¯¥çŸ¥é“Hadoopï¼Œé‡Œé¢çš„åº•å±‚å°±æ˜¯HDFS,æ¨¡å¼ä¸ºä¸»ä»ç»“æ„ï¼Œè€Œminioåˆ™æ˜¯ç›¸åçš„å»ä¸­å¿ƒåŒ–æ¨¡å¼ï¼Œä¸‹é¢æ˜¯å®˜æ–¹ç‚¹çš„ä»‹ç»ï¼š</p><h5 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h5><p>æœ¬é¡¹ç›®é‡‡ç”¨MinIOæ„å»ºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ŒMinIO æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çš„æœåŠ¡,å¯ä»¥å¾ˆç®€å•çš„å’Œå…¶ä»–åº”ç”¨çš„ç»“åˆä½¿ç”¨ï¼Œå®ƒå…¼å®¹äºšé©¬é€Š S3 äº‘å­˜å‚¨æœåŠ¡æ¥å£ï¼Œéå¸¸é€‚åˆäºå­˜å‚¨å¤§å®¹é‡éç»“æ„åŒ–çš„æ•°æ®ï¼Œä¾‹å¦‚å›¾ç‰‡ã€è§†é¢‘ã€æ—¥å¿—æ–‡ä»¶ã€å¤‡ä»½æ•°æ®å’Œå®¹å™¨&#x2F;è™šæ‹Ÿæœºé•œåƒç­‰ã€‚</p><p>å®ƒä¸€å¤§ç‰¹ç‚¹å°±æ˜¯è½»é‡ï¼Œä½¿ç”¨ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå„ç§å¹³å°ï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§5TBï¼Œå…¼å®¹ Amazon S3æ¥å£ï¼Œæä¾›äº† Javaã€Pythonã€GOç­‰å¤šç‰ˆæœ¬SDKæ”¯æŒã€‚</p><p>å®˜ç½‘ï¼š<a href="https://gitee.com/link?target=https://min.io">https://min.io</a></p><p>ä¸­æ–‡ï¼š<a href="https://gitee.com/link?target=https://www.minio.org.cn/%EF%BC%8Chttp://docs.minio.org.cn/docs/">https://www.minio.org.cn/ï¼Œhttp://docs.minio.org.cn/docs/</a></p><p>MinIOé›†ç¾¤é‡‡ç”¨å»ä¸­å¿ƒåŒ–å…±äº«æ¶æ„ï¼Œæ¯ä¸ªç»“ç‚¹æ˜¯å¯¹ç­‰å…³ç³»ï¼Œé€šè¿‡Nginxå¯å¯¹MinIOè¿›è¡Œè´Ÿè½½å‡è¡¡è®¿é—®ã€‚</p><p>å»ä¸­å¿ƒåŒ–æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><p>åœ¨å¤§æ•°æ®é¢†åŸŸï¼Œé€šå¸¸çš„è®¾è®¡ç†å¿µéƒ½æ˜¯æ— ä¸­å¿ƒå’Œåˆ†å¸ƒå¼ã€‚Minioåˆ†å¸ƒå¼æ¨¡å¼å¯ä»¥å¸®åŠ©ä½ æ­å»ºä¸€ä¸ªé«˜å¯ç”¨çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›å­˜å‚¨è®¾å¤‡ï¼Œè€Œä¸ç”¨è€ƒè™‘å…¶çœŸå®ç‰©ç†ä½ç½®ã€‚</p><p>å®ƒå°†åˆ†å¸ƒåœ¨ä¸åŒæœåŠ¡å™¨ä¸Šçš„å¤šå—ç¡¬ç›˜ç»„æˆä¸€ä¸ªå¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚ç”±äºç¡¬ç›˜åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œåˆ†å¸ƒå¼Minioé¿å…äº†å•ç‚¹æ•…éšœã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230309164159781.png" alt="image-20230309164159781"></p><p>Minioä½¿ç”¨çº åˆ ç æŠ€æœ¯æ¥ä¿æŠ¤æ•°æ®ï¼Œå®ƒæ˜¯ä¸€ç§æ¢å¤ä¸¢å¤±å’ŒæŸåæ•°æ®çš„æ•°å­¦ç®—æ³•ï¼Œå®ƒå°†æ•°æ®åˆ†å—å†—ä½™çš„åˆ†æ•£å­˜å‚¨åœ¨å„å„èŠ‚ç‚¹çš„ç£ç›˜ä¸Šï¼Œæ‰€æœ‰çš„å¯ç”¨ç£ç›˜ç»„æˆä¸€ä¸ªé›†åˆï¼Œä¸Šå›¾ç”±8å—ç¡¬ç›˜ç»„æˆä¸€ä¸ªé›†åˆï¼Œå½“ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶æ—¶ä¼šé€šè¿‡çº åˆ ç ç®—æ³•è®¡ç®—å¯¹æ–‡ä»¶è¿›è¡Œåˆ†å—å­˜å‚¨ï¼Œé™¤äº†å°†æ–‡ä»¶æœ¬èº«åˆ†æˆ4ä¸ªæ•°æ®å—ï¼Œè¿˜ä¼šç”Ÿæˆ4ä¸ªæ ¡éªŒå—ï¼Œæ•°æ®å—å’Œæ ¡éªŒå—ä¼šåˆ†æ•£çš„å­˜å‚¨åœ¨è¿™8å—ç¡¬ç›˜ä¸Šã€‚</p><p>ä½¿ç”¨çº åˆ ç çš„å¥½å¤„æ˜¯å³ä¾¿ä¸¢å¤±ä¸€åŠæ•°é‡ï¼ˆN&#x2F;2ï¼‰çš„ç¡¬ç›˜ï¼Œä»ç„¶å¯ä»¥æ¢å¤æ•°æ®ã€‚ æ¯”å¦‚ä¸Šè¾¹é›†åˆä¸­æœ‰4ä¸ªä»¥å†…çš„ç¡¬ç›˜æŸå®³ä»å¯ä¿è¯æ•°æ®æ¢å¤ï¼Œä¸å½±å“ä¸Šä¼ å’Œä¸‹è½½ï¼Œå¦‚æœå¤šäºä¸€åŠçš„ç¡¬ç›˜åäº†åˆ™æ— æ³•æ¢å¤ã€‚</p><h2 id="è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²minio"><a href="#è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²minio" class="headerlink" title="è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²minio"></a><strong>è¿œç¨‹æœåŠ¡å™¨éƒ¨ç½²minio</strong></h2><p><strong>è€å¸ˆé»˜è®¤çš„è™šæ‹Ÿæ˜¯æœ‰minioç¯å¢ƒçš„ï¼Œè¿™é‡Œæ˜¯å…¶å®ƒæœåŠ¡å™¨æˆ–è‡ªæ­è™šæ‹Ÿæœºçš„æ–¹æ³•~</strong></p><p>å…ˆæ‹‰å–é•œåƒï¼Œå¯ä»¥åœ¨åé¢åŠ ä¸Šç‰ˆæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull minio/minio</span><br></pre></td></tr></table></figure><p>äºŒã€åˆ›å»ºæŒ‚è½½ç›®å½•</p><p>1 å®¿ä¸»æœºä¸å®¹å™¨æŒ‚è½½æ˜ å°„</p><table><thead><tr><th>å®¿ä¸»æœºä½ç½®</th><th>å®¹å™¨ä½ç½®</th></tr></thead><tbody><tr><td>&#x2F;data&#x2F;minio&#x2F;config</td><td>&#x2F;data</td></tr><tr><td>&#x2F;data&#x2F;minio&#x2F;data</td><td>&#x2F;root&#x2F;.minio</td></tr></tbody></table><p>2 æŒ‚è½½å‘½ä»¤æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/minio/config</span><br><span class="line">mkdir -p /data/minio/data</span><br></pre></td></tr></table></figure><p>ä¸‰ã€è¿è¡ŒMinIO</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9000:9000 -p 9090:9090 --name minio \</span><br><span class="line">-d --restart=always \</span><br><span class="line">-e &quot;MINIO_ACCESS_KEY=admin&quot; \</span><br><span class="line">-e &quot;MINIO_SECRET_KEY=admin123456&quot; \</span><br><span class="line">-v /data/minio/data:/data \</span><br><span class="line">-v /data/minio/config:/root/.minio \minio/minio \</span><br><span class="line">server /data --console-address &quot;:9090&quot;</span><br></pre></td></tr></table></figure><blockquote><p>å‘½ä»¤å‚æ•°è§£é‡Šï¼š<br>-d :åå°å¯åŠ¨<br>-p :ç«¯å£æ˜ å°„<br>-name :ä¸ºè¿™ä¸ªå®¹å™¨å–ä¸€ä¸ªåå­—<br>-e :è®¾ç½®ç¯å¢ƒå˜é‡<br>-v :æ–‡ä»¶æŒ‚è½½ä½ç½®<br>â€“console-address â€œ:9090â€ :é€‰æ‹©é™æ€ç«¯å£å·ï¼Œè¿™é‡Œæ³¨æ„ä¸‹æ§åˆ¶å°ç«¯å£å·ä¸èƒ½å’Œé™æ€ç«¯å£å·ä¸€æ ·</p></blockquote><p>ç›®å‰çš„dockerå®¹å™¨ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202402/3018339-20240202055724430-392625930.png" alt="img"></p><p>å››ã€æŸ¥çœ‹MinIOæ˜¯å¦å¯åŠ¨æˆåŠŸ</p><ul><li>æ‰“å¼€ <code>http://ip:9090</code></li><li>å¯†ç ä¸ºä¸Šé¢è®¾ç½®çš„admin admin123456</li></ul><h2 id="é¡¹ç›®æ–‡ä»¶é…ç½®"><a href="#é¡¹ç›®æ–‡ä»¶é…ç½®" class="headerlink" title="é¡¹ç›®æ–‡ä»¶é…ç½®"></a>é¡¹ç›®æ–‡ä»¶é…ç½®</h2><p>åœ¨media-serviceçš„pomé‡Œæ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.minio<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>minio<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.squareup.okhttp3<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>okhttp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç™»è¿›å»ç½‘é¡µç›´æ¥åˆ›å»ºä¸€ä¸ªbucketï¼Œç„¶åå°†å…¶è®¿é—®ä»…é™æ”¹æˆpublicï¼Œä¸ç„¶ç­‰ä¸‹æµ‹è¯•ç±»è®¿é—®ä¸åˆ°ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202402/3018339-20240202060911339-1759773817.png" alt="img"></p><p>ç›´æ¥æä¸ªæµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.M</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æµ‹è¯•minioçš„sdk</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/2/17 11:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MinioTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">MinioClient</span> <span class="variable">minioClient</span> <span class="operator">=</span></span><br><span class="line">            MinioClient.builder()</span><br><span class="line">                    .endpoint(<span class="string">&quot;http://xx.xx.xx.xx:9000&quot;</span>)</span><br><span class="line">                    .credentials(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin123456&quot;</span>)</span><br><span class="line">                    .build();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_upload</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡æ‰©å±•åå¾—åˆ°åª’ä½“èµ„æºç±»å‹ mimeType</span></span><br><span class="line">        <span class="comment">//æ ¹æ®æ‰©å±•åå–å‡ºmimeType</span></span><br><span class="line">        <span class="type">ContentInfo</span> <span class="variable">extensionMatch</span> <span class="operator">=</span> ContentInfoUtil.findExtensionMatch(<span class="string">&quot;.mp4&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">mimeType</span> <span class="operator">=</span> MediaType.APPLICATION_OCTET_STREAM_VALUE;<span class="comment">//é€šç”¨mimeTypeï¼Œå­—èŠ‚æµ</span></span><br><span class="line">        <span class="keyword">if</span>(extensionMatch!=<span class="literal">null</span>)&#123;</span><br><span class="line">            mimeType = extensionMatch.getMimeType();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸Šä¼ æ–‡ä»¶çš„å‚æ•°ä¿¡æ¯</span></span><br><span class="line">        <span class="type">UploadObjectArgs</span> <span class="variable">uploadObjectArgs</span> <span class="operator">=</span> UploadObjectArgs.builder()</span><br><span class="line">                .bucket(<span class="string">&quot;testbucket&quot;</span>)<span class="comment">//æ¡¶</span></span><br><span class="line">                .filename(<span class="string">&quot;D:\\develop\\upload\\1.mp4&quot;</span>) <span class="comment">//æŒ‡å®šæœ¬åœ°æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">//                .object(&quot;1.mp4&quot;)//å¯¹è±¡å åœ¨æ¡¶ä¸‹å­˜å‚¨è¯¥æ–‡ä»¶</span></span><br><span class="line">                .object(<span class="string">&quot;test/01/1.mp4&quot;</span>)<span class="comment">//å¯¹è±¡å æ”¾åœ¨å­ç›®å½•ä¸‹</span></span><br><span class="line">                .contentType(mimeType)<span class="comment">//è®¾ç½®åª’ä½“æ–‡ä»¶ç±»å‹</span></span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">        minioClient.uploadObject(uploadObjectArgs);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ é™¤æ–‡ä»¶</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_delete</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//RemoveObjectArgs</span></span><br><span class="line">        <span class="type">RemoveObjectArgs</span> <span class="variable">removeObjectArgs</span> <span class="operator">=</span> RemoveObjectArgs.builder().bucket(<span class="string">&quot;testbucket&quot;</span>).object(<span class="string">&quot;1.mp4&quot;</span>).build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ é™¤æ–‡ä»¶</span></span><br><span class="line">        minioClient.removeObject(removeObjectArgs);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ–‡ä»¶ ä»minioä¸­ä¸‹è½½</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_getFile</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">GetObjectArgs</span> <span class="variable">getObjectArgs</span> <span class="operator">=</span> GetObjectArgs.builder().bucket(<span class="string">&quot;testbucket&quot;</span>).object(<span class="string">&quot;test/01/1.mp4&quot;</span>).build();</span><br><span class="line">        <span class="comment">//æŸ¥è¯¢è¿œç¨‹æœåŠ¡è·å–åˆ°ä¸€ä¸ªæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">FilterInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> minioClient.getObject(getObjectArgs);</span><br><span class="line">        <span class="comment">//æŒ‡å®šè¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\develop\\upload\\1a.mp4&quot;</span>));</span><br><span class="line">        IOUtils.copy(inputStream,outputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ ¡éªŒæ–‡ä»¶çš„å®Œæ•´æ€§å¯¹æ–‡ä»¶çš„å†…å®¹è¿›è¡Œmd5</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileInputStream1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\develop\\upload\\1.mp4&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">source_md5</span> <span class="operator">=</span> DigestUtils.md5Hex(fileInputStream1);</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\develop\\upload\\1a.mp4&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">local_md5</span> <span class="operator">=</span> DigestUtils.md5Hex(fileInputStream);</span><br><span class="line">        <span class="keyword">if</span>(source_md5.equals(local_md5))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸‹è½½æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹æ³¨é‡Šå°±çœ‹å¾—æ‡‚äº†ï¼Œå¯ä»¥ä¿®æ”¹ä¸‹ä¸€äº›å‚æ•°ç„¶åè‡ªå·±æµ‹è¯•ä¸‹ï¼Œæ˜¯æ²¡é—®é¢˜çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æˆåœ¨çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€äºŒã€‘(è¯¾ç¨‹ç›¸å…³æ¥å£)</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E4%BA%8C%E3%80%91-%E8%AF%BE%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E4%BA%8C%E3%80%91-%E8%AF%BE%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p><strong>ï¼ï¼ï¼ç§»æ­¥æˆ‘çš„è€åšå®¢ï¼š<a href="https://www.cnblogs.com/hepingan/p/17981502">ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€äºŒã€‘(è¯¾ç¨‹ç›¸å…³æ¥å£) - ä½•å¹³å®‰ - åšå®¢å›­</a>ï¼ï¼ï¼</strong></p><p><strong>ä¸‹é¢æ­£å¼å¼€å§‹å¼€å‘ï¼</strong></p><p><strong>å¯¹äº†æˆ‘çš„ç¬”è®°è‚¯å®šä¸ä¼šæŠŠå…¨éƒ¨ä»£ç éƒ½æ‰“ä¸Šå»ï¼Œæˆ‘ä¼šæŒ‘ä¸€äº›æŠ€æœ¯ç‚¹è¿›è¡Œé˜è¿°ã€‚</strong></p><p><strong>è¡¥å……ä¸‹ä¸ºå•¥è¦å«DTOï¼ŒPOå•¥çš„ï¼š</strong></p><p><strong>DTO</strong>:å‰ç«¯ç»™åç«¯ä¼ é€’çš„æ•°æ®</p><p><strong>VO</strong>:åç«¯ç»™å‰ç«¯ä¼ é€’çš„æ•°æ®</p><p><strong>DO</strong>:æ•°æ®åº“è¡¨ç»“æ„</p><p><strong>PO</strong>:æ•°æ®åº“è¡¨ç»“æ„åˆ°JAVAçš„æ˜ å°„ç±»</p><h1 id="è¯¾ç¨‹ä¿¡æ¯"><a href="#è¯¾ç¨‹ä¿¡æ¯" class="headerlink" title="è¯¾ç¨‹ä¿¡æ¯"></a><strong>è¯¾ç¨‹ä¿¡æ¯</strong></h1><h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a><strong>æŸ¥è¯¢</strong></h2><p>å¼€å‘ä¹ æƒ¯ä»åº•å±‚å¼€å§‹ï¼Œæ‰€ä»¥å°±ä»DAOå±‚ï¼ˆmapperå±‚ï¼‰å¼€å§‹å†™ï¼Œå†å†™serviceã€‚</p><p>å…ˆåœ¨content-serviceå†™ä¸ªæµ‹è¯•ç±»ï¼Œé…ç½®å’ŒåŒ…çœ‹é»‘é©¬çš„å»ã€‚ä»‹ç»ä¸‹ä»¥å‰å­¦è¿‡çš„åˆ†é¡µæŸ¥è¯¢æ’ä»¶courseBaseMapper,å®è´¨ä¸Šå°±æ˜¯åœ¨sqlè¯­å¥ä¸ŠåŠ ä¸Šlimitç­‰è¯­å¥ï¼Œå¯ä»¥çœ‹ä¸‹æµ‹è¯•ç±»çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CourseBaseMapperTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    CourseBaseMapper courseBaseMapper;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCourse</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">CourseBase</span> <span class="variable">courseBase</span> <span class="operator">=</span> courseBaseMapper.selectById(<span class="number">18</span>);</span><br><span class="line">        Assertions.assertNotNull(courseBase);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ctrlç‚¹å‡»selectByIdå°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ’ä»¶çš„åº•å±‚å®ç°åŸç†ã€‚ç„¶åæ˜¯åˆ†é¡µæŸ¥è¯¢çš„å…¨éƒ¨ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCourse</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">CourseBase</span> <span class="variable">courseBase</span> <span class="operator">=</span> courseBaseMapper.selectById(<span class="number">18</span>);</span><br><span class="line">        Assertions.assertNotNull(courseBase);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line">        <span class="type">PageParams</span> <span class="variable">pageParams</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">PageParams</span>();</span><br><span class="line">        pageParams.setPageNo(<span class="number">1L</span>);</span><br><span class="line">        pageParams.setPageSize(<span class="number">10L</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">QueryCourseParamsDto</span> <span class="variable">courseParamsDto</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">QueryCourseParamsDto</span>();</span><br><span class="line">        courseParamsDto.setCourseName(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        LambdaQueryWrapper&lt;CourseBase&gt; queryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//åœ¨sqlä¸­æ‹¼æ¥course_base.name like &#x27;%å€¼%&#x27;</span></span><br><span class="line">        queryWrapper.like(StringUtils.isNotEmpty(courseParamsDto.getCourseName()),CourseBase::getName,courseParamsDto.getCourseName());</span><br><span class="line">        <span class="comment">//æ ¹æ®è¯¾ç¨‹å®¡æ ¸çŠ¶æ€æŸ¥è¯¢</span></span><br><span class="line">        queryWrapper.eq(StringUtils.isNotEmpty(courseParamsDto.getAuditStatus()),CourseBase::getAuditStatus,courseParamsDto.getAuditStatus());</span><br><span class="line"></span><br><span class="line">        Page&lt;CourseBase&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>,<span class="number">10</span>);</span><br><span class="line">        Page&lt;CourseBase&gt; pageResult = courseBaseMapper.selectPage(page, queryWrapper);</span><br><span class="line">        PageResult&lt;CourseBase&gt; tPageResult = <span class="keyword">new</span> <span class="title class_">PageResult</span>&lt;&gt;(pageResult.getRecords(),pageResult.getTotal(),pageParams.getPageNo(),pageParams.getPageSize());</span><br><span class="line">        System.out.println(tPageResult);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‡ºæ¥æ‹¿åˆ°æ–­ç‚¹æœ‰ç»“æœå°±æˆäº†ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240124052950614-469568137.png" alt="img"></p><p> å¤§æ¦‚æµç¨‹å°±æ˜¯åˆ©ç”¨LambdaQueryWrapperé‚£ä¸ªæ’ä»¶ç„¶åä¸€ç›´åˆ©ç”¨å‚æ•°æŸ¥è¯¢æ‰€éœ€è¦çš„ç»“æœï¼Œä¸€æ­¥ä¸€æ­¥è£…å¡«æ•°æ®ï¼Œæœ€ç»ˆä»¥PageResultçš„å½¢å¼è¿”å›å°±è¡Œã€‚</p><p>ç„¶åè¯´ä¸€ä¸‹æ ¹æ®è¯¾ç¨‹çŠ¶æ€è¿›è¡ŒæŸ¥è¯¢ï¼Œåœ¨å®é™…å¼€å‘ä¸­ä¸€èˆ¬ä¼šä»¥ä»£ç æ¥ä»£æ›¿è¯¾ç¨‹çŠ¶æ€çš„ä¸­æ–‡ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿ä¿®æ”¹å’Œè§„èŒƒï¼Œæ‰€ä»¥æœ‰ä¸ªxc2.0_systemçš„dictionaryçš„æ•°æ®åº“è¡¨å°±æ‹¿æ¥è¡¨ç¤ºå¯¹åº”å…³ç³»ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240124182055306-1832049081.png" alt="img"></p><p> ç›´æ¥åœ¨åˆšåˆšçš„ä»£ç ä¸‹åŠ ä¸€ä¸ªæ¡ä»¶ï¼šcourseParamsDto.setAuditStatus(â€œ202004â€);</p><p>æ¥ä¸‹æ¥å°±æ¥æµ‹è¯•æ¥å£ï¼Œåœ¨é»˜è®¤æ–‡ä»¶é‡Œapiæ¨¡å—ä¸‹æœ‰ä¸ªControllerç±»é‡Œé¢æ¥å£æ˜¯å†™å¥½çš„ï¼Œç„¶åå°±å¯ä»¥è¿è¡ŒContentApplicationçš„springbootå¯åŠ¨é¡¹ï¼Œç„¶åæµè§ˆå™¨è¾“å…¥localhost:63040&#x2F;content&#x2F;swagger-ui.html,ç„¶åæµ‹è¯•ä¸€ä¸‹æœ‰æ•°æ®å°±æˆåŠŸã€‚è¿˜æœ‰ä¸ªHttpClientæ’ä»¶æ¥å£æµ‹è¯•ï¼Œå¯ä»¥å»ä¸‹è½½æœä¸€ä¸‹ï¼Œpostmanä¹Ÿå¯ä»¥ã€‚åƒæˆ‘çš„å°±æ¯”è¾ƒæ¨èhttpclientç›´æ¥å°±åœ¨ideaé‡Œæµ‹è¯•ï¼š<img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240125011128042-1654034248.png" alt="img"></p><p>å®ƒè¿˜å¯ä»¥è®¾ç½®ç¯å¢ƒï¼Œåœ¨api-testä¸‹åˆ›å»ºä¸€ä¸ªenv.jsonæ–‡ä»¶ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><p>{<br> â€œdevâ€: {<br>  â€œaccess_tokenâ€: â€œâ€,<br>  â€œgateway_hostâ€: â€œlocalhost:63010â€,<br>  â€œcontent_hostâ€: â€œlocalhost:63040â€,<br>  â€œsystem_hostâ€: â€œlocalhost:63110â€,<br>  â€œmedia_hostâ€: â€œlocalhost:63050â€,<br>  â€œsearch_hostâ€: â€œlocalhost:63080â€,<br>  â€œauth_hostâ€: â€œlocalhost:63070â€,<br>  â€œcheckcode_hostâ€: â€œlocalhost:63075â€,<br>  â€œlearning_hostâ€: â€œlocalhost:63020â€<br> }<br>}</p><p>ç„¶åå†åœ¨httpé‡Œå°†localhost:63040æ¢æˆNaN</p><h2 id="å‰åç«¯è”è°ƒ"><a href="#å‰åç«¯è”è°ƒ" class="headerlink" title="å‰åç«¯è”è°ƒ"></a>å‰åç«¯è”è°ƒ</h2><p>è§£å‹æ‰“å¼€å‰ç«¯æ–‡ä»¶è¿™é‡Œç”¨ideaæ‰“å¼€ï¼Œç„¶åå»è®¾ç½®é‡Œé…ç½®npmå’Œnodeçš„ä½ç½®ï¼Œæ‰“å¼€æ ¹ç›®å½•ä¸‹çš„package.json ,è¿è¡Œserveçš„ï¼ˆideaå®ƒæœ‰ï¼‰ï¼Œæˆ–è€…å³é”®package.jsoné€‰æ‹©æŸ¥çœ‹npmè„šæœ¬æ‰¾åˆ°serveè¿è¡Œã€‚å¯¹äº†å¦‚æœè¿è¡Œå¤±è´¥ï¼Œå¤§æ¦‚ç‡æ˜¯ä½ çš„nodeç‰ˆæœ¬ä¸è¯¥é¡¹ç›®çš„nodeæ–‡ä»¶ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œä¸¤ç§åŠæ³•ï¼Œä¸€æ˜¯å¸è½½é¡¹ç›®é‡Œçš„node_moudels,å†cnpm installå®‰è£…è‡ªå·±ç‰ˆæœ¬çš„nodeæ–‡ä»¶ï¼ŒäºŒæ˜¯ä½ è‡ªå·±æ›´æ¢nodeç‰ˆæœ¬ï¼Œè¿™é‡Œæ˜¯16.17.0ï¼Œä½†æ˜¯æˆ‘ç”¨äº†ç¬¬ä¸€ç§æ–¹æ³•å‘ç°è¿è¡Œæ˜¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä¸€ç›´æŠ¥é”™ï¼Œå¯èƒ½ç‰ˆæœ¬ä¸åŒæœ‰äº›è¯­æ³•ä¹Ÿä¸åŒå§å“ˆå“ˆå“ˆï¼Œè¿˜æ˜¯ç”¨ç¬¬äºŒç§å§ã€‚</p><p>è¿™é‡Œæ¨èå¦ä¸€ä¸ªæ’ä»¶nvmï¼Œå¯ä»¥ç®¡ç†nodeçš„ç‰ˆæœ¬ï¼š<a href="https://blog.csdn.net/qq_33745371/article/details/109039414">windowsä¸‹nodeæ›´æ¢ç‰ˆæœ¬ï¼ˆç®€å•æ“ä½œï¼‰_nodeç‰ˆæœ¬æ›´æ”¹-CSDNåšå®¢</a>ï¼Œæœ‰äº†å®ƒæƒ³åˆ‡æ¢å“ªä¸ªç‰ˆæœ¬å°±åˆ‡æ¢ã€‚æ¨èæˆ‘è¿™æ ·åšï¼Œç®—æ˜¯ç¬¬ä¸‰ç§æ–¹æ³•å§qwq</p><p>å°†èµ„æ–™çš„systemæ–‡ä»¶å¯¼å…¥javaé¡¹ç›®ä¸­ï¼Œå¤åˆ¶apiçš„resourseåˆ°serviceå¹¶ä¿®æ”¹ä¸‹æ•°æ®åº“çš„è¿æ¥åœ°å€ã€‚</p><h3 id="è§£å†³è·¨åŸŸé—®é¢˜"><a href="#è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³è·¨åŸŸé—®é¢˜"></a>è§£å†³è·¨åŸŸé—®é¢˜</h3><p>åœ¨æµè§ˆå™¨é€šè¿‡<a href="http://localhost:8601/%E5%9C%B0%E5%9D%80%E8%AE%BF%E9%97%AE%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E3%80%82">http://localhost:8601/åœ°å€è®¿é—®å‰ç«¯å·¥ç¨‹ã€‚</a></p><p>chromeæµè§ˆå™¨æŠ¥é”™å¦‚ä¸‹ï¼š</p><p>Access to XMLHttpRequest at â€˜<a href="http://localhost:63110/system/dictionary/all">http://localhost:63110/system/dictionary/all</a>â€˜ from origin â€˜<a href="http://localhost:8601/">http://localhost:8601</a>â€˜ has been blocked by CORS policy: No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource.</p><p>firefoxæµè§ˆå™¨æŠ¥é”™å¦‚ä¸‹ï¼š</p><p>å·²æ‹¦æˆªè·¨æºè¯·æ±‚ï¼šåŒæºç­–ç•¥ç¦æ­¢è¯»å–ä½äº <a href="http://localhost:63110/system/dictionary/all">http://localhost:63110/system/dictionary/all</a> çš„è¿œç¨‹èµ„æºã€‚ï¼ˆåŸå› ï¼šCORS å¤´ç¼ºå°‘ â€˜Access-Control-Allow-Originâ€™ï¼‰ã€‚çŠ¶æ€ç ï¼š200ã€‚</p><p>æç¤ºï¼šä»<a href="http://localhost:8601/">http://localhost:8601</a>è®¿é—®<a href="http://localhost:63110/system/dictionary/all%E8%A2%ABCORS">http://localhost:63110/system/dictionary/allè¢«CORS</a> policyé˜»æ­¢ï¼Œå› ä¸ºæ²¡æœ‰Access-Control-Allow-Origin å¤´ä¿¡æ¯ã€‚CORSå…¨ç§°æ˜¯ cross origin resource share è¡¨ç¤ºè·¨åŸŸèµ„æºå…±äº«ã€‚</p><p>å‡ºè¿™ä¸ªæç¤ºçš„åŸå› æ˜¯åŸºäºæµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼Œå»åˆ¤æ–­æ˜¯å¦è·¨åŸŸè¯·æ±‚ï¼ŒåŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œä»ä¸€ä¸ªåœ°å€è¯·æ±‚å¦ä¸€ä¸ªåœ°å€ï¼Œå¦‚æœåè®®ã€ä¸»æœºã€ç«¯å£ä¸‰è€…å…¨éƒ¨ä¸€è‡´åˆ™ä¸å±äºè·¨åŸŸï¼Œå¦åˆ™æœ‰ä¸€ä¸ªä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸè¯·æ±‚ã€‚</p><p>æ¯”å¦‚ï¼š</p><p>ä»<a href="http://localhost:8601/">http://localhost:8601</a> åˆ°  <a href="http://localhost:8602/">http://localhost:8602</a> ç”±äºç«¯å£ä¸åŒï¼Œæ˜¯è·¨åŸŸã€‚</p><p>ä»<a href="http://192.168.101.10:8601/">http://192.168.101.10:8601</a> åˆ°  <a href="http://192.168.101.11:8601/">http://192.168.101.11:8601</a> ç”±äºä¸»æœºä¸åŒï¼Œæ˜¯è·¨åŸŸã€‚</p><p>ä»<a href="http://192.168.101.10:8601/">http://192.168.101.10:8601</a> åˆ°  <a href="https://192.168.101.11:8601/">https://192.168.101.10:8601</a> ç”±äºåè®®ä¸åŒï¼Œæ˜¯è·¨åŸŸã€‚</p><p>æ³¨æ„ï¼šæœåŠ¡å™¨ä¹‹é—´ä¸å­˜åœ¨è·¨åŸŸè¯·æ±‚ã€‚</p><p>æµè§ˆå™¨åˆ¤æ–­æ˜¯è·¨åŸŸè¯·æ±‚ä¼šåœ¨è¯·æ±‚å¤´ä¸Šæ·»åŠ originï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ¥æºå“ªé‡Œã€‚</p><p>æ¯”å¦‚ï¼š</p><p>GET &#x2F; HTTP&#x2F;1.1 Origin: <a href="http://localhost:8601/">http://localhost:8601</a></p><p>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åˆ¤æ–­è¿™ä¸ªOriginæ˜¯å¦å…è®¸è·¨åŸŸï¼Œå¦‚æœå…è®¸åˆ™åœ¨å“åº”å¤´ä¸­è¯´æ˜å…è®¸è¯¥æ¥æºçš„è·¨åŸŸè¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š</p><p>Access-Control-Allow-Originï¼š<a href="http://localhost:8601/">http://localhost:8601</a></p><p>å¦‚æœå…è®¸ä»»ä½•åŸŸåæ¥æºçš„è·¨åŸŸè¯·æ±‚ï¼Œåˆ™å“åº”å¦‚ä¸‹ï¼š</p><p>Access-Control-Allow-Originï¼š*</p><p>è§£å†³è·¨åŸŸçš„æ–¹æ³•ï¼š</p><p>1ã€JSONP</p><p>é€šè¿‡scriptæ ‡ç­¾çš„srcå±æ€§è¿›è¡Œè·¨åŸŸè¯·æ±‚ï¼Œå¦‚æœæœåŠ¡ç«¯è¦å“åº”å†…å®¹åˆ™é¦–å…ˆè¯»å–è¯·æ±‚å‚æ•°callbackçš„å€¼ï¼Œcallbackæ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°çš„åç§°ï¼ŒæœåŠ¡ç«¯è¯»å–callbackçš„å€¼åå°†å“åº”å†…å®¹é€šè¿‡è°ƒç”¨callbackå‡½æ•°çš„æ–¹å¼å‘Šè¯‰è¯·æ±‚æ–¹ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240125023039132-1335727729.png" alt="img">2ã€æ·»åŠ å“åº”å¤´</p><p>æœåŠ¡ç«¯åœ¨å“åº”å¤´æ·»åŠ  Access-Control-Allow-Originï¼š*</p><p>3ã€é€šè¿‡nginxä»£ç†è·¨åŸŸ</p><p>ç”±äºæœåŠ¡ç«¯ä¹‹é—´æ²¡æœ‰è·¨åŸŸï¼Œæµè§ˆå™¨é€šè¿‡nginxå»è®¿é—®è·¨åŸŸåœ°å€ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240125023051826-1778141590.png" alt="img"></p><p>1ï¼‰æµè§ˆå™¨å…ˆè®¿é—®<a href="http://192.168.101.10:8601/">http://192.168.101.10:8601</a> nginxæä¾›çš„åœ°å€ï¼Œè¿›å…¥é¡µé¢</p><p>2ï¼‰æ­¤é¡µé¢è¦è·¨åŸŸè®¿é—®<a href="http://192.168.101.11:8601/">http://192.168.101.11:8601</a> ï¼Œä¸èƒ½ç›´æ¥è·¨åŸŸè®¿é—®<a href="http://www.baidu.com:8601/">http://www.baidu.com:8601</a> ï¼Œè€Œæ˜¯è®¿é—®nginxçš„ä¸€ä¸ªåŒæºåœ°å€ï¼Œæ¯”å¦‚ï¼š<a href="http://192.168.101.11:8601/api">http://192.168.101.11:8601/api</a> ï¼Œé€šè¿‡<a href="http://192.168.101.11:8601/api">http://192.168.101.11:8601/api</a> çš„ä»£ç†å»è®¿é—®<a href="http://www.baidu.com:8601/">http://www.baidu.com:8601</a>ã€‚</p><p>è¿™æ ·å°±å®ç°äº†è·¨åŸŸè®¿é—®ã€‚</p><p>æµè§ˆå™¨åˆ°<a href="http://192.168.101.11:8601/api">http://192.168.101.11:8601/api</a> æ²¡æœ‰è·¨åŸŸ</p><p>nginxåˆ°<a href="http://www.baidu.com:8601/">http://www.baidu.com:8601</a>é€šè¿‡æœåŠ¡ç«¯é€šä¿¡ï¼Œæ²¡æœ‰è·¨åŸŸã€‚</p><p>æˆ‘ä»¬å‡†å¤‡ä½¿ç”¨æ–¹æ¡ˆ2è§£å†³è·¨åŸŸé—®é¢˜ã€‚åœ¨å†…å®¹ç®¡ç†çš„apiå·¥ç¨‹configåŒ…ä¸‹ç¼–å†™GlobalCorsConfig.javaï¼Œ</p><p>æˆ–ç›´æ¥ä»è¯¾ç¨‹èµ„æ–™&#x2F;é¡¹ç›®å·¥ç¨‹ä¸‹æ‹·è´ï¼Œ</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.system.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è·¨åŸŸè¿‡è™‘å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr.M</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/9/7 11:04</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="meta">@Configuration</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalCorsConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å…è®¸è·¨åŸŸè°ƒç”¨çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">  <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">CorsConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">   <span class="comment">//å…è®¸ç™½åå•åŸŸåè¿›è¡Œè·¨åŸŸè°ƒç”¨</span></span><br><span class="line">   config.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">   <span class="comment">//å…è®¸è·¨è¶Šå‘é€cookie</span></span><br><span class="line">   config.setAllowCredentials(<span class="literal">true</span>);</span><br><span class="line">   <span class="comment">//æ”¾è¡Œå…¨éƒ¨åŸå§‹å¤´ä¿¡æ¯</span></span><br><span class="line">   config.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">   <span class="comment">//å…è®¸æ‰€æœ‰è¯·æ±‚æ–¹æ³•è·¨åŸŸè°ƒç”¨</span></span><br><span class="line">   config.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">   <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">   source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, config);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ­¤é…ç½®ç±»å®ç°äº†è·¨åŸŸè¿‡è™‘å™¨ï¼Œåœ¨å“åº”å¤´æ·»åŠ Access-Control-Allow-Originã€‚</p><p>é‡å¯ç³»ç»Ÿç®¡ç†æœåŠ¡ï¼Œå‰ç«¯å·¥ç¨‹å¯ä»¥æ­£å¸¸è¿›å…¥<a href="http://localhost:8601/">http://localhost:8601</a>ï¼Œè§‚å¯Ÿæµè§ˆå™¨è®°å½•ï¼ŒæˆåŠŸè§£å†³è·¨åŸŸã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240125023207746-1212895316.png" alt="img"></p><h2 id="è¯¾ç¨‹åˆ†ç±»æŸ¥è¯¢"><a href="#è¯¾ç¨‹åˆ†ç±»æŸ¥è¯¢" class="headerlink" title="è¯¾ç¨‹åˆ†ç±»æŸ¥è¯¢"></a>è¯¾ç¨‹åˆ†ç±»æŸ¥è¯¢</h2><p>å…ˆæ¥çœ‹çœ‹æ ‘çŠ¶æŸ¥è¯¢çš„sqlè¯­å¥ä¾‹å­ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> one.id one_id,</span><br><span class="line">       one.label one_lable,</span><br><span class="line">       two.id two_id,</span><br><span class="line">       two.label two_lable</span><br><span class="line"><span class="keyword">from</span> course_category <span class="keyword">one</span></span><br><span class="line">    <span class="keyword">inner</span> <span class="keyword">join</span> course_category two <span class="keyword">on</span> two.parentid <span class="operator">=</span> one.id</span><br><span class="line"><span class="keyword">where</span> one.parentid <span class="operator">=</span><span class="string">&#x27;1&#x27;</span></span><br></pre></td></tr></table></figure><p>æ ‘çŠ¶æ•°æ®ç»“æ„çš„æ ·å­å°±æ˜¯æ•°æ®ç»“æ„é‡Œçš„æ ‘ï¼šparentidå°±æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240127023524759-43047546.png" alt="img"></p><p>ä¸ºä»€ä¹ˆé€‰æ‹©åœ¨mysqlä¸­é€’å½’è€Œä¸åœ¨javaä¸­é€’å½’ï¼šå› ä¸ºJavaæ¯é€’å½’ä¸€æ¬¡å°±è¦è¿æ¥ä¸€æ¬¡æ•°æ®åº“ï¼Œæ€§èƒ½ä¸å¥½ã€‚</p><p>è¿˜æ˜¯æ ¹æ®æ¥å£æ–‡æ¡£ç»™çš„jsonå‚æ•°æ¥å†™æ¥å£ï¼Œä¸ç„¶ä¼ å‚éƒ½ä¸çŸ¥é“ä¼ å•¥ã€‚</p><p>è¿™æ˜¯mapperçš„sqlè¯­å¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">&lt;</span><span class="keyword">select</span> id<span class="operator">=</span>&quot;selectTreeNodes&quot; resultType<span class="operator">=</span>&quot;com.xuecheng.content.model.dto.CourseCategoryTreeDto&quot; parameterType<span class="operator">=</span>&quot;string&quot;<span class="operator">&gt;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="keyword">recursive</span> t1 <span class="keyword">as</span> (</span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span>  course_category p <span class="keyword">where</span>  id<span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">        <span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">        <span class="keyword">select</span> t.<span class="operator">*</span> <span class="keyword">from</span> course_category t <span class="keyword">inner</span> <span class="keyword">join</span> t1 <span class="keyword">on</span> t1.id <span class="operator">=</span> t.parentid</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span>  <span class="keyword">from</span> t1 <span class="keyword">order</span> <span class="keyword">by</span> t1.id, t1.orderby</span><br><span class="line"></span><br><span class="line"><span class="operator">&lt;</span><span class="operator">/</span><span class="keyword">select</span><span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦å°±æ˜¯å†™å†™sqlï¼Œè¿™é‡Œæ¯”è¾ƒéš¾ï¼Œå…¶å®ƒçš„éƒ½æ˜¯é‚£ä¸‰å±‚æ¶æ„ã€‚ï¼Œç„¶åæ˜¯æœ€éš¾çš„serviceå°†æŸ¥çš„æ•°æ®æ•´ç†å¹¶è¿”å›ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CourseCategoryServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CourseCategoryService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    CourseCategoryMapper courseCategoryMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;CourseCategoryTreeDto&gt; <span class="title function_">queryTreeNodes</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="comment">// é€’å½’æŸ¥è¯¢åˆ†ç±»ä¿¡æ¯</span></span><br><span class="line">        List&lt;CourseCategoryTreeDto&gt; treeNodes = courseCategoryMapper.selectTreeNodes(id);</span><br><span class="line">        <span class="comment">//å°†listè½¬map,ä»¥å¤‡ä½¿ç”¨,æ’é™¤æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        Map&lt;String, CourseCategoryTreeDto&gt; mapTemp = treeNodes.stream().filter(item-&gt;!id.equals(item.getId())).collect(Collectors.toMap(key -&gt; key.getId(), value -&gt; value, (key1, key2) -&gt; key2));</span><br><span class="line">        <span class="comment">//æœ€ç»ˆè¿”å›çš„list</span></span><br><span class="line">        List&lt;CourseCategoryTreeDto&gt; categoryTreeDtos = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//ä¾æ¬¡éå†æ¯ä¸ªå…ƒç´ ,æ’é™¤æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        treeNodes.stream().filter(item-&gt;!id.equals(item.getId())).forEach(item-&gt;&#123;</span><br><span class="line">            <span class="keyword">if</span>(item.getParentid().equals(id))&#123;</span><br><span class="line">                categoryTreeDtos.add(item);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">            <span class="type">CourseCategoryTreeDto</span> <span class="variable">courseCategoryTreeDto</span> <span class="operator">=</span> mapTemp.get(item.getParentid());</span><br><span class="line">            <span class="keyword">if</span>(courseCategoryTreeDto!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(courseCategoryTreeDto.getChildrenTreeNodes() ==<span class="literal">null</span>)&#123;</span><br><span class="line">                    courseCategoryTreeDto.setChildrenTreeNodes(<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;CourseCategoryTreeDto&gt;());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä¸‹è¾¹å¼€å§‹å¾€ChildrenTreeNodeså±æ€§ä¸­æ”¾å­èŠ‚ç‚¹</span></span><br><span class="line">                courseCategoryTreeDto.getChildrenTreeNodes().add(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> categoryTreeDtos;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é€»è¾‘æ€§æ¯”è¾ƒå¼ºï¼Œå¤§æ¦‚æµç¨‹å°±æ˜¯éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæœ‰çˆ¶èŠ‚ç‚¹åˆ™æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„listå»ï¼Œæœ‰ä¸€æ­¥çš„ifæ˜¯åˆ¤æ–­å®ƒçš„å­èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™åˆ›å»ºä¸€ä¸ªè¯¥èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹çš„listï¼Œå› ä¸ºé»˜è®¤childrenNodesä¸ºnullï¼Œæ¯”å¦‚1-1èµ°çš„æµç¨‹å°±æ˜¯å…ˆèµ°è¿‡æ»¤å™¨ï¼Œç„¶åæ·»åŠ åˆ°1çš„å­èŠ‚ç‚¹ä¸Šï¼Œ1-1-1åˆ™æ˜¯çœ‹åˆ°å®ƒçš„çˆ¶èŠ‚ç‚¹1-1çš„childrennodesä¸ºç©ºå…ˆåˆ›å»ºä¸€ä¸ªlistï¼Œç„¶åå†æ·»åŠ åˆ°è¯¥listä¸‹ã€‚</p><h2 id="æ–°å¢è¯¾ç¨‹"><a href="#æ–°å¢è¯¾ç¨‹" class="headerlink" title="æ–°å¢è¯¾ç¨‹"></a>æ–°å¢è¯¾ç¨‹</h2><p>æ¥çœ‹çœ‹serviceå±‚çš„æ¥å£å§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ è¯¾ç¨‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> companyId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dto</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> CourseBaseInfoDto <span class="title function_">createCourseBase</span><span class="params">(Long companyId,AddCourseDto dto)</span> &#123;</span><br><span class="line">        <span class="comment">/*1.å‚æ•°åˆæ³•æ€§æ ¡éªŒ*/</span></span><br><span class="line">        <span class="comment">//åˆæ³•æ€§æ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getName())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¯¾ç¨‹åç§°ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getMt())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¯¾ç¨‹åˆ†ç±»ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getSt())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¯¾ç¨‹åˆ†ç±»ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getGrade())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;è¯¾ç¨‹ç­‰çº§ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getTeachmode())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ•™è‚²æ¨¡å¼ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getUsers())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€‚åº”äººç¾¤ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(dto.getCharge())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ”¶è´¹è§„åˆ™ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*2.æ•°æ®å°è£…è°ƒç”¨mapperæŒä¹…åŒ–æ•°æ®*/</span></span><br><span class="line">        <span class="type">CourseBase</span> <span class="variable">insertCourseBase</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CourseBase</span>();</span><br><span class="line">        <span class="comment">//æ•°æ®æ‹·è´</span></span><br><span class="line">        BeanUtils.copyProperties(dto,insertCourseBase);</span><br><span class="line">        <span class="comment">//è®¾ç½®é»˜è®¤å®¡æ ¸çŠ¶æ€</span></span><br><span class="line">        insertCourseBase.setAuditStatus(<span class="string">&quot;202002&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®é»˜è®¤å‘å¸ƒçŠ¶æ€</span></span><br><span class="line">        insertCourseBase.setStatus(<span class="string">&quot;203001&quot;</span>);</span><br><span class="line">        <span class="comment">//æœºæ„id</span></span><br><span class="line">        insertCourseBase.setCompanyId(companyId);</span><br><span class="line">        <span class="comment">//æ·»åŠ æ—¶é—´</span></span><br><span class="line">        insertCourseBase.setCreateDate(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ’å…¥è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯è¡¨</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">insert</span> <span class="operator">=</span> courseBaseMapper.insert(insertCourseBase);</span><br><span class="line">        <span class="keyword">if</span>(insert&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ–°å¢è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//todo:å‘è¯¾ç¨‹è¥é”€è¡¨ä¿å­˜è¯¾ç¨‹è¥é”€ä¿¡æ¯course_market</span></span><br><span class="line">        <span class="type">CourseMarket</span> <span class="variable">courseMarket</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">CourseMarket</span>();</span><br><span class="line">        <span class="comment">//å°†é¡µé¢è¾“å…¥çš„æ•°æ®æ‹·è´åˆ°courseMarket</span></span><br><span class="line">        BeanUtils.copyProperties(dto,courseMarket);</span><br><span class="line">        <span class="comment">//è¯¾ç¨‹id</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">courseId</span> <span class="operator">=</span> insertCourseBase.getId();</span><br><span class="line">        courseMarket.setId(courseId);</span><br><span class="line">        <span class="comment">//ä¿å­˜è¥é”€ä¿¡æ¯</span></span><br><span class="line">        saveCourseMarket(courseMarket);</span><br><span class="line">        <span class="comment">//todo:æŸ¥è¯¢è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯åŠè¥é”€ä¿¡æ¯å¹¶è¿”å›</span></span><br><span class="line">        <span class="comment">//ä»æ•°æ®åº“æŸ¥å‡ºæ¥</span></span><br><span class="line">        <span class="type">CourseBaseInfoDto</span> <span class="variable">courseBaseInfo</span> <span class="operator">=</span> getCourseBaseInfo(courseId);</span><br><span class="line">        <span class="keyword">return</span> courseBaseInfo;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å•ç‹¬å†™ä¸€ä¸ªæ–¹æ³•ä¿å­˜è¥é”€ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">saveCourseMarket</span><span class="params">(CourseMarket courseMarket)</span>&#123;</span><br><span class="line">        <span class="comment">//å‚æ•°çš„åˆæ³•æ€§æ ¡éªŒ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">charge</span> <span class="operator">=</span> courseMarket.getCharge();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(charge))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ”¶è´¹è§„åˆ™ä¸èƒ½ä¸ºç©º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;201001&quot;</span>.equals(charge)) <span class="comment">//å¦‚æœä¸ºæ”¶è´¹è¯¾ç¨‹,æ‰£è´¹è§„åˆ™ä¸èƒ½ä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span>(courseMarket.getPrice() == <span class="literal">null</span> || courseMarket.getPrice().floatValue() &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;æ”¶è´¹è¯¾ç¨‹ä»·æ ¼ä¸ºç©º&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span>courseMarket.getId();</span><br><span class="line">        <span class="type">CourseMarket</span> <span class="variable">courseMarket1</span> <span class="operator">=</span>courseMarketMapper.selectById(id);</span><br><span class="line">        <span class="keyword">if</span> (courseMarket1 == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//æ’å…¥æ•°æ®åº“</span></span><br><span class="line">            courseMarketMapper.insert(courseMarket);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            BeanUtils.copyProperties(courseMarket,courseMarket1);</span><br><span class="line">            courseMarket1.setId(courseMarket.getId());</span><br><span class="line">            <span class="comment">//æ›´æ–°</span></span><br><span class="line">            courseMarketMapper.updateById(courseMarket1);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> CourseBaseInfoDto <span class="title function_">getCourseBaseInfo</span><span class="params">(<span class="type">long</span> courseId)</span>&#123;</span><br><span class="line">        <span class="comment">/*æŸ¥è¯¢è¯¾ç¨‹*/</span></span><br><span class="line">        <span class="type">CourseBase</span> <span class="variable">courseBase</span> <span class="operator">=</span> courseBaseMapper.selectById(courseId);</span><br><span class="line">        <span class="keyword">if</span>(courseBase==<span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">/*æŸ¥è¯¢è¯¾ç¨‹è¥é”€ä¿¡æ¯*/</span></span><br><span class="line">        <span class="type">CourseMarket</span> <span class="variable">courseMarket</span> <span class="operator">=</span> courseMarketMapper.selectById(courseId);</span><br><span class="line">        <span class="comment">/*åˆ›å»ºè¿”å›çš„dto*/</span></span><br><span class="line">        <span class="type">CourseBaseInfoDto</span> <span class="variable">courseBaseInfoDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CourseBaseInfoDto</span>();</span><br><span class="line">        BeanUtils.copyProperties(courseBase,courseBaseInfoDto);</span><br><span class="line">        <span class="keyword">if</span>(courseMarket!=<span class="literal">null</span>)</span><br><span class="line">            BeanUtils.copyProperties(courseMarket,courseBaseInfoDto);</span><br><span class="line">        <span class="type">CourseCategory</span> <span class="variable">courseCategoryMt</span> <span class="operator">=</span> courseCategoryMapper.selectById(courseBaseInfoDto.getMt());</span><br><span class="line">        <span class="type">CourseCategory</span> <span class="variable">courseCategorySt</span> <span class="operator">=</span> courseCategoryMapper.selectById(courseBaseInfoDto.getSt());</span><br><span class="line">        courseBaseInfoDto.setMtName(courseCategoryMt.getName());</span><br><span class="line">        courseBaseInfoDto.setStName(courseCategorySt.getName());</span><br><span class="line">        <span class="keyword">return</span> courseBaseInfoDto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¥éª¤å°±æ˜¯å…ˆæ’é™¤æœ‰æ²¡æœ‰å¿…å¡«ä¿¡æ¯æ²¡å¡«ï¼Œç„¶åå†æ˜¯æ·»åŠ é»˜è®¤ä¿¡æ¯ï¼Œä»¥åŠè¥é”€è¡¨çš„æ£€éªŒå’Œæ’å…¥ï¼Œæœ€åå°†æ’å…¥çš„è¯¾ç¨‹çš„åŸºæœ¬ä¿¡æ¯å’Œè¥é”€ä¿¡æ¯å¹¶è¿”å›,æµ‹è¯•å‚æ•°ï¼ˆè®°å¾—è®¾ç½®è¿è¡Œç¯å¢ƒ~ï¼‰ï¼š</p><p>### è¯¾ç¨‹æ–°å¢<br>POST &#x2F;content&#x2F;course<br>Content-Type: application&#x2F;json</p><p>{<br>â€œchargeâ€: â€œ201000â€,<br>â€œpriceâ€: 0,<br>â€œoriginalPriceâ€:0,<br>â€œqqâ€: â€œ22333â€,<br>â€œwechatâ€: â€œ223344â€,<br>â€œphoneâ€: â€œ13333333â€,<br>â€œvalidDaysâ€: 365,<br>â€œmtâ€: â€œ1-1â€,<br>â€œstâ€: â€œ1-1-1â€,<br>â€œnameâ€: â€œæ–¤æ–¤è®¡è¾ƒæ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥æ€¥â€,<br>â€œpicâ€: â€œâ€,<br>â€œteachmodeâ€: â€œ200002â€,<br>â€œusersâ€: â€œåˆçº§äººå‘˜â€,<br>â€œtagsâ€: â€œâ€,<br>â€œgradeâ€: â€œ204001â€,<br>â€œdescriptionâ€: â€œæ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•æ€•â€,<br>â€œobjectivesâ€: â€œâ€<br>}</p><p>è°ƒè¯•æˆåŠŸçš„æˆªå›¾ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240128064024496-386238490.png" alt="img"></p><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><p>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</p><p>ä» Spring 3.0 - Spring 3.2 ç‰ˆæœ¬ä¹‹é—´ï¼Œå¯¹ Spring æ¶æ„å’Œ SpringMVC çš„Controller çš„å¼‚å¸¸æ•è·æä¾›äº†ç›¸åº”çš„å¼‚å¸¸å¤„ç†ã€‚</p><ul><li><p>@ExceptionHandler</p><p>Spring3.0æä¾›çš„æ ‡è¯†åœ¨æ–¹æ³•ä¸Šæˆ–ç±»ä¸Šçš„æ³¨è§£ï¼Œç”¨æ¥è¡¨æ˜æ–¹æ³•çš„å¤„ç†å¼‚å¸¸ç±»å‹ã€‚</p></li><li><p>@ControllerAdvice</p><p>Spring3.2æä¾›çš„æ–°æ³¨è§£ï¼Œä»åå­—ä¸Šå¯ä»¥çœ‹å‡ºå¤§ä½“æ„æ€æ˜¯æ§åˆ¶å™¨å¢å¼ºï¼Œ åœ¨é¡¹ç›®ä¸­æ¥å¢å¼ºSpringMVCä¸­çš„Controllerã€‚é€šå¸¸å’Œ**<code>@ExceptionHandler</code>** ç»“åˆä½¿ç”¨ï¼Œæ¥å¤„ç†SpringMVCçš„å¼‚å¸¸ä¿¡æ¯ã€‚</p></li><li><p>@ResponseStatus</p><p>Spring3.0æä¾›çš„æ ‡è¯†åœ¨æ–¹æ³•ä¸Šæˆ–ç±»ä¸Šçš„æ³¨è§£ï¼Œç”¨çŠ¶æ€ä»£ç å’Œåº”è¿”å›çš„åŸå› æ ‡è®°æ–¹æ³•æˆ–å¼‚å¸¸ç±»ã€‚ è°ƒç”¨å¤„ç†ç¨‹åºæ–¹æ³•æ—¶ï¼ŒçŠ¶æ€ä»£ç å°†åº”ç”¨äºHTTPå“åº”ã€‚</p></li></ul><p>é€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªæ³¨è§£ä¾¿å¯å®ç°å¾®æœåŠ¡ç«¯å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package com.xuecheng.base.exception;</span><br><span class="line"></span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.springframework.http.HttpStatus;</span><br><span class="line">import org.springframework.web.bind.annotation.ControllerAdvice;</span><br><span class="line">import org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseStatus;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author woldier</span><br><span class="line"> * @version 1.0</span><br><span class="line"> * @description å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span><br><span class="line"> * @date 2023/3/6 15:18</span><br><span class="line"> **/</span><br><span class="line">@ControllerAdvice</span><br><span class="line">@Slf4j</span><br><span class="line">public class GlobalExceptionHandler &#123;</span><br><span class="line">    /**</span><br><span class="line">    * @description XueChengPlusException.class å¼‚å¸¸å¤„ç†ï¼Œæå–å¼‚å¸¸ä¿¡æ¯å¹¶ä¸”è¿”å›</span><br><span class="line">    * @param e</span><br><span class="line">    * @return com.xuecheng.base.exception.RestErrorResponse</span><br><span class="line">    * @author: woldier</span><br><span class="line">    * @date: 2023/3/6 15:22</span><br><span class="line">    */</span><br><span class="line">    @ExceptionHandler(XueChengPlusException.class)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    @ResponseStatus(code = HttpStatus.INTERNAL_SERVER_ERROR, reason = &quot;ä¸šåŠ¡æ¨¡å—æŠ›å‡ºå¼‚å¸¸&quot;)</span><br><span class="line">    public RestErrorResponse doXueChengPlusException(XueChengPlusException e)&#123;</span><br><span class="line">        return new RestErrorResponse(e.getErrMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * @description Exception å¼‚å¸¸å¤„ç†ï¼Œæ­¤å¼‚å¸¸ä¸ºæœªçŸ¥å¼‚å¸¸</span><br><span class="line">    * @param e</span><br><span class="line">    * @return com.xuecheng.base.exception.RestErrorResponse</span><br><span class="line">    * @author: woldier</span><br><span class="line">    * @date: 2023/3/6 15:27</span><br><span class="line">    */</span><br><span class="line">    @ExceptionHandler(Exception.class)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    @ResponseStatus(code = HttpStatus.INTERNAL_SERVER_ERROR, reason = &quot;æœåŠ¡å™¨æœªçŸ¥å¼‚å¸¸&quot;)</span><br><span class="line">    public RestErrorResponse doXueChengPlusException(Exception e)&#123;</span><br><span class="line">        log.error(e.getMessage());</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        return new RestErrorResponse(CommonError.UNKOWN_ERROR.getErrMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹è¯¾ç¨‹"><a href="#ä¿®æ”¹è¯¾ç¨‹" class="headerlink" title="ä¿®æ”¹è¯¾ç¨‹"></a>ä¿®æ”¹è¯¾ç¨‹</h2><p>ä»‹ç»ä¸‹EditCourseDtoè¿™ä¸ªDtoï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> woldier</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¿®æ”¹è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯æ‰€è¦ä½¿ç”¨çš„è¯·æ±‚å‚æ•°dto</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/3/6 19:33</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ApiModel(value = &quot;EditCourseDto&quot;, description = &quot;ä¿®æ”¹è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EditCourseDto</span> <span class="keyword">extends</span> <span class="title class_">AddCourseDto</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;ValidationGroups.Update.class&#125;,message = &quot;ä¿®æ”¹è¯¾ç¨‹æ—¶idä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;è¯¾ç¨‹åç§°&quot;, required = true)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿äº†AddCourseDtoçš„æ‰€æœ‰ä¿¡æ¯å¹¶ä¸”åŠ äº†ä¸ªidå±æ€§ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯ä¿®æ”¹è¯¾ç¨‹æ—¶å®ƒçš„å±æ€§è·Ÿæ·»åŠ è¯¾ç¨‹æ—¶çš„å±æ€§ä¸€æ ·ä¸èƒ½ä¸ºç©ºï¼Œå¹¶ä¸”åŠ äº†ä¸ªä¿®æ”¹è¯¾ç¨‹çš„idã€‚</p><p>serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> CourseBaseInfoDto <span class="title function_">updateCourseBase</span><span class="params">(Long companyId, EditCourseDto editCourseDto)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="comment">//å…ˆæŸ¥æ•°æ®åº“</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span>editCourseDto.getId();</span><br><span class="line">        <span class="type">CourseBase</span> <span class="variable">courseBase</span> <span class="operator">=</span>courseBaseMapper.selectById(id);</span><br><span class="line">        <span class="comment">//ä¸ºç©ºæŠ›å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">if</span> (courseBase==<span class="literal">null</span>)&#123;</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;è¯¾ç¨‹ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ£€æŸ¥ç»„ç»‡äººidæ˜¯å¦ä¸€æ ·</span></span><br><span class="line">        <span class="keyword">if</span>(!courseBase.getCompanyId().equals(companyId))</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;companyIDä¸ä¸€è‡´&quot;</span>);</span><br><span class="line">        <span class="comment">/*æ›´æ–°courseBaseä¿¡æ¯*/</span></span><br><span class="line">        <span class="comment">/*æ‹·è´*/</span></span><br><span class="line">        BeanUtils.copyProperties(editCourseDto,courseBase);</span><br><span class="line">        courseBase.setChangeDate(LocalDateTime.now());</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span>courseBaseMapper.updateById(courseBase);</span><br><span class="line">        <span class="keyword">if</span> (i&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;æ›´æ–°å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*æ›´æ–°è¥é”€ä¿¡æ¯*/</span></span><br><span class="line"><span class="comment">//        CourseMarket courseMarket =new CourseMarket();</span></span><br><span class="line"><span class="comment">//        BeanUtils.copyProperties(editCourseDto,courseMarket);</span></span><br><span class="line"><span class="comment">//        courseMarket.setOriginalPrice(editCourseDto.getOriginalPrice().floatValue());</span></span><br><span class="line"><span class="comment">//        courseMarket.setPrice(editCourseDto.getPrice().floatValue());</span></span><br><span class="line"><span class="comment">//        checkCharge(courseMarket.getPrice(),editCourseDto.getCharge());</span></span><br><span class="line"><span class="comment">//        courseMarketService.saveOrUpdate(courseMarket);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*æŸ¥è¯¢å°è£…è¿”å›*/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> getCourseBaseInfo(editCourseDto.getId());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æ£€éªŒcompanyIdå’Œä¸€äº›å±æ€§åå†ä¿®æ”¹ã€‚</p><h1 id="è¯¾ç¨‹è®¡åˆ’"><a href="#è¯¾ç¨‹è®¡åˆ’" class="headerlink" title="è¯¾ç¨‹è®¡åˆ’"></a>è¯¾ç¨‹è®¡åˆ’</h1><h2 id="æŸ¥è¯¢-1"><a href="#æŸ¥è¯¢-1" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><p>å¯¹äºå½•æ’­è¯¾ç¨‹ï¼Œå¯ä»¥å…ˆçœ‹çœ‹æ’­æ”¾åˆ—è¡¨ï¼Œå®ƒæœ‰å±‚çº§å…³ç³»ï¼Œç¬¬å‡ ç« ç¬¬å‡ èŠ‚å•¥çš„ï¼Œè¿˜æœ‰å¯¹åº”è§†é¢‘æˆ–æ–‡æ¡£çš„ä¿¡æ¯ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240129224635084-1888465707.png" alt="img"></p><p>å¯ä»¥è¿è¡Œä¸‹ä¸‹é¢çš„sqlæŸ¥çœ‹å¯¹åº”å…³ç³»å°±çŸ¥é“å¤§æ¦‚å…³ç³»äº†ï¼š</p><p>select one.id one_id,<br>one.pname one_pname,<br>two.id two_id,<br>two.pname two_pname,<br>tm.media_fileName,<br>tm.media_id<br>from teachplan one<br>inner join teachplan two on two.parentid&#x3D;one.id<br>left join teachplan_media tm on two.id &#x3D; tm.teachplan_id</p><p>where one.parentid&#x3D;0 and one.course_id&#x3D;117<br>order by one.id, two.id;</p><p>å°±Daoå±‚æ¯”è¾ƒéº»çƒ¦è¦ä¸€ä¸€å†™ï¼Œå…¶å®ƒçš„éƒ½ä¸éš¾ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯¾ç¨‹åˆ†ç±»æ ‘å‹ç»“æ„æŸ¥è¯¢æ˜ å°„ç»“æœ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;treeNodeResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.xuecheng.content.model.dto.TeachplanDto&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸€çº§æ•°æ®æ˜ å°„ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;one_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_pname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_parentid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;parentid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_grade&quot;</span> <span class="attr">property</span>=<span class="string">&quot;grade&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_mediaType&quot;</span> <span class="attr">property</span>=<span class="string">&quot;mediaType&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_stratTime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stratTime&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_endTime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;endTime&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_orderby&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderby&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_courseId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;courseId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;one_coursePubId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;coursePubId&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸€çº§ä¸­åŒ…å«å¤šä¸ªäºŒçº§æ•°æ® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;teachPlanTreeNodes&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.xuecheng.content.model.dto.TeachplanDto&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- äºŒçº§æ•°æ®æ˜ å°„ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;two_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_pname&quot;</span> <span class="attr">property</span>=<span class="string">&quot;pname&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_parentid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;parentid&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_grade&quot;</span> <span class="attr">property</span>=<span class="string">&quot;grade&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_mediaType&quot;</span> <span class="attr">property</span>=<span class="string">&quot;mediaType&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_stratTime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;stratTime&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_endTime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;endTime&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_orderby&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderby&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_courseId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;courseId&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_coursePubId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;coursePubId&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--    æ¯ä¸€ä¸ªäºŒçº§è¯¾ç¨‹è®¡åˆ’å¯¹åº”ä¸€ä¸ªåª’èµ„ä¿¡æ¯        --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teachplanMedia&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.xuecheng.content.model.po.TeachplanMedia&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;teachplanMeidaId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;mediaFilename&quot;</span> <span class="attr">property</span>=<span class="string">&quot;mediaFilename&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;mediaId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;mediaId&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;teachplanId&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_courseId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;courseId&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;two_coursePubId&quot;</span> <span class="attr">property</span>=<span class="string">&quot;coursePubId&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectTreeNodes&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;treeNodeResultMap&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;long&quot;</span>&gt;</span></span><br><span class="line">        SELECT one.id            one_id,</span><br><span class="line">               one.pname         one_pname,</span><br><span class="line">               one.parentid      one_parentid,</span><br><span class="line">               one.grade         one_grade,</span><br><span class="line">               one.media_type    one_mediaType,</span><br><span class="line">               one.start_time    one_startTime,</span><br><span class="line">               one.end_time      one_endTime,</span><br><span class="line">               one.orderby       one_orderby,</span><br><span class="line">               one.course_id     one_courseId,</span><br><span class="line">               one.course_pub_id one_coursePubId,</span><br><span class="line">               two.id            two_id,</span><br><span class="line">               two.pname         two_pname,</span><br><span class="line">               two.parentid      two_parentid,</span><br><span class="line">               two.grade         two_grade,</span><br><span class="line">               two.media_type    two_mediaType,</span><br><span class="line">               two.start_time    two_stratTime,</span><br><span class="line">               two.end_time      two_endTime,</span><br><span class="line">               two.orderby       two_orderby,</span><br><span class="line">               two.course_id     two_courseId,</span><br><span class="line">               two.course_pub_id two_coursePubId,</span><br><span class="line">               m1.media_fileName mediaFilename,</span><br><span class="line">               m1.id             teachplanMeidaId,</span><br><span class="line">               m1.media_id       mediaId</span><br><span class="line">        FROM teachplan one</span><br><span class="line">                 LEFT JOIN teachplan two ON one.id = two.parentid</span><br><span class="line">                 LEFT JOIN teachplan_media m1 on two.id = m1.teachplan_id</span><br><span class="line">        WHERE one.grade=&quot;1&quot; AND one.course_id = #&#123;courseId&#125;</span><br><span class="line">        ORDER BY one.orderby, two.orderby</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ–°å¢-ä¿®æ”¹"><a href="#æ–°å¢-ä¿®æ”¹" class="headerlink" title="æ–°å¢&#x2F;ä¿®æ”¹"></a>æ–°å¢&#x2F;ä¿®æ”¹</h2><p>è¡¥å……ä¸‹å…³äºLambdaQueryWrapperçš„ç”¨æ³•ï¼š<a href="https://blog.csdn.net/qlzw1990/article/details/116996422">MyBatis-Plus LambdaQueryWrapperä½¿ç”¨è¯´æ˜_mybatisplus lambdaquerywrapper-CSDNåšå®¢</a></p><p><strong>æ•°æ®æ¨¡å‹</strong></p><p>1ã€æ–°å¢ç¬¬ä¸€çº§è¯¾ç¨‹è®¡åˆ’</p><p>åç§°é»˜è®¤ä¸ºï¼šæ–°ç« åç§° [ç‚¹å‡»ä¿®æ”¹]</p><p>gradeï¼š1</p><p>orderby: æ‰€å±è¯¾ç¨‹ä¸­åŒçº§åˆ«ä¸‹æ’åœ¨æœ€å</p><p>2ã€æ–°å¢ç¬¬äºŒçº§è¯¾ç¨‹è®¡åˆ’</p><p>åç§°é»˜è®¤ä¸ºï¼šæ–°å°èŠ‚åç§° [ç‚¹å‡»ä¿®æ”¹]</p><p>gradeï¼š2</p><p>orderby: æ‰€å±è¯¾ç¨‹è®¡åˆ’ä¸­æ’åœ¨æœ€å</p><p>3ã€ä¿®æ”¹ç¬¬ä¸€çº§ã€ç¬¬äºŒçº§è¯¾ç¨‹è®¡åˆ’çš„åç§°ï¼Œä¿®æ”¹ç¬¬äºŒçº§è¯¾ç¨‹è®¡åˆ’æ˜¯å¦å…è´¹</p><p>service:è‡ªå·±çœ‹å§ä½•å¹³å®‰æ‡’å¾—å†™äº†ï¼Œæœ‰æ³¨é‡Šçš„çœ‹å¾—æ‡‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ æ›´æ–°è¯¾ç¨‹è®¡åˆ’</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dto</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveOrUpdateTeachPlan</span><span class="params">(SaveTeachplanDto dto)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯æ›´æ–°æˆ–è€…æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">teachplanId</span> <span class="operator">=</span>dto.getId();</span><br><span class="line">        <span class="keyword">if</span> (teachplanId == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//æ–°å¢</span></span><br><span class="line">            <span class="type">TeachplanDto</span> <span class="variable">teachplanDto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TeachplanDto</span>();</span><br><span class="line">            BeanUtils.copyProperties(dto,teachplanDto);</span><br><span class="line">            <span class="comment">//ç¡®å®šæ’åºå­—æ®µ,æ‰¾åˆ°å®ƒçš„åŒçº§èŠ‚ç‚¹ä¸ªæ•°ï¼Œæ’åºå­—æ®µä¸ªæ•°åŠ 1 select count(1) from teachplan where course_id =17 and parentid = 268</span></span><br><span class="line">            <span class="type">Long</span> <span class="variable">parentid</span> <span class="operator">=</span> dto.getParentid();</span><br><span class="line">            <span class="type">Long</span> <span class="variable">courseid</span> <span class="operator">=</span> dto.getCourseId();</span><br><span class="line">            LambdaQueryWrapper&lt;Teachplan&gt; teachplanLambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">            LambdaQueryWrapper&lt;Teachplan&gt; eq = teachplanLambdaQueryWrapper.eq(Teachplan::getCourseId, courseid).eq(Teachplan::getParentid, parentid);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> teachplanMapper.selectCount(eq);</span><br><span class="line">            teachplanDto.setOrderby(count+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            teachplanMapper.insert(teachplanDto);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æ›´æ–°</span></span><br><span class="line">            <span class="type">Teachplan</span> <span class="variable">teachplan</span> <span class="operator">=</span> teachplanMapper.selectById(teachplanId);</span><br><span class="line">            BeanUtils.copyProperties(dto,teachplan);</span><br><span class="line">            teachplanMapper.updateById(teachplan);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¯¾ç¨‹è®¡åˆ’"><a href="#åˆ é™¤è¯¾ç¨‹è®¡åˆ’" class="headerlink" title="åˆ é™¤è¯¾ç¨‹è®¡åˆ’"></a>åˆ é™¤è¯¾ç¨‹è®¡åˆ’</h2><p>serviceæµç¨‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 1.æŸ¥è¯¢æ•°æ®åº“ä¸­è¯¾ç¨‹è®¡åˆ’</span><br><span class="line">* æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ä¸å­˜åœ¨æŠ›å‡ºå¼‚å¸¸</span><br><span class="line">* 2.è·å–è¯¾ç¨‹è®¡åˆ’çš„ç­‰çº§</span><br><span class="line">* è‹¥ä¸ºç« åˆ™é€’å½’åˆ é™¤å…¶å­èŠ‚ç‚¹</span><br><span class="line">* è‹¥ä¸ºèŠ‚,ç›´æ¥åˆ é™¤,æŸ¥è¯¢æ˜¯å¦æœ‰åª’ä½“ä¿¡æ¯,æœ‰åˆ™åˆ é™¤</span><br></pre></td></tr></table></figure><p>serviceæ€»ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Teachplan</span> <span class="variable">teachplan</span> <span class="operator">=</span> teachplanMapper.selectById(id);</span><br><span class="line">        <span class="keyword">if</span> (teachplan == <span class="literal">null</span>)&#123;</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;è¯¾ç¨‹ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">grade</span> <span class="operator">=</span> teachplan.getGrade();</span><br><span class="line">        <span class="keyword">if</span> (grade == <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.deleteGrade2(id);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            List&lt;TeachplanDto&gt; teachplanDtos =teachplanMapper.selectTreeNodes(id);</span><br><span class="line">            List&lt;TeachplanDto&gt; teachPlanTreeNodes = teachplanDtos.stream().filter(e -&gt; e.getId().equals(teachplan.getId())).collect(Collectors.toList()).get(<span class="number">0</span>).getTeachPlanTreeNodes();</span><br><span class="line">            teachplanMapper.deleteById(id);</span><br><span class="line">            teachPlanTreeNodes.forEach(e-&gt;<span class="built_in">this</span>.deleteGrade2(e.getId()));</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸Šä¸‹ç§»åŠ¨è¯¾ç¨‹è®¡åˆ’"><a href="#ä¸Šä¸‹ç§»åŠ¨è¯¾ç¨‹è®¡åˆ’" class="headerlink" title="ä¸Šä¸‹ç§»åŠ¨è¯¾ç¨‹è®¡åˆ’"></a>ä¸Šä¸‹ç§»åŠ¨è¯¾ç¨‹è®¡åˆ’</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»åŠ¨è¯¾ç¨‹è®¡åˆ’</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> moveWay</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> XueChengPlusException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">(Long id, Boolean moveWay)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1.æ ¹æ®idæŸ¥è¯¢,è‹¥æŸ¥è¯¢ä¸ºç©ºæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="comment">        2.æ ¹æ®æŸ¥è¯¢å¾—åˆ°çš„courseIdä»¥åŠgradeæŸ¥è¯¢åˆ°æ‰€æœ‰çš„è®¡åˆ’æ ¹æ®moveDowné€‰æ‹©Ascè¿˜æ˜¯Desc ä¸ºTrueé€‰æ‹©Desc</span></span><br><span class="line"><span class="comment">        3.é€šè¿‡filterè¿›è¡Œæµè¿‡æ»¤,è¿‡æ»¤æ¡ä»¶æ˜¯å…ƒç´ çš„orderå¤§äº/å°äºæœ¬order ,moveDownä¸ºTrueæ—¶æ˜¯å¤§äº,ä¸ºFalseå°äº</span></span><br><span class="line"><span class="comment">        4.æ£€æŸ¥filteråæ”¶é›†çš„listæ˜¯å¦ä¸ºç©ºemptyè¯´æ˜æ— æ³•ç§»åŠ¨æŠ›å‡ºå¼‚å¸¸,ä¸ä¸ºç©ºå–å‡ºlistå°¾éƒ¨å…ƒç´ ä¸¤è€…äº¤æ¢orderç„¶åæ›´æ–°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/*1.æ ¹æ®idæŸ¥è¯¢,è‹¥æŸ¥è¯¢ä¸ºç©ºæŠ›å‡ºå¼‚å¸¸*/</span></span><br><span class="line">        <span class="type">Teachplan</span> <span class="variable">teachplan</span> <span class="operator">=</span> teachplanMapper.selectById(id);</span><br><span class="line">        <span class="keyword">if</span> (teachplan == <span class="literal">null</span>) XueChengPlusException.cast(<span class="string">&quot;è¯¾ç¨‹è®¡åˆ’ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        <span class="comment">/*2.æ ¹æ®æŸ¥è¯¢å¾—åˆ°çš„courseIdä»¥åŠgradeæŸ¥è¯¢åˆ°æ‰€æœ‰çš„è®¡åˆ’æ ¹æ®moveDowné€‰æ‹©Ascè¿˜æ˜¯Desc ä¸ºTrueé€‰æ‹©Desc*/</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">courseId</span> <span class="operator">=</span> teachplan.getCourseId();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">grade</span> <span class="operator">=</span> teachplan.getGrade();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">orderby</span> <span class="operator">=</span> teachplan.getOrderby();</span><br><span class="line">        LambdaQueryWrapper&lt;Teachplan&gt; lambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        lambdaQueryWrapper</span><br><span class="line">                .eq(Teachplan::getCourseId, courseId)</span><br><span class="line">                .eq(Teachplan::getGrade, grade);</span><br><span class="line">        <span class="keyword">if</span> (moveWay)</span><br><span class="line">            lambdaQueryWrapper.orderByDesc(Teachplan::getOrderby);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            lambdaQueryWrapper.orderByAsc(Teachplan::getOrderby);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*é€šè¿‡filterè¿›è¡Œæµè¿‡æ»¤,è¿‡æ»¤æ¡ä»¶æ˜¯å…ƒç´ çš„orderå¤§äº/å°äºæœ¬order ,moveDownä¸ºTrueæ—¶æ˜¯å¤§äº,ä¸ºFalseå°äº */</span></span><br><span class="line">        List&lt;Teachplan&gt; teachplanList = teachplanMapper.selectList(lambdaQueryWrapper);</span><br><span class="line">        List&lt;Teachplan&gt; teachplanList1 = teachplanList.stream().filter(e -&gt; moveWay ? e.getOrderby() &gt; orderby : e.getOrderby() &lt; orderby).collect(Collectors.toList());</span><br><span class="line">        <span class="comment">/*æ£€æŸ¥filteråæ”¶é›†çš„listæ˜¯å¦ä¸ºç©ºemptyè¯´æ˜æ— æ³•ç§»åŠ¨æŠ›å‡ºå¼‚å¸¸,ä¸ä¸ºç©ºå–å‡ºlistå°¾éƒ¨å…ƒç´ ä¸¤è€…äº¤æ¢orderç„¶åæ›´æ–°*/</span></span><br><span class="line">        <span class="keyword">if</span> (teachplanList1.isEmpty()) XueChengPlusException.cast(<span class="string">&quot;æ— æ³•å®Œæˆè¯¥æ“ä½œ&quot;</span>);</span><br><span class="line">        <span class="type">Teachplan</span> <span class="variable">teachplan1</span> <span class="operator">=</span> teachplanList1.get(teachplanList1.size()-<span class="number">1</span>);</span><br><span class="line">        teachplan.setOrderby(teachplan1.getOrderby());</span><br><span class="line">        teachplan1.setOrderby(orderby);</span><br><span class="line">        teachplanMapper.updateById(teachplan);</span><br><span class="line">        teachplanMapper.updateById(teachplan1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="æ•™å¸ˆç®¡ç†"><a href="#æ•™å¸ˆç®¡ç†" class="headerlink" title="æ•™å¸ˆç®¡ç†"></a>æ•™å¸ˆç®¡ç†</h2><p>è¿›å…¥æ•™å¸ˆè®¾ç½®é¡µé¢åå¯ä»¥ç‚¹å‡»ä¿®æ”¹æ•™å¸ˆä¿¡æ¯,æˆ–è€…ç‚¹å‡»æ–°å¢æ•™å¸ˆä¿¡æ¯</p><p>è¿™ä¸¤ä¸ªä¸šåŠ¡å…±ç”¨ä¸€ä¸ªæ¥å£,é€šè¿‡æŸ¥çœ‹æ˜¯å¦ä¼ å…¥idæ¥è¿›è¡ŒåŒºåˆ†</p><ul><li>ä¿®æ”¹æ—¶å¦‚ä¸‹</li></ul><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308094018791.png" alt="image-20230308094018791"></p><ul><li>æ–°å¢æ—¶å¦‚ä¸‹</li></ul><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308093951166.png" alt="image-20230308093951166"></p><ol><li>è¯¾ç¨‹æ•™å¸ˆä¿¡æ¯åˆ é™¤</li></ol><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308103041679.png" alt="image-20230308103041679"></p><p><strong>serviceå±‚ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xuecheng.content.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> com.xuecheng.base.exception.XueChengPlusException;</span><br><span class="line"><span class="keyword">import</span> com.xuecheng.content.mapper.CourseBaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.xuecheng.content.mapper.CourseTeacherMapper;</span><br><span class="line"><span class="keyword">import</span> com.xuecheng.content.model.dto.TeacherSaveOrUpdateDto;</span><br><span class="line"><span class="keyword">import</span> com.xuecheng.content.model.po.CourseTeacher;</span><br><span class="line"><span class="keyword">import</span> com.xuecheng.content.service.CourseTeacherService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeanUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CourseTeacherServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;CourseTeacherMapper, CourseTeacher&gt; <span class="keyword">implements</span> <span class="title class_">CourseTeacherService</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    CourseBaseMapper courseBaseMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®è¯¾ç¨‹idæŸ¥è¯¢æ•™å¸ˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> courseId è¯¾ç¨‹id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> XueChengPlusException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;CourseTeacher&gt; <span class="title function_">listTeacherByCourseId</span><span class="params">(Long courseId)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="keyword">if</span> (courseId == <span class="literal">null</span> || courseId&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;è¯¾ç¨‹idä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        LambdaQueryWrapper&lt;CourseTeacher&gt; lambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        lambdaQueryWrapper.eq(CourseTeacher::getCourseId,courseId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ ¹æ®è¯¾ç¨‹idæŸ¥è¯¢è¯¾ç¨‹æ•™å¸ˆä¿¡æ¯</span></span><br><span class="line">        List&lt;CourseTeacher&gt; courseTeacherList = <span class="built_in">this</span>.list(lambdaQueryWrapper);</span><br><span class="line">        <span class="keyword">if</span>(courseTeacherList.isEmpty()) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> courseTeacherList;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢/ä¿®æ”¹æ•™å¸ˆ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dto</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveOrUpdateTeacher</span><span class="params">(TeacherSaveOrUpdateDto dto)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1. åˆ¤æ–­dtoä¸­æ˜¯å¦æœ‰id</span></span><br><span class="line"><span class="comment">        2. æœ‰è¡¨æ˜æ˜¯ä¿®æ”¹,å…ˆæŸ¥è¯¢æ•°æ®çœ‹,çœ‹å¯¹åº”idæ˜¯å¦å­˜åœ¨,ä¸å­˜åœ¨ä¿å­˜,å­˜åœ¨åˆ™æ›´æ–°</span></span><br><span class="line"><span class="comment">        3. æ— è¡¨æ˜æ˜¯æ–°å¢,ç›´æ¥update</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span>dto.getId();</span><br><span class="line">        <span class="type">Long</span> <span class="variable">courseId</span> <span class="operator">=</span>dto.getCourseId();</span><br><span class="line">        <span class="comment">//åˆ›å»ºæ•°æ®åº“å¯¹è±¡</span></span><br><span class="line">        <span class="type">CourseTeacher</span> <span class="variable">courseTeacher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CourseTeacher</span>();</span><br><span class="line">        BeanUtils.copyProperties(dto,courseTeacher);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (id != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//ä¿®æ”¹</span></span><br><span class="line">            LambdaQueryWrapper&lt;CourseTeacher&gt; lambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">            lambdaQueryWrapper.eq(CourseTeacher::getCourseId,courseId);</span><br><span class="line">            <span class="type">CourseTeacher</span> <span class="variable">one</span> <span class="operator">=</span> <span class="built_in">this</span>.getOne(lambdaQueryWrapper);</span><br><span class="line">            <span class="keyword">if</span> (one == <span class="literal">null</span>)&#123;</span><br><span class="line">                XueChengPlusException.cast(<span class="string">&quot;æ•™å¸ˆä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">this</span>.updateById(courseTeacher);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æ–°å¢</span></span><br><span class="line">            <span class="keyword">if</span> (courseBaseMapper.selectById(courseId)==<span class="literal">null</span>)</span><br><span class="line">                XueChengPlusException.cast(<span class="string">&quot;è¯¾ç¨‹ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">            courseTeacher.setCreateDate(LocalDateTime.now());</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">this</span>.save(courseTeacher)) XueChengPlusException.cast(<span class="string">&quot;æ–°å¢å¤±è´¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤æ•™å¸ˆid</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> courseId è¯¾ç¨‹id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id       id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> XueChengPlusException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTeacher</span><span class="params">(Long courseId, Long id)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="keyword">if</span> (courseId == <span class="literal">null</span> || id == <span class="literal">null</span>)</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;idæˆ–è€…è¯¾ç¨‹idä¸ºç©º&quot;</span>);</span><br><span class="line">        <span class="comment">/*æŸ¥è¯¢è¯¾ç¨‹idæ˜¯å¦å­˜åœ¨äºæ•°æ®åº“*/</span></span><br><span class="line">        <span class="keyword">if</span> (courseBaseMapper.selectById(id) == <span class="literal">null</span>)</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;è¯¾ç¨‹idä¸åˆæ³•&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        LambdaQueryWrapper&lt;CourseTeacher&gt; lambdaQueryWrapper = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        lambdaQueryWrapper.eq(CourseTeacher::getCourseId,courseId);</span><br><span class="line">        lambdaQueryWrapper.eq(CourseTeacher::getId,id);</span><br><span class="line">        <span class="type">CourseTeacher</span> <span class="variable">one</span> <span class="operator">=</span> <span class="built_in">this</span>.getOne(lambdaQueryWrapper);</span><br><span class="line">        <span class="keyword">if</span> (one == <span class="literal">null</span>)</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;æ•™å¸ˆä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.removeById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤è¯¾ç¨‹"><a href="#åˆ é™¤è¯¾ç¨‹" class="headerlink" title="åˆ é™¤è¯¾ç¨‹"></a>åˆ é™¤è¯¾ç¨‹</h2><p>åœ¨è¯¾ç¨‹ç®¡ç†ç•Œé¢,ç‚¹å‡»åˆ é™¤æŒ‰é’®åˆ é™¤è¯¾ç¨‹</p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308122407546.png" alt="image-20230308122407546"></p><p><img src="https://woldier-pic-repo-1309997478.cos.ap-chengdu.myqcloud.com/image-20230308122434405.png" alt="image-20230308122434405"></p><p>serviceå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤è¯¾ç¨‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteCourseById</span><span class="params">(Long id)</span> <span class="keyword">throws</span> XueChengPlusException &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        0.éªŒè¯æ­¤è¯¾ç¨‹idæ˜¯å¦åˆæ³•</span></span><br><span class="line"><span class="comment">        1.æ ¹æ®idåˆ é™¤è¯¾ç¨‹æ•™å¸ˆä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2.æ ¹æ®courseIdåˆ é™¤è¯¾ç¨‹è®¡åˆ’ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2.1æŸ¥è¯¢è¯¾ç¨‹è®¡åˆ’ä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2.2è°ƒç”¨åˆ é™¤ç« ç›®å½•çš„æœåŠ¡</span></span><br><span class="line"><span class="comment">        3.åˆ é™¤è¯¾ç¨‹è¥é”€ä¿¡æ¯å’Œè¯¾ç¨‹åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/*è·å–è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯*/</span></span><br><span class="line">        <span class="type">CourseBase</span> <span class="variable">courseBase</span> <span class="operator">=</span> courseBaseMapper.selectById(id);</span><br><span class="line">        <span class="type">CourseMarket</span> <span class="variable">courseMarket</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">CourseMarket</span>();</span><br><span class="line">        BeanUtils.copyProperties(courseBase, courseMarket);</span><br><span class="line">        <span class="keyword">if</span> (courseBase == <span class="literal">null</span>)&#123;</span><br><span class="line">            XueChengPlusException.cast(<span class="string">&quot;idä¸åˆæ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ é™¤è¯¾ç¨‹æ•™å¸ˆ</span></span><br><span class="line">        List&lt;CourseTeacher&gt; list = courseTeacherService.listTeacherByCourseId(id);</span><br><span class="line">        <span class="keyword">if</span> (list != <span class="literal">null</span>&amp;&amp;!list.isEmpty())&#123;</span><br><span class="line">            <span class="comment">/*listéç©ºè¯´æ˜æœ‰æ•™å¸ˆæ•°æ®,é€šè¿‡ä¸»é”®remove*/</span></span><br><span class="line">            list.forEach(e-&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    courseTeacherService.deleteTeacher(id, e.getId());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (XueChengPlusException ex) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*æ ¹æ®courseIdåˆ é™¤è¯¾ç¨‹è®¡åˆ’ä¿¡æ¯*/</span></span><br><span class="line">        <span class="comment">//æŸ¥è¯¢è¯¾ç¨‹è®¡åˆ’ä¿¡æ¯</span></span><br><span class="line">        List&lt;TeachplanDto&gt; teachplanList = teachPlanService.findTeachplanList(id);</span><br><span class="line">        <span class="keyword">if</span> (teachplanList != <span class="literal">null</span> &amp;&amp; !teachplanList.isEmpty())&#123;</span><br><span class="line">            teachplanList.forEach(e-&gt;&#123;</span><br><span class="line">                <span class="comment">/*è·å–äºŒçº§èŠ‚ç‚¹*/</span></span><br><span class="line">                List&lt;TeachplanDto&gt; teachPlanTreeNodes = e.getTeachPlanTreeNodes();</span><br><span class="line">                <span class="comment">/*è‹¥äºŒçº§èŠ‚ç‚¹ä¸ç©º,éå†åˆ é™¤*/</span></span><br><span class="line">                <span class="keyword">if</span> (teachPlanTreeNodes != <span class="literal">null</span> &amp;&amp; !teachPlanTreeNodes.isEmpty())&#123;</span><br><span class="line">                    teachPlanTreeNodes.forEach(kid-&gt;teachPlanService.deleteGrade2(kid.getId()));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    teachPlanService.deleteTeachPlan(e.getId());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (XueChengPlusException ex) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*åˆ é™¤è¯¾ç¨‹è¥é”€ä¿¡æ¯å’Œè¯¾ç¨‹åŸºæœ¬ä¿¡æ¯*/</span></span><br><span class="line">        LambdaQueryWrapper&lt;CourseMarket&gt; courseMarketLambdaQueryWrapper=<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        courseMarketLambdaQueryWrapper.eq(CourseMarket::getId,id);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;201001&quot;</span>.equals(courseMarket.getCharge()))&#123;</span><br><span class="line">            courseMarketMapper.deleteById(id);</span><br><span class="line">        &#125;</span><br><span class="line">        courseBaseMapper.deleteById(id);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="Nacosè¿œç¨‹æœåŠ¡å™¨æ­å»º"><a href="#Nacosè¿œç¨‹æœåŠ¡å™¨æ­å»º" class="headerlink" title="Nacosè¿œç¨‹æœåŠ¡å™¨æ­å»º"></a>Nacosè¿œç¨‹æœåŠ¡å™¨æ­å»º</h1><p>å…ˆæ‹‰å–1.4.1çš„é•œåƒå¹¶å¯åŠ¨ï¼š</p><p>docker pull nacos&#x2F;nacos-server:1.4.1</p><p>docker run â€“env MODE&#x3D;standalone â€“name nacos -d -p 8848:8848 nacos&#x2F;nacos-server:1.4.1</p><p>è¿›å…¥nacosé…ç½®æ–‡ä»¶ï¼š</p><p>docker exec -it nacos bash</p><p>é…ç½®MySQLï¼š</p><p>spring.datasource.platform&#x3D;mysql</p><p>db.num&#x3D;1</p><p>db.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;xxxxxxxx:3306&#x2F;nacos?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true</p><p>db.user&#x3D;root</p><p>db.password&#x3D;123456</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æˆåœ¨çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoopå¤§æ•°æ®åŸºç¡€å­¦ä¹ ç¬”è®°</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/Hadoop%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/Hadoop%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p><strong>è§‚å‰æé†’ï¼šå…ˆå­¦ä¼šLinuxæ“ä½œç³»ç»Ÿå’Œæ•°æ®åº“åå†æ¥~</strong></p><h2 id="è™šæ‹Ÿæœºé›†ç¾¤é…ç½®"><a href="#è™šæ‹Ÿæœºé›†ç¾¤é…ç½®" class="headerlink" title="è™šæ‹Ÿæœºé›†ç¾¤é…ç½®"></a>è™šæ‹Ÿæœºé›†ç¾¤é…ç½®</h2><p>Linuxæ“ä½œç³»ç»Ÿæœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©çš„æ˜¯Centosï¼Œå…ˆå®‰è£…è™šæ‹ŸæœºVMwareï¼Œç„¶åå†ä¸‹è½½Centosçš„é•œåƒ</p><p>è¿›å»åç›´æ¥æ–°å»ºè™šæ‹Ÿæœºé€‰æ‹©å…¸å‹ï¼Œç„¶ååœ°å€å°±æ˜¯åˆšåˆšä¸‹è½½çš„è™šæ‹Ÿæœºçš„ä½ç½®ï¼Œå†…å­˜åˆ†é…å»ºè®®å®ƒå»ºè®®çš„ä¸€åŠå°±è¡Œï¼ˆè¦æ˜¯ä½ ç”µè„‘å¥½å½“æˆ‘æ²¡è¯´ï¼‰ï¼Œå®‰è£…ï¼ˆæ—¶é—´å¯èƒ½æœ‰10åˆ†ç§å·¦å³ï¼‰ã€‚ç™»å½•é€‰æ‹©â€œæœªåˆ—å‡ºçš„åˆ—è¡¨â€ï¼Œç„¶åusernameè¾“å…¥rootï¼Œå¯†ç å°±æ˜¯åˆšåˆšåˆ›å»ºæ—¶çš„å¯†ç ã€‚è¿›å»åå³é”®æ¡Œé¢ï¼Œé€‰æ‹©æœ€ä¸‹é¢çš„terminalæ‰“å¼€ç»ˆç«¯ï¼Œç„¶åè¾“å…¥hostnamectl set-hostname node1ï¼Œæ„æ€å°±æ˜¯å°†ä¸»æœºåè®¾ç½®ä¸ºnode1ã€‚</p><p>ç„¶åå…³é—­è™šæ‹Ÿæœºï¼Œå·¦è¾¹ä»»åŠ¡æ å³é”®åˆšåˆšçš„è™šæ‹Ÿæœºé€‰æ‹©å…‹éš†ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240120030121046-836124179.png" alt="img"></p><p> é€‰æ‹©å…‹éš†å®Œæ•´çš„è™šæ‹Ÿæœºï¼Œå°±æ˜¯è·Ÿè¿™ä¸ªä¸€æ¨¡ä¸€æ ·çš„ã€‚ç„¶åæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•å†å…‹éš†1ä¸ªï¼Œæ¥ç€é‡å‘½åä¸»æœºååˆ†åˆ«ä¸ºnode2ï¼Œnode3</p><p><strong>é…ç½®è™šæ‹Ÿæœºipå’Œç½‘å…³</strong>ï¼šå·¦ä¸Šè§’ç¼–è¾‘é€‰æ‹©è™šæ‹Ÿæœºç½‘ç»œç¼–è¾‘å™¨ï¼Œç„¶åé€‰æ‹©vmnet8ï¼Œæ›´æ”¹è®¾ç½®ï¼Œå°†å­ç½‘ipè®¾ç½®ä¸º192.168.88.0ï¼ŒNATè®¾ç½®é‡Œç½‘å…³è®¾ç½®ä¸º192.168.88.2</p><p>æ‰“å¼€node1ç»ˆç«¯è¾“å…¥vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p><p>æ”¹ä¸‹ï¼šBOOTPROTO&#x3D;â€staticâ€</p><p>æ·»åŠ ï¼š</p><p>IPADDR&#x3D;â€192.168.88.101â€<br>NETMASK&#x3D;â€255.255.255.0â€<br>GATEWAY&#x3D;â€192.168.88.2â€<br>DNS1&#x3D;â€192.168.88.2â€</p><p>ç„¶åctrl+cè¾“å…¥â€™:wqâ€™ä¿å­˜å¹¶é€€å‡º,è¾“å…¥ï¼šsystemctl restart networké‡å¯ç½‘ç»œï¼Œç„¶åè¾“å…¥ifconfigæŸ¥çœ‹ipç½‘ç»œã€‚</p><p>node2&#x2F;node3å°±æ˜¯å°†IPADDRè¿™ä¸€è¡Œåˆ†åˆ«æ”¹ä¸º 192.168.88.102å’Œ192.168.88.103ï¼Œå…¶å®ƒçš„éƒ½ä¸€æ ·</p><p><strong>æ”¹ç”¨FinalShellæ“ä½œ</strong></p><p>æ–°å»ºSSHè¿æ¥ï¼Œä¸»æœºè¾“å…¥192.168.88.101â€¦.102â€¦â€¦103,ç”¨æˆ·è¾“å…¥rootï¼Œå¯†ç å°±æ˜¯è‡ªå·±çš„</p><p>é…ç½®SSHå…å¯†ç™»å½•ï¼šå…ˆè¾“å…¥ssh-keygen -t rsa -b 4096,ä¸€ç›´å›è½¦ï¼Œç„¶ååˆ†åˆ«è¾“å…¥</p><p>ssh-copy-id node1</p><p>ssh-copy-id node2</p><p>ssh-copy-id node3</p><p>è¿™æ ·å°±å¯ä»¥åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šç™»å½•å…¶å®ƒæœåŠ¡å™¨äº†ã€‚</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241025224032.png"></p><p><strong>åˆ›å»ºæ–°ç”¨æˆ·</strong></p><p>useradd hadoop</p><p>passwd hadoop</p><p>su - hadoop</p><p>ssh-keygen -t rsa -b 4096</p><p>ssh-copy-id node1</p><p>ssh-copy-id node2</p><p>ssh-copy-id node3</p><p>ä¸‰å°æœºå­éƒ½é‡å¤ä¸€é</p><h2 id="é…ç½®Javaç¯å¢ƒ"><a href="#é…ç½®Javaç¯å¢ƒ" class="headerlink" title="é…ç½®Javaç¯å¢ƒ"></a>é…ç½®Javaç¯å¢ƒ</h2><p>ä¸‹è½½<strong>Linux</strong>ç‰ˆçš„jdk1.8ï¼š<a href="https://pan.baidu.com/s/1PkCjWWCF9EEG6KQrC255hA?pwd=1234&_at_=1705657329156#list/path=%2Fsharelink3232509500-280701956700393%2F2024%E6%9C%80%E6%96%B0%E7%89%88%E9%BB%91%E9%A9%AC%E7%A8%8B%E5%BA%8F%E5%91%98%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E5%9B%BE%2F2%E3%80%81%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%2F1%E3%80%81%E6%96%B0%E7%89%88Hadoop%E8%AF%BE%E7%A8%8B%2F%E8%B5%84%E6%96%99%E2%80%94Hadoop%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%85%A5%E9%97%A8%2FHadoop%E8%AF%BE%E7%A8%8B%E8%B5%84%E6%96%99&parentPath=%2Fsharelink3232509500-280701956700393">2024æœ€æ–°ç‰ˆé»‘é©¬ç¨‹åºå‘˜å¤§æ•°æ®å­¦ä¹ è·¯çº¿å›¾_å…è´¹é«˜é€Ÿä¸‹è½½|ç™¾åº¦ç½‘ç›˜-åˆ†äº«æ— é™åˆ¶ (baidu.com)</a>ï¼Œåœ¨ç»ˆç«¯è¾“å…¥mkdir -p &#x2F;export&#x2F;serveræ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå†rzå°†åˆšåˆšä¸‹è½½çš„jdkå¯¼å…¥ï¼Œç„¶åè¾“å…¥tar -zxvf jdk-8u361-linux-x64.tar.gz -C &#x2F;export&#x2F;serverè§£å‹ï¼Œcd &#x2F;export&#x2F;serverå’Œlsæ£€æŸ¥ä¸‹è§£å‹å¥½æ²¡ï¼Œç„¶åè¾“å…¥ln -s &#x2F;export&#x2F;server&#x2F;jdk1.8.0_361 jdk  é…ç½®jdkè½¯é“¾æ¥;</p><p>é…ç½®ç¯å¢ƒå˜é‡ï¼šè¾“å…¥ vim &#x2F;etc&#x2F;profileæ‰“å¼€ç¯å¢ƒå˜é‡ï¼Œç„¶åè¾“å…¥export JAVA_HOME&#x3D;&#x2F;export&#x2F;server&#x2F;jdkå’Œexport PATH&#x3D;$PATH:$JAVA_HOME&#x2F;binï¼Œä¿å­˜é€€å‡ºï¼›ç„¶åè¾“å…¥source &#x2F;etc&#x2F;profileç”Ÿæ•ˆç¯å¢ƒå˜é‡ï¼Œæ¥ç€åˆ é™¤centosè‡ªå¸¦çš„javaå¹¶å°†è‡ªå·±çš„javaæ›¿æ¢è¿›å…¥ï¼š</p><p>rm -f &#x2F;usr&#x2F;bin&#x2F;java<br>ln -s &#x2F;export&#x2F;server&#x2F;jdk&#x2F;bin&#x2F;java &#x2F;usr&#x2F;bin&#x2F;java</p><p><img src="https://img-hepingan.oss-cn-hangzhou.aliyuncs.com/page/20241025225607.png"></p><p>ç„¶åå°±å¯ä»¥è¾“å…¥java -versionå’Œjavac -versionæ£€æŸ¥javaç¯å¢ƒäº†ã€‚æ¯ä¸ªnodeéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å…ˆè¾“å…¥scp -r &#x2F;export&#x2F;server&#x2F;jdk1.8.0_361 node2:<code>pwd</code>&#x2F;å°†jdkå¤åˆ¶åˆ°node2ä¸­</p><p>åŒæ ·ä¸‰ä¸ªéƒ½è¦</p><h2 id="é˜²ç«å¢™ï¼ŒSELinuxï¼Œæ—¶åŒº"><a href="#é˜²ç«å¢™ï¼ŒSELinuxï¼Œæ—¶åŒº" class="headerlink" title="é˜²ç«å¢™ï¼ŒSELinuxï¼Œæ—¶åŒº"></a>é˜²ç«å¢™ï¼ŒSELinuxï¼Œæ—¶åŒº</h2><p>å…³é—­é˜²ç«å¢™ï¼šsystemctl stop firewalldå’Œsystemctl disable firewalld(å…³é—­å¼€æœºè‡ªå¯)ï¼Œå®é™…å¼€å‘ä¸­è‚¯å®šä¸è¿™ä¹ˆåšã€‚</p><p>è®¾ç½®SELinuxï¼švim &#x2F;etc&#x2F;sysconfig&#x2F;selinuxè¿›å…¥å°†SELINUXè®¾ç½®ä¸ºdisabled</p><p>é…ç½®æ—¶åŒºï¼Œä¸ºäº†é˜²æ­¢æ¯ä¸ªæœåŠ¡å™¨æ—¶é—´ä¸ä¸€æ ·ï¼šå…ˆå®‰è£…ntpï¼šyum install -y ntp</p><p>rm -f &#x2F;etc&#x2F;lcoaltime;sudo ln -s &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai &#x2F;etc&#x2F;localtime</p><h2 id="è™šæ‹Ÿæœº-æœåŠ¡å™¨éƒ¨ç½²HDFSé›†ç¾¤"><a href="#è™šæ‹Ÿæœº-æœåŠ¡å™¨éƒ¨ç½²HDFSé›†ç¾¤" class="headerlink" title="è™šæ‹Ÿæœº&#x2F;æœåŠ¡å™¨éƒ¨ç½²HDFSé›†ç¾¤"></a>è™šæ‹Ÿæœº&#x2F;æœåŠ¡å™¨éƒ¨ç½²HDFSé›†ç¾¤</h2><p>å…ˆä¸‹è½½ hadoopçš„å®˜æ–¹å®‰è£…åŒ…ï¼Œç„¶åå…ˆä¸Šä¼ åˆ°node1èŠ‚ç‚¹çš„&#x2F;export&#x2F;serveræ–‡ä»¶å¤¹ä¸­å¹¶è§£å‹:tar -zxvf hadoop-3.3.4.tar.gz -C &#x2F;export&#x2F;server</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå¼€å‘å­¦ä¹ ç¬”è®°</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€ä»‹ç»"><a href="#åŸºç¡€ä»‹ç»" class="headerlink" title="åŸºç¡€ä»‹ç»"></a>åŸºç¡€ä»‹ç»</h2><p>é¦–å…ˆè‡³å°‘ä¼šç‚¹html,cssåŸºç¡€çŸ¥è¯†å†æ¥å­¦ï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€ï¼Œåˆ›å»ºä¸€ä¸ªjså¼€å‘åŸºç¡€æ¨¡æ¿çš„é¡¹ç›®ï¼Œå®ƒçš„ç›®å½•å¦‚ä¸‹ï¼šwxmlå°±æ˜¯htmlï¼Œwxsså°±æ˜¯cssï¼Œappå¼€å¤´çš„å°±æ˜¯é¡µé¢è¿›æ¥é¦–å…ˆåŠ è½½çš„é…ç½®ï¼Œproject.config.jsonå°±æ˜¯ä¸€äº›é…ç½®è®¾ç½®ï¼Œå°±æ˜¯è¯¦æƒ…çš„æœ¬åœ°è®¾ç½®çš„ä»£ç ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240103222947908-1060761375.png" alt="img"></p><p><strong>æ¨èå­¦ä¹ æ–¹å¼ï¼šæ ¹æ®å¾®ä¿¡å®˜æ–¹çš„å¼€å‘æ–‡æ¡£è·Ÿç€å­¦è·Ÿç€åšï¼Œæ ¹æ®æ•™å­¦è§†é¢‘çš„æ•™å­¦å†…å®¹çš„è·¯çº¿å­¦ã€‚</strong></p><h2 id="åŸºç¡€å†…å®¹"><a href="#åŸºç¡€å†…å®¹" class="headerlink" title="åŸºç¡€å†…å®¹"></a>åŸºç¡€å†…å®¹</h2><p>å…ˆä»‹ç»ä¸‹viewç»„ä»¶ï¼Œå°±æ˜¯ç›¸å½“äºhtmlçš„divç›’å­ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>hover-class</td><td>string</td><td>none</td><td>å¦</td><td>æŒ‡å®šæŒ‰ä¸‹å»çš„æ ·å¼ç±»ã€‚å½“ <code>hover-class=&quot;none&quot;</code> æ—¶ï¼Œæ²¡æœ‰ç‚¹å‡»æ€æ•ˆæœ</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td>hover-stop-propagation</td><td>boolean</td><td>false</td><td>å¦</td><td>æŒ‡å®šæ˜¯å¦é˜»æ­¢æœ¬èŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹å‡ºç°ç‚¹å‡»æ€</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.5.0</a></td></tr><tr><td>hover-start-time</td><td>number</td><td>50</td><td>å¦</td><td>æŒ‰ä½åå¤šä¹…å‡ºç°ç‚¹å‡»æ€ï¼Œå•ä½æ¯«ç§’</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td>hover-stay-time</td><td>number</td><td>400</td><td>å¦</td><td>æ‰‹æŒ‡æ¾å¼€åç‚¹å‡»æ€ä¿ç•™æ—¶é—´ï¼Œå•ä½æ¯«ç§’</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr></tbody></table><p>å†æ¥çœ‹textçš„ä¸€äº›å±æ€§ï¼š</p><ul><li>decodeï¼šç‰¹æ®Šå­—ç¬¦å…è®¸ä½¿ç”¨ç¼–ç ï¼Œæ¯”å¦‚&amp;ltå°±æ˜¯&lt;ï¼Œ&amp;gtå°±æ˜¯&gt;</li><li>user-selectï¼šå…è®¸ç”¨æˆ·å¤åˆ¶</li><li>space(nbsp)ï¼šå…è®¸è‡ªå®šä¹‰ç©ºæ ¼ï¼Œå°±æ˜¯æ‰“å¤šå°‘ä¸ªç©ºæ ¼æ˜¯å¤šå°‘ä¸ª</li></ul><p>è¿˜æœ‰ä¸€äº›å±æ€§å°±å‚è€ƒå¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£äº†ã€‚</p><p><strong>ä¸‹é¢çš„ç»„ä»¶å°±ä»‹ç»ä¸€äº›åŸºç¡€é‡è¦çš„å±æ€§äº†</strong></p><h3 id="iconå›¾æ ‡"><a href="#iconå›¾æ ‡" class="headerlink" title="iconå›¾æ ‡"></a><strong>iconå›¾æ ‡</strong></h3><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>type</td><td>string</td><td></td><td>æ˜¯</td><td>iconçš„ç±»å‹ï¼Œæœ‰æ•ˆå€¼ï¼šsuccess, success_no_circle, info, warn, waiting, cancel, download, search, clear</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td>size</td><td>number&#x2F;string</td><td>23</td><td>å¦</td><td>iconçš„å¤§å°ï¼Œå•ä½é»˜è®¤ä¸ºpxï¼Œ<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.4.0</a>èµ·æ”¯æŒä¼ å…¥å•ä½(rpx&#x2F;px)ï¼Œ<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.21.3</a>èµ·æ”¯æŒä¼ å…¥å…¶ä½™å•ä½(rem ç­‰)ã€‚</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td>color</td><td>string</td><td></td><td>å¦</td><td>iconçš„é¢œè‰²ï¼ŒåŒcssçš„color</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr></tbody></table><h3 id="progressè¿›åº¦æ¡"><a href="#progressè¿›åº¦æ¡" class="headerlink" title="progressè¿›åº¦æ¡"></a>progressè¿›åº¦æ¡</h3><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>percent</td><td>number</td><td></td><td>å¦</td><td>ç™¾åˆ†æ¯”0~100</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td>show-info</td><td>boolean</td><td>false</td><td>å¦</td><td>åœ¨è¿›åº¦æ¡å³ä¾§æ˜¾ç¤ºç™¾åˆ†æ¯”</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td>border-radius</td><td>number&#x2F;string</td><td>0</td><td>å¦</td><td>åœ†è§’å¤§å°</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.3.1</a></td></tr></tbody></table><h3 id="ç›¸å¯¹å¤§å°rpxå’Œç‰©ç†å¤§å°px"><a href="#ç›¸å¯¹å¤§å°rpxå’Œç‰©ç†å¤§å°px" class="headerlink" title="ç›¸å¯¹å¤§å°rpxå’Œç‰©ç†å¤§å°px"></a>ç›¸å¯¹å¤§å°rpxå’Œç‰©ç†å¤§å°px</h3><p>å¯¹äºä¸åŒçš„æ‰‹æœºæœºå‹æ˜¾ç¤ºçš„å¤§å°ï¼Œå¦‚æœä½¿ç”¨çš„pxå°±æ˜¯å®ƒçš„å®é™…å¤§å°ï¼Œæ„æ€å°±æ˜¯æ— è®ºåœ¨å“ªä¸ªæ‰‹æœºä¸Šå…ˆçš„ç‰©ç†åƒç´ å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨çš„æ˜¯rpxç›¸å¯¹å¤§å°ï¼Œåˆ™ä¼šåœ¨ä¸åŒæœºå‹æ˜¾ç¤ºç›¸å¯¹çš„å¤§å°ã€‚æ¯”å¦‚ipone14å®½å¤§å°ä¸º430ï¼ŒiponeXä¸º375ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240104003706827-628151280.png" alt="img"></p><p>ä½¿ç”¨ä¸‹é¢ä»£ç éªŒè¯ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;width: 50px; height: 50px; background-color: red;&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;width: 100rpx; height: 100rpx; background-color: black;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240104004344252-1933703713.png" alt="img"></p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240104004404222-271070896.png" alt="img"></p><p>å¯ä»¥çœ‹åˆ°åœ¨iponexçš„æœºå‹ä¸‹çº¢é»‘å¤§å°ä¸€æ ·ï¼Œipone14å°±ä¸ä¸€æ ·äº†ã€‚</p><h2 id="è§†å›¾å®¹å™¨"><a href="#è§†å›¾å®¹å™¨" class="headerlink" title="è§†å›¾å®¹å™¨"></a>è§†å›¾å®¹å™¨</h2><h3 id="scroll-viewæ»šåŠ¨å®¹å™¨"><a href="#scroll-viewæ»šåŠ¨å®¹å™¨" class="headerlink" title="scroll-viewæ»šåŠ¨å®¹å™¨"></a>scroll-viewæ»šåŠ¨å®¹å™¨</h3><p>ä»‹ç»ä¸ªå¿«æ·ä»£ç ï¼Œè¾“å…¥.xxx*8å›è½¦å°±ä¼šå¿«é€Ÿåˆ›å»º8ä¸ªclassåä¸ºxxxçš„viewå®¹å™¨ï¼Œ.xxx{$}*8å›è½¦å¯åˆ›å»º8ä¸ªclassåä¸ºxxxçš„viewå®¹å™¨ä¸”æ¯ä¸ªå®¹å™¨ä»å°å¾€å¤§é‡Œé¢æœ‰1åˆ°8çš„æ•°å­—ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p> å…ˆçœ‹ä»£ç ï¼šæ¨ªå‘æ»šåŠ¨çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 220rpx; background-color: silver; white-space: nowrap;&quot;</span><span class="attr">scroll-x</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">view</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure><p> ç«–å‘æ»šåŠ¨çš„</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 220rpx; background-color: silver;&quot;</span> <span class="attr">scroll-y</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>csséƒ¨åˆ†ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.row</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">180</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="comment">/* display: inline-block; */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æ¸…é™¤æœ€åä¸€ä¸ªå…ƒç´ çš„margin-right */</span></span><br><span class="line"><span class="selector-class">.row2</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: blue;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.row2</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th><th></th></tr></thead><tbody><tr><td></td><td>scroll-x</td><td>boolean</td><td>false</td><td>å¦</td><td>å…è®¸æ¨ªå‘æ»šåŠ¨</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr><tr><td></td><td>scroll-y</td><td>boolean</td><td>false</td><td>å¦</td><td>å…è®¸çºµå‘æ»šåŠ¨</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.0.0</a></td></tr></tbody></table><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="movable-areaå’Œmovable-viewå¯ç§»åŠ¨ç»„ä»¶"><a href="#movable-areaå’Œmovable-viewå¯ç§»åŠ¨ç»„ä»¶" class="headerlink" title="movable-areaå’Œmovable-viewå¯ç§»åŠ¨ç»„ä»¶"></a>movable-areaå’Œmovable-viewå¯ç§»åŠ¨ç»„ä»¶</h3><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>direction</td><td>string</td><td>none</td><td>å¦</td><td>movable-viewçš„ç§»åŠ¨æ–¹å‘ï¼Œå±æ€§å€¼æœ‰allã€verticalã€horizontalã€none</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr><tr><td>inertia</td><td>boolean</td><td>false</td><td>å¦</td><td>movable-viewæ˜¯å¦å¸¦æœ‰æƒ¯æ€§</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr><tr><td>out-of-bounds</td><td>boolean</td><td>false</td><td>å¦</td><td>è¶…è¿‡å¯ç§»åŠ¨åŒºåŸŸåï¼Œmovable-viewæ˜¯å¦è¿˜å¯ä»¥ç§»åŠ¨</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr><tr><td>x</td><td>number&#x2F;string</td><td></td><td>å¦</td><td>å®šä¹‰xè½´æ–¹å‘çš„åç§»ï¼Œå¦‚æœxçš„å€¼ä¸åœ¨å¯ç§»åŠ¨èŒƒå›´å†…ï¼Œä¼šè‡ªåŠ¨ç§»åŠ¨åˆ°å¯ç§»åŠ¨èŒƒå›´ï¼›æ”¹å˜xçš„å€¼ä¼šè§¦å‘åŠ¨ç”»ï¼›å•ä½æ”¯æŒpxï¼ˆé»˜è®¤ï¼‰ã€rpxï¼›</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr><tr><td>y</td><td>number&#x2F;string</td><td></td><td>å¦</td><td>å®šä¹‰yè½´æ–¹å‘çš„åç§»ï¼Œå¦‚æœyçš„å€¼ä¸åœ¨å¯ç§»åŠ¨èŒƒå›´å†…ï¼Œä¼šè‡ªåŠ¨ç§»åŠ¨åˆ°å¯ç§»åŠ¨èŒƒå›´ï¼›æ”¹å˜yçš„å€¼ä¼šè§¦å‘åŠ¨ç”»ï¼›å•ä½æ”¯æŒpxï¼ˆé»˜è®¤ï¼‰ã€rpxï¼›</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.2.0</a></td></tr></tbody></table><p>egï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">movable-area</span> <span class="attr">style</span>=<span class="string">&quot;width: 400rpx; height: 400rpx; background-color: skyblue;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">movable-view</span> <span class="attr">direction</span>=<span class="string">&quot;all&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px; height: 100px; background-color: springgreen;&quot;</span> <span class="attr">inertia</span>=<span class="string">&quot;true&quot;</span> <span class="attr">x</span>=<span class="string">&quot;20rpx&quot;</span> <span class="attr">y</span>=<span class="string">&quot;20px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">movable-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">movable-area</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="match-mediaåŒ¹é…åª’ä½“"><a href="#match-mediaåŒ¹é…åª’ä½“" class="headerlink" title="match-mediaåŒ¹é…åª’ä½“"></a>match-mediaåŒ¹é…åª’ä½“</h3><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>min-width</td><td>number</td><td></td><td>å¦</td><td>é¡µé¢æœ€å°å®½åº¦ï¼ˆ px ä¸ºå•ä½ï¼‰</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.1</a></td></tr><tr><td>max-width</td><td>number</td><td></td><td>å¦</td><td>é¡µé¢æœ€å¤§å®½åº¦ï¼ˆ px ä¸ºå•ä½ï¼‰</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.1</a></td></tr><tr><td>width</td><td>number</td><td></td><td>å¦</td><td>é¡µé¢å®½åº¦ï¼ˆ px ä¸ºå•ä½ï¼‰</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.1</a></td></tr><tr><td>min-height</td><td>number</td><td></td><td>å¦</td><td>é¡µé¢æœ€å°é«˜åº¦ï¼ˆ px ä¸ºå•ä½ï¼‰</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.1</a></td></tr><tr><td>max-height</td><td>number</td><td></td><td>å¦</td><td>é¡µé¢æœ€å¤§é«˜åº¦ï¼ˆ px ä¸ºå•ä½ï¼‰</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.11.1</a></td></tr></tbody></table><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">match-media</span> <span class="attr">min-width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">max-width</span>=<span class="string">&quot;600&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>å½“é¡µé¢å®½åº¦åœ¨ 300 ~ 500 px ä¹‹é—´æ—¶å±•ç¤ºè¿™é‡Œ<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match-media</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">match-media</span> <span class="attr">min-height</span>=<span class="string">&quot;400&quot;</span> <span class="attr">orientation</span>=<span class="string">&quot;landscape&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>å½“é¡µé¢é«˜åº¦ä¸å°äº 400 px ä¸”å±å¹•æ–¹å‘ä¸ºçºµå‘æ—¶å±•ç¤ºè¿™é‡Œ<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">match-media</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="root-portal"><a href="#root-portal" class="headerlink" title="root-portal"></a>root-portal</h3><p>ä½¿æ•´ä¸ªå­æ ‘ä»é¡µé¢ä¸­è„±ç¦»å‡ºæ¥ï¼Œç±»ä¼¼äºåœ¨ CSS ä¸­ä½¿ç”¨ fixed position çš„æ•ˆæœã€‚ä¸»è¦ç”¨äºåˆ¶ä½œå¼¹çª—ã€å¼¹å‡ºå±‚ç­‰ã€‚</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>enable</td><td>boolean</td><td>true</td><td>å¦</td><td>æ˜¯å¦ä»é¡µé¢ä¸­è„±ç¦»å‡ºæ¥</td><td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.26.1</a></td></tr></tbody></table><h2 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h2><p>â€”&gt;å¦‚ä½•åœ¨pagesé‡Œæ–°å»ºä¸€ä¸ªpagesé¡µé¢ï¼Œé‡Œé¢è‡ªåŠ¨ç”Ÿæˆjs,json,wxml,wxssçš„æ–‡ä»¶ï¼Œåœ¨app.jsoné‡Œçš„pagesé‡Œæ·»åŠ â€&#x2F;pages&#x2F;demo&#x2F;demoâ€,å°±å¯ä»¥äº†ï¼š</p><p>â€œpagesâ€: [</p><p>  â€œpages&#x2F;demo&#x2F;demoâ€,</p><p>  â€œpages&#x2F;index&#x2F;indexâ€,</p><p>  â€œpages&#x2F;logs&#x2F;logsâ€</p><p> ],</p><p>å…¶ä¸­æœ€åä¸€ä¸ªåé¢ä¸èƒ½æœ‰é€—å·ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯é¦–ç¼–è¯‘é¡µé¢ï¼ˆå°±æ˜¯ç”¨æˆ·ç™»å½•å°ç¨‹åºçš„é¡µé¢ï¼‰</p><p>â€”&gt;è®¾ç½®å°ç¨‹åºçš„çª—å£ï¼š</p><p>ç”¨äºè®¾ç½®å°ç¨‹åºçš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ã€‚</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th><th>æœ€ä½ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>navigationBarBackgroundColor</td><td>HexColor</td><td>#000000</td><td>å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼Œå¦‚ <code>#000000</code></td><td></td></tr><tr><td>navigationBarTextStyle</td><td>string</td><td>white</td><td>å¯¼èˆªæ æ ‡é¢˜ã€çŠ¶æ€æ é¢œè‰²ï¼Œä»…æ”¯æŒ <code>black</code> &#x2F; <code>white</code></td><td></td></tr><tr><td>navigationBarTitleText</td><td>string</td><td></td><td>å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹</td><td></td></tr><tr><td>navigationStyle</td><td>string</td><td>default</td><td>å¯¼èˆªæ æ ·å¼ï¼Œä»…æ”¯æŒä»¥ä¸‹å€¼ï¼š <code>default</code> é»˜è®¤æ ·å¼ <code>custom</code> è‡ªå®šä¹‰å¯¼èˆªæ ï¼Œåªä¿ç•™å³ä¸Šè§’èƒ¶å›ŠæŒ‰é’®ã€‚å‚è§æ³¨ 2ã€‚</td><td>iOS&#x2F;Android å¾®ä¿¡å®¢æˆ·ç«¯ 6.6.0ï¼ŒWindows å¾®ä¿¡å®¢æˆ·ç«¯ä¸æ”¯æŒ</td></tr><tr><td>homeButton</td><td>boolean</td><td>default</td><td>åœ¨éé¦–é¡µã€éé¡µé¢æ ˆæœ€åº•å±‚é¡µé¢æˆ–étabbarå†…é¡µé¢ä¸­çš„å¯¼èˆªæ å±•ç¤ºhomeé”®</td><td>å¾®ä¿¡å®¢æˆ·ç«¯ 8.0.24</td></tr><tr><td>backgroundColor</td><td>HexColor</td><td>#ffffff</td><td>çª—å£çš„èƒŒæ™¯è‰²</td><td></td></tr><tr><td>backgroundTextStyle</td><td>string</td><td>dark</td><td>ä¸‹æ‹‰ loading çš„æ ·å¼ï¼Œä»…æ”¯æŒ <code>dark</code> &#x2F; <code>light</code></td><td></td></tr></tbody></table><p>â€œwindowâ€: {</p><p>  â€œnavigationBarTextStyleâ€: â€œblackâ€,</p><p>  â€œnavigationStyleâ€: â€œcustomâ€,</p><p>  â€œnavigationBarTitleTextâ€: â€œä½•å¹³å®‰çš„å°ç¨‹åºå­¦ä¹ â€,</p><p>  â€œnavigationBarBackgroundColorâ€: â€œ#00B26Aâ€</p><p> },</p><p>æ•ˆæœå°±æ˜¯è¿™æ ·ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240104135337046-1417747824.png" alt="img"></p><p>è¿™é‡Œè¡¥å……ä¸‹å¦‚æœæ‰‹æœºç«¯é‡Œæ²¡æœ‰è¿™ä¸ªå¯¼èˆªæ ï¼Œå› ä¸ºæ²¡æœ‰åœ¨app.jsoné‡Œwindowçš„navigationStyleé‡Œè®¾ç½®defaultï¼ˆé»˜è®¤ï¼‰ï¼Œä½ è‚¯å®šå†™çš„æ˜¯customï¼ˆè‡ªå®šä¹‰ï¼‰ï¼›</p><h2 id="å‰©ä½™å­¦ä¹ è·¯çº¿"><a href="#å‰©ä½™å­¦ä¹ è·¯çº¿" class="headerlink" title="å‰©ä½™å­¦ä¹ è·¯çº¿"></a><strong>å‰©ä½™å­¦ä¹ è·¯çº¿</strong></h2><p><strong>æ¥ä¸‹æ¥å°±æ ¹æ®å­¦ä¹ è·¯çº¿æ¥æ ¹æ®å¾®ä¿¡å®˜æ–¹æ–‡æ¡£æ¥å­¦ä¹ äº†ï¼š</strong></p><p>imageå›¾ç‰‡ç»„ä»¶ï¼ˆæ¨èç™½å«–ä¸ªæœåŠ¡å™¨:unicloudï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œå¤©ç¿¼äº‘ï¼Œåä¸ºäº‘â€¦.å¥½å¤šæœåŠ¡å™¨éƒ½å¯ä»¥ç™½å«–ä¸‹ï¼Œsrcçš„åœ°å€ç›´æ¥ç”¨æœåŠ¡å™¨çš„åœ°å€å°±å¥½äº†ï¼‰â€“&gt;navigatorå¯¼èˆªâ€”&gt;jsï¼ˆå°±æ˜¯æ™®é€šçš„jsï¼Œåªæ˜¯å¾®ä¿¡è‡ªåŠ¨å¼•å…¥äº†å®ƒçš„åº“äº†ï¼‰â€”&gt;wx:if&#x2F;elif&#x2F;else,wx:forâ€”&gt;è§†å›¾å±‚ï¼šäº‹ä»¶â€”&gt;éšæœºäº‹ä»¶â€”&gt;wx.requestè¯·æ±‚ï¼ˆå‚æ•°æ¯”è¾ƒå¤šæœ€å¥½å¤šçœ‹çœ‹ï¼‰â€”&gt;é¡µé¢é…ç½®â€”&gt;compoentç»„ä»¶â€”&gt;jsæ¨¡æ¿ä¸­scsså¯¼å…¥(æ•™ç¨‹ï¼š<a href="https://www.bilibili.com/video/BV19G4y1K74d?p=42&spm_id_from=pageDriver&vd_source=190aa40e29cf9c29c0ec0fe896bdef1f">5.2.åœ¨å¾®ä¿¡å°ç¨‹åºå¦‚ä½•ä½¿ç”¨scssç¼–è¯‘wxssæ–‡ä»¶_å“”å“©å“”å“©_bilibili</a>)â€”&gt;</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€ä¸€ã€‘(é¡¹ç›®ç¯å¢ƒæ­å»º)</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E4%B8%80%E3%80%91-%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%A4%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%8A%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF%E3%80%8B%E3%80%90%E4%B8%80%E3%80%91-%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p><strong>ï¼ï¼ï¼å›¾ç‰‡å·²è¿‡æœŸï¼Œç§»æ­¥è€åšå®¢ï¼š<a href="https://www.cnblogs.com/hepingan/p/17925917.html">ä¼ä¸šçº§å¾®æœåŠ¡å¤§é¡¹ç›®å®æˆ˜ã€Šå­¦æˆåœ¨çº¿ã€‹ã€ä¸€ã€‘(é¡¹ç›®ç¯å¢ƒæ­å»º) - ä½•å¹³å®‰ - åšå®¢å›­</a>ï¼ï¼ï¼</strong></p><p>é¡¹ç›®æ–‡æ¡£åœ°å€ï¼š<a href="https://gitee.com/woldier/xuecheng-online#%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF">é»‘é©¬é¡¹ç›®-å­¦æˆåœ¨çº¿æ•™è‚²å¹³å°: ä»¥ä¸šåŠ¡ä¸ºåŸºç¡€ï¼ŒåŸºäºå½“å‰çƒ­é—¨çš„ Spring Cloud å¾®æœåŠ¡æŠ€æœ¯æ ˆè¿›è¡Œè®¾è®¡ï¼Œé‡‡ç”¨Nginxã€SpringBootã€Spring Cloudã€MyBatis-Plusã€MQã€Redisã€Elasticsearchç­‰æ¡†æ¶å’Œä¸­é—´ä»¶ä¸ºåŸºç¡€è¿›è¡Œå¼€å‘ï¼Œå¸¦é¢†å­¦å‘˜ä½“éªŒJavaå¤§å‹é¡¹ç›®ä»éœ€æ±‚åˆ†æã€æ¶æ„è®¾è®¡ã€ç¼–ç ã€è°ƒè¯•ã€æµ‹è¯•çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ (gitee.com)</a></p><h2 id="é¡¹ç›®æ¶æ„"><a href="#é¡¹ç›®æ¶æ„" class="headerlink" title="é¡¹ç›®æ¶æ„"></a>é¡¹ç›®æ¶æ„</h2><p><strong>å…ˆæ¥çœ‹çœ‹é¡¹ç›®æ¶æ„å›¾ï¼š</strong><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231225132841326-1180810299.png" alt="img"></p><p>æˆ‘ä»¬ä¸»è¦æçš„å°±æ˜¯å¾®æœåŠ¡å±‚å’Œæ•°æ®å±‚ã€‚</p><p>è€Œè¿™ä¸ªé¡¹ç›®æ¯”è¾ƒå¤§ï¼Œæ¡†æ¶å°±åˆ†æˆäº†ä¸‰ä¸ªç«¯ï¼š<img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231225133029683-435775938.png" alt="img"></p><h2 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h2><p><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231225153231241-1781568568.png" alt="img"></p><p>åœ¨å¼€å‘è¿™ä¸ªé¡¹ç›®å‰ï¼Œä½ éœ€è¦äº†è§£java,ssm,.springboot,springcloud,springcloudAlibaba,nacos,mysql,è™šæ‹Ÿæœº,docker,SSHé€šä¿¡,ngnix,redis,rabbitMQ,CentOS,æ“ä½œç³»ç»Ÿ,git,gogsâ€¦ä»¥åŠæœ€é‡è¦çš„è€å¿ƒã€‚ </p><p>sshç§‘æ™®ï¼š<a href="https://zhuanlan.zhihu.com/p/323322650">ã€ç§‘æ™®ã€‘SSHéƒ½ä¸æ‡‚ï¼Œè¿˜æä»€ä¹ˆç½‘ç»œ - çŸ¥ä¹ (zhihu.com)</a></p><p>æ“ä½œç³»ç»Ÿäº†è§£é€Ÿé€šï¼š<a href="https://blog.csdn.net/Royalic/article/details/119999404">è®¡ç®—æœºæ“ä½œç³»ç»ŸçŸ¥è¯†ç‚¹æ€»ç»“ï¼ˆæœ‰è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼ï¼ï¼ï¼‰-CSDNåšå®¢</a></p><p>å…ˆå®‰è£…å¥½é»‘é©¬çš„è™šæ‹Ÿæœºï¼Œå°±æ˜¯é‚£ä¸ªæœ‰8ä¸ªGçš„æ–‡ä»¶ï¼Œè§£å‹ååŒå‡»cenos7 64ä½.vmxçš„æ–‡ä»¶:</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231225162645079-1017120457.png" alt="img"></p><p>é€‰æ‹©ç”¨VMwareæ‰“å¼€ï¼Œè¿›å»åé€‰æ‹©å¤åˆ¶ï¼Œé…ç½®è™šæ‹Ÿæœºipï¼šVMwareä¸­è¿›å…¥ç¼–è¾‘-&gt;è™šæ‹Ÿç½‘ç»œç¼–è¯‘å™¨-&gt;ä¿®æ”¹å­ç½‘ipä¸º192.168.101.0:<img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231225163238103-401624578.png" alt="img"></p><p>ç™»å½•çš„è´¦å·&#x2F;å¯†ç ï¼šroot&#x2F;centos,ç™»å½•åæ‰“å¼€ç»ˆç«¯è¾“å…¥systemctl start docker(å¯åŠ¨docker)å’Œsh &#x2F;data&#x2F;soft&#x2F;restart.shï¼ˆè¿è¡Œï¼‰<br>ï¼Œå†æŸ¥è¯¢dockerå®¹å™¨ï¼šdocker psï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„ç”»é¢å°±æˆåŠŸäº†ï¼š<img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231225164626519-1224960551.png" alt="img"></p><p>å¯¹äº†è¿™ä¸ªè½¯ä»¶å«FinalShellï¼Œç½‘ä¸Šæœ‰æ•™ç¨‹ç›´æ¥æœã€‚</p><p>å‰©ä¸‹çš„å°±æ˜¯ç‰ˆæœ¬æ§åˆ¶äº†ï¼Œé»‘é©¬é€‰ç”¨çš„æ˜¯gogsï¼Œä¸æ€ä¹ˆç†Ÿæ‚‰ï¼Œæˆ‘è¿˜æ˜¯ç”¨çš„giteeã€‚</p><h2 id="æ‰‹åŠ¨éƒ¨ç½²è™šæ‹Ÿæœºæˆ–æœåŠ¡å™¨"><a href="#æ‰‹åŠ¨éƒ¨ç½²è™šæ‹Ÿæœºæˆ–æœåŠ¡å™¨" class="headerlink" title="æ‰‹åŠ¨éƒ¨ç½²è™šæ‹Ÿæœºæˆ–æœåŠ¡å™¨"></a>æ‰‹åŠ¨éƒ¨ç½²è™šæ‹Ÿæœºæˆ–æœåŠ¡å™¨</h2><p><strong>å¯¹äºç”µè„‘é…ç½®ä½å†…å­˜ä¸å¤Ÿçš„æˆ‘æ¥è¯´ä¹°ä¸ªäº‘æœåŠ¡å™¨è‡ªå·±æ­å»ºç¯å¢ƒä»£æ›¿è™šæ‹Ÿæœºå°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©~</strong></p><p>\1. å®‰è£…Docker 18.09.0çš„è¯¦ç»†æ­¥éª¤</p><p>æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–åº“</p><p>-â€”â€“</p><p>sudo yum install -y yum-utils device-mapper-persistent-data lvm2</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šæ·»åŠ Dockeræº</p><p>-â€”â€“</p><p>sudo yum-config-manager â€“add-repo <a href="https://download.docker.com/linux/centos/docker-ce.repo">https://download.docker.com/linux/centos/docker-ce.repo</a></p><p>æ¨èä¸‹é¢çš„é˜¿é‡Œäº‘åŠ é€Ÿé•œåƒ</p><p>sudo yum-config-manager â€“add-repo <a href="http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a></p><p>-â€”â€“</p><p>æ­¥éª¤3ï¼šå®‰è£…Docker</p><p>-â€”â€“</p><p>sudo yum install docker-ce-18.09.0 docker-ce-cli-18.09.0 containerd.io</p><p>-â€”â€“</p><p>æ­¥éª¤4ï¼šå¯åŠ¨Docker</p><p>-â€”â€“</p><p>sudo systemctl start docker</p><p>-â€”â€“</p><p>æ­¥éª¤5ï¼šè®¾ç½®Dockerå¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>sudo systemctl enable docker</p><p>-â€”â€“</p><p>\2. åœ¨Dockerä¸­å®‰è£…MySQL 8.0.26</p><p>æ­¥éª¤1ï¼šæ‹‰å–MySQL 8çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull mysql:8.0.26</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºMySQLå®¹å™¨,åˆ›å»ºMySQLæ•°æ®å­˜å‚¨ç›®å½•å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­</p><p>-â€”â€“</p><p>mkdir -p &#x2F;data&#x2F;mysql</p><p>-â€”â€“</p><p>docker run -p 3306:3306 â€“name mysql -v &#x2F;data&#x2F;mysql:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;root -d mysql:8.0.26</p><p>-â€”â€“</p><p>è¯´æ˜ï¼š</p><p>å‚æ•°<code>-p 3306:3306</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„3306ç«¯å£ã€‚å‚æ•°<code>--name mysql</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«mysqlï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å‚æ•°<code>-v /data/mysql:/var/lib/mysql</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;mysqlç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;var&#x2F;lib&#x2F;mysqlç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>å‚æ•°<code>-e MYSQL_ROOT_PASSWORD=root</code>è¡¨ç¤ºè®¾ç½®MySQLçš„rootç”¨æˆ·çš„å¯†ç ä¸ºrootã€‚</p><p>æ­¥éª¤3ï¼šè¿›å…¥MySQLå®¹å™¨æ‰§è¡Œç›¸å…³æ“ä½œ</p><p>-â€”â€“</p><p>docker exec -it mysql bash</p><p>è¯´æ˜ï¼šè¿›å…¥å®¹å™¨åå¯ä»¥åœ¨å®¹å™¨å†…ä½¿ç”¨MySQLå®¢æˆ·ç«¯æ¥æ“ä½œMySQLæ•°æ®åº“ã€‚</p><p>-â€”â€“</p><p>mysql -u root -på›è½¦</p><p>-â€”â€“</p><p>è¾“å…¥ä½ çš„å¯†ç ï¼ˆæˆ‘çš„å¯†ç æ˜¯:rootï¼‰</p><p>-â€”â€“</p><p>exit</p><p>è¯´æ˜ï¼šé€€å‡ºmysqlçª—å£</p><p>-â€”â€“</p><p>exit</p><p>è¯´æ˜ï¼šé€€å‡ºmysqlå®¹å™¨</p><p>-â€”â€“</p><p>\3. åœ¨Dockerä¸­å®‰è£…Nacos 1.4.1</p><p>æ­¥éª¤1ï¼šæ‹‰å–Nacos 1.4.1çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull nacos&#x2F;nacos-server:1.4.1</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºNacoså®¹å™¨ï¼Œåœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºNacosæ•°æ®å­˜å‚¨ç›®å½•å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;nacos</p><p>-â€”â€“</p><p>docker run -p 8848:8848 â€“name nacos -v &#x2F;data&#x2F;nacos:&#x2F;home&#x2F;nacos&#x2F;nacos-server-1.4.1&#x2F;nacos-logs -d nacos&#x2F;nacos-server:1.4.1</p><p>-â€”â€“</p><p>è¯´æ˜ï¼š</p><p>å‚æ•°<code>-p 8848:8848</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„8848ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„8848ç«¯å£ã€‚</p><p>å‚æ•°<code>--name nacos</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«nacosï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å‚æ•°<code>-v /data/nacos:/home/nacos/nacos-server-1.4.1/nacos-logs</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;nacosç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;home&#x2F;nacos&#x2F;nacos-server-1.4.1&#x2F;nacos-logsç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>æ­¥éª¤3ï¼šè®¾ç½®Nacoså¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always nacos</p><p>-â€”â€“</p><p>\4. åœ¨Dockerä¸­å®‰è£…RabbitMQ 3.8.34</p><p>æ­¥éª¤1ï¼šæ‹‰å–RabbitMQ 3.8.34çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull rabbitmq:3.8.34-management</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºRabbitMQå®¹å™¨</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;rabbitmq</p><p>-â€”â€“</p><p>docker run -p 15672:15672 -p 5672:5672 â€“name rabbitmq -v &#x2F;data&#x2F;rabbitmq:&#x2F;var&#x2F;lib&#x2F;rabbitmq -d rabbitmq:3.8.34-management</p><p>-â€”â€“</p><p>è¯´æ˜ï¼š</p><p>å‚æ•°<code>-p 15672:15672 -p 5672:5672</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„15672å’Œ5672ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„15672å’Œ5672ç«¯å£ã€‚</p><p>å‚æ•°<code>--name rabbitmq</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«rabbitmqï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å‚æ•°<code>-v /data/rabbitmq:/var/lib/rabbitmq</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;rabbitmqç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;var&#x2F;lib&#x2F;rabbitmqç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>è¯´æ˜ï¼š</p><p>æ­¥éª¤3ï¼šè®¾ç½®RabbitMQå¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always rabbitmq</p><p>-â€”â€“</p><p>\5. åœ¨Dockerä¸­å®‰è£…Redis 6.2.7</p><p>æ­¥éª¤1ï¼šæ‹‰å–Redis 6.2.7çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull redis:6.2.7</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºRediså®¹å™¨ï¼›åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºRedisæ•°æ®å­˜å‚¨ç›®å½•å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;redis</p><p>-â€”â€“</p><p>docker run -p 6379:6379 â€“name redis -v &#x2F;data&#x2F;redis:&#x2F;data -d redis:6.2.7 redis-server â€“appendonly yes</p><p>-â€”â€“</p><p>è¯´æ˜ï¼š</p><p>å‚æ•°<code>-p 6379:6379</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„6379ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„6379ç«¯å£ã€‚</p><p>å‚æ•°<code>--name redis</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«redisï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å‚æ•°<code>-v /data/redis:/data</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;redisç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;dataç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>å‚æ•°<code>redis-server --appendonly yes</code>è¡¨ç¤ºå¼€å¯Redisçš„æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ã€‚</p><p>æ­¥éª¤3ï¼šè®¾ç½®Rediså¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always redis</p><p>-â€”â€“</p><p>\7. åœ¨Dockerä¸­å®‰è£…Minio RELEASE.2022-09-07</p><p>æ­¥éª¤1ï¼šæ‹‰å–Minio RELEASE.2022-09-07çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull minio&#x2F;minio</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºMinioå®¹å™¨ï¼›åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºMinioæ•°æ®å­˜å‚¨ç›®å½•å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;minio</p><p>docker run -p 9000:9000 â€“name minio -v &#x2F;data&#x2F;minio:&#x2F;data -d minio&#x2F;minio server &#x2F;data</p><p>-â€”â€“</p><p>è¯´æ˜ï¼šå‚æ•°<code>-p 9000:9000</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„9000ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„9000ç«¯å£ã€‚å‚æ•°<code>--name minio</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«minioï¼Œæ–¹ä¾¿ç®¡ç†ã€‚å‚æ•°<code>server /data</code>è¡¨ç¤ºåœ¨&#x2F;dataç›®å½•ä¸‹å¯åŠ¨MinioæœåŠ¡ã€‚å‚æ•°<code>-v /data/minio:/data</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;minioç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;dataç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>æ­¥éª¤3ï¼šè®¾ç½®Minioå¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always minio</p><p>-â€”â€“</p><p>\8. åœ¨Dockerä¸­å®‰è£…Elasticsearch 7.12.1</p><p>æ­¥éª¤1ï¼šæ‹‰å–Elasticsearch 7.12.1çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull elasticsearch:7.12.1</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºElasticsearchå®¹å™¨ï¼›åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºElasticsearchæ•°æ®å­˜å‚¨ç›®å½•å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;elasticsearch</p><p>-â€”â€“</p><p>docker run -p 9200:9200 -p 9300:9300 â€“name elasticsearch -v &#x2F;data&#x2F;elasticsearch:&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;data -e â€œdiscovery.type&#x3D;single-nodeâ€ -d elasticsearch:7.12.1</p><p>-â€”â€“</p><p>è¯´æ˜ï¼š</p><p>å‚æ•°<code>-p 9200:9200 -p 9300:9300</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„9200å’Œ9300ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„9200å’Œ9300ç«¯å£ã€‚</p><p>å‚æ•°<code>--name elasticsearch</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«elasticsearchï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å‚æ•°<code>-e &quot;discovery.type=single-node&quot;</code>è¡¨ç¤ºè®¾ç½®Elasticsearchä¸ºå•èŠ‚ç‚¹æ¨¡å¼ã€‚</p><p>å‚æ•°<code>-v /data/elasticsearch:/usr/share/elasticsearch/data</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;elasticsearchç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;dataç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>æ­¥éª¤4ï¼šè®¾ç½®Elasticsearchå¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always elasticsearch</p><p>-â€”â€“</p><p>\9. åœ¨Dockerä¸­å®‰è£…Kibana 7.12.1</p><p>æ­¥éª¤1ï¼šæ‹‰å–Kibana 7.12.1çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull kibana:7.12.1</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºKibanaå®¹å™¨</p><p>-â€”â€“</p><p>docker run -p 5601:5601 â€“name kibana -d kibana:7.12.1</p><p>-â€”â€“</p><p>è¯´æ˜ï¼šå‚æ•°<code>-p 5601:5601</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„5601ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„5601ç«¯å£ã€‚å‚æ•°<code>--name kibana</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«kibanaï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>æ­¥éª¤3ï¼šè®¾ç½®Kibanaå¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always kibana</p><p>-â€”â€“</p><p>10.åœ¨Dockerä¸­å®‰è£…nginx 1.12.2çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>æ­¥éª¤1. æ‹‰å–nginx:1.12.2çš„é•œåƒæ–‡ä»¶ï¼›åˆ›å»ºä¸€ä¸ªæ•°æ®å­˜å‚¨ç›®å½•ï¼Œæ¯”å¦‚&#x2F;data&#x2F;nginx</p><p>docker pull nginx:1.12.2</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;nginx&#x2F;conf</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;nginx&#x2F;logs</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;nginx&#x2F;html</p><p>-â€”â€“</p><p>æ­¥éª¤2. å¯åŠ¨ä¸€ä¸ªnginx 1.12.2çš„å®¹å™¨å¹¶å°†æ•°æ®å­˜å‚¨ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„&#x2F;dataç›®å½•ä¸­</p><p>docker run -d â€“name nginx -p 80:80 -v &#x2F;data&#x2F;nginx&#x2F;html:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html -v &#x2F;data&#x2F;nginx&#x2F;conf:&#x2F;etc&#x2F;nginx -v &#x2F;data&#x2F;nginx&#x2F;logs:&#x2F;var&#x2F;log&#x2F;nginx -d nginx:1.12.2</p><p>æ­¥éª¤3. è®¾ç½®åº”ç”¨å¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always nginx</p><p>-â€”â€“</p><p>ä»¥ä¸Šæ­¥éª¤å®Œæˆåï¼Œå°±å¯ä»¥å¯åŠ¨nginxå®¹å™¨å¹¶è®¿é—®ip:80äº†ã€‚</p><p>nginxæŒ‚è½½ç›®å½•è¿™é‡Œæœ‰åŒå­¦å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œå¹³æ—¶æˆ‘ä»¬æ‰“åŒ…çš„vueæ–‡ä»¶éƒ½ç”Ÿæˆåœ¨distä¸­ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æŒ‚è½½&#x2F;data&#x2F;nginx&#x2F;distç›®å½•å‘¢ï¼Ÿ</p><p>å› ä¸ºdata&#x2F;nginx&#x2F;dist ç›®å½•å’Œ &#x2F;data&#x2F;nginx&#x2F;html ç›®å½•çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œç”¨äºå­˜æ”¾NginxæœåŠ¡æä¾›çš„é™æ€æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥ä½ å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªç›®å½•æŒ‚è½½åˆ° Docker å®¹å™¨ä¸­ï¼Œè€Œæ— éœ€æŒ‚è½½ä¸¤ä¸ªç›®å½•åŒæ—¶ä½¿ç”¨ã€‚</p><p>åœ¨æ­¥éª¤1è¯­å¥4ä»…ä»…æŒ‚è½½äº† &#x2F;data&#x2F;nginx&#x2F;html ç›®å½•ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ Nginx é»˜è®¤é…ç½®ä¸­ï¼Œé™æ€æ–‡ä»¶çš„æ ¹ç›®å½•æ˜¯ &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;htmlï¼Œ</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŒ‚è½½ä¸»æœºä¸­çš„ &#x2F;data&#x2F;nginx&#x2F;html ç›®å½•åˆ°å®¹å™¨ä¸­çš„ &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html ç›®å½•ã€‚</p><p>å¦‚æœæ›´å–œæ¬¢ä½¿ç”¨ &#x2F;data&#x2F;nginx&#x2F;dist ç›®å½•ï¼Œåˆ™å¯ä»¥å°†ä¸Šé¢å‘½ä»¤ä¸­çš„ &#x2F;data&#x2F;nginx&#x2F;html ç›®å½•æ”¹ä¸º &#x2F;data&#x2F;nginx&#x2F;dist ç›®å½•ï¼Œ</p><p>å¹¶å°† Nginx é…ç½®æ–‡ä»¶ä¸­çš„ root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html æ”¹ä¸º root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;distã€‚</p><p> <strong>åç»­ä¼šå¯¼å…¥xcplusçš„systemåŒ…æ¨¡å—</strong>ï¼Œé‡Œé¢çš„é…ç½®è®°å¾—ä¿®æ”¹hikariçš„é…ç½®ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hikari:</span><br><span class="line">  jdbc-url: jdbc:mysql:<span class="comment">//xx.xx.xx.xx:3306/xc_system?serverTimezone=UTC&amp;userUnicode=true&amp;useSSL=false&amp;</span></span><br><span class="line">  username: root</span><br><span class="line">  password: xxxx</span><br><span class="line">  driver-class-name: com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“<strong>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</strong></p><p><strong>ä¸‹é¢æ˜¯minioå®‰è£…æ­¥éª¤</strong></p><p>è¿›å…¥linuxæœåŠ¡å™¨å¹¶åˆ›å»ºæ–‡ä»¶å¤¹(å¯ä»¥è‡ªå·±é€‰æ‹©ä¸€ä¸ªä½ç½®ï¼Œæˆ‘è¿™å°±ç›´æ¥åœ¨æ ¹ç›®å½•åˆ›å»ºäº†)</p><p>mkdir minio</p><p>è¿›å…¥åˆ›å»ºçš„æ–‡ä»¶å¤¹</p><p>cd &#x2F;minio</p><p>åœ¨çº¿ä¸‹è½½å®‰è£…åŒ…</p><p>wget <a href="https://dl.minio.io/server/minio/release/linux-amd64/minio">https://dl.minio.io/server/minio/release/linux-amd64/minio</a></p><p>åˆ›å»ºminioçš„logæ–‡ä»¶</p><p>touch minio.log</p><p>èµ‹äºˆminioæ–‡ä»¶å¤¹777æƒé™</p><p>chmod 777 minio</p><p>å¯åŠ¨minio</p><p>.&#x2F;minio server &#x2F;minio&#x2F;data</p><p>æ§åˆ¶å°æç¤ºå¯†ç è¿‡äºç®€å•;ä¸‹é¢è¿›å…¥é…ç½®æ–‡ä»¶è®¾ç½®ä½ çš„è´¦å·å¯†ç (ä¸¾ä¾‹è´¦å·ï¼šzxcMinio123 å¯†ç ï¼šzxcMinio123),å¯†ç å‰ä¸èƒ½æœ‰â€@â€ç¬¦å·ï¼Œå›¾ç‰‡æ˜¯ä¹‹å‰çš„è®°å½•ï¼Œâ€œ@â€åœ¨application.ymlä¸­å±äºç‰¹æ®Šå­—ç¬¦éœ€è¦+â€@â€œè¿›è¡Œè½¬ä¹‰æˆæ™®é€šâ€@â€ç¬¦å·ï¼Œä½†è½¬ä¹‰ä¹‹åæˆ‘åœ¨é¡¹ç›®ç”¨èµ·æ¥è¿˜æ˜¯æœ‰å°é—®é¢˜ï¼Œæ‰€ä»¥å°±ä¸æ¨èå¯†ç å‰æœ‰â€@â€ç¬¦å·å•¦ï¼</p><p>vim &#x2F;etc&#x2F;profile</p><p>æ·»åŠ ä»¥ä¸‹ä»£ç </p><p># set minio account</p><p>export MINIO_ROOT_USER&#x3D;zxcMinio123</p><p>export MINIO_ROOT_PASSWORD&#x3D;zxcMinio123</p><p>ä¿å­˜é€€å‡ºï¼›</p><p>esc+:wq!</p><p>é‡è½½é…ç½®æ–‡ä»¶</p><p>source &#x2F;etc&#x2F;profile</p><p>åå°å¯åŠ¨minio</p><p>nohup &#x2F;minio&#x2F;minio server &#x2F;minio&#x2F;data â€“console-address â€œ:61234â€ &gt; &#x2F;minio&#x2F;minio.log 2&gt;&amp;1 &amp;</p><p>è¯´æ˜:</p><p>è¿™é‡Œçš„61234ç«¯å£å¯ä»¥æ˜¯å…¶ä»–çš„ï¼Œä½ ä¸Šé¢è¿è¡Œå‘½ä»¤æ˜¯ä»€ä¹ˆç«¯å£ä¸‹é¢è®¿é—®å°±å†™ä»€ä¹ˆ(æƒ…å†µ1:æœ¬åœ°è™šæ‹Ÿæœºå®‰è£…è®°å¾—å¼€æ”¾å¯¹åº”çš„è¿™ä¸ªè¿è¡Œç«¯å£å’Œ9000ç«¯å£æˆ–è€…ä½ ç›´æ¥å…³é—­è™šæ‹Ÿæœºé˜²ç«å¢™ï¼›æƒ…å†µ2ï¼šäº‘æœåŠ¡å™¨å®‰è£…è®°å¾—å®‰å…¨ç»„å¼€æ”¾è¿™ä¸¤ä¸ªç«¯å£ã€è®°å¾—è®¾ç½®å¤æ‚çš„minioè´¦å·å¯†ç ï¼›æˆ–è€…é™åˆ¶è®¿é—®çš„ipä¸ºä½ è‡ªå·±ç”µè„‘çš„ip;åˆ«é—®ä¸ºä»€ä¹ˆï¼šå› ä¸ºæˆ‘ä¹‹å‰äº‘æœåŠ¡å™¨ä¸Šmysqlç”±äºè®¾ç½®ä¼ ç»Ÿrootè´¦æˆ·rootå¯†ç è¢«æ”»å‡»è¿‡ï¼Œä¸è¿‡æˆ‘æ˜¯è‡ªå·±ç©ï¼Œæ²¡æœ‰é‡è¦æ•°æ®æ”»å‡»äº†ä¹Ÿæ²¡äº‹ï¼Œè¿™é‡Œç»™å¤§å®¶æä¸ªé†’ã€‘)</p><p>æµè§ˆå™¨è®¿é—®è¾“å…¥:ä½ çš„ip:9000æˆ–è€…ip:61234</p><p>ï¼ˆå®‰è£…æ–¹æ³•æ‘˜è‡ª<a href="https://cyborg2077.github.io/">cyborg2077.github.io</a>ï¼‰</p><h3 id="gogs"><a href="#gogs" class="headerlink" title="gogs"></a>gogs</h3><p>æ•™ä¸‹gogså§ï¼Œç”¨ä¸€éå°±ä¼šäº†ã€‚ç«¯å£10880</p><p><strong>å¯¹äº†åˆ†äº«ä¸ªæˆ‘é‡åˆ°è¿‡è®¸å¤šæ¬¡çš„é—®é¢˜å°±æ˜¯dockerå¯åŠ¨åæœ‰äº›é•œåƒç«¯å£æ²¡æœ‰å¼€å¯ï¼Œè¿™æ—¶å€™å¤šè¿è¡Œå‡ ésh &#x2F;data&#x2F;soft&#x2F;restart.sh å†docker psæŸ¥çœ‹å°±å¥½äº†</strong></p><p>è¿™é‡Œgogsè´¦å·å’Œå¯†ç éƒ½æ˜¯gogsï¼Œå…ˆç¡®ä¿ä½ å®‰è£…äº†gitã€‚</p><p>1ã€é¦–å…ˆåˆ›å»ºä¸€ä¸ªç»„ç»‡</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031356709-96062484.png" alt="img"></p><p>è¯¥ç»„ç»‡é€šå¸¸ä»¥é¡¹ç›®åå‘½åï¼Œå¡«å†™ç»„ç»‡åç§°ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031407705-1740581808.png" alt="img"></p><p>åˆ›å»ºæˆåŠŸï¼Œè¿›å…¥ç®¡ç†é¢æ¿ä¿®æ”¹ç»„ç»‡ä¿¡æ¯</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031416999-1779136832.png" alt="img"></p><p>ç‚¹å‡»ç¼–è¾‘ï¼Œå¡«å†™ç»„ç»‡åç§°ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031434204-1106608976.png" alt="img"></p><p>ä¿®æ”¹æˆåŠŸï¼Œè¿›å…¥é¦–é¡µç‚¹å‡»ç»„ç»‡åç§°</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031443930-1814661086.png" alt="img"></p><p>è¿›å…¥ç»„ç»‡é¦–é¡µ</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031453613-1911752849.png" alt="img"></p><p>ä¸‹è¾¹å¼€å§‹åˆ›å»ºå›¢é˜Ÿ</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031506260-1289332347.png" alt="img"></p><p>å‡å¦‚åˆ›å»ºç ”å‘å›¢é˜Ÿï¼Œå¡«å†™å›¢é˜Ÿåç§°</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031512995-810134654.png" alt="img"></p><p>é€‰æ‹©æƒé™ç­‰çº§ï¼Œæ³¨æ„ï¼šè¿™é‡Œå³ä½¿é€‰æ‹©äº†æƒé™ç­‰çº§ä¹Ÿéœ€è¦åœ¨ä»“åº“ç®¡ç†ä¸­å»ç®¡ç†åä½œè€…çš„æƒé™ã€‚</p><p> å›¢é˜Ÿåˆ›å»ºæˆåŠŸ</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031517775-1980037870.png" alt="img"></p><p>å›¢é˜Ÿåˆ›å»ºæˆåŠŸä¸‹è¾¹å¼€å§‹åˆ›å»ºæˆå‘˜è´¦å· ã€‚</p><p> é¦–å…ˆåœ¨ç”¨æˆ·ç®¡ç†ä¸­æ·»åŠ è´¦å·åˆ†é…ç»™æˆå‘˜ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031532276-1049348949.png" alt="img"></p><p>ç„¶ååœ¨ä¸‹è¾¹çš„ç•Œé¢ ä¸­å‘å›¢é˜Ÿæ·»åŠ æˆå‘˜</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031539281-1294426153.png" alt="img"></p><p> å›¢é˜Ÿå’Œç»„ç»‡åˆ›å»ºå®Œæˆï¼Œä¸‹è¾¹åˆ›å»ºä»“åº“ï¼Œè¿›å…¥ç»„ç»‡ï¼Œåˆ›å»ºä»“åº“ã€‚ </p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031556258-1435248692.png" alt="img"></p><p>å¡«å†™ä»“åº“ä¿¡æ¯</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031602746-1829272266.png" alt="img"></p><p>åˆ›å»ºæˆåŠŸï¼Œä»“åº“åœ°å€ï¼š<a href="http://192.168.101.65:10880/xuecheng-plus-group1/xuecheng-plus-group1.git%EF%BC%8C%E5%A6%82%E4%B8%8B">http://192.168.101.65:10880/xuecheng-plus-group1/xuecheng-plus-group1.gitï¼Œå¦‚ä¸‹</a></p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031616196-390511391.png" alt="img"></p><p>ä¸‹è¾¹é…ç½®ä½¿ç”¨ä»“åº“çš„äººå‘˜</p><p>ç‚¹å‡»â€œä»“åº“è®¾ç½®â€ï¼Œ </p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031631181-1243329335.png" alt="img"></p><p>æ·»åŠ åä½œè€…ï¼Œå°†å›¢é˜Ÿæˆå‘˜çš„è´¦å·æ·»åŠ ä¸ºåä½œè€…ã€‚</p><p>æ·»åŠ å®Œæˆæ³¨æ„åˆ†é…æƒé™ï¼Œå¦‚ä¸‹å›¾ï¼Œé€šå¸¸æµ‹è¯•äººå‘˜ä¸ºè¯»å–æƒé™ï¼Œå¼€å‘äººå‘˜ä¸ºè¯»å†™æƒé™ã€‚</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240123031642973-1547017187.png" alt="img"></p><p>å›¢é˜ŸLeaderéœ€è¦å°†åˆå§‹ä»£ç ä¸Šä¼ è‡³Gitä»“åº“ï¼Œå›¢é˜Ÿæˆå‘˜é€šè¿‡Ideaå…‹éš†ä¸€ä»½é¡¹ç›®ä»£ç ï¼Œé€šè¿‡æ­¤ä»“åº“è¿›è¡Œåä½œå¼€å‘ã€‚</p><p> ç„¶åå›åˆ°IDEAå°†gitè¿œç¨‹åœ°å€å¤åˆ¶è¿›å»å°±è¡Œï¼Œå®ƒéœ€è¦è¾“å…¥å‡­è¯ï¼Œå°±è¾“åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·æˆ–gogsç”¨æˆ·</p><h2 id="è¯¾ç¨‹æŸ¥è¯¢æ¥å£"><a href="#è¯¾ç¨‹æŸ¥è¯¢æ¥å£" class="headerlink" title="è¯¾ç¨‹æŸ¥è¯¢æ¥å£"></a>è¯¾ç¨‹æŸ¥è¯¢æ¥å£</h2><p>å…ˆäº†è§£é¡¹ç›®æ¯ä¸ªæ¨¡å—çš„å†…å®¹ï¼Œæ˜¯å¹²å˜›çš„ï¼Œæ¯”å¦‚contentçš„å°±æ˜¯ä¸»è¦å†…å®¹ï¼Œcontent-modelå°±æ˜¯å†…å®¹çš„æ¨¡å‹ï¼Œbaseå°±æ˜¯è¿™ä¸ªé¡¹ç›®çš„åŸºç¡€ç±»ã€‚å¯¹äºè¯¾è¡¨æŸ¥è¯¢æ¥å£å°±å†™åœ¨contentæ¨¡å—é‡Œï¼Œå…ˆå®šä¹‰ä¸€ä¸ªspringbootçš„å¯åŠ¨ç±»å’Œcontrollerç±»ï¼Œä¸ºäº†æ–¹ä¾¿é¡¹ç›®ä»¥åçš„å¼€å‘ï¼Œåœ¨baseé‡ŒmodelåŒ…é‡Œåˆ›å»ºPageParamså’ŒPageResultç±»åˆ†åˆ«ç”¨æ¥å®šä¹‰é¡µé¢æŸ¥è¯¢çš„å‚æ•°ç±»å’Œé¡µé¢ç»“æœã€‚</p><h3 id="swaggeræ¥å£æ–‡æ¡£"><a href="#swaggeræ¥å£æ–‡æ¡£" class="headerlink" title="swaggeræ¥å£æ–‡æ¡£"></a>swaggeræ¥å£æ–‡æ¡£</h3><p>ä¸ºäº†æ–¹ä¾¿å‰åç«¯åˆ†ç¦»å¼€å‘ä¹‹é—´çš„æ•°æ®æ¥æ”¶å’Œä¼ è¾“ï¼ˆè™½ç„¶å‰åç«¯åˆ†ç¦»äººä¸åˆ†ç¦»ï¼‰ï¼Œæ–‡æ¡£å°±å¾ˆé‡è¦ã€‚swaggerå°±ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£æ¥å£ã€‚é¦–å…ˆå¯¼å…¥swaggerçš„mavenåæ ‡ï¼šï¼ˆè¿™ä¸ªé¡¹ç›®é‡Œå°±æ˜¯xuecheng-content-apié‡Œçš„pomäº†ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spring Boot é›†æˆ swagger --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.spring4all<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨è¯¥æ¨¡å—çš„å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š@EnableSwagger2Docæ³¨è§£</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æˆåœ¨çº¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonçˆ¬è™«è·å–æ ¡å›­è¯¾è¡¨(å¼ºåˆ¶ç³»ç»Ÿä¸¾ä¾‹)</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/Python%E7%88%AC%E8%99%AB%E8%8E%B7%E5%8F%96%E6%A0%A1%E5%9B%AD%E8%AF%BE%E8%A1%A8-%E5%BC%BA%E5%88%B6%E7%B3%BB%E7%BB%9F%E4%B8%BE%E4%BE%8B/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/Python%E7%88%AC%E8%99%AB%E8%8E%B7%E5%8F%96%E6%A0%A1%E5%9B%AD%E8%AF%BE%E8%A1%A8-%E5%BC%BA%E5%88%B6%E7%B3%BB%E7%BB%9F%E4%B8%BE%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<p>Http:è¶…æ–‡æœ¬ä¼ è¾“åè®®</p><p>Https:å®‰å…¨çš„http</p><p>é¦–å…ˆå¼•å…¥requeståº“:pip install requests </p><p>å…ˆF12æ‰“å¼€é¡µé¢æ£€æŸ¥ï¼Œåœ¨network(ç½‘ç»œ)é‡Œé¢ï¼Œç„¶ååˆ·æ–°é¡µé¢ï¼Œä¼šå‘å…ˆæœ‰ä¸ªè¯·æ±‚æ–‡æ¡£ï¼Œç‚¹å‡»å¹¶è§‚å¯Ÿå®ƒï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231211134814140-1300923730.png" alt="img"></p><p>åœ¨å¸¸è§„é‡Œé¢å¯ä»¥çœ‹åˆ°è¯·æ±‚åœ°å€ä¸º<a href="https://www.paisi.edu.cn:8181/jsxsd/?tdsourcetag=s_pcqq_aiomsg,%E5%B0%86%E5%AE%83%E5%A4%8D%E5%88%B6%E5%88%B0%E6%96%B0%E9%A1%B5%E9%9D%A2%E7%A1%AE%E5%AE%9Ehttps://www.paisi.edu.cn:8181/jsxsd%EF%BC%8C%E6%88%91%E4%BB%AC%E9%9C%80%E8%A6%81%E7%9A%84url%E5%B0%B1%E6%98%AF%E8%BF%99%E4%B8%AA%E5%8E%BB%E6%8E%89%EF%BC%9F%E5%90%8E%E9%9D%A2%E7%9A%84%EF%BC%8C%E8%BF%98%E8%A7%82%E5%AF%9F%E5%88%B0%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E4%B8%BAGET%E3%80%82">https://www.paisi.edu.cn:8181/jsxsd/?tdsourcetag=s_pcqq_aiomsg,å°†å®ƒå¤åˆ¶åˆ°æ–°é¡µé¢ç¡®å®https://www.paisi.edu.cn:8181/jsxsdï¼Œæˆ‘ä»¬éœ€è¦çš„urlå°±æ˜¯è¿™ä¸ªå»æ‰ï¼Ÿåé¢çš„ï¼Œè¿˜è§‚å¯Ÿåˆ°è¯·æ±‚æ–¹æ³•ä¸ºGETã€‚</a></p><p>å†è§‚å¯Ÿè¯·æ±‚æ ‡å¤´ï¼ˆheaderï¼‰,å‰é¢å¸¦ : çš„å’ŒSecå¼€å¤´çš„å¯ä»¥å¿½ç•¥è¿™é‡Œç”¨ä¸åˆ°ï¼Œå°†ä»Acceptåˆ°Cache-Controlçš„å’ŒUpgrade-Insecure-Requestsï¼ŒUser-Agentçš„å†…å®¹å…¨éƒ¨å¤åˆ¶ï¼Œç„¶ååœ¨pythoné‡Œæ–°å»ºä¸€ä¸ªå­—å…¸ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">header = &#123;</span><br><span class="line">    <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*,&quot;</span></span><br><span class="line">        <span class="string">&quot;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip,deflate,br&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Cache-Control&quot;</span>: <span class="string">&quot;max-age=0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Content-Length&quot;</span>: <span class="string">&quot;106&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Upgrade-Insecure-Requests&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå¾—åˆ°urlå’Œheaderæˆ‘ä»¬å°±å¯ä»¥å»è·å–cookiesï¼Œç›´æ¥å†™ä¸€ä¸ªè·å–cookiesçš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">ses=requests.session()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_login_cookies</span>():</span><br><span class="line">    url= <span class="string">&#x27;https://www.paisi.edu.cn:8181/jsxsd/&#x27;</span></span><br><span class="line">    ses.get(url=url,headers=headers)</span><br><span class="line">    cookies =ses.cookies.get_dict()</span><br><span class="line">    cookies = <span class="built_in">str</span>(cookies).replace(<span class="string">&quot;&#123;&quot;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&quot;&#x27;&quot;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&quot;:&quot;</span>, <span class="string">&#x27;=&#x27;</span>).replace(<span class="string">&#x27;&#125;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&quot;,&quot;</span>, <span class="string">&quot;;&quot;</span>)</span><br><span class="line">    cookies = cookies.replace(<span class="string">&quot; &quot;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> cookies</span><br></pre></td></tr></table></figure><p> ç„¶åå°±å¯ä»¥å»æ¨¡æ‹Ÿç™»å½•è´¦å·äº†</p><p>ä½†æ˜¯ç™»å½•ä½ å¾—å…ˆæœ‰ä¸€ä¸ªè´¦å·æ¥è·å–ç™»å½•çš„ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘å°±éšä¾¿æ‹¿ä¸€ä¸ªè´¦å·ä¸¾ä¾‹äº†ï¼Œå…ˆåœ¨ç½‘é¡µé‡Œé¢ç™»å½•ï¼Œç„¶ååœ¨ç½‘ç»œæ£€æŸ¥æ‰¾åˆ°ç™»å½•çš„æ–‡æ¡£ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231211170339152-804786044.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231211170347490-2027632748.png" alt="img"></p><p>è¿™é‡Œéœ€è¦æŸ¥çœ‹è´Ÿè½½çš„å†…å®¹ï¼Œå°†è´Ÿè½½çš„æ‰€æœ‰å†…å®¹å¤åˆ¶å¹¶å®šä¹‰ä¸€ä¸ªå­—å…¸(æ³¨æ„ï¼šè¿™é‡Œçš„userPasswordæˆ‘éšè—äº†ï¼Œç½‘é¡µä¹Ÿéšè—äº†ï¼Œç¼–å†™çš„æ—¶å€™ä¹Ÿè¦å†™ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;userAccount&#x27;</span>: <span class="string">&quot;2022126002&quot;</span>, <span class="comment">#å­¦å·</span></span><br><span class="line">    <span class="string">&#x27;userPassword&#x27;</span>: passoword, <span class="comment">#å¯†ç </span></span><br><span class="line">    <span class="string">&#x27;encoded&#x27;</span>: encoded, <span class="comment">#ç®—æ³•åŠ å¯†å†…å®¹</span></span><br><span class="line">    <span class="string">&#x27;pwdstr1&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;pwdstr2&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸åŒçš„ç½‘ç«™éœ€æ±‚éƒ½ä¸ä¸€æ ·</p><p>å½“æˆ‘ä»¬å†æ¬¡æ£€æŸ¥è¯·æ±‚æ ‡å¤´çš„æ—¶å€™å‘ç°å¤§å¤šæ•°è·Ÿåˆšåˆšç™»å½•ç½‘é¡µçš„ä¸€æ ·ï¼Œæ‰€ä»¥ç›´æ¥ç”¨åˆšåˆšçš„è¯·æ±‚å¤´å†åŠ ä¸¤ä¸ªå‚æ•°Orignå’ŒRefererå°±è¡Œ,åœ¨å®šä¹‰ä¸€ä¸ªæ–¹æ³•ä¸ºæ¨¡æ‹Ÿç™»å½•è´¦å·ï¼Œè¯¥æ–¹æ³•éœ€è¦æºå¸¦åˆšåˆšè·å–çš„cookieå‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def login(cookie):</span><br><span class="line">    url = &#x27;https://www.paisi.edu.cn:8181/jsxsd/xk/LoginToXk&#x27;</span><br><span class="line"></span><br><span class="line">    header[&quot;Origin&quot;] = &quot;https://www.paisi.edu.cn:8181&quot;</span><br><span class="line">    header[&quot;Referer&quot;]= &quot;https://www.paisi.edu.cn:8181/jsxs&quot;</span><br><span class="line">    header[&quot;Cookie&quot;]= cookie</span><br><span class="line"></span><br><span class="line">    msg = ses.post(url, headers=header, data=data, timeout=1000).text  # è¿™ä¸ªè·³è½¬</span><br><span class="line">    # print(&quot;cookieséªŒè¯:&quot;+str(msg))</span><br><span class="line">    return str(msg)</span><br></pre></td></tr></table></figure><p> ç°åœ¨æˆ‘ä»¬çš„cookieå°±ä¼šè¢«è®¤ä¸ºæ˜¯å·²ç»ç™»é™†äº†çš„äº†ã€‚</p><p>ç„¶åå°±æ˜¯è·å–è¯¾è¡¨äº†ï¼Œåœ¨ç½‘é¡µå…ˆæŸ¥è¯¢ä¸‹è¯¾è¡¨ï¼Œç„¶ååƒåˆšåˆšé‚£æ ·æ£€æŸ¥é¡µé¢çš„ç½‘ç»œä¿¡æ¯ï¼Œç‚¹å‡»æ–°å¢çš„æŸ¥è¯¢è¯¾è¡¨æ–‡æ¡£ï¼š<img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231211171637651-1111201247.png" alt="img"></p><p>è·Ÿåˆšåˆšçš„æ–¹æ³•åˆ†æå‚æ•°ä¿¡æ¯å°±è¡Œï¼š(cookiesä¸ºç¬¬ä¸€æ­¥ç™»å½•ç½‘é¡µè·å–çš„cookiesï¼Œæˆ‘åªæ˜¯å°†è¿”å›çš„æ•°æ®å®šä¹‰ä¸‹æ¥äº†)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_class</span>():</span><br><span class="line">    url=<span class="string">&quot;https://www.paisi.edu.cn:8181/jsxsd/xskb/xskb_list.do&quot;</span></span><br><span class="line">    </span><br><span class="line">    header[<span class="string">&quot;Referer&quot;</span>] = <span class="string">&quot;https://www.paisi.edu.cn:8181/jsxsd/framework/xsMain.jsp&quot;</span></span><br><span class="line">    header[<span class="string">&quot;Cookie&quot;</span>] = cookies</span><br><span class="line">    msg = ses.get(url=url,headers=header)</span><br><span class="line">    <span class="comment"># print(str(msg))</span></span><br><span class="line">    <span class="comment"># print(msg.text)</span></span><br><span class="line">    <span class="keyword">return</span> msg.text</span><br></pre></td></tr></table></figure><p> è¿™æ ·å°±å¯ä»¥è¿”å›è¯¾è¡¨çš„htmlæºç äº†ã€‚</p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦çš„æ˜¯è¯¾ç¨‹çš„å„é¡¹æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨BeauitifulSoupè¿™ä¸ªåº“ã€‚ä»¥æˆ‘è¿™ä¸ªä¸¾ä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(text,<span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">all_classes = soup.findAll(<span class="string">&quot;div&quot;</span>,attrs=&#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;kbcontent&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> all_classes:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ„æ€å°±æ˜¯å…ˆå®šä¹‰ä¸€ä¸ªBeautifulSoupçš„å‚æ•°ï¼Œè®©ä»–è§£æç±»å‹ä¸ºhtmlçš„ï¼Œç¬¬äºŒæ­¥åˆ™æ˜¯è·å–htmlä¸­æ ‡ç­¾ä¸ºdivçš„ä¸”classåä¸ºkbcontentçš„å†…å®¹ã€‚è¿è¡Œå‡ºæ¥å°±æ˜¯è¿™æ ·ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202312/3018339-20231211172612831-9568141.png" alt="img"></p><p>è¿˜æœ‰ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨etreeåº“ä¹Ÿå¯ä»¥è·å–æ•°æ®ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Axioså‰åç«¯äº¤äº’å®ä¾‹</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/Axios%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92%E5%AE%9E%E4%BE%8B/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/Axios%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92%E5%AE%9E%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<p><strong>ä»€ä¹ˆæ˜¯å‰åç«¯è”è°ƒï¼Ÿ</strong></p><p>åœ¨æˆ‘ä»¬å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå‘é€è¯·æ±‚çš„ajaxæ•°æ®éƒ½ä¸æ˜¯åç«¯è¿”å›çš„çœŸæ•°æ®ï¼Œè€Œæ˜¯æˆ‘ä»¬è‡ªå·±é€šè¿‡æ¥å£mockæ¨¡æ‹Ÿçš„å‡æ•°æ®ï¼Œå½“å‰ç«¯çš„ä»£ç ç¼–å†™å®Œæˆåï¼Œåç«¯çš„æ¥å£ä¹Ÿå†™å¥½åï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠmockæ•°æ®æ¢ç‚¹ï¼Œå°è¯•ä½¿ç”¨åç«¯æä¾›çš„æ•°æ®ï¼Œè¿›è¡Œä¸€ä¸ªå‰åç«¯çš„è°ƒè¯•ï¼Œæˆ‘ä»¬ä¼šæŠŠè¿™ä¸ªè¿‡ç¨‹å«åšå‰åç«¯æ¥å£è”è°ƒã€‚</p><p> <strong>çœŸæ­£çš„é›¶åŸºç¡€éƒ½æ˜¯ä»å®‰è£…å¼€å§‹çš„AwA</strong></p><p>ç¼–è¯‘å™¨é€‰æ‹©IDEAï¼šé™„èµ æ¿€æ´»ç ï¼š<a href="https://aijihuo.cn/post/45.html">IntelliJ IDEA2023.2 ç ´è§£ æ°¸ä¹…æ¿€æ´» æœ€æ–°ç‰ˆIDEAæ¿€æ´» äº²æµ‹å¯ç”¨ï¼ - çˆ±æ¿€æ´»ç½‘ (aijihuo.cn)</a></p><p>Node.js: <a href="https://nodejs.cn/download/">ä¸‹è½½ | Node.js ä¸­æ–‡ç½‘ (nodejs.cn)</a>é€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼Œå®‰è£…ç¨‹åºé™¤äº†å®‰è£…åœ°å€ä»¥å¤–å…¶å®ƒéƒ½æ˜¯é»˜è®¤å°±è¡Œ</p><p>nginxï¼š<a href="http://nginx.org/en/download.html">nginx: download</a></p><p>MySQLï¼š<a href="https://zhuanlan.zhihu.com/p/338149747">è¶…è¯¦ç»†MySQLå®‰è£…åŠåŸºæœ¬ä½¿ç”¨æ•™ç¨‹ - çŸ¥ä¹ (zhihu.com)</a></p><p>å…ˆæ¥ä»‹ç»ä¸‹å‰åç«¯æ˜¯æ€ä¹ˆè¿æ¥äº¤äº’çš„ï¼š</p><p>ä¸€èˆ¬æ˜¯å‰ç«¯è®¾è®¡ç•Œé¢ï¼Œå‘åç«¯å‘é€ä¸€äº›è¯·æ±‚ï¼Œè€Œå‘é€è¯·æ±‚çš„æŠ€æœ¯é€‰ç”¨çš„æ˜¯Ajaxï¼Œä½†ç°åœ¨æµè¡Œçš„ä¸€èˆ¬éƒ½æ˜¯å…ˆè½¬æ¢æˆJsonæ ¼å¼æ¥äº¤äº’æ•°æ®çš„ï¼Œ</p><h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><p><strong>å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯Ajax</strong></p><p>å¼‚æ­¥ JavaScript å’Œ XMLï¼Œæˆ– <a href="https://www.semanticscholar.org/paper/Ajax%3A-A-New-Approach-to-Web-Applications-Garrett/c440ae765ff19ddd3deda24a92ac39cef9570f1e?p2df">Ajax</a> æœ¬èº«ä¸æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§å°†ä¸€äº›ç°æœ‰æŠ€æœ¯ç»“åˆèµ·æ¥ä½¿ç”¨çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML">HTML</a> æˆ– <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/XHTML">XHTML</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">CSS</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">JavaScript</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model">DOM</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/XML">XML</a>ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/XSLT">XSLT</a>ã€ä»¥åŠæœ€é‡è¦çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> å¯¹è±¡ã€‚å½“ä½¿ç”¨ç»“åˆäº†è¿™äº›æŠ€æœ¯çš„ Ajax æ¨¡å‹ä»¥åï¼Œç½‘é¡µåº”ç”¨èƒ½å¤Ÿå¿«é€Ÿåœ°å°†å¢é‡æ›´æ–°å‘ˆç°åœ¨ç”¨æˆ·ç•Œé¢ä¸Šï¼Œè€Œä¸éœ€è¦é‡è½½ï¼ˆåˆ·æ–°ï¼‰æ•´ä¸ªé¡µé¢ã€‚è¿™ä½¿å¾—ç¨‹åºèƒ½å¤Ÿæ›´å¿«åœ°å›åº”ç”¨æˆ·çš„æ“ä½œã€‚Ajax æœ€å¸å¼•äººçš„ç‰¹æ€§æ˜¯å®ƒçš„â€œå¼‚æ­¥â€æ€§è´¨ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä¸æœåŠ¡å™¨é€šä¿¡ã€äº¤æ¢æ•°æ®å¹¶æ›´æ–°é¡µé¢ï¼Œè€Œæ— éœ€åˆ·æ–°é¡µé¢ã€‚</p><p>å°½ç®¡ Ajax ä¸­çš„ X ä»£è¡¨ XMLï¼Œä½†æ˜¯ <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/JSON">JSON</a> æ‰æ˜¯é¦–é€‰ï¼Œå› ä¸ºå®ƒæ›´åŠ è½»é‡ï¼Œè€Œä¸”æ˜¯ç”¨ JavaScript ç¼–å†™çš„ã€‚åœ¨ Ajax æ¨¡å‹ä¸­ï¼ŒJSON å’Œ XML éƒ½è¢«ç”¨æ¥åŒ…è£…ä¿¡æ¯</p><p><strong>HTTPè¯·æ±‚æŠ¥æ–‡æ ¼å¼ä¸å‚æ•°</strong></p><p>è¡Œ:     POST &#x2F;s?ie&#x3D;utf-8 HTTP&#x2F;1.1</p><p>å¤´:     Host: hepingan.top</p><p>â€ƒâ€ƒâ€ƒâ€ƒCookie: a&#x3D;name&#x3D;hepingan</p><p>â€ƒâ€ƒâ€ƒâ€ƒContent-type: application&#x2F;x-www-form-urlencoded</p><p>â€ƒâ€ƒâ€ƒâ€ƒUser-Agent: chrome 83</p><p>ç©ºè¡Œ</p><p>ä½“â€ƒâ€ƒâ€ƒusername&#x3D;admin&amp;password&#x3D;admin</p><p>ä¸Šé¢çš„å°±æ˜¯ä¸€ä¸ªhttpè¯·æ±‚çš„ä¾‹å­ï¼Œä¸‹é¢å°±æ˜¯å“åº”æŠ¥æ–‡çš„ä¾‹å­</p><p>è¡Œâ€ƒâ€ƒHTTP&#x2F;1.1 200 OK</p><p>å¤´â€ƒâ€ƒContent-Type: text&#x2F;html;charset&#x3D;utf-8</p><p>â€ƒâ€ƒâ€ƒContent-length: 2048</p><p>â€ƒâ€ƒâ€ƒContent-encoding: gzip</p><p>ç©ºè¡Œ</p><p>ä½“â€ƒâ€ƒ<html></p><p>â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€¦.</p><p>â€ƒâ€ƒâ€ƒ</html></p><p>é¦–å…ˆå…ˆæåç«¯ï¼Œæˆ‘ç”¨çš„æ˜¯java çš„springbootæ¡†æ¶ï¼Œåˆ›å»ºæ—¶é€‰æ‹©å¦‚ä¸‹é…ç½®ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231018223004705-1773165267.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231018223011635-2031942681.png" alt="img"></p><p>springbootçš„ç‰ˆæœ¬å°½é‡é€‰ä½ç‚¹ï¼Œä¸ç„¶ä¸å…¼å®¹å‡ºé—®é¢˜ã€‚jdkç‰ˆæœ¬æˆ‘é€‰çš„æ˜¯11.</p><p>æ‰“å¼€pom.xmlå¹¶åœ¨denpendencesé‡Œå¼•å…¥mybatisçš„åæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°†applicationçš„æ–‡ä»¶æ ¼å¼ç»™æˆymlï¼Œå¹¶è¾“å…¥ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">1234</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/hh?useUnicode=true&amp;characterEncoding=utf-8&amp;</span></span><br></pre></td></tr></table></figure><p> <strong>password å’Œurlçš„æ•°æ®åº“åè®°å¾—æ¢æˆè‡ªå·±çš„ï¼</strong>æˆ‘è¿™é‡Œå†™çš„åç«¯ç«¯å£ä¸º9090;</p><p>å¼•å…¥æ•°æ®åº“ï¼š</p><p>å³è¾¹é€‰æ‹©æ•°æ®åº“å¹¶æ·»åŠ æ•°æ®æºï¼Œé€‰æ‹©mysqlã€‚</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231018224312725-360146685.png" alt="img"></p><p>usernameè¾“å…¥rootï¼Œpasswordå°±æ˜¯ä½ çš„å¯†ç ã€‚</p><p>ç„¶ååˆ›å»ºä¸€ä¸ªè¡¨ï¼Œmysqlåˆ›å»ºè¯­å¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> teacher</span><br><span class="line">(</span><br><span class="line">    id <span class="type">int</span> unsigned <span class="keyword">primary</span> key auto_increment comment <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">20</span>) ,</span><br><span class="line">    age  <span class="type">int</span>         </span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨ideaè‡ªå¸¦çš„æ•°æ®åº“è¡¨æ ¼ç¼–è¾‘é‡Œæ·»åŠ å‡ ä¸ªæ•°æ®æ–¹ä¾¿æµ‹è¯•ã€‚</p><p>ç„¶ååˆ›å»ºä¸‹é¢çš„åŒ…ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231018225814630-1272756620.png" alt="img"></p><p>å…ˆç¼–è¾‘TeacherControllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/teacher&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TeacherController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TeacherMapper teacherMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Teacher&gt; <span class="title function_">ListTeacher</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;Teacher&gt; list = teacherMapper.ListTeacher();</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Teacher <span class="title function_">getTeacher</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> teacherMapper.getTeacher(id);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å¤§æ¦‚æ„æ€å°±æ˜¯ä¸€ä¸ª&#x2F;teacherçš„æ¥å£é‡Œæœ‰getå½¢å¼æŸ¥è¯¢teacherè¡¨çš„è¯·æ±‚å’Œæ ¹æ®idæŸ¥è¯¢çš„æ¥å£ã€‚</p><p>ç„¶åå†åœ¨TeacherMapperé‡Œç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TeacherMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from teacher&quot;)</span></span><br><span class="line">    List&lt;Teacher&gt; <span class="title function_">ListTeacher</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select *from teacher where id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    Teacher <span class="title function_">getTeacher</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åå¯åŠ¨é¡¹ç›®ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231018231935751-240831230.png" alt="img"></p><p>ç„¶ååœ¨æµè§ˆå™¨è¾“å…¥localhost:9090&#x2F;teacher&#x2F;å’Œlocalhost:9090&#x2F;teacher&#x2F;1ï¼Œå¦‚æœæœ‰ç»“æœå°±è¯´æ˜æˆåŠŸäº†ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯å‰ç«¯ï¼š</p><p>ç›´æ¥éšä¾¿åˆ›å»ºä¸ªhtmlæ–‡ä»¶ï¼Œé‡Œé¢å°±ç¼–å†™ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dataContainer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> dataContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;dataContainer&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span>(xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span>(xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// è¯·æ±‚æˆåŠŸï¼Œå¤„ç†è¿”å›çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">      dataContainer.<span class="property">innerHTML</span> = xhr.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// è¯·æ±‚å¤±è´¥ï¼Œå¤„ç†é”™è¯¯</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">error</span>(xhr.<span class="property">statusText</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://localhost:9090/teacher/&#x27;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">xhr.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è®°å¾—å¼•å…¥axiosçš„ä¾èµ–ï¼Œä½¿ç”¨nodeçš„æŒ‡ä»¤ï¼ˆnodeå®‰è£…æ•™ç¨‹ï¼š<a href="https://blog.csdn.net/qq_35156196/article/details/127579116">ã€ç²¾é€‰ã€‘Node.jså’ŒVueçš„å®‰è£…ä¸é…ç½®ï¼ˆè¶…è¯¦ç»†æ­¥éª¤ï¼‰_nodejså®‰è£…vue-CSDNåšå®¢</a>æˆ–è€…æˆ‘åé¢çš„æ–‡ç« ï¼š<a href="https://www.cnblogs.com/hepingan/p/17776905.html">é€šè¿‡node.jséƒ¨ç½²vueé¡¹ç›® - ä½•å¹³å®‰ - åšå®¢å›­ (cnblogs.com)</a>ï¼‰åœ¨å½“å‰é¡¹ç›®ä¸‹è¾“å…¥npm install axiosæˆ–è€…ç›´æ¥åœ¨htmlä¸­è¾“å…¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå†è¿è¡Œæµè§ˆå™¨æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°æˆæœäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è¯´è¯´nginxåå‘ä»£ç†å’ŒKongç½‘å…³</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E8%AF%B4%E8%AF%B4nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8CKong%E7%BD%91%E5%85%B3/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E8%AF%B4%E8%AF%B4nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8CKong%E7%BD%91%E5%85%B3/</url>
      
        <content type="html"><![CDATA[<p>æ–‡ç« æ¯”è¾ƒç¡¬æ ¸å“ˆï¼Œå…ˆæ¥è¯´è¯´nginx</p><h1 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h1><p>Nginx (engine x) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†webæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†IMAP&#x2F;POP3&#x2F;SMTPæœåŠ¡ã€‚é‚£ä»€ä¹ˆåˆæ˜¯åå‘ä»£ç†å‘¢ï¼Ÿå…ˆçœ‹è¿™å¼ å›¾ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231004025148141-1849812529.png" alt="img"></p><p>æ­£å‘ä»£ç†ï¼š æˆ‘ä»¬å¹³æ—¶éœ€è¦è®¿é—®å›½å¤–çš„æµè§ˆå™¨æ˜¯ä¸æ˜¯å¾ˆæ…¢ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦çœ‹æ¨ç‰¹ï¼Œçœ‹GitHubç­‰ç­‰ã€‚æˆ‘ä»¬ç›´æ¥ç”¨å›½å†…çš„æœåŠ¡å™¨æ— æ³•è®¿é—®å›½å¤–çš„æœåŠ¡å™¨ï¼Œæˆ–è€…æ˜¯è®¿é—®å¾ˆæ…¢ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªæœåŠ¡å™¨æ¥å¸®åŠ©æˆ‘ä»¬å»è®¿é—®ã€‚é‚£è¿™ç§å°±æ˜¯æ­£å‘ä»£ç†ã€‚ï¼ˆæµè§ˆå™¨ä¸­é…ç½®ä»£ç†æœåŠ¡å™¨ï¼‰</p><p>åå‘ä»£ç†å°±æ˜¯å’Œæ­£å‘ä»£ç†ç›¸åçš„ï¼Œngnixä»£ç†äº†æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä»£ç†äº†è®¿é—®è€…çš„æµè§ˆå™¨ã€‚é‚£ä¹ˆå®ƒæœ‰ä»€ä¹ˆä¼˜ç‚¹å‘¢ï¼Ÿ</p><p>å…¶ç‰¹ç‚¹æ˜¯å æœ‰å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Šnginxçš„å¹¶å‘èƒ½åŠ›åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨nginxç½‘ç«™ç”¨æˆ·æœ‰ï¼šç™¾åº¦ã€äº¬ä¸œã€æ–°æµªã€ç½‘æ˜“ã€è…¾è®¯ã€æ·˜å®ç­‰ï¼›Nginx æ˜¯é«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†çš„webæœåŠ¡å™¨ï¼Œå¤„ç†é«˜å¹¶å‘èƒ½åŠ›æ˜¯ååˆ†å¼ºå¤§çš„ï¼Œèƒ½ç»å—é«˜è´Ÿ è½½çš„è€ƒéªŒ,æœ‰æŠ¥å‘Šè¡¨æ˜èƒ½æ”¯æŒé«˜è¾¾ 50,000 ä¸ªå¹¶å‘è¿æ¥æ•°ï¼›Nginxæ”¯æŒçƒ­éƒ¨ç½²ï¼Œå¯åŠ¨ç®€å•ï¼Œå¯ä»¥åšåˆ°7*24ä¸é—´æ–­è¿è¡Œã€‚å‡ ä¸ªæœˆéƒ½ä¸éœ€è¦é‡æ–°å¯åŠ¨ã€‚</p><p><strong>nginxçš„è´Ÿè½½å‡è¡¡ï¼š</strong></p><p>Nginxç»™å‡ºæ¥ä¸‰ç§å…³äºè´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼š</p><p>è½®è¯¢æ³•ï¼ˆé»˜è®¤æ–¹æ³•ï¼‰ï¼š<br>æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚<br>é€‚åˆæœåŠ¡å™¨é…ç½®ç›¸å½“ï¼Œæ— çŠ¶æ€ä¸”çŸ­å¹³å¿«çš„æœåŠ¡ä½¿ç”¨ã€‚ä¹Ÿé€‚ç”¨äºå›¾ç‰‡æœåŠ¡å™¨é›†ç¾¤å’Œçº¯é™æ€é¡µé¢æœåŠ¡å™¨é›†ç¾¤ã€‚</p><p>weightæƒé‡æ¨¡å¼ï¼ˆåŠ æƒè½®è¯¢ï¼‰ï¼š<br>æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„<br>æƒ…å†µã€‚<br>è¿™ç§æ–¹å¼æ¯”è¾ƒçµæ´»ï¼Œå½“åç«¯æœåŠ¡å™¨æ€§èƒ½å­˜åœ¨å·®å¼‚çš„æ—¶å€™ï¼Œé€šè¿‡é…ç½®æƒé‡ï¼Œå¯ä»¥è®©æœåŠ¡å™¨çš„æ€§èƒ½å¾—åˆ°å……åˆ†å‘æŒ¥ï¼Œæœ‰æ•ˆåˆ©ç”¨èµ„æºã€‚weightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚æƒé‡è¶Šé«˜ï¼Œåœ¨è¢«è®¿é—®çš„æ¦‚ç‡è¶Šå¤§</p><p>ip_hashï¼š<br>ä¸Šè¿°æ–¹å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¯´ï¼Œåœ¨è´Ÿè½½å‡è¡¡ç³»ç»Ÿä¸­ï¼Œå‡å¦‚ç”¨æˆ·åœ¨æŸå°æœåŠ¡å™¨ä¸Šç™»å½•äº†ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·ç¬¬äºŒæ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯è´Ÿè½½å‡è¡¡ç³»ç»Ÿï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šé‡æ–°å®šä½åˆ°æœåŠ¡å™¨é›†ç¾¤ä¸­çš„æŸä¸€ä¸ªï¼Œé‚£ä¹ˆå·²ç»ç™»å½•æŸä¸€ä¸ªæœåŠ¡å™¨çš„ç”¨æˆ·å†é‡æ–°å®šä½åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå…¶ç™»å½•ä¿¡æ¯å°†ä¼šä¸¢å¤±ï¼Œè¿™æ ·æ˜¾ç„¶æ˜¯ä¸å¦¥çš„ã€‚<br>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ip_hashæŒ‡ä»¤è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœå®¢æˆ·å·²ç»è®¿é—®äº†æŸä¸ªæœåŠ¡å™¨ï¼Œå½“ç”¨æˆ·å†æ¬¡è®¿é—®æ—¶ï¼Œä¼šå°†è¯¥è¯·æ±‚é€šè¿‡å“ˆå¸Œç®—æ³•ï¼Œè‡ªåŠ¨å®šä½åˆ°è¯¥æœåŠ¡å™¨ã€‚æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜ã€‚</p><p><strong>Nginxçš„åŠ¨é™åˆ†ç¦»</strong></p><p>Nginxçš„é™æ€å¤„ç†èƒ½åŠ›å¾ˆå¼ºï¼Œä½†æ˜¯åŠ¨æ€å¤„ç†èƒ½åŠ›ä¸è¶³ï¼Œå› æ­¤ï¼Œåœ¨ä¼ä¸šä¸­å¸¸ç”¨åŠ¨é™åˆ†ç¦»æŠ€æœ¯ã€‚åŠ¨é™åˆ†ç¦»æŠ€æœ¯å…¶å®æ˜¯é‡‡ç”¨ä»£ç†çš„æ–¹å¼ï¼Œåœ¨server{}æ®µä¸­åŠ å…¥å¸¦æ­£åˆ™åŒ¹é…çš„locationæ¥æŒ‡å®šåŒ¹é…é¡¹é’ˆå¯¹PHPçš„åŠ¨é™åˆ†ç¦»ï¼šé™æ€é¡µé¢äº¤ç»™Nginxå¤„ç†ï¼ŒåŠ¨æ€é¡µé¢äº¤ç»™PHP-FPMæ¨¡å—æˆ–Apacheå¤„ç†ã€‚åœ¨Nginxçš„é…ç½®ä¸­ï¼Œæ˜¯é€šè¿‡locationé…ç½®æ®µé…åˆæ­£åˆ™åŒ¹é…å®ç°é™æ€ä¸åŠ¨æ€é¡µé¢çš„ä¸åŒå¤„ç†æ–¹å¼<br>ç›®å‰ï¼Œé€šè¿‡ä½¿ç”¨Nginxå¤§å¤§æé«˜äº†ç½‘ç«™çš„å“åº”é€Ÿåº¦ï¼Œä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒï¼Œè®©ç½‘ç«™çš„å¥å£®æ€§æ›´ä¸Šä¸€å±‚æ¥¼ï¼<br><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231004030357413-2017559896.png" alt="img"></p><h1 id="nginxå®‰è£…ä¸é…ç½®"><a href="#nginxå®‰è£…ä¸é…ç½®" class="headerlink" title="nginxå®‰è£…ä¸é…ç½®"></a>nginxå®‰è£…ä¸é…ç½®</h1><p>ä¸‹é¢å…ˆæ¥å®‰è£…nginxï¼š<a href="http://nginx.org/en/download.html">nginx: download </a>é‡Œé¢éšä¾¿é€‰ä¸ªç‰ˆæœ¬ä¸‹è½½ï¼ˆå°±æœ€æ–°ç‰ˆå§ï¼‰ï¼Œè§£å‹åé‡Œé¢æ–‡ä»¶æœ‰</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231004030907152-1621322456.png" alt="img"></p><p>å…ˆæ¥çœ‹confé…ç½®ï¼Œæœ€é‡è¦çš„é…ç½®æ–‡ä»¶å°±æ˜¯nginx.confï¼Œè€Œè¿™ä¸ªé…ç½®æ–‡ä»¶åˆå¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šå…¨å±€å—ï¼Œeventså—å’Œhttpå—ï¼Œåœ¨httpå—ä¸­ï¼ŒåˆåŒ…å«httpå…¨å±€å—ã€å¤šä¸ªserverå—ã€‚æ¯ä¸ªserverå—ä¸­ï¼Œå¯ä»¥åŒ…å«serverå…¨å±€å—å’Œå¤šä¸ªlocationå—ã€‚åœ¨åŒä¸€é…ç½®å—ä¸­åµŒå¥—çš„é…ç½®å—ï¼Œå„ä¸ªä¹‹é—´ä¸å­˜åœ¨æ¬¡åºå…³ç³»ã€‚</p><p>æ•´ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å…¨å±€å—</span></span><br><span class="line"><span class="comment">#user  nobody;</span></span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#eventå—</span></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#httpå—</span></span><br><span class="line">http &#123;</span><br><span class="line">    <span class="comment">#httpå…¨å±€å—</span></span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  <span class="number">65</span>;</span><br><span class="line">    <span class="comment">#serverå—</span></span><br><span class="line">    server &#123;</span><br><span class="line">        <span class="comment">#serverå…¨å±€å—</span></span><br><span class="line">        <span class="keyword">listen</span>       <span class="number">8000</span>;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        <span class="comment">#locationå—</span></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            <span class="keyword">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">        location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#è¿™è¾¹å¯ä»¥æœ‰å¤šä¸ªserverå—</span></span><br><span class="line">    server &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆæ¥çœ‹æœ€å…¥é—¨é‡è¦çš„ä¸¤ä¸ªé…ç½®ï¼Œ<strong>ç«¯å£å’Œé»˜è®¤é¡µé¢</strong>ã€‚é…ç½®ç«¯å£ï¼Œé‡Œé¢æ‰¾åˆ°</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        <span class="keyword">listen</span>       <span class="number">80</span>;</span><br><span class="line">        server_name  localhost;</span><br></pre></td></tr></table></figure><p>listenåé¢çš„å°±æ˜¯ä½ è¦ä»£ç†çš„æœåŠ¡ç«¯å£å·ï¼Œé»˜è®¤æ˜¯80.</p><p>ç„¶åæ˜¯ç«¯å£å·é»˜è®¤æ‰“å¼€çš„ç•Œé¢ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#locationå—</span></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            <span class="keyword">index</span>  index.html;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>indexåé¢çš„å°±æ˜¯é»˜è®¤æ‰“å¼€çš„é¡µé¢ï¼Œè€Œæ–‡ä»¶åå­—ç­‰ä¸‹å°±æ˜¯åœ¨htmlæ–‡ä»¶å¤¹é‡Œé¢çš„ã€‚locationï¼šå®šä¹‰è¯·æ±‚çš„URLè·¯å¾„å’Œå¯¹åº”çš„å¤„ç†æ–¹å¼ã€‚rootï¼šæŒ‡å®šç½‘ç«™æ ¹ç›®å½•ï¼Œå³å‰ç«¯é¡¹ç›®çš„æ‰“åŒ…è¾“å‡ºç›®å½•ã€‚</p><p>ä¸Šè¿°é…ç½®ä¸­ï¼Œç›‘å¬80ç«¯å£ï¼Œå½“è¯·æ±‚<a href="http://localtion,ä¼šå°†è¯·æ±‚è½¬å‘åˆ°htmlç›®å½•ä¸‹,å¹¶è¿”å›index.htmlæ–‡ä»¶./">http://localtionï¼Œä¼šå°†è¯·æ±‚è½¬å‘åˆ°htmlç›®å½•ä¸‹ï¼Œå¹¶è¿”å›index.htmlæ–‡ä»¶ã€‚</a></p><p>æ‰“åŒ…å‰ç«¯é¡¹ç›®</p><p>åœ¨éƒ¨ç½²å‰ç«¯é¡¹ç›®ä¹‹å‰ï¼Œéœ€è¦å…ˆè¿›è¡Œæ‰“åŒ…æ“ä½œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå‰ç«¯é¡¹ç›®ä½¿ç”¨Webpackç­‰å·¥å…·è¿›è¡Œæ‰“åŒ…ï¼Œå°†æºä»£ç è½¬æ¢ä¸ºé™æ€æ–‡ä»¶ã€‚æ‰“åŒ…åçš„æ–‡ä»¶ä¸€èˆ¬å­˜æ”¾åœ¨distç›®å½•ä¸‹ã€‚</p><p>éƒ¨ç½²å‰ç«¯é¡¹ç›®</p><p>å°†æ‰“åŒ…åçš„å‰ç«¯é¡¹ç›®æ–‡ä»¶å¤åˆ¶åˆ°NginxæŒ‡å®šçš„ç½‘ç«™æ ¹ç›®å½•ä¸‹</p><p><strong>nginxé…ç½®è´Ÿè½½å‡è¡¡</strong></p><p>è´Ÿè½½å‡è¡¡ç®€å•çš„è¯´å°±æ˜¯æ€•ä¸€ä¸ªç«¯å£å‹åŠ›å¤§ä¼šçˆ†æ‰ï¼Œéœ€è¦å¤šä¸ªç«¯å£æ¥å¹³è¡¡ã€‚é…ç½®è´Ÿè½½å‡è¡¡çš„ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    upstream backend &#123;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">8080</span>;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">8081</span>;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">8082</span>;</span><br><span class="line">    &#125;</span><br><span class="line">location / &#123;</span><br><span class="line">            proxy_pass http:<span class="regexp">//</span>backend;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé…ç½®äº†ä¸‰ä¸ªç«¯å£ï¼Œè€Œå°†locationçš„åœ°å€æ”¹æˆäº†æˆ‘é…çš„è¿™ä¸‰ä¸ª</p><p>Nginxè¿˜å¯ä»¥ä½œä¸º<strong>ç¼“å­˜</strong>æœåŠ¡å™¨ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚å½“åº”ç”¨ç¨‹åºå¤„ç†é™æ€èµ„æºæˆ–è€…åŠ¨æ€é¡µé¢æ—¶ï¼ŒNginxå¯ä»¥å°†è¿™äº›èµ„æºç¼“å­˜èµ·æ¥ï¼Œé¿å…é‡å¤çš„è®¡ç®—å’Œç½‘ç»œä¼ è¾“ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¼“å­˜é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m inactive=60m;</span><br><span class="line">    </span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name Example Domain;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://backend;</span><br><span class="line">            proxy_cache my_cache;</span><br><span class="line">            proxy_cache_valid 200 60m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®ä¸­ï¼Œä½¿ç”¨proxy_cache_pathå®šä¹‰äº†ä¸€ä¸ªåä¸ºmy_cacheçš„ç¼“å­˜è·¯å¾„ï¼Œå¹¶è®¾ç½®ç¼“å­˜çš„è¿‡æœŸæ—¶é—´ä¸º60åˆ†é’Ÿã€‚ç„¶ååœ¨serverä¸­çš„locationä¸­ä½¿ç”¨proxy_cacheæŒ‡å®šä½¿ç”¨my_cacheç¼“å­˜ç»„ï¼Œå¹¶ä½¿ç”¨proxy_cache_validè®¾ç½®ç¼“å­˜çš„æœ‰æ•ˆæœŸã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¼“å­˜çš„é…ç½®éœ€è¦è€ƒè™‘åˆ°ç¼“å­˜çš„æ¸…ç†å’Œæ›´æ–°ç­–ç•¥ï¼Œä»¥é˜²æ­¢ç¼“å­˜æ•°æ®è¿‡æœŸæˆ–è€…è¢«è¯¯ç”¨çš„æƒ…å†µå‘ç”Ÿã€‚</p><p>ç„¶åæ˜¯æ¯ä¸ªå—çš„ä»‹ç»</p><p><strong>å…¨å±€å—</strong>æ˜¯é»˜è®¤é…ç½®æ–‡ä»¶ä»å¼€å§‹åˆ°eventså—ä¹‹é—´çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œä¸»è¦è®¾ç½®ä¸€äº›å½±å“NginxæœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ï¼Œå› æ­¤ï¼Œè¿™äº›æŒ‡ä»¤çš„ä½œç”¨åŸŸæ˜¯NginxæœåŠ¡å™¨å…¨å±€ã€‚</p><p>é€šå¸¸åŒ…æ‹¬é…ç½®è¿è¡ŒNginxæœåŠ¡å™¨çš„ç”¨æˆ·ï¼ˆç»„ï¼‰ã€å…è®¸ç”Ÿæˆçš„worker processæ•°ã€Nginxè¿›ç¨‹PIDå­˜æ”¾è·¯å¾„ã€æ—¥å¿—çš„å­˜æ”¾è·¯å¾„å’Œç±»å‹ä»¥åŠé…ç½®æ–‡ä»¶å¼•å…¥ç­‰ã€‚</p><p><strong>events</strong>å—æ¶‰åŠçš„æŒ‡ä»¤ä¸»è¦å½±å“NginxæœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ã€‚å¸¸ç”¨åˆ°çš„è®¾ç½®åŒ…æ‹¬æ˜¯å¦å¼€å¯å¯¹å¤šworker processä¸‹çš„ç½‘ç»œè¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥æ”¶å¤šä¸ªç½‘ç»œè¿æ¥ï¼Œé€‰å–å“ªç§äº‹ä»¶é©±åŠ¨æ¨¡å‹å¤„ç†è¿æ¥è¯·æ±‚ï¼Œæ¯ä¸ªworker processå¯ä»¥åŒæ—¶æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°ç­‰ã€‚</p><p>è¿™ä¸€éƒ¨åˆ†çš„æŒ‡ä»¤å¯¹NginxæœåŠ¡å™¨çš„æ€§èƒ½å½±å“è¾ƒå¤§ï¼Œåœ¨å®é™…é…ç½®ä¸­åº”è¯¥æ ¹æ®å®é™…æƒ…å†µçµæ´»è°ƒæ•´ã€‚</p><p><strong>http</strong>å—æ˜¯NginxæœåŠ¡å™¨é…ç½®ä¸­çš„é‡è¦éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜å’Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°çš„åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½å¯ä»¥æ”¾åœ¨è¿™ä¸ªæ¨¡å—ä¸­ã€‚</p><p>å‰é¢å·²ç»æåˆ°ï¼Œhttpå—ä¸­å¯ä»¥åŒ…å«è‡ªå·±çš„å…¨å±€å—ï¼Œä¹Ÿå¯ä»¥åŒ…å«serverå—ï¼Œserverå—ä¸­åˆå¯ä»¥è¿›ä¸€æ­¥åŒ…å«locationå—ï¼Œåœ¨æœ¬ä¹¦ä¸­æˆ‘ä»¬ä½¿ç”¨â€œhttpå…¨å±€å—â€æ¥è¡¨ç¤ºhttpä¸­è‡ªå·±çš„å…¨å±€å—ï¼Œå³httpå—ä¸­ä¸åŒ…å«åœ¨serverå—ä¸­çš„éƒ¨åˆ†ã€‚</p><p>å¯ä»¥åœ¨httpå…¨å±€å—ä¸­é…ç½®çš„æŒ‡ä»¤åŒ…æ‹¬æ–‡ä»¶å¼•å…¥ã€MIME-Typeå®šä¹‰ã€æ—¥å¿—è‡ªå®šä¹‰ã€æ˜¯å¦ä½¿ç”¨sendfileä¼ è¾“æ–‡ä»¶ã€è¿æ¥è¶…æ—¶æ—¶é—´ã€å•è¿æ¥è¯·æ±‚æ•°ä¸Šé™ç­‰ã€‚</p><p><strong>server</strong>å—å’Œâ€œè™šæ‹Ÿä¸»æœºâ€çš„æ¦‚å¿µæœ‰å¯†åˆ‡è”ç³»ã€‚</p><p>è™šæ‹Ÿä¸»æœºï¼Œåˆç§°è™šæ‹ŸæœåŠ¡å™¨ã€ä¸»æœºç©ºé—´æˆ–æ˜¯ç½‘é¡µç©ºé—´ï¼Œå®ƒæ˜¯ä¸€ç§æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯æ˜¯ä¸ºäº†èŠ‚çœäº’è”ç½‘æœåŠ¡å™¨ç¡¬ä»¶æˆæœ¬è€Œå‡ºç°çš„ã€‚è¿™é‡Œçš„â€œä¸»æœºâ€æˆ–â€œç©ºé—´â€æ˜¯ç”±å®ä½“çš„æœåŠ¡å™¨å»¶ä¼¸è€Œæ¥ï¼Œç¡¬ä»¶ç³»ç»Ÿå¯ä»¥åŸºäºæœåŠ¡å™¨ç¾¤ï¼Œæˆ–è€…å•ä¸ªæœåŠ¡å™¨ç­‰ã€‚è™šæ‹Ÿä¸»æœºæŠ€æœ¯ä¸»è¦åº”ç”¨äºHTTPã€FTPåŠEMAILç­‰å¤šé¡¹æœåŠ¡ï¼Œå°†ä¸€å°æœåŠ¡å™¨çš„æŸé¡¹æˆ–è€…å…¨éƒ¨æœåŠ¡å†…å®¹é€»è¾‘åˆ’åˆ†ä¸ºå¤šä¸ªæœåŠ¡å•ä½ï¼Œå¯¹å¤–è¡¨ç°ä¸ºå¤šä¸ªæœåŠ¡å™¨ï¼Œä»è€Œå……åˆ†åˆ©ç”¨æœåŠ¡å™¨ç¡¬ä»¶èµ„æºã€‚ä»ç”¨æˆ·è§’åº¦æ¥çœ‹ï¼Œä¸€å°è™šæ‹Ÿä¸»æœºå’Œä¸€å°ç‹¬ç«‹çš„ç¡¬ä»¶ä¸»æœºæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p><p>åœ¨ä½¿ç”¨NginxæœåŠ¡å™¨æä¾›WebæœåŠ¡æ—¶ï¼Œåˆ©ç”¨è™šæ‹Ÿä¸»æœºçš„æŠ€æœ¯å°±å¯ä»¥é¿å…ä¸ºæ¯ä¸€ä¸ªè¦è¿è¡Œçš„ç½‘ç«™æä¾›å•ç‹¬çš„NginxæœåŠ¡å™¨ï¼Œä¹Ÿæ— éœ€ä¸ºæ¯ä¸ªç½‘ç«™å¯¹åº”è¿è¡Œä¸€ç»„Nginxè¿›ç¨‹ã€‚è™šæ‹Ÿä¸»æœºæŠ€æœ¯ä½¿å¾—NginxæœåŠ¡å™¨å¯ä»¥åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šåªè¿è¡Œä¸€ç»„Nginxè¿›ç¨‹ï¼Œå°±å¯ä»¥è¿è¡Œå¤šä¸ªç½‘ç«™ã€‚</p><p>åœ¨å‰é¢æåˆ°è¿‡ï¼Œæ¯ä¸€ä¸ªhttpå—éƒ½å¯ä»¥åŒ…å«å¤šä¸ªserverå—ï¼Œè€Œæ¯ä¸ªserverå—å°±ç›¸å½“äºä¸€å°è™šæ‹Ÿä¸»æœºï¼Œå®ƒå†…éƒ¨å¯æœ‰å¤šå°ä¸»æœºè”åˆæä¾›æœåŠ¡ï¼Œä¸€èµ·å¯¹å¤–æä¾›åœ¨é€»è¾‘ä¸Šå…³ç³»å¯†åˆ‡çš„ä¸€ç»„æœåŠ¡ï¼ˆæˆ–ç½‘ç«™ï¼‰ã€‚</p><p>å’Œhttpå—ç›¸åŒï¼Œserverå—ä¹Ÿå¯ä»¥åŒ…å«è‡ªå·±çš„å…¨å±€å—ï¼ŒåŒæ—¶å¯ä»¥åŒ…å«å¤šä¸ªlocationå—ã€‚åœ¨serverå…¨å±€å—ä¸­ï¼Œæœ€å¸¸è§çš„ä¸¤ä¸ªé…ç½®é¡¹æ˜¯æœ¬è™šæ‹Ÿä¸»æœºçš„ç›‘å¬é…ç½®å’Œæœ¬è™šæ‹Ÿä¸»æœºçš„åç§°æˆ–IPé…ç½®ã€‚</p><p><strong>å…³é—­Nginx</strong><br>å¦‚æœä½¿ç”¨cmdå‘½ä»¤çª—å£å¯åŠ¨nginxï¼Œ å…³é—­cmdçª—å£æ˜¯ä¸èƒ½ç»“æŸnginxè¿›ç¨‹çš„ï¼Œå¯ä½¿ç”¨ä¸¤ç§æ–¹æ³•å…³é—­nginx<br>æ–¹æ³•ä¸€ï¼š(1)è¾“å…¥nginxå‘½ä»¤ nginx -s stop(å¿«é€Ÿåœæ­¢nginx) æˆ– nginx -s quit(å®Œæ•´æœ‰åºçš„åœæ­¢nginx)ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤çš„åŒºåˆ«åœ¨äºnginx -s stopæ˜¯å¿«é€Ÿåœæ­¢Nginxï¼Œè€Œnginx -s quitæ˜¯æœ‰åºçš„åœæ­¢Nginxï¼Œå‰è€…å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æ²¡æœ‰å®Œå…¨ä¿å­˜ï¼›</p><p>æ–¹æ³•äºŒï¼š(2)ä½¿ç”¨taskkill taskkill &#x2F;f &#x2F;t &#x2F;im nginx.exe</p><p>æ³¨æ„ï¼šæ–¹æ³•ä¸€å¿…é¡»è¦åœ¨Nginxçš„å®‰è£…åŒ…ç›®å½•ä¸‹ã€‚å¦åˆ™æ— æ³•æ‰¾åˆ°Nginxã€‚</p><p>è¿™ç§æ–¹æ³•å¯ä»¥ç›´æ¥åœ¨cmdå‘½ä»¤é¢æ¿ä¸Šä½¿ç”¨ï¼Œå½“ç¬¬ä¸€ç§æ–¹æ³•æ— æ•ˆæ—¶å¯ä»¥å°è¯•ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå‰ç¬¬ä¸€ç§æ–¹æ³•é€‚ç”¨äºå¤§éƒ¨åˆ†ç‰ˆæœ¬çš„Nginxï¼Œä½†æ˜¯ä¸ªåˆ«ç‰ˆæœ¬çš„å¯èƒ½ä¸å®ç”¨ï¼Œä½¿ç”¨taskkillå°±å¯è§£å†³</p><p>æ–¹æ³•ä¸‰ï¼šç›´æ¥æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨æ‰¾åˆ°nginxç›´æ¥æš´åŠ›åœæ­¢</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/hyfsbxg/article/details/122322125">Nginxè¯¦è§£ï¼ˆä¸€æ–‡å¸¦ä½ ææ‡‚Nginxï¼‰-CSDNåšå®¢</a>ï¼›<a href="https://www.cnblogs.com/54chensongxia/p/12938929.html">Nginxé…ç½®æ–‡ä»¶è¯¦è§£ - ç¨‹åºå‘˜è‡ªç”±ä¹‹è·¯ - åšå®¢å›­ (cnblogs.com)</a></p><h1 id="Kongç½‘å…³"><a href="#Kongç½‘å…³" class="headerlink" title="Kongç½‘å…³"></a>Kongç½‘å…³</h1><p>ä¹‹å‰å¦‚æœå­¦äº†javaçš„å¾®æœåŠ¡å°±çŸ¥é“ä»€ä¹ˆæ˜¯ç½‘å…³äº†ï¼Œè€Œä¸”è¿˜å­¦äº†gatewayç½‘å…³ã€‚ç½‘å…³ï¼Œç¡¬æ ¸ç‚¹å„¿å°†å°±æ˜¯â€¦..ï¼š</p><p>ç½‘å…³(Gateway)åˆç§°ç½‘é—´è¿æ¥å™¨ã€åè®®è½¬æ¢å™¨ã€‚ç½‘å…³åœ¨<strong>ä¼ è¾“å±‚</strong>ä¸Šä»¥å®ç°ç½‘ç»œäº’è¿ï¼Œæ˜¯æœ€å¤æ‚çš„ç½‘ç»œäº’è¿è®¾å¤‡ï¼Œä»…ç”¨äºä¸¤ä¸ª<strong>é«˜å±‚åè®®ä¸åŒçš„</strong>ç½‘ç»œäº’è¿ã€‚ç½‘å…³çš„ç»“æ„ä¹Ÿå’Œè·¯ç”±å™¨ç±»ä¼¼ï¼Œ<strong>ä¸åŒçš„æ˜¯äº’è¿å±‚</strong>ã€‚ç½‘å…³æ—¢å¯ä»¥ç”¨äºå¹¿åŸŸç½‘äº’è¿ï¼Œä¹Ÿå¯ä»¥ç”¨äºå±€åŸŸç½‘äº’è¿ã€‚ ç½‘å…³æ˜¯ä¸€ç§å……å½“<strong>è½¬æ¢</strong>é‡ä»»çš„è®¡ç®—æœºç³»ç»Ÿæˆ–è®¾å¤‡ã€‚åœ¨ä½¿ç”¨ä¸åŒçš„é€šä¿¡åè®®ã€æ•°æ®æ ¼å¼æˆ–è¯­è¨€ï¼Œç”šè‡³ä½“ç³»ç»“æ„å®Œå…¨ä¸åŒçš„ä¸¤ç§ç³»ç»Ÿä¹‹é—´ï¼Œç½‘å…³æ˜¯ä¸€ä¸ª<strong>ç¿»è¯‘å™¨</strong>ã€‚ä¸ç½‘æ¡¥åªæ˜¯ç®€å•åœ°ä¼ è¾¾ä¿¡æ¯ä¸åŒï¼Œç½‘å…³å¯¹æ”¶åˆ°çš„ä¿¡æ¯è¦é‡æ–°æ‰“åŒ…ï¼Œä»¥é€‚åº”ç›®çš„ç³»ç»Ÿçš„éœ€æ±‚ã€‚åŒæ—¶ï¼Œç½‘å…³ä¹Ÿå¯ä»¥æä¾›<strong>è¿‡æ»¤å’Œå®‰å…¨</strong>åŠŸèƒ½ã€‚å¤§å¤šæ•°ç½‘å…³è¿è¡Œåœ¨OSI 7å±‚åè®®çš„é¡¶å±‚â€“åº”ç”¨å±‚ã€‚</p><p>ç„¶åå†æ¥çœ‹Kongç½‘å…³</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231004034241957-1897860684.png" alt="img"></p><p>ä»ç¬”è€…æ€»ç»“æ•°æ¥kongçš„ä¸»è¦ä¼˜åŠ¿ï¼š</p><ul><li>æ’ä»¶å¸‚åœºä¸°å¯Œï¼Œå¾ˆå¤šæ’ä»¶å¯ä»¥é™ä½å¼€å‘æˆæœ¬ï¼›</li><li>å¯æ‰©å±•æ€§ï¼Œå¯ä»¥ç¼–å†™luaè„šæœ¬æ¥å®šåˆ¶è‡ªå·±çš„å‚æ•°éªŒè¯æƒé™éªŒè¯ç­‰æ“ä½œï¼›</li><li>åŸºäºopenRestyï¼ŒopenRestyåŸºäºNginxä¿éšœäº†å¼ºåŠ²çš„æ€§èƒ½ï¼›</li><li>ä¾¿æ·æ€§èƒ½æ‰©å®¹ï¼Œåªéœ€è¦æ°´å¹³å¢åŠ æœåŠ¡å™¨èµ„æºæ€§èƒ½å°±èƒ½æå‡ ï¼›</li><li>è´Ÿè½½å‡è¡¡å¥åº·æ£€æŸ¥</li></ul><h2 id="Docketéƒ¨ç½²kong"><a href="#Docketéƒ¨ç½²kong" class="headerlink" title="Docketéƒ¨ç½²kong"></a>Docketéƒ¨ç½²kong</h2><blockquote><p>PSï¼špostgreSqlæ•°æ®åº“ç‰ˆæœ¬å¿…é¡» &gt; 9.4</p></blockquote><p>å› ä¸ºä¸æ˜¯é€šè¿‡docker-composerå¯åŠ¨çš„å®¹å™¨éœ€è¦äº’ç›¸è®¿é—®éœ€è¦åœ¨åŒä¸€ä¸ªç½‘ç»œåä¸‹æ‰å¯ä»¥äº’ç›¸è®¿é—®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create kong-net</span><br></pre></td></tr></table></figure><p>æ•°æ®åº“ä½¿ç”¨ postgres</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name kong-database \</span><br><span class="line">               --network=kong-net \</span><br><span class="line">               -p 5432:5432 \</span><br><span class="line">               -e &quot;POSTGRES_USER=kong&quot; \</span><br><span class="line">               -e &quot;POSTGRES_DB=kong&quot; \</span><br><span class="line">               postgres:9.6</span><br></pre></td></tr></table></figure><p>å‡†å¤‡æ•°æ®åº“æ•°æ®å’Œé…ç½®ï¼Œåªéœ€è¦è¿è¡Œä¸€éè¿è¡Œå®Œæˆåä¼šè‡ªåŠ¨ç»“æŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm \</span><br><span class="line">     --network=kong-net \</span><br><span class="line">     -e &quot;KONG_DATABASE=postgres&quot; \</span><br><span class="line">     -e &quot;KONG_PG_HOST=kong-database&quot; \</span><br><span class="line">     -e &quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot; \</span><br><span class="line">     kong:1.0.3 kong migrations bootstrap</span><br></pre></td></tr></table></figure><p>å¯åŠ¨kong-service</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name kong \</span><br><span class="line">     --network=kong-net \</span><br><span class="line">     -e &quot;KONG_DATABASE=postgres&quot; \</span><br><span class="line">     -e &quot;KONG_PG_HOST=kong-database&quot; \</span><br><span class="line">     -e &quot;KONG_CASSANDRA_CONTACT_POINTS=kong-database&quot; \</span><br><span class="line">     -e &quot;KONG_PROXY_ACCESS_LOG=/dev/stdout&quot; \</span><br><span class="line">     -e &quot;KONG_ADMIN_ACCESS_LOG=/dev/stdout&quot; \</span><br><span class="line">     -e &quot;KONG_PROXY_ERROR_LOG=/dev/stderr&quot; \</span><br><span class="line">     -e &quot;KONG_ADMIN_ERROR_LOG=/dev/stderr&quot; \</span><br><span class="line">     -e &quot;KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl&quot; \</span><br><span class="line">     -p 8000:8000 \</span><br><span class="line">     -p 8443:8443 \</span><br><span class="line">     -p 8001:8001 \</span><br><span class="line">     -p 8444:8444 \</span><br><span class="line">     kong:1.0.3</span><br></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                NAMES</span><br><span class="line">d82c2b7729ae        kong:1.0.3          &quot;/docker-entrypoin...&quot;   3 seconds ago       Up 2 seconds        0.0.0.0:8000-8001-&gt;8000-8001/tcp, 0.0.0.0:8443-8444-&gt;8443-8444/tcp   kong</span><br><span class="line">9b7f5a9c808f        postgres:9.6        &quot;docker-entrypoint...&quot;   26 seconds ago      Up 25 seconds       0.0.0.0:5432-&gt;5432/tcp                                               kong-database</span><br></pre></td></tr></table></figure><p>ç„¶åè°ƒç”¨äº†ä¸€ä¸‹åœ°å€æœ‰è¾“å‡ºå³å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -i http://localhost:8001/</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨docker-composeéƒ¨ç½²kong"><a href="#ä½¿ç”¨docker-composeéƒ¨ç½²kong" class="headerlink" title="ä½¿ç”¨docker-composeéƒ¨ç½²kong"></a>ä½¿ç”¨docker-composeéƒ¨ç½²kong</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;2.1&#x27;</span><br><span class="line">services:</span><br><span class="line">  kong-migrations:</span><br><span class="line">    image: &quot;kong:1.0.3&quot;</span><br><span class="line">    command: kong migrations bootstrap</span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    environment:</span><br><span class="line">      KONG_DATABASE: postgres</span><br><span class="line">      KONG_PG_DATABASE: kong</span><br><span class="line">      KONG_PG_HOST: db</span><br><span class="line">      KONG_PG_PASSWORD: kong</span><br><span class="line">      KONG_PG_USER: kong</span><br><span class="line">    links:</span><br><span class="line">      - db:db</span><br><span class="line">  kong:</span><br><span class="line">    image: &quot;kong:1.0.3&quot;</span><br><span class="line">    depends_on:</span><br><span class="line">      db:</span><br><span class="line">        condition: service_healthy</span><br><span class="line">    environment:</span><br><span class="line">      KONG_ADMIN_ACCESS_LOG: /dev/stdout</span><br><span class="line">      KONG_ADMIN_ERROR_LOG: /dev/stderr</span><br><span class="line">      KONG_ADMIN_LISTEN: &#x27;0.0.0.0:8001&#x27;</span><br><span class="line">      KONG_CASSANDRA_CONTACT_POINTS: db</span><br><span class="line">      KONG_DATABASE: postgres</span><br><span class="line">      KONG_PG_DATABASE: kong</span><br><span class="line">      KONG_PG_HOST: db</span><br><span class="line">      KONG_PG_PASSWORD: kong</span><br><span class="line">      KONG_PG_USER: kong</span><br><span class="line">      KONG_PROXY_ACCESS_LOG: /dev/stdout</span><br><span class="line">      KONG_PROXY_ERROR_LOG: /dev/stderr</span><br><span class="line">    links:</span><br><span class="line">      - db:db</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;8000:8000/tcp&quot;</span><br><span class="line">      - &quot;8001:8001/tcp&quot;</span><br><span class="line">      - &quot;8443:8443/tcp&quot;</span><br><span class="line">      - &quot;8444:8444/tcp&quot;</span><br><span class="line">    restart: on-failure</span><br><span class="line">  db:</span><br><span class="line">    image: postgres:9.6</span><br><span class="line">    environment:</span><br><span class="line">      POSTGRES_DB: kong</span><br><span class="line">      POSTGRES_PASSWORD: kong</span><br><span class="line">      POSTGRES_USER: kong</span><br><span class="line">    healthcheck:</span><br><span class="line">      test: [&quot;CMD&quot;, &quot;pg_isready&quot;, &quot;-U&quot;, &quot;kong&quot;]</span><br><span class="line">      interval: 30s</span><br><span class="line">      timeout: 30s</span><br><span class="line">      retries: 3</span><br><span class="line">    restart: on-failure</span><br><span class="line">    stdin_open: true</span><br><span class="line">    tty: true</span><br></pre></td></tr></table></figure><p>dbçš„ healthcheck åšäº†æ•°æ®å±‚åˆå§‹åŒ–å®Œæˆæ£€æµ‹ï¼Œæ•°æ®åº“å®Œæˆä¹‹åæ‰ä¼šæŒ‰ç…§é¡ºåºç»§ç»­å¯åŠ¨æ¥ä¸‹æ¥çš„å®¹å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://zhuanlan.zhihu.com/p/109720608">KONGç½‘å…³ â€” ä»‹ç»å®‰è£… - çŸ¥ä¹ (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloudå¾®æœåŠ¡å­¦ä¹ ï¼ˆä¸‰ï¼‰ã€Dockerï¼ŒMQã€‘</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/java/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0-%E4%B8%89-%E3%80%90Docker%EF%BC%8CMQ%E3%80%91/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/java/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0-%E4%B8%89-%E3%80%90Docker%EF%BC%8CMQ%E3%80%91/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><h2 id="åˆè¯†Docker"><a href="#åˆè¯†Docker" class="headerlink" title="åˆè¯†Docker"></a>åˆè¯†Docker</h2><p>é¡¹ç›®éƒ¨ç½²çš„é—®é¢˜ï¼š<br>å¤§å‹é¡¹ç›®ç»„ä»¶è¾ƒå¤šï¼Œè¿è¡Œç¯å¢ƒä¹Ÿè¾ƒä¸ºå¤æ‚ï¼Œéƒ¨ç½²æ—¶ä¼šç¢°åˆ°ä¸€äº›é—®é¢˜:<br>è¿™äº›æœåŠ¡ä¼šä¾èµ–äºå„ç§å„æ ·çš„åº”ç”¨ï¼ŒNode.jsã€Redisã€RabbitMQã€MySQLç­‰ç­‰ï¼Œæ¯ä¸€ä¸ªæœåŠ¡çš„åº”ç”¨å®ƒä»¬éœ€è¦çš„ä¾èµ–å’Œå‡½æ•°åº“æœ‰å·®å¼‚ï¼Œä¹Ÿæœ‰å¯èƒ½ç‰ˆæœ¬ä¸åŒï¼Œæ‰€ä»¥ä¾èµ–å…³ç³»å¤æ‚ï¼Œå®¹æ˜“å‡ºç°å…¼å®¹æ€§é—®é¢˜ã€‚<br>Â·ä¾èµ–å…³ç³»å¤æ‚ï¼Œå®¹æ˜“å‡ºç°å…¼å®¹æ€§é—®é¢˜<br>Â·å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒæœ‰å·®å¼‚<br><strong>Dockerä¸è™šæ‹Ÿæœºçš„å·®å¼‚ï¼š</strong></p><p>è™šæ‹Ÿæœº(virtual machine)æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­æ¨¡æ‹Ÿç¡¬ä»¶è®¾å¤‡ï¼Œç„¶åè¿è¡Œå¦ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨Windows ç³»ç»Ÿé‡Œé¢è¿è¡ŒUbuntuç³»ç»Ÿï¼Œè¿™æ ·å°±å¯ä»¥è¿è¡Œä»»æ„çš„Ubuntuåº”ç”¨äº†ã€‚</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231003004355986-1232962131.png" alt="img"></p><p>Dockerå’Œè™šæ‹Ÿæœºçš„å·®å¼‚:<br>Â· dockeræ˜¯ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹ï¼›è™šæ‹Ÿæœºæ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­çš„æ“ä½œç³»ç»Ÿï¼›<br>Â· dockerä½“ç§¯å°ã€å¯åŠ¨é€Ÿåº¦å¿«ã€æ€§èƒ½å¥½ï¼›è™šæ‹Ÿæœºä½“ç§¯å¤§ã€å¯åŠ¨é€Ÿåº¦æ…¢ã€æ€§èƒ½ä¸€èˆ¬ã€‚</p><h3 id="é•œåƒå’Œå®¹å™¨"><a href="#é•œåƒå’Œå®¹å™¨" class="headerlink" title="é•œåƒå’Œå®¹å™¨"></a>é•œåƒå’Œå®¹å™¨</h3><p>é•œåƒå°±æ˜¯åƒç…§é•œå­ä¸€æ ·ã€‚æˆ‘ä»¬ä¸€èˆ¬è¯´çš„é•œåƒæ˜¯æŒ‡ç»™ç³»ç»Ÿä½œä¸ªghosté•œåƒã€‚è¿™æ ·å¯ä»¥åœ¨å¾ˆçŸ­æ—¶é—´ï¼Œå¾ˆæ–¹ä¾¿çš„è¿˜åŸå‡ºä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿæ¥ã€‚é•œåƒå¯ä»¥è¯´æ˜¯ä¸€ç§æ–‡ä»¶,æ¯”å¦‚iso,ghoéƒ½å±äºé•œåƒæ–‡ä»¶,é•œåƒæ–‡ä»¶å¯ä»¥ç›´æ¥åˆ»å½•åˆ°å…‰ç›˜ä¸­,ä¹Ÿå¯ä»¥ç”¨è™šæ‹Ÿå…‰é©±æ‰“å¼€ã€‚</p><p>é•œåƒ(lmage) : Dockerå°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€éœ€çš„ä¾èµ–ã€å‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ç­‰æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œç§°ä¸ºé•œåƒã€‚<br>å®¹å™¨(Container)ï¸°é•œåƒä¸­çš„åº”ç”¨ç¨‹åºè¿è¡Œåå½¢æˆçš„è¿›ç¨‹å°±æ˜¯å®¹å™¨ï¼Œåªæ˜¯Dockerä¼šç»™å®¹å™¨åšéš”ç¦»ï¼Œå¯¹å¤–ä¸å¯è§ã€‚<br>å®¹å™¨æƒ³å¾€MySQLå­˜æ•°æ®ï¼Œåªèƒ½å…ˆå¤åˆ¶ä¸€ä»½åˆ°è‡ªå·±çš„å®¹å™¨ï¼Œåœ¨è‡ªå·±çš„å®¹å™¨ä¸­æ“ä½œï¼Œè¿™æ ·å°±æ±¡æŸ“ä¸äº†è¿™ä¸ªé•œåƒï¼Œèµ·åˆ°éš”ç¦»çš„ä½œç”¨ã€‚å°†æ¥åŸºäºé•œåƒå†åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œä¹Ÿæ˜¯å…¨æ–°çš„é‡Œé¢éƒ½æ˜¯ç©ºçš„ã€‚<br>é•œåƒæ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥è·¨åŸŸäº¤ç»™åˆ«äººæ”¾å¿ƒå¤§èƒ†çš„ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šè¢«æ„ŸæŸ“ã€‚</p><p>DockerHub: DockerHubæ˜¯ä¸€ä¸ªDockeré•œåƒçš„æ‰˜ç®¡å¹³å°ã€‚è¿™æ ·çš„å¹³å°ç§°ä¸ºDocker Registryã€‚ï¼ˆå°±è·Ÿgithubä¸€æ ·ï¼Œgithubæ˜¯ä»£ç çš„æ‰˜ç®¡ï¼‰<br>å›½å†…ä¹Ÿæœ‰ç±»ä¼¼äºDockerHub çš„å…¬å¼€æœåŠ¡ï¼Œæ¯”å¦‚ç½‘æ˜“äº‘é•œåƒæœåŠ¡ã€é˜¿é‡Œäº‘é•œåƒåº“ç­‰ã€‚</p><h3 id="Dockeræ¶æ„"><a href="#Dockeræ¶æ„" class="headerlink" title="Dockeræ¶æ„"></a>Dockeræ¶æ„</h3><p>Dockeræ˜¯ä¸€ä¸ªCSæ¶æ„çš„ç¨‹åºï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆ:</p><ul><li>æœåŠ¡ç«¯(server): Dockerå®ˆæŠ¤è¿›ç¨‹ï¼Œè´Ÿè´£å¤„ç†DockeræŒ‡ä»¤ï¼Œç®¡ç†é•œåƒã€å®¹å™¨ç­‰</li><li>å®¢æˆ·ç«¯(client):é€šè¿‡å‘½ä»¤æˆ–RestAPIå‘DockeræœåŠ¡ç«¯å‘é€æŒ‡ä»¤ã€‚å¯ä»¥åœ¨æœ¬åœ°æˆ–è¿œç¨‹å‘æœåŠ¡ç«¯å‘é€æŒ‡ä»¤ã€‚</li></ul><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231003005556342-1077013038.png" alt="img"></p><h2 id="Dockerå®‰è£…"><a href="#Dockerå®‰è£…" class="headerlink" title="Dockerå®‰è£…"></a>Dockerå®‰è£…</h2><p>æ²¡æœ‰Centos 7çš„å…ˆå»å®‰è£…ï¼š<a href="https://mirrors.aliyun.com/centos/7/isos/x86_64/">centos-7-isos-x86_64å®‰è£…åŒ…ä¸‹è½½_å¼€æºé•œåƒç«™-é˜¿é‡Œäº‘ (aliyun.com)</a>é€‰æ‹©è¿™ä¸ªä¸‹è½½ï¼š<img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231003011348510-489348507.png" alt="img"></p><p>ç­‰ä¸‹è¦å¼€è™šæ‹Ÿæœºæ¥å®‰è£…Dockerï¼Œæˆ–è€…ä½ è‡ªå·±æœ‰æœåŠ¡å™¨ä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ã€‚</p><p>æœ¬åœ°è™šæ‹Ÿæœºå®‰è£…Dockeræ•™ç¨‹å‚è€ƒï¼š<a href="https://blog.csdn.net/m0_51545690/article/details/123238360">è¶…è¯¦ç»†çš„CentOS7çš„ä¸‹è½½å®‰è£…é…ç½®æ•™ç¨‹_centos7ä¸‹è½½_ç§ƒå¤´æŠ«é£ä¾ .çš„åšå®¢-CSDNåšå®¢ </a> ï¼›ï¼›<a href="https://blog.csdn.net/BThinker/article/details/123358697">Docker å®‰è£… (å®Œæ•´è¯¦ç»†ç‰ˆ)_dockerå®‰è£…-CSDNåšå®¢</a></p><p>æˆ‘å°±åœ¨è‡ªå·±çš„æœåŠ¡å™¨å®‰è£…äº†</p><p>æˆ‘ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ï¼Œæˆ‘åœ¨è¿œç¨‹è¿æ¥æ§åˆ¶é¢æ¿ç™»å½•åå°±å¯ä»¥æ ¹æ®ä¸‹é¢çš„æ“ä½œå®‰è£…Dockeräº†ã€‚</p><p><strong>å¸è½½ï¼ˆå¯é€‰ï¼‰</strong></p><p>å¦‚æœä¹‹å‰å®‰è£…è¿‡æ—§ç‰ˆæœ¬çš„Dockerï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¸è½½ï¼ˆå»ºè®®éƒ½æ‰§è¡Œä¸€éï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-selinux \</span><br><span class="line">                  docker-engine-selinux \</span><br><span class="line">                  docker-engine \</span><br><span class="line">                  docker-ce</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h3><p>é¦–å…ˆéœ€è¦å¤§å®¶è™šæ‹Ÿæœºè”ç½‘ï¼Œå®‰è£…yumå·¥å…·</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils \</span><br><span class="line">           device-mapper-persistent-data \</span><br><span class="line">           lvm2 --skip-broken</span><br></pre></td></tr></table></figure><p>ç„¶åæ›´æ–°æœ¬åœ°é•œåƒæºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># è®¾ç½®dockeré•œåƒæº</span><br><span class="line">yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">    </span><br><span class="line">sed -i &#x27;s/download.docker.com/mirrors.aliyun.com\/docker-ce/g&#x27; /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"></span><br><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y docker-ce</span><br></pre></td></tr></table></figure><p>docker-ceä¸ºç¤¾åŒºå…è´¹ç‰ˆæœ¬ã€‚ç¨ç­‰ç‰‡åˆ»ï¼Œdockerå³å¯å®‰è£…æˆåŠŸã€‚</p><p><strong>å¯åŠ¨docker</strong></p><p>Dockeråº”ç”¨éœ€è¦ç”¨åˆ°å„ç§ç«¯å£ï¼Œé€ä¸€å»ä¿®æ”¹é˜²ç«å¢™è®¾ç½®ã€‚éå¸¸éº»çƒ¦ï¼Œå› æ­¤å»ºè®®å¤§å®¶ç›´æ¥å…³é—­é˜²ç«å¢™ï¼</p><p>å¯åŠ¨dockerå‰ï¼Œä¸€å®šè¦å…³é—­é˜²ç«å¢™åï¼ï¼</p><p>å¯åŠ¨dockerå‰ï¼Œä¸€å®šè¦å…³é—­é˜²ç«å¢™åï¼ï¼</p><p>å¯åŠ¨dockerå‰ï¼Œä¸€å®šè¦å…³é—­é˜²ç«å¢™åï¼ï¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å…³é—­</span><br><span class="line">systemctl stop firewalld</span><br><span class="line"># ç¦æ­¢å¼€æœºå¯åŠ¨é˜²ç«å¢™</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure><p>é€šè¿‡å‘½ä»¤å¯åŠ¨dockerï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker  # å¯åŠ¨dockeræœåŠ¡</span><br><span class="line"></span><br><span class="line">systemctl stop docker  # åœæ­¢dockeræœåŠ¡</span><br><span class="line"></span><br><span class="line">systemctl restart docker  # é‡å¯dockeræœåŠ¡</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹dockerç‰ˆæœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure><p><strong>é…ç½®é˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿï¼š</strong></p><p>é’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº 1.10.0 çš„ç”¨æˆ·</p><p>æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶&#x2F;etc&#x2F;docker&#x2F;daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://52xn11h1.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><p> <strong>æµ‹è¯•é…ç½®MYSQL</strong>ï¼š</p><p>å¯åŠ¨ Dockeråå¯ä»¥è¯•è¯•å…ˆæ¥éƒ¨ç½²Mysqlç©ç©ï¼šåœ¨ç»ˆç«¯å‘½ä»¤è¡Œç»§ç»­è¾“å…¥ï¼š</p><p>docker run -d â€“name mysql -p 3306:3306 -e TZ&#x3D;Asia&#x2F;Shanghai -e MYSQL_ROOT_PASSWORD&#x3D;123 mysql</p><p>ç„¶åç­‰å¾…å®ƒä¸‹è½½å®‰è£…ï¼Œç„¶åå†æ‰“å¼€ä¸€ä¸ªMysqlçš„æœåŠ¡å°†ä¸»æœºæ”¹æˆè™šæ‹Ÿæœºçš„ipåœ°å€å¹¶è¿æ¥å°±å¯ä»¥çœ‹åˆ°æˆæœã€‚</p><p>è§£æä¸‹åˆšåˆšçš„æŒ‡ä»¤ï¼š</p><p>docker run:åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨</p><p>-dæ˜¯è®©å®¹å™¨åœ¨åå°è¿è¡Œ</p><p>â€“name mysql:ç»™å®¹å™¨èµ·ä¸ªåå­—ï¼Œå¿…é¡»å”¯ä¸€</p><p>-p 3306:3306ï¼šè®¾ç½®ç«¯å£æ˜ å°„</p><p>-e KEY&#x3D;VALUEï¼šè®¾ç½®ç¯å¢ƒå˜é‡</p><p>mysqlï¼šæŒ‡å®šè¿è¡Œçš„é•œåƒåå­—</p><h2 id="Dockeré•œåƒå‘½ä»¤"><a href="#Dockeré•œåƒå‘½ä»¤" class="headerlink" title="Dockeré•œåƒå‘½ä»¤"></a>Dockeré•œåƒå‘½ä»¤</h2><p><strong>DockeråŸºæœ¬æ“ä½œï¼š</strong></p><ul><li>é•œåƒæ“ä½œ</li><li>å®¹å™¨æ“ä½œ</li><li>æ•°æ®å·(å®¹å™¨æ•°æ®ç®¡ç†)</li></ul><p><strong>é•œåƒç›¸å…³å‘½ä»¤</strong></p><ul><li>é•œåƒåç§°ä¸€èˆ¬åˆ†ä¸¤éƒ¨åˆ†ç»„æˆ:[repository]:[tag]<br>tagï¼šæ˜¯ç‰ˆæœ¬</li><li>åœ¨æ²¡æœ‰æŒ‡å®štagæ—¶ï¼Œé»˜è®¤æ˜¯latestï¼Œä»£è¡¨æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ</li></ul><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231003160930013-248277018.png" alt="img"></p><p>ä¸€äº›å‘½ä»¤æ“ä½œï¼š</p><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231009171659559-1758026986.png" alt="img"></h2><h3 id="æ•°æ®å·"><a href="#æ•°æ®å·" class="headerlink" title="æ•°æ®å·"></a>æ•°æ®å·</h3><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231009173522011-422241716.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231009173739443-60224227.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231009173924390-2027665306.png" alt="img"></p><p><strong>æµ‹è¯•nginxçš„æ•°æ®å·éƒ¨ç½²</strong></p><p>å…ˆæŠŠä»¥å‰éƒ¨ç½²çš„ nginxåˆ é™¤ï¼ˆä¸‡ä¸€å®‰è£…äº†ï¼‰ï¼šdocker rm -f nginx</p><p>ç„¶åå†è¾“å…¥docker run -d â€“name nginx -p 80:80 -v html:&#x2F;user&#x2F;share&#x2F;nginx&#x2F;html nginx</p><p>è¿™é‡Œçš„-vå°±æ˜¯é…ç½®nginxçš„htmlæ•°æ®å·çš„ä½ç½®</p><h2 id="DockerComposeå®‰è£…"><a href="#DockerComposeå®‰è£…" class="headerlink" title="DockerComposeå®‰è£…"></a>DockerComposeå®‰è£…</h2><p>Linuxä¸‹éœ€è¦é€šè¿‡å‘½ä»¤ä¸‹è½½ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å®‰è£…</span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.23.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ–‡ä»¶æƒé™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ä¿®æ”¹æƒé™</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><p><strong>Baseè‡ªåŠ¨è¡¥å…¨å‘½ä»¤ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># è¡¥å…¨å‘½ä»¤</span><br><span class="line">curl -L https://raw.githubusercontent.com/docker/compose/1.29.1/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™é‡Œå‡ºç°é”™è¯¯ï¼Œéœ€è¦ä¿®æ”¹è‡ªå·±çš„hostsæ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;199.232.68.133 raw.githubusercontent.com&quot; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure><h2 id="Dockeré•œåƒä»“åº“"><a href="#Dockeré•œåƒä»“åº“" class="headerlink" title="Dockeré•œåƒä»“åº“"></a>Dockeré•œåƒä»“åº“</h2><p>æ­å»ºé•œåƒä»“åº“å¯ä»¥åŸºäºDockerå®˜æ–¹æä¾›çš„DockerRegistryæ¥å®ç°ã€‚</p><p>å®˜ç½‘åœ°å€ï¼š<a href="https://hub.docker.com/_/registry">https://hub.docker.com/_/registry</a></p><p><strong>ç®€åŒ–ç‰ˆé•œåƒä»“åº“</strong></p><p>Dockerå®˜æ–¹çš„Docker Registryæ˜¯ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„Dockeré•œåƒä»“åº“ï¼Œå…·å¤‡ä»“åº“ç®¡ç†çš„å®Œæ•´åŠŸèƒ½ï¼Œä½†æ˜¯æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢ã€‚</p><p>æ­å»ºæ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">    --restart=always \</span><br><span class="line">    --name registry \</span><br><span class="line">    -p 5000:5000 \</span><br><span class="line">    -v registry-data:/var/lib/registry \</span><br><span class="line">    registry</span><br></pre></td></tr></table></figure><p>å‘½ä»¤ä¸­æŒ‚è½½äº†ä¸€ä¸ªæ•°æ®å·registry-dataåˆ°å®¹å™¨å†…çš„&#x2F;var&#x2F;lib&#x2F;registry ç›®å½•ï¼Œè¿™æ˜¯ç§æœ‰é•œåƒåº“å­˜æ”¾æ•°æ®çš„ç›®å½•ã€‚</p><p>è®¿é—®<a href="http://yourip:5000/v2/_catalog">http://YourIp:5000/v2/_catalog</a> å¯ä»¥æŸ¥çœ‹å½“å‰ç§æœ‰é•œåƒæœåŠ¡ä¸­åŒ…å«çš„é•œåƒ</p><p><strong>å¸¦æœ‰å›¾å½¢åŒ–ç•Œé¢ç‰ˆæœ¬</strong></p><p>ä½¿ç”¨DockerComposeéƒ¨ç½²å¸¦æœ‰å›¾è±¡ç•Œé¢çš„DockerRegistryï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3.0&#x27;</span><br><span class="line">services:</span><br><span class="line">  registry:</span><br><span class="line">    image: registry</span><br><span class="line">    volumes:</span><br><span class="line">      - ./registry-data:/var/lib/registry</span><br><span class="line">  ui:</span><br><span class="line">    image: joxit/docker-registry-ui:static</span><br><span class="line">    ports:</span><br><span class="line">      - 8080:80</span><br><span class="line">    environment:</span><br><span class="line">      - REGISTRY_TITLE=ä¼ æ™ºæ•™è‚²ç§æœ‰ä»“åº“</span><br><span class="line">      - REGISTRY_URL=http://registry:5000</span><br><span class="line">    depends_on:</span><br><span class="line">      - registry</span><br></pre></td></tr></table></figure><p><strong>é…ç½®Dockerä¿¡ä»»åœ°å€</strong></p><p>æˆ‘ä»¬çš„ç§æœé‡‡ç”¨çš„æ˜¯httpåè®®ï¼Œé»˜è®¤ä¸è¢«Dockerä¿¡ä»»ï¼Œæ‰€ä»¥éœ€è¦åšä¸€ä¸ªé…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ‰“å¼€è¦ä¿®æ”¹çš„æ–‡ä»¶</span><br><span class="line">vi /etc/docker/daemon.json</span><br><span class="line"># æ·»åŠ å†…å®¹ï¼š</span><br><span class="line">&quot;insecure-registries&quot;:[&quot;http://192.168.150.101:8080&quot;]</span><br><span class="line"># é‡åŠ è½½</span><br><span class="line">systemctl daemon-reload</span><br><span class="line"># é‡å¯docker</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><h1 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h1><h2 id="å®‰è£…å’Œè®¤è¯†"><a href="#å®‰è£…å’Œè®¤è¯†" class="headerlink" title="å®‰è£…å’Œè®¤è¯†"></a>å®‰è£…å’Œè®¤è¯†</h2><p>Dockerä¸­å®‰è£…RabbitMQ 3.8.34</p><p>æ­¥éª¤1ï¼šæ‹‰å–RabbitMQ 3.8.34çš„é•œåƒæ–‡ä»¶</p><p>-â€”â€“</p><p>docker pull rabbitmq:3.8.34-management</p><p>-â€”â€“</p><p>æ­¥éª¤2ï¼šä½¿ç”¨Dockeråˆ›å»ºRabbitMQå®¹å™¨</p><p>-â€”â€“</p><p>mkdir &#x2F;data&#x2F;rabbitmq</p><p>-â€”â€“</p><p>docker run -p 15672:15672 -p 5672:5672 â€“name rabbitmq -v &#x2F;data&#x2F;rabbitmq:&#x2F;var&#x2F;lib&#x2F;rabbitmq -d rabbitmq:3.8.34-management</p><p>-â€”â€“</p><p>è¯´æ˜ï¼š</p><p>å‚æ•°<code>-p 15672:15672 -p 5672:5672</code>è¡¨ç¤ºå°†Dockerå®¹å™¨çš„15672å’Œ5672ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„15672å’Œ5672ç«¯å£ã€‚</p><p>å‚æ•°<code>--name rabbitmq</code>è¡¨ç¤ºç»™å®¹å™¨èµ·ä¸ªåå­—å«rabbitmqï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å‚æ•°<code>-v /data/rabbitmq:/var/lib/rabbitmq</code>è¡¨ç¤ºå°†å®¿ä¸»æœºçš„&#x2F;data&#x2F;rabbitmqç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„&#x2F;var&#x2F;lib&#x2F;rabbitmqç›®å½•ä¸Šï¼Œè¿™æ ·å¯ä»¥å®ç°æ•°æ®æŒä¹…åŒ–ã€‚</p><p>è¯´æ˜ï¼š</p><p>æ­¥éª¤3ï¼šè®¾ç½®RabbitMQå¼€æœºè‡ªå¯</p><p>-â€”â€“</p><p>docker update â€“restart&#x3D;always rabbitmq</p><p>-â€”â€“</p><p> ç„¶ådocker psæŸ¥çœ‹ä¸‹å®¹å™¨å†…æœ‰æ²¡æœ‰ï¼Œå°±å¯ä»¥æ‰“å¼€å¯¹åº”ç«¯å£ï¼ˆè¿™é‡Œæ˜¯15672ï¼Œå¦å¤–ä¸€ä¸ª5672åé¢è¯´ï¼‰ï¼Œrabbitmqé»˜è®¤æœ‰ä¸ªç”¨æˆ·ï¼Œè´¦å·å’Œå¯†ç å‡ä¸ºguest.ç™»è¿›å»ç•Œé¢ï¼š</p><p><img src="https://img2024.cnblogs.com/blog/3018339/202401/3018339-20240122015516126-890191137.png" alt="img"></p><h3 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h3><p>åœ¨Queuesï¼ˆé˜Ÿåˆ—é‡Œï¼‰æ‰¾åˆ°Add a new Queueæ–°å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œéšä¾¿å–ä¸ªåå­—å…¶å®ƒçš„å…ˆé»˜è®¤ã€‚è¿™æ ·æ–°å»ºä¸¤ä¸ªé˜Ÿåˆ—ï¼Œå†åœ¨Exchangsï¼ˆäº¤æ¢æœºï¼‰é‡Œæ‰¾åˆ°amq.fanoutè¿›å»ï¼Œåœ¨publish messageé‡Œçš„Payloadéšä¾¿è¾“ç‚¹ä¸œè¥¿ç„¶åpushï¼Œä¼šæŠ¥é”™æç¤ºæ— è·¯ç”±ï¼Œå› ä¸ºmqæ˜¯ä»ç”¨æˆ·â€“&gt;äº¤æ¢æœºâ€“&gt;é˜Ÿåˆ—çš„é¡ºåºèµ°çš„ï¼Œè¯¥äº¤æ¢æœºå’Œé˜Ÿåˆ—æ²¡æœ‰ç»‘å®šï¼Œæ‰€ä»¥å°±åœ¨BINDINGè¿™é‡Œå…ˆç»‘å®šåˆšåˆšçš„hello.quesues1ï¼Œç„¶åå†å‘é€å°±æˆåŠŸäº†ï¼Œåœ¨queuesé‡Œä¹Ÿå¯ä»¥çœ‹åˆ°ç»‘å®šçš„å…³ç³»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springcloudå¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloudå¾®æœåŠ¡å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ã€Feign,Gatewayã€‘</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/java/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E3%80%90Feign-Gateway%E3%80%91/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/java/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E3%80%90Feign-Gateway%E3%80%91/</url>
      
        <content type="html"><![CDATA[<h2 id="Feign"><a href="#Feign" class="headerlink" title="Feign"></a>Feign</h2><p>å…ˆæ¥çœ‹æˆ‘ä»¬ä»¥å‰åˆ©ç”¨RestTemplateå‘èµ·è¿œç¨‹è°ƒç”¨çš„ä»£ç ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001154734923-610310863.png" alt="img"></p><p>å­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š</p><p>â€¢ä»£ç å¯è¯»æ€§å·®ï¼Œç¼–ç¨‹ä½“éªŒä¸ç»Ÿä¸€</p><p>â€¢å‚æ•°å¤æ‚URLéš¾ä»¥ç»´æŠ¤</p><p>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œå®˜æ–¹åœ°å€ï¼š<a href="https://github.com/OpenFeign/feign">https://github.com/OpenFeign/feign</a></p><p>å…¶ä½œç”¨å°±æ˜¯å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€ï¼Œè§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚</p><h3 id="åŸºäºfeignè¿œç¨‹è°ƒç”¨"><a href="#åŸºäºfeignè¿œç¨‹è°ƒç”¨" class="headerlink" title="åŸºäºfeignè¿œç¨‹è°ƒç”¨"></a>åŸºäºfeignè¿œç¨‹è°ƒç”¨</h3><p>å…ˆåœ¨order-serviceå¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ OrderApplicationå¼•å…¥è‡ªåŠ¨è£…é…çš„å¼€å…³@EnableFeignClients</p><p>ç„¶ååœ¨ order-serviceé‡Œæ–°å»ºä¸€ä¸ªæ¥å£å¹¶ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(&quot;userservice&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€å°±å¯ä»¥åœ¨OrderService é‡Œå°†åŸæ¥çš„å‘é€è¯·æ±‚ä»£ç æ³¨é‡Šæ‰æ¢æˆæ–°çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 2.åˆ©ç”¨RestTemplateå‘é€httpè¯·æ±‚ï¼ŒæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line"><span class="comment">//        String url= &quot;http://userservice/user/&quot;+ order.getUserId();</span></span><br><span class="line"><span class="comment">//        User user = restTemplate.getForObject(url, User.class);</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span>userClient.findById(order.getUserId());</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰é…ç½®"><a href="#è‡ªå®šä¹‰é…ç½®" class="headerlink" title="è‡ªå®šä¹‰é…ç½®"></a>è‡ªå®šä¹‰é…ç½®</h3><p>Feignå¯ä»¥æ”¯æŒå¾ˆå¤šçš„è‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š   </p><table><thead><tr><th>ç±»å‹</th><th>ä½œç”¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>feign.Logger.Level</td><td>ä¿®æ”¹æ—¥å¿—çº§åˆ«</td><td>åŒ…å«å››ç§ä¸åŒçš„çº§åˆ«ï¼šNONEã€BASICã€HEADERSã€FULL</td></tr><tr><td>feign.codec.Decoder</td><td>å“åº”ç»“æœçš„è§£æå™¨</td><td>httpè¿œç¨‹è°ƒç”¨çš„ç»“æœåšè§£æï¼Œä¾‹å¦‚è§£æjsonå­—ç¬¦ä¸²ä¸ºjavaå¯¹è±¡</td></tr><tr><td>feign.codec.Encoder</td><td>è¯·æ±‚å‚æ•°ç¼–ç </td><td>å°†è¯·æ±‚å‚æ•°ç¼–ç ï¼Œä¾¿äºé€šè¿‡httpè¯·æ±‚å‘é€</td></tr><tr><td>feign. Contract</td><td>æ”¯æŒçš„æ³¨è§£æ ¼å¼</td><td>é»˜è®¤æ˜¯SpringMVCçš„æ³¨è§£</td></tr><tr><td>feign. Retryer</td><td>å¤±è´¥é‡è¯•æœºåˆ¶</td><td>è¯·æ±‚å¤±è´¥çš„é‡è¯•æœºåˆ¶ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ï¼Œä¸è¿‡ä¼šä½¿ç”¨Ribbonçš„é‡è¯•</td></tr></tbody></table><p>â€‹<br>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼å°±èƒ½æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨ï¼Œå¦‚æœè¦è‡ªå®šä¹‰æ—¶ï¼Œåªéœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„@Beanè¦†ç›–é»˜è®¤Beanå³å¯ã€‚</p><p>ä¸‹é¢ä»¥æ—¥å¿—ä¸ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•è‡ªå®šä¹‰é…ç½®ã€‚</p><p><strong>é…ç½®æ–‡ä»¶æ–¹å¼</strong><br>åŸºäºé…ç½®æ–‡ä»¶ä¿®æ”¹feignçš„æ—¥å¿—çº§åˆ«å¯ä»¥é’ˆå¯¹å•ä¸ªæœåŠ¡ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span>  </span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span> </span><br><span class="line">      <span class="attr">userservice:</span> <span class="comment"># é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½®</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">FULL</span> <span class="comment">#  æ—¥å¿—çº§åˆ« </span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é’ˆå¯¹æ‰€æœ‰æœåŠ¡ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span>  </span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span> </span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># è¿™é‡Œç”¨defaultå°±æ˜¯å…¨å±€é…ç½®ï¼Œå¦‚æœæ˜¯å†™æœåŠ¡åç§°ï¼Œåˆ™æ˜¯é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½®</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">FULL</span> <span class="comment">#  æ—¥å¿—çº§åˆ« </span></span><br></pre></td></tr></table></figure><p>è€Œæ—¥å¿—çš„çº§åˆ«åˆ†ä¸ºå››ç§ï¼š</p><p>NONEï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚</p><p>BASICï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´</p><p>HEADERSï¼šåœ¨BASICçš„åŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯</p><p>FULLï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ã€‚</p><p><strong>Javaä»£ç æ–¹å¼</strong><br>ä¹Ÿå¯ä»¥åŸºäºJavaä»£ç æ¥ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Œå…ˆå£°æ˜ä¸€ä¸ªç±»ï¼Œç„¶åå£°æ˜ä¸€ä¸ªLogger.Levelçš„å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultFeignConfiguration</span>  &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.Level <span class="title function_">feignLogLevel</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.BASIC; <span class="comment">// æ—¥å¿—çº§åˆ«ä¸ºBASIC</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦å…¨å±€ç”Ÿæ•ˆï¼Œå°†å…¶æ”¾åˆ°å¯åŠ¨ç±»çš„@EnableFeignClientsè¿™ä¸ªæ³¨è§£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯å±€éƒ¨ç”Ÿæ•ˆï¼Œåˆ™æŠŠå®ƒæ”¾åˆ°æ¥å£å¯¹åº”çš„@FeignClientè¿™ä¸ªæ³¨è§£ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = &quot;userservice&quot;, configuration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></table></figure><p>å°±æ˜¯ä¸€ä¸ªè®°å½•æ—¥å¿—çš„æ–¹å¼</p><h3 id="Feignä¼˜åŒ–"><a href="#Feignä¼˜åŒ–" class="headerlink" title="Feignä¼˜åŒ–"></a>Feignä¼˜åŒ–</h3><p>Feignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚å…¶åº•å±‚å®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š</p><p>â€¢URLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ± </p><p>â€¢Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ± </p><p>â€¢OKHttpï¼šæ”¯æŒè¿æ¥æ± </p><p>å› æ­¤æé«˜Feignçš„æ€§èƒ½ä¸»è¦æ‰‹æ®µå°±æ˜¯ä½¿ç”¨è¿æ¥æ± ä»£æ›¿é»˜è®¤çš„URLConnectionã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ç”¨Apacheçš„HttpClientæ¥æ¼”ç¤ºã€‚</p><p>1ï¼‰å¼•å…¥ä¾èµ–</p><p>åœ¨order-serviceçš„pomæ–‡ä»¶ä¸­å¼•å…¥Apacheçš„HttpClientä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--httpClientçš„ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ï¼‰é…ç½®è¿æ¥æ± </p><p>åœ¨order-serviceçš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># defaultå…¨å±€çš„é…ç½®</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">BASIC</span> <span class="comment"># æ—¥å¿—çº§åˆ«ï¼ŒBASICå°±æ˜¯åŸºæœ¬çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯feignå¯¹HttpClientçš„æ”¯æŒ</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200</span> <span class="comment"># æœ€å¤§çš„è¿æ¥æ•°</span></span><br><span class="line">    <span class="attr">max-connections-per-route:</span> <span class="number">50</span> <span class="comment"># æ¯ä¸ªè·¯å¾„çš„æœ€å¤§è¿æ¥æ•°</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼ŒFeignçš„ä¼˜åŒ–ï¼š</p><p>1.æ—¥å¿—çº§åˆ«å°½é‡ç”¨basic</p><p>2.ä½¿ç”¨HttpClientæˆ–OKHttpä»£æ›¿URLConnection</p><p>â‘  å¼•å…¥feign-httpClientä¾èµ–</p><p>â‘¡ é…ç½®æ–‡ä»¶å¼€å¯httpClientåŠŸèƒ½ï¼Œè®¾ç½®è¿æ¥æ± å‚æ•°</p><h2 id="Gatewayç½‘å…³"><a href="#Gatewayç½‘å…³" class="headerlink" title="Gatewayç½‘å…³"></a>Gatewayç½‘å…³</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦ç½‘å…³ï¼Ÿ</h3><p>Gatewayç½‘å…³æ˜¯æˆ‘ä»¬æœåŠ¡çš„å®ˆé—¨ç¥ï¼Œæ‰€æœ‰å¾®æœåŠ¡çš„ç»Ÿä¸€å…¥å£ã€‚</p><p>ç½‘å…³çš„<strong>æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§ï¼š</strong></p><ul><li>è¯·æ±‚è·¯ç”±</li><li>æƒé™æ§åˆ¶</li><li>é™æµ</li></ul><p>æ¶æ„å›¾ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001163522841-408645751.png" alt="img"></p><p><strong>æƒé™æ§åˆ¶ï¼š</strong>ç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯æ˜¯å¦æœ‰è¯·æ±‚èµ„æ ¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ‹¦æˆªã€‚</p><p><strong>è·¯ç”±å’Œè´Ÿè½½å‡è¡¡ï¼š</strong>ä¸€åˆ‡è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡gatewayï¼Œä½†ç½‘å…³ä¸å¤„ç†ä¸šåŠ¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŸä¸ªå¾®æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè·¯ç”±ã€‚å½“ç„¶è·¯ç”±çš„ç›®æ ‡æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œè¿˜éœ€è¦åšè´Ÿè½½å‡è¡¡ã€‚</p><p><strong>é™æµï¼š</strong>å½“è¯·æ±‚æµé‡è¿‡é«˜æ—¶ï¼Œåœ¨ç½‘å…³ä¸­æŒ‰ç…§ä¸‹æµçš„å¾®æœåŠ¡èƒ½å¤Ÿæ¥å—çš„é€Ÿåº¦æ¥æ”¾è¡Œè¯·æ±‚ï¼Œé¿å…æœåŠ¡å‹åŠ›è¿‡å¤§ã€‚</p><p>åœ¨SpringCloudä¸­ç½‘å…³çš„å®ç°åŒ…æ‹¬ä¸¤ç§ï¼š</p><p><strong>gateway</strong></p><p><strong>zuul</strong></p><p>Zuulæ˜¯åŸºäºServletçš„å®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹ã€‚è€ŒSpringCloudGatewayåˆ™æ˜¯åŸºäºSpring5ä¸­æä¾›çš„WebFluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹çš„å®ç°ï¼Œå…·å¤‡æ›´å¥½çš„æ€§èƒ½ã€‚</p><h3 id="gatewayå¿«é€Ÿå…¥é—¨"><a href="#gatewayå¿«é€Ÿå…¥é—¨" class="headerlink" title="gatewayå¿«é€Ÿå…¥é—¨"></a>gatewayå¿«é€Ÿå…¥é—¨</h3><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¼”ç¤ºä¸‹ç½‘å…³çš„åŸºæœ¬è·¯ç”±åŠŸèƒ½ã€‚åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p><p>åˆ›å»ºSpringBootå·¥ç¨‹gatewayï¼Œå¼•å…¥ç½‘å…³ä¾èµ–<br>ç¼–å†™å¯åŠ¨ç±»<br>ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™<br>å¯åŠ¨ç½‘å…³æœåŠ¡è¿›è¡Œæµ‹è¯•<br>1ï¼‰åˆ›å»ºgatewayæœåŠ¡ï¼Œå¼•å…¥ä¾èµ–<br>åˆ›å»ºæœåŠ¡ï¼š<br><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001163622745-1004728121.png" alt="img"></p><p>ç„¶åå¼•å…¥ä¸¤ä¸ªä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç½‘å…³--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--nacosæœåŠ¡å‘ç°ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‡Œé¢å…ˆç¼–å†™ä¸€ä¸ªå¯åŠ¨ç±»ï¼Œå°±æ˜¯Applicationé‚£ä¸ªã€‚</p><p>ç„¶åç¼–å†™nacosåœ°å€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span> <span class="comment"># ç½‘å…³ç«¯å£</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span> <span class="comment"># æœåŠ¡åç§°</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># nacosåœ°å€</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment"># ç½‘å…³è·¯ç”±é…ç½®</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span>                 <span class="comment"># è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8081     # è·¯ç”±çš„ç›®æ ‡åœ°å€ httpå°±æ˜¯å›ºå®šåœ°å€</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://userservice</span>            <span class="comment"># è·¯ç”±çš„ç›®æ ‡åœ°å€ lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°</span></span><br><span class="line">          <span class="attr">predicates:</span>                      <span class="comment"># è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span>                <span class="comment"># è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">order-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://orderservice</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/order/**</span>        </span><br></pre></td></tr></table></figure><p> è¿™æ—¶å»è®¿é—®10010ç«¯å£çš„&#x2F;order&#x2F;101å’Œ&#x2F;user&#x2F;1çš„å°±å¯ä»¥æŸ¥è¯¢åˆ°å°±æˆåŠŸäº†ã€‚å¯¹äº†è¿™é‡Œçš„urlçš„åå­—è¦å’Œè‡ªå·±ä¹‹å‰å†™çš„spring:application:nameçš„å€¼ä¸€æ ·å“¦ï¼Œä¸ç„¶ä¼šæŠ¥503é”™è¯¯</p><p>æ•´ä¸ªè®¿é—®çš„æµç¨‹å¦‚ä¸‹ï¼šï¼ˆgatewayç›¸å½“äºä¸€ä¸ªä¸­ç»§å™¨å§ï¼‰</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231002165440295-1320621545.png" alt="img"></p><h3 id="æ–­è¨€å·¥å‚"><a href="#æ–­è¨€å·¥å‚" class="headerlink" title="æ–­è¨€å·¥å‚"></a>æ–­è¨€å·¥å‚</h3><p>æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„æ–­è¨€è§„åˆ™åªæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šè¢«Predicate Factoryè¯»å–å¹¶å¤„ç†ï¼Œè½¬å˜ä¸ºè·¯ç”±åˆ¤æ–­çš„æ¡ä»¶</p><p>ä¾‹å¦‚Path&#x3D;&#x2F;user&#x2F;**æ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”±</p><p>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactoryç±»æ¥</p><p>å¤„ç†çš„ï¼Œåƒè¿™æ ·çš„æ–­è¨€å·¥å‚åœ¨SpringCloudGatewayè¿˜æœ‰åå‡ ä¸ª:</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231002165641393-33329425.png" alt="img"></p><p>æˆ‘ä»¬åªéœ€è¦æŒæ¡Pathè¿™ç§è·¯ç”±å·¥ç¨‹å°±å¯ä»¥äº†ã€‚</p><h3 id="è¿‡æ»¤å™¨GatewayFilterï¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œè¿‡æ»¤"><a href="#è¿‡æ»¤å™¨GatewayFilterï¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œè¿‡æ»¤" class="headerlink" title="è¿‡æ»¤å™¨GatewayFilterï¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œè¿‡æ»¤"></a>è¿‡æ»¤å™¨GatewayFilterï¼šå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œè¿‡æ»¤</h3><p><strong>å®ƒå’Œ8.3.1è®²è¿°çš„æ–­è¨€å·¥å‚ä¸€æ ·ï¼Œéƒ½é…ç½®åœ¨yamlé‡Œ</strong></p><p>GatewayFilter å’Œ 8.3.1è®²è¿°çš„æ–­è¨€å·¥å‚çš„åŒºåˆ«ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231002185130917-826919377.png" alt="img"></p><table><thead><tr><th>åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>ç»™å½“å‰è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´</td></tr><tr><td>RemoveRequestHeader</td><td>ç§»é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªè¯·æ±‚å¤´</td></tr><tr><td>AddResponseHeader</td><td>ç»™å“åº”ç»“æœä¸­æ·»åŠ ä¸€ä¸ªå“åº”å¤´</td></tr><tr><td>RemoveResponseHeader</td><td>ä»å“åº”ç»“æœä¸­ç§»é™¤æœ‰ä¸€ä¸ªå“åº”å¤´</td></tr><tr><td>RequestRateLimiter</td><td>é™åˆ¶è¯·æ±‚çš„æµé‡</td></tr></tbody></table><p>æ¯”å¦‚AddRequestHeaderï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/user/**</span> </span><br><span class="line">        <span class="attr">filters:</span> <span class="comment"># è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span> <span class="comment"># æ·»åŠ è¯·æ±‚å¤´</span></span><br></pre></td></tr></table></figure><p> ç„¶åå†åœ¨userserviceçš„Controlleré‡Œçš„è¯·æ±‚æ¥å£çš„æ–¹æ³•é‡Œæ·»åŠ ä¸€ä¸ª@RequestHeaderçš„è¯·æ±‚å¤´</p><p>å¦‚æœè¦å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½ç”Ÿæ•ˆï¼Œåˆ™å¯ä»¥å°†è¿‡æ»¤å™¨å·¥å‚å†™åˆ°defaultä¸‹ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/user/**</span></span><br><span class="line">      <span class="attr">default-filters:</span> <span class="comment"># é»˜è®¤è¿‡æ»¤é¡¹</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span> </span><br></pre></td></tr></table></figure><p>æ€»ç»“</p><p>è¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>â‘  å¯¹è·¯ç”±çš„è¯·æ±‚æˆ–å“åº”åšåŠ å·¥å¤„ç†ï¼Œæ¯”å¦‚æ·»åŠ è¯·æ±‚å¤´</p><p>â‘¡ é…ç½®åœ¨è·¯ç”±ä¸‹çš„è¿‡æ»¤å™¨åªå¯¹å½“å‰è·¯ç”±çš„è¯·æ±‚ç”Ÿæ•ˆ</p><p>defaultFiltersçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>â‘  å¯¹æ‰€æœ‰è·¯ç”±éƒ½ç”Ÿæ•ˆçš„è¿‡æ»¤å™¨</p><h3 id="å…¨å±€è¿‡æ»¤å™¨"><a href="#å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="å…¨å±€è¿‡æ»¤å™¨"></a>å…¨å±€è¿‡æ»¤å™¨</h3><p>ä¸Šä¸€èŠ‚å­¦ä¹ çš„è¿‡æ»¤å™¨ï¼Œç½‘å…³æä¾›äº†31ç§ï¼Œä½†æ¯ä¸€ç§è¿‡æ»¤å™¨çš„ä½œç”¨éƒ½æ˜¯å›ºå®šçš„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‹¦æˆªè¯·æ±‚ï¼Œåšè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘åˆ™æ²¡åŠæ³•å®ç°ã€‚</p><p>å…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨ä¹Ÿæ˜¯å¤„ç†ä¸€åˆ‡è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡å“åº”ï¼Œä¸GatewayFilterçš„ä½œç”¨ä¸€æ ·ã€‚åŒºåˆ«åœ¨äºGatewayFilteré€šè¿‡é…ç½®å®šä¹‰ï¼Œå¤„ç†é€»è¾‘æ˜¯å›ºå®šçš„ï¼›è€ŒGlobalFilterçš„é€»è¾‘éœ€è¦è‡ªå·±å†™ä»£ç å®ç°ã€‚</p><p>å®šä¹‰æ–¹å¼æ˜¯å®ç°GlobalFilteræ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GlobalFilter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å¤„ç†å½“å‰è¯·æ±‚ï¼Œæœ‰å¿…è¦çš„è¯é€šè¿‡&#123;<span class="doctag">@link</span> GatewayFilterChain&#125;å°†è¯·æ±‚äº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨å¤„ç†</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exchange è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œé‡Œé¢å¯ä»¥è·å–Requestã€Responseç­‰ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chain ç”¨æ¥æŠŠè¯·æ±‚å§”æ‰˜ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> Mono&lt;Void&gt;&#125; è¿”å›æ ‡ç¤ºå½“å‰è¿‡æ»¤å™¨ä¸šåŠ¡ç»“æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"><a href="#è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨"></a>è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨</h3><p>éœ€æ±‚ï¼šå®šä¹‰å…¨å±€è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œåˆ¤æ–­è¯·æ±‚çš„å‚æ•°æ˜¯å¦æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼š</p><ul><li>å‚æ•°ä¸­æ˜¯å¦æœ‰authorizationï¼Œ</li><li>authorizationå‚æ•°å€¼æ˜¯å¦ä¸ºadmin</li></ul><p>å¦‚æœåŒæ—¶æ»¡è¶³åˆ™æ”¾è¡Œï¼Œå¦åˆ™æ‹¦æˆª</p><p>å®ç°ï¼š</p><p>åœ¨gatewayä¸­å®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.gateway.filters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.server.ServerWebExchange;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Order(-1)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthorizeFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; params = exchange.getRequest().getQueryParams();</span><br><span class="line">        <span class="comment">// 2.è·å–authorizationå‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">auth</span> <span class="operator">=</span> params.getFirst(<span class="string">&quot;authorization&quot;</span>);</span><br><span class="line">        <span class="comment">// 3.æ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(auth)) &#123;</span><br><span class="line">            <span class="comment">// æ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 4.æ‹¦æˆª</span></span><br><span class="line">        <span class="comment">// 4.1.ç¦æ­¢è®¿é—®ï¼Œè®¾ç½®çŠ¶æ€ç </span></span><br><span class="line">        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);</span><br><span class="line">        <span class="comment">// 4.2.ç»“æŸå¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº"><a href="#è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº" class="headerlink" title="è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº"></a>è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº</h3><p>è¯·æ±‚è¿›å…¥ç½‘å…³ä¼šç¢°åˆ°ä¸‰ç±»è¿‡æ»¤å™¨ï¼šå½“å‰è·¯ç”±çš„è¿‡æ»¤å™¨ã€DefaultFilterã€GlobalFilter</p><p>è¯·æ±‚è·¯ç”±åï¼Œä¼šå°†å½“å‰è·¯ç”±è¿‡æ»¤å™¨å’ŒDefaultFilterã€GlobalFilterï¼Œåˆå¹¶åˆ°ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼ˆé›†åˆï¼‰ä¸­ï¼Œæ’åºåä¾æ¬¡æ‰§è¡Œæ¯ä¸ªè¿‡æ»¤å™¨ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231002204136914-1584634088.png" alt="img"></p><p>æ’åºçš„è§„åˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ¯ä¸€ä¸ªè¿‡æ»¤å™¨éƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªintç±»å‹çš„orderå€¼ï¼Œorderå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰§è¡Œé¡ºåºè¶Šé å‰ã€‚</p><p>GlobalFilteré€šè¿‡å®ç°Orderedæ¥å£ï¼Œæˆ–è€…æ·»åŠ @Orderæ³¨è§£æ¥æŒ‡å®šorderå€¼ï¼Œç”±æˆ‘ä»¬è‡ªå·±æŒ‡å®š</p><p>è·¯ç”±è¿‡æ»¤å™¨å’ŒdefaultFilterçš„orderç”±SpringæŒ‡å®šï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å£°æ˜é¡ºåºä»1é€’å¢ã€‚</p><p>å½“è¿‡æ»¤å™¨çš„orderå€¼ä¸€æ ·æ—¶ï¼Œä¼šæŒ‰ç…§ defaultFilter &gt; è·¯ç”±è¿‡æ»¤å™¨ &gt; GlobalFilterçš„é¡ºåºæ‰§è¡Œã€‚</p><p>è¯¦ç»†å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹æºç ï¼š</p><p>org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()æ–¹æ³•æ˜¯å…ˆåŠ è½½defaultFiltersï¼Œç„¶åå†åŠ è½½æŸä¸ªrouteçš„filtersï¼Œç„¶ååˆå¹¶ã€‚</p><p>org.springframework.cloud.gateway.handler.FilteringWebHandler#handle()æ–¹æ³•ä¼šåŠ è½½å…¨å±€è¿‡æ»¤å™¨ï¼Œä¸å‰é¢çš„è¿‡æ»¤å™¨åˆå¹¶åæ ¹æ®orderæ’åºï¼Œç»„ç»‡è¿‡æ»¤å™¨é“¾</p><h3 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="headerlink" title="è·¨åŸŸé—®é¢˜"></a>è·¨åŸŸé—®é¢˜</h3><p>è·¨åŸŸï¼šåŸŸåä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><p>åŸŸåä¸åŒï¼š <a href="http://www.taobao.com/">www.taobao.com</a> å’Œ <a href="http://www.taobao.org/">www.taobao.org</a> å’Œ <a href="http://www.jd.com/">www.jd.com</a> å’Œ miaosha.jd.com</p><p>åŸŸåç›¸åŒï¼Œç«¯å£ä¸åŒï¼šlocalhost:8080å’Œlocalhost8081</p><p>è·¨åŸŸé—®é¢˜ï¼šæµè§ˆå™¨ç¦æ­¢è¯·æ±‚çš„å‘èµ·è€…ä¸æœåŠ¡ç«¯å‘ç”Ÿè·¨åŸŸajaxè¯·æ±‚ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªçš„é—®é¢˜</p><p>è§£å†³æ–¹æ¡ˆï¼šCORSï¼Œä¸çŸ¥é“çš„å°ä¼™ä¼´å¯ä»¥æŸ¥çœ‹<a href="https://www.ruanyifeng.com/blog/2016/04/cors.html">https://www.ruanyifeng.com/blog/2016/04/cors.html</a></p><p><strong>æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜</strong></p><p>æ‰¾åˆ°è¯¾å‰èµ„æ–™çš„é¡µé¢æ–‡ä»¶ï¼šindex.html</p><p>æ”¾å…¥tomcatæˆ–è€…nginxè¿™æ ·çš„webæœåŠ¡å™¨ä¸­ï¼Œå¯åŠ¨å¹¶è®¿é—®ã€‚</p><p>å¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°çœ‹åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š</p><h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231002205314856-2122903230.png" alt="img"></h3><p>ä»localhost:8090è®¿é—®localhost:10010ï¼Œç«¯å£ä¸åŒï¼Œæ˜¾ç„¶æ˜¯è·¨åŸŸçš„è¯·æ±‚ã€‚</p><p><strong>è§£å†³è·¨åŸŸé—®é¢˜</strong></p><p>åœ¨gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="comment"># ã€‚ã€‚ã€‚</span></span><br><span class="line">      <span class="attr">globalcors:</span> <span class="comment"># å…¨å±€çš„è·¨åŸŸå¤„ç†</span></span><br><span class="line">        <span class="attr">add-to-simple-url-handler-mapping:</span> <span class="literal">true</span> <span class="comment"># è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªé—®é¢˜</span></span><br><span class="line">        <span class="attr">corsConfigurations:</span></span><br><span class="line">          <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOrigins:</span> <span class="comment"># å…è®¸å“ªäº›ç½‘ç«™çš„è·¨åŸŸè¯·æ±‚ </span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;http://localhost:8090&quot;</span></span><br><span class="line">            <span class="attr">allowedMethods:</span> <span class="comment"># å…è®¸çš„è·¨åŸŸajaxçš„è¯·æ±‚æ–¹å¼</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;GET&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;POST&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;DELETE&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;PUT&quot;</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;OPTIONS&quot;</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span> <span class="string">&quot;*&quot;</span> <span class="comment"># å…è®¸åœ¨è¯·æ±‚ä¸­æºå¸¦çš„å¤´ä¿¡æ¯</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦å…è®¸æºå¸¦cookie</span></span><br><span class="line">            <span class="attr">maxAge:</span> <span class="number">360000</span> <span class="comment"># è¿™æ¬¡è·¨åŸŸæ£€æµ‹çš„æœ‰æ•ˆæœŸ</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springcloudå¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¼€å‘é¡¹ç›®ã€Šè‹ç©¹å¤–å–ã€‹ï¼ˆäºŒï¼‰</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E4%B8%89/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€"><a href="#è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€" class="headerlink" title="è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€"></a>è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€</h2><p>å…ˆå»æˆ‘ä¹‹å‰å†™çš„åšå®¢â€œRedisæ•°æ®åº“å­¦ä¹ ç¬”è®°â€å­¦ä¹ Redisçš„åŸºæœ¬æ“ä½œã€‚</p><p>åœ¨configå±‚ä¸‹åˆ›å»ºRedisçš„é…ç½®ç±»ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ›å»ºrediså¯¹è±¡:&#123;&#125;&quot;</span>,redisConnectionFactory);</span><br><span class="line">        <span class="type">RedisTemplate</span> <span class="variable">redisTemplate</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®rediså·¥å‚å¯¹è±¡</span></span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        <span class="comment">//è®¾ç½®redisåºåˆ—åŒ–å™¨</span></span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> ç„¶åå†åœ¨controllerå±‚é‡Œé¢åˆ›å»ºshopåº—é“ºç®¡ç†çš„ç±»ï¼Œé‡Œé¢ç¼–å†™è®¾ç½®åº—é“ºçŠ¶æ€å’ŒæŸ¥è¯¢åº—é“ºçŠ¶æ€çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController(&quot;adminShopController&quot;)</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Api(tags = &quot;åº—é“ºç®¡ç†&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin/shop&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ShopController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;status&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">setStaus</span><span class="params">(<span class="meta">@PathVariable</span> Integer status)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;è®¾ç½®åº—é“ºè¥ä¸šçŠ¶æ€ï¼š&#123;&#125;&quot;</span>,status ==<span class="number">1</span> ?<span class="string">&quot;è¥ä¸šä¸­&quot;</span>: <span class="string">&quot;æ‰“çƒŠä¸­&quot;</span>);</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;SHOP_STATUS&quot;</span>,status);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/status&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;è·å–åº—é“ºè¥ä¸šçŠ¶æ€&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;Integer&gt; <span class="title function_">getStatus</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">shopStatus</span> <span class="operator">=</span> (Integer) redisTemplate.opsForValue().get(<span class="string">&quot;SHOP_STATUS&quot;</span>);</span><br><span class="line">        log.info(<span class="string">&quot;è·å–åº—é“ºè¥ä¸šçŠ¶æ€ï¼š&#123;&#125;&quot;</span>,shopStatus ==<span class="number">1</span> ?<span class="string">&quot;è¥ä¸šä¸­&quot;</span>: <span class="string">&quot;æ‰“çƒŠä¸­&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Result.success(shopStatus);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®°å¾—åœ¨ymlå’Œçš„-dev ymlé‡Œé¢é…ç½®redisçš„ç”¨æˆ·è¿æ¥ä¿¡æ¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="æ¥å£ç®¡ç†åˆ†å¼€ç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯"><a href="#æ¥å£ç®¡ç†åˆ†å¼€ç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯" class="headerlink" title="æ¥å£ç®¡ç†åˆ†å¼€ç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯"></a>æ¥å£ç®¡ç†åˆ†å¼€ç®¡ç†ç«¯å’Œç”¨æˆ·ç«¯</h2><p>Â·â€ƒâ€ƒåœ¨WebMvcConfigurationé‡Œé¢å¤åˆ¶ä¸€ä¸ªbeanæ³¨è§£ä¸‹çš„ä»£ç ï¼Œå¹¶åœ¨new Docketä¸‹ç¼–å†™.groupName(â€œç®¡ç†ç«¯æ¥å£&#x2F;ç”¨æˆ·ç«¯æ¥å£â€)ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡knife4jç”Ÿæˆæ¥å£æ–‡æ¡£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket1</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;å‡†å¤‡ç”Ÿæˆæ¥å£æ–‡æ¡£...&quot;</span>);</span><br><span class="line">        <span class="type">ApiInfo</span> <span class="variable">apiInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;2.0&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">Docket</span> <span class="variable">docket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .groupName(<span class="string">&quot;ç®¡ç†ç«¯æ¥å£&quot;</span>)</span><br><span class="line">                .apiInfo(apiInfo)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.sky.controller.admin&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> docket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket2</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;å‡†å¤‡ç”Ÿæˆæ¥å£æ–‡æ¡£...&quot;</span>);</span><br><span class="line">        <span class="type">ApiInfo</span> <span class="variable">apiInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;2.0&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">Docket</span> <span class="variable">docket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .groupName(<span class="string">&quot;ç”¨æˆ·ç«¯æ¥å£&quot;</span>)</span><br><span class="line">                .apiInfo(apiInfo)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.sky.controller.user&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> docket;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åœ¨é¡¹ç›®æ¥å£æ–‡æ¡£é‡Œé¢å°±å¯ä»¥åŒºåˆ†å¼€è¿™ä¸¤ä¸ªç«¯äº†ã€‚</p><h2 id="å¾®ä¿¡å°ç¨‹åºå¼€å‘"><a href="#å¾®ä¿¡å°ç¨‹åºå¼€å‘" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå¼€å‘"></a>å¾®ä¿¡å°ç¨‹åºå¼€å‘</h2><p>ä¸‹è½½å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç„¶åå°†èµ„æ–™é‡Œé¢çš„å‰ç«¯æ–‡ä»¶å¯¼å…¥è¿›æ¥ï¼Œè¾“å…¥è‡ªå·±çš„openidï¼ˆopenidå’Œå°ç¨‹åºappidå’Œsecretè‡ªå·±å»ç½‘ä¸Šæœï¼‰ï¼Œå¾®ä¿¡å°ç¨‹åºå¼€å‘æˆ‘åšå®¢ä¹‹å‰ä¹Ÿå†™è¿‡ã€‚</p><p>å°†èµ„æ–™é‡Œé¢çš„ç”¨æˆ·ç«¯æ–‡ä»¶å¯¼å…¥è¿›å¯¹åº”serveræ–‡ä»¶å¤¹é‡Œ</p><h2 id="Spring-Cache"><a href="#Spring-Cache" class="headerlink" title="Spring Cache"></a>Spring Cache</h2><p>mavenåæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¸¸ç”¨æ³¨è§£ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230921112026071-326743100.png" alt="img"></p><p> åœ¨è‹ç©¹å¤–å–é¡¹ç›®ä¸­çš„åº”ç”¨ï¼šç”¨äºç¼“å­˜å¥—é¤æ•°æ®ï¼Œåªéœ€åœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥@EnableCachingæ³¨è§£ï¼Œåœ¨adminçš„SetmealControlleré‡Œé¢çš„åˆ æ”¹å’Œå¯åŠ¨ç¦ç”¨ä¸ŠåŠ ä¸Š@CacheEvict(cacheNames &#x3D; â€œsetmealCacheâ€,allEntries &#x3D; true)æ³¨è§£ï¼Œå¢åŠ å¥—é¤ä¸Šæ·»åŠ @CacheEvict(cacheNames &#x3D; â€œsetmealCacheâ€,key&#x3D;â€#setmealDTO.categoryIdâ€)æ³¨è§£ã€‚åœ¨userçš„SetmealControllerçš„æ ¹æ®idæŸ¥è¯¢å¥—é¤ä¸Šæ·»åŠ @Cacheable(cacheNames &#x3D;â€setmealCacheâ€,key&#x3D;â€#categoryIdâ€)</p><h2 id="è´­ç‰©è½¦ç®¡ç†"><a href="#è´­ç‰©è½¦ç®¡ç†" class="headerlink" title="è´­ç‰©è½¦ç®¡ç†"></a>è´­ç‰©è½¦ç®¡ç†</h2><p>åé¢çš„è´­ç‰©è½¦ç®¡ç†å°±è·Ÿä¹‹å‰çš„å·®ä¸å¤šäº†ï¼Œç›´æ¥ä¸Šimplçš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ShoppingCartMapper shoppingCartMapper;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> SetmealMapper setmealMapper;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> DishMapper dishMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ç‰©å“</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> shoppingCartDTO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addShoppingCart</span><span class="params">(ShoppingCartDTO shoppingCartDTO)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å½“å‰åŠ å…¥è´­ç‰©è½¦çš„å•†å“æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    ShoppingCart shoppingCart=<span class="keyword">new</span> <span class="title class_">ShoppingCart</span>();</span><br><span class="line">    BeanUtils.copyProperties(shoppingCartDTO,shoppingCart);</span><br><span class="line">    Long userId= BaseContext.getCurrentId();</span><br><span class="line">    shoppingCart.setUserId(userId);</span><br><span class="line"></span><br><span class="line">    List&lt;ShoppingCart&gt; list =shoppingCartMapper.list(shoppingCart);</span><br><span class="line">    <span class="comment">//å¦‚æœå·²ç»å­˜åœ¨äº†ï¼Œåªéœ€è¦å°†æ•°é‡å¢åŠ </span></span><br><span class="line">    <span class="keyword">if</span> (list !=<span class="literal">null</span>&amp;&amp; list.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        ShoppingCart cart=list.get(<span class="number">0</span>);</span><br><span class="line">        cart.setNumber(cart.getNumber()+<span class="number">1</span>);</span><br><span class="line">        shoppingCartMapper.updateById(cart);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯ä¸ºèœå“è¿˜æ˜¯å¥—é¤</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">dishId</span> <span class="operator">=</span> shoppingCart.getDishId();</span><br><span class="line">        <span class="keyword">if</span> (dishId !=<span class="literal">null</span>)&#123;</span><br><span class="line">            Dish dish=dishMapper.getById(dishId);</span><br><span class="line">            shoppingCart.setName(dish.getName());</span><br><span class="line">            shoppingCart.setImage(dish.getImage());</span><br><span class="line">            shoppingCart.setAmount(dish.getPrice());</span><br><span class="line"></span><br><span class="line">            shoppingCart.setNumber(<span class="number">1</span>);</span><br><span class="line">            shoppingCart.setCreateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ä¸ºå¥—é¤</span></span><br><span class="line">            Long setmealId=shoppingCart.getSetmealId();</span><br><span class="line">            Setmeal setmeal=setmealMapper.pageById(setmealId);</span><br><span class="line">            shoppingCart.setName(setmeal.getName());</span><br><span class="line">            shoppingCart.setImage(setmeal.getImage());</span><br><span class="line">            shoppingCart.setAmount(setmeal.getPrice());</span><br><span class="line"></span><br><span class="line">            shoppingCart.setNumber(<span class="number">1</span>);</span><br><span class="line">            shoppingCart.setCreateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        shoppingCartMapper.insert(shoppingCart);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¯¼å…¥æ”¶è´§åœ°å€æ¥å£ï¼ˆAdressBookï¼‰å’Œç”¨æˆ·ä¸‹å•æ¥å£ä»£ç ï¼ˆOrderï¼‰ï¼Œä»£ç çš„è¯å°±è‡ªå·±å»ä¸‹è½½çœ‹çœ‹å§ï¼Œæ²¡å•¥æ–°æŠ€æœ¯ã€‚</strong></p><p>é™¤äº†ç”¨æˆ·ä¸‹å•çš„ ServiceImplçš„ä»£ç æœ‰ç‚¹éš¾ï¼šå…¶ä»–çš„è¿˜å°†å°± </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·ä¸‹å•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ordersSubmitDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> OrderSubmitVO <span class="title function_">submitOrder</span><span class="params">(OrdersSubmitDTO ordersSubmitDTO)</span> &#123;</span><br><span class="line">        <span class="comment">//å¼‚å¸¸æƒ…å†µçš„å¤„ç†ï¼ˆæ”¶è´§åœ°å€ä¸ºç©ºã€è´­ç‰©è½¦ä¸ºç©ºï¼‰</span></span><br><span class="line">        <span class="type">AddressBook</span> <span class="variable">addressBook</span> <span class="operator">=</span> addressBookMapper.getById(ordersSubmitDTO.getAddressBookId());</span><br><span class="line">        <span class="keyword">if</span> (addressBook == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AddressBookBusinessException</span>(MessageConstant.ADDRESS_BOOK_IS_NULL);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line">        <span class="type">ShoppingCart</span> <span class="variable">shoppingCart</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShoppingCart</span>();</span><br><span class="line">        shoppingCart.setUserId(userId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è´­ç‰©è½¦æ•°æ®</span></span><br><span class="line">        List&lt;ShoppingCart&gt; shoppingCartList = shoppingCartMapper.list(shoppingCart);</span><br><span class="line">        <span class="keyword">if</span> (shoppingCartList == <span class="literal">null</span> || shoppingCartList.size() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ShoppingCartBusinessException</span>(MessageConstant.SHOPPING_CART_IS_NULL);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ„é€ è®¢å•æ•°æ®</span></span><br><span class="line">        <span class="type">Orders</span> <span class="variable">order</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Orders</span>();</span><br><span class="line">        BeanUtils.copyProperties(ordersSubmitDTO,order);</span><br><span class="line">        order.setPhone(addressBook.getPhone());</span><br><span class="line">        order.setAddress(addressBook.getDetail());</span><br><span class="line">        order.setConsignee(addressBook.getConsignee());</span><br><span class="line">        order.setNumber(String.valueOf(System.currentTimeMillis()));</span><br><span class="line">        order.setUserId(userId);</span><br><span class="line">        order.setStatus(Orders.PENDING_PAYMENT);</span><br><span class="line">        order.setPayStatus(Orders.UN_PAID);</span><br><span class="line">        order.setOrderTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘è®¢å•è¡¨æ’å…¥1æ¡æ•°æ®</span></span><br><span class="line">        orderMapper.insert(order);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¢å•æ˜ç»†æ•°æ®</span></span><br><span class="line">        List&lt;OrderDetail&gt; orderDetailList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (ShoppingCart cart : shoppingCartList) &#123;</span><br><span class="line">            <span class="type">OrderDetail</span> <span class="variable">orderDetail</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OrderDetail</span>();</span><br><span class="line">            BeanUtils.copyProperties(cart, orderDetail);</span><br><span class="line">            orderDetail.setOrderId(order.getId());</span><br><span class="line">            orderDetailList.add(orderDetail);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘æ˜ç»†è¡¨æ’å…¥næ¡æ•°æ®</span></span><br><span class="line">        orderDetailMapper.insertBatch(orderDetailList);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¸…ç†è´­ç‰©è½¦ä¸­çš„æ•°æ®</span></span><br><span class="line">        shoppingCartMapper.deleteByUserId(userId);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…è¿”å›ç»“æœ</span></span><br><span class="line">        <span class="type">OrderSubmitVO</span> <span class="variable">orderSubmitVO</span> <span class="operator">=</span> OrderSubmitVO.builder()</span><br><span class="line">                .id(order.getId())</span><br><span class="line">                .orderNumber(order.getNumber())</span><br><span class="line">                .orderAmount(order.getAmount())</span><br><span class="line">                .orderTime(order.getOrderTime())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> orderSubmitVO;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±é¡ºä¾¿è¡¥å……ä¸‹@Transactionalæ³¨è§£ï¼š</p><p>äº‹åŠ¡å¤„ç†translational<br>æ¦‚å¿µï¼šæŒ‡ä¸€ç»„åŸå­æ€§çš„æ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ</p><p>ç‰¹æ€§ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§</p><p>åº”ç”¨åœºæ™¯ï¼šå½“ä¸€ç»„æ“ä½œéœ€è¦åŒæ—¶æ‰§è¡Œæ—¶ã€‚â€“é‡‘èè¡Œä¸šã€ç”µå•†å¹³å°ã€ç‰©æµè¡Œä¸š</p><p>å¼€å‘æµç¨‹ï¼šåœ¨éœ€è¦äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸ŠåŠ æ³¨è§£ï¼š@Transactionalï¼ˆï¼‰</p><p>rollbackForå±æ€§:å›æ»šæŒ‡å®šç±»å‹çš„å¼‚å¸¸ï¼š@Transactional(rollbackFor &#x3D;<br>Exception.class)</p><p>Propagationå±æ€§ ï¼š</p><p>äº‹åŠ¡ä¼ æ’­ï¼šå½“ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªäº‹åŠ¡æ–¹æ³•åº”è¯¥å¦‚ä½•è¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚</p><p>REQUIRED â€“ ã€é»˜è®¤å€¼ã€‘éœ€è¦äº‹åŠ¡ï¼Œæœ‰åˆ™åŠ å…¥ï¼Œæ— åˆ™åˆ›å»ºæ–°äº‹åŠ¡</p><p>REQUIRES_NEW â€“æ€»æ˜¯åˆ›å»ºæ–°äº‹åŠ¡</p><h2 id="å†…ç½‘ç©¿é€"><a href="#å†…ç½‘ç©¿é€" class="headerlink" title="å†…ç½‘ç©¿é€"></a>å†…ç½‘ç©¿é€</h2><p>å°é¢å›¾å°±æ˜¯å†…ç½‘ç©¿é€çš„åŸç†å›¾ï¼š</p><p><img src="https://pic3.zhimg.com/v2-7d80e958968f0e1463e6df3eec48921f_r.jpg" alt="img"></p><p>è¿›å…¥ä¸´æ—¶åŸŸåçš„ä½¿ç”¨ç½‘ç«™ï¼š<a href="https://dashboard.cpolar.com/,%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E8%B4%A6%E6%88%B7%E7%99%BB%E8%BF%9B%E5%8E%BB%E9%80%89%E6%8B%A9%E5%85%8D%E8%B4%B9%E7%9A%84%E4%B8%B4%E6%97%B6%E5%9F%9F%E5%90%8D%EF%BC%8C%E4%B8%8B%E8%BD%BDcpolar%E7%9A%84%E5%AE%89%E8%A3%85exe%EF%BC%8C%E6%8C%89%E7%85%A7%E6%AD%A5%E9%AA%A4%E5%AE%89%E8%A3%85%E5%A5%BD%E5%B0%B1%E8%A1%8C%E3%80%82%E7%84%B6%E5%90%8E%E5%9B%9E%E5%88%B0cpolar%E7%BD%91%E7%AB%99%E9%80%89%E6%8B%A9%E9%AA%8C%E8%AF%81%EF%BC%8C%E5%A4%8D%E5%88%B6%E4%BD%A0%E7%9A%84Authtoken%EF%BC%8C%E7%84%B6%E5%90%8E%E8%BF%90%E8%A1%8C%E5%88%9A%E5%88%9A%E5%AE%89%E8%A3%85%E5%A5%BD%E7%9A%84cpolar.exe%EF%BC%8C%E8%BE%93%E5%85%A5cpolar.exe">https://dashboard.cpolar.com/,æ³¨å†Œä¸€ä¸ªè´¦æˆ·ç™»è¿›å»é€‰æ‹©å…è´¹çš„ä¸´æ—¶åŸŸåï¼Œä¸‹è½½cpolarçš„å®‰è£…exeï¼ŒæŒ‰ç…§æ­¥éª¤å®‰è£…å¥½å°±è¡Œã€‚ç„¶åå›åˆ°cpolarç½‘ç«™é€‰æ‹©éªŒè¯ï¼Œå¤åˆ¶ä½ çš„Authtokenï¼Œç„¶åè¿è¡Œåˆšåˆšå®‰è£…å¥½çš„cpolar.exeï¼Œè¾“å…¥cpolar.exe</a> authtoken ã€åˆšåˆšå¤åˆ¶çš„ã€‘ ï¼Œå†è¾“å…¥cpolar.exe http 8080ç„¶åå›è½¦ï¼Œè¿™æ—¶æ‚¨çš„å…¬ç½‘åŸŸåå°±åˆ›å»ºå¥½äº†ï¼Œåˆ«äººçš„ç”µè„‘å’Œæ‰‹æœºå°±å¯ä»¥è®¿é—®ä½ çš„è‹ç©¹å¤–å–äº†ã€‚å¯ä»¥è¾“å…¥<a href="https://xxxx/doc.html%E8%AE%BF%E9%97%AE%E4%BD%A0%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3%E3%80%82">https://xxxx/doc.htmlè®¿é—®ä½ çš„æ¥å£æ–‡æ¡£ã€‚</a></p><p>å…¶ä»–çš„æ¥å£å°±å‚è€ƒday9çš„èµ„æ–™å§ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230923235504713-858745844.png" alt="img"></p><h2 id="å¾®ä¿¡å°ç¨‹åºå¤‡æ¡ˆä¸Šçº¿"><a href="#å¾®ä¿¡å°ç¨‹åºå¤‡æ¡ˆä¸Šçº¿" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå¤‡æ¡ˆä¸Šçº¿"></a>å¾®ä¿¡å°ç¨‹åºå¤‡æ¡ˆä¸Šçº¿</h2><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230923233152894-1988041911.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230923233227839-5604758.png" alt="img"></p><p>å‰©ä¸‹çš„å‚¬å•æ¥å£å’Œè¡¨æ ¼è¾“å‡ºå°±è‡ªå·±å»çœ‹é»‘é©¬çš„å§~</p><p><strong>è‹ç©¹å¤–å–ï¼Œå®Œç»“ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‹ç©¹å¤–å– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¼€å‘é¡¹ç›®ã€Šè‹ç©¹å¤–å–ã€‹ï¼ˆäºŒï¼‰</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E4%BA%8C/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="æ·»åŠ å…¬å…±é€šç”¨æ³¨è§£"><a href="#æ·»åŠ å…¬å…±é€šç”¨æ³¨è§£" class="headerlink" title="æ·»åŠ å…¬å…±é€šç”¨æ³¨è§£"></a>æ·»åŠ å…¬å…±é€šç”¨æ³¨è§£</h1><p>å› ä¸ºæ¥ä¸‹æ¥çš„è®¸å¤šæ¥å£éœ€è¦ç”¨åˆ°create_time,update_timeæ•°æ®åº“æ·»åŠ è¯­å¥ç­‰ï¼Œè¿™ç§ä¼šå¢åŠ ä»£ç çš„é‡å¤æ€§ï¼Œè¿™æ—¶è¿™æ—¶ç›´æ¥æ·»åŠ ä¸€ä¸ªæ³¨é‡Šç„¶åæ·»åŠ åˆ°Mapperç±»é‡Œé¢ã€‚å°±æ˜¯åˆ©ç”¨AOPè¿›è¡Œå…¬å…±æ®µè‡ªåŠ¨å¡«å……æŠ€æœ¯</p><p> å…ˆåœ¨serveræ¨¡å—ä¸‹åˆ›å»ºannotation.AutoFillæ³¨è§£ç±»ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoFill &#123;</span><br><span class="line">    OperationType <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OperationTypeæ˜¯ä¸€ä¸ªæšä¸¾ç±»ï¼Œé‡Œé¢æœ‰UPDATE,INSERT</p><p>ç„¶ååœ¨åœ¨serveré‡Œé¢åˆ›å»ºaspect.AutoFillAspectç±»ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AutoFillAspect</span> &#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.sky.mapper.*.*(..)) &amp;&amp; @annotation(com.sky.annotation.AutoFill)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFillPointCut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å¼€å§‹è¿›è¡Œå…±äº«å­—æ®µè‡ªåŠ¨å¡«å……</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Before(&quot;autoFillPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">autoFill</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹è¿›è¡Œå…±äº«å­—æ®µè‡ªåŠ¨å¡«å……...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>execution(* com.sky.mapper.<em>.</em>(..)) &amp;&amp; @annotation(com.sky.annotation.AutoFill)çš„æ„æ€å°±æ˜¯åˆ‡å…¥ç‚¹ä¸ºcom.sky.mapperä¸‹çš„æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•å¹¶ä¸”æœ‰AutoFillæ³¨è§£çš„ã€‚Beforeå°±æ˜¯ä¸€ä¸ªè¾“å‡ºæ—¥å¿—ã€‚</p><h1 id="èœå“ç®¡ç†"><a href="#èœå“ç®¡ç†" class="headerlink" title="èœå“ç®¡ç†"></a>èœå“ç®¡ç†</h1><h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><p>å…ˆåœ¨Controllerå±‚é‡Œé¢æ·»åŠ ä¸€ä¸ªé€šç”¨æ¥å£ç±»ï¼šCommonControllerï¼Œé‡Œé¢ç¼–å†™æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼Œå°†æ–‡ä»¶ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSSã€‚</p><p>é…ç½®é˜¿é‡ŒOSSç›´æ¥åœ¨ymlé‡Œé¢ç¼–å†™nameidå’Œkeyå°±è¡Œï¼Œä¼šå‘ç°ç¼–å†™æ—¶æœ‰æç¤ºï¼Œå› ä¸ºåœ¨commonæ¨¡å—é‡Œé¢å·²ç»æ·»åŠ äº†AliOSSProtitesçš„é…ç½®å±æ€§æ³¨è§£ï¼š@ConfigurationProperties(prefix &#x3D; â€œsky.aliossâ€)</p><p>ymlï¼šæ³¨æ„â€™ï¼šâ€™åé¢æœ‰ä¸ªç©ºæ ¼</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sky:</span></span><br><span class="line">  <span class="attr">jwt:</span></span><br><span class="line">    <span class="comment"># è®¾ç½®jwtç­¾ååŠ å¯†æ—¶ä½¿ç”¨çš„ç§˜é’¥</span></span><br><span class="line">    <span class="attr">admin-secret-key:</span> <span class="string">itcast</span></span><br><span class="line">    <span class="comment"># è®¾ç½®jwtè¿‡æœŸæ—¶é—´</span></span><br><span class="line">    <span class="attr">admin-ttl:</span> <span class="number">7200000</span></span><br><span class="line">    <span class="comment"># è®¾ç½®å‰ç«¯ä¼ é€’è¿‡æ¥çš„ä»¤ç‰Œåç§°</span></span><br><span class="line">    <span class="attr">admin-token-name:</span> <span class="string">token</span></span><br><span class="line">  <span class="attr">alioss:</span></span><br><span class="line">    <span class="attr">access-key-id:</span> <span class="string">$&#123;sky.alioss.access-key-id&#125;</span></span><br><span class="line">    <span class="attr">access-key-secret:</span> <span class="string">$&#123;sky.alioss.access-key-secret&#125;</span></span><br><span class="line">    <span class="attr">bucket-name:</span>  <span class="string">$&#123;sky.alioss.bucket-name&#125;</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">$&#123;sky.alioss.endpoint&#125;</span></span><br></pre></td></tr></table></figure><p> è¿™é‡Œä¸ç›´æ¥å†™æ˜¯ä¸ºäº†è§„èŒƒï¼Œéšè—keyç­‰å¯†ç ã€‚çœŸå®æ•°æ®åœ¨dev-ymlé‡Œé¢ç¼–å†™ï¼Œå› ä¸ºä¸Šè¾¹å†™äº†</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line"><span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><p>åœ¨serveræ¨¡å—çš„configé‡Œé¢æ–°å»ºä¸€ä¸ªOssConfigurationçš„ç±»ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é…ç½®AliOssUtilå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OssConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line">    <span class="keyword">public</span> AliOssUtil <span class="title function_">aliOssUtil</span><span class="params">(AliOssProperties aliOssProperties)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ›å»ºé˜¿é‡Œäº‘æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»å¯¹è±¡ï¼š&#123;&#125;&quot;</span>,aliOssProperties);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AliOssUtil</span>(aliOssProperties.getEndpoint(),aliOssProperties.getAccessKeyId(),</span><br><span class="line">                aliOssProperties.getAccessKeySecret(),aliOssProperties.getBucketName());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ èœå“"><a href="#æ·»åŠ èœå“" class="headerlink" title="æ·»åŠ èœå“"></a>æ·»åŠ èœå“</h2><p>æ¥ä¸‹æ¥å¥½å¤šéƒ½æ˜¯SpringMvcå’ŒMyBatisæ¡†æ¶çš„å†…å®¹äº†â€¦</p><p>ç›´æ¥æ·»åŠ èœå“å’Œå¯¹åº”å£å‘³ã€‚ä¸»è¦æ˜¯implé‡Œé¢çš„ï¼Œå…¶ä»–çš„éƒ½æ¯”è¾ƒç®€å•ï¼šå£å‘³å› ä¸ºå¯ä»¥æœ‰è®¸å¤šå‘³é“ï¼Œæ‰€ä»¥å°±ç”¨Listæ¥æ·»åŠ ï¼Œ.forEachæ¥å¾ªç¯æ·»åŠ æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢èœå“å’Œå¯¹åº”å£å‘³</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dishDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveWithFlaver</span><span class="params">(DishDTO dishDTO)</span> &#123;</span><br><span class="line">        Dish dish=<span class="keyword">new</span> <span class="title class_">Dish</span>();</span><br><span class="line">        BeanUtils.copyProperties(dishDTO,dish);</span><br><span class="line"></span><br><span class="line">        dishMapper.insert(dish);</span><br><span class="line">        <span class="comment">//è·å–insertè¯­å¥ç”Ÿæˆçš„idå€¼</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">dishId</span> <span class="operator">=</span>dish.getId();</span><br><span class="line">        <span class="comment">//å‘å£å‘³æ·»åŠ næ¡æ•°æ®</span></span><br><span class="line">        List&lt;DishFlavor&gt; flavors =dishDTO.getFlavors();</span><br><span class="line">        <span class="comment">//ç¡®å®šå£å‘³æ•°æ®æäº¤è¿›æ¥äº†</span></span><br><span class="line">        <span class="keyword">if</span> (flavors !=<span class="literal">null</span> &amp;&amp; flavors.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            flavors.forEach(dishFlavor -&gt; &#123;</span><br><span class="line">                    dishFlavor.setDishId(dishId);</span><br><span class="line">        &#125;);</span><br><span class="line">            dishFlavorMapper.insertBatch(flavors);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ˜¯SQLæ·»åŠ è¯­å¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertBatch&quot;</span>&gt;</span></span><br><span class="line">        insert into dish_flavor (dish_id, name, value) VALUES</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;flavors&quot;</span> <span class="attr">item</span>=<span class="string">&quot;df&quot;</span>&gt;</span></span><br><span class="line">            (#&#123;df.dishId&#125;),#&#123;df.name&#125;,#&#123;df.value&#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤èœå“"><a href="#åˆ é™¤èœå“" class="headerlink" title="åˆ é™¤èœå“"></a>åˆ é™¤èœå“</h2><p>é¦–å…ˆè¦ç¡®å®šéœ€è¦æ»¡è¶³çš„è¦æ±‚ï¼Œæ»¡è¶³åæ‰åˆ ï¼Œæœ€åå†åˆ é™¤å…³è”å£å‘³æ•°æ®ã€‚Controllerè€æ ·å­ã€‚</p><p>DishServiceImplç±»é‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡åˆ é™¤èœå“</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteQuery</span><span class="params">(List&lt;Long&gt; ids)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦åœ¨å¯å”®çŠ¶æ€</span></span><br><span class="line">        <span class="keyword">for</span> (Long id : ids) &#123;</span><br><span class="line">            Dish dish=dishMapper.getById(id);</span><br><span class="line">            <span class="keyword">if</span> (dish.getStatus()== StatusConstant.ENABLE)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.DISH_ON_SALE);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦è¢«æŸä¸ªå¥—é¤å…³è”äº†</span></span><br><span class="line">        <span class="keyword">for</span> (Long id : ids) &#123;</span><br><span class="line">            List&lt;Long&gt; setmealIds =setmealDishMapper.getSetmealIdsByDishIds(ids);</span><br><span class="line">            <span class="keyword">if</span> (setmealIds !=<span class="literal">null</span> &amp;&amp; setmealIds.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.DISH_BE_RELATED_BY_SETMEAL);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ é™¤èœå“è¡¨ä¸­çš„èœå“æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (Long id : ids) &#123;</span><br><span class="line">            dishMapper.deleteById(id);</span><br><span class="line">            <span class="comment">//åˆ é™¤èœå“å…³è”å£å‘³æ•°æ®</span></span><br><span class="line">            dishFlavorMapper.deleteByDishId(id);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ–°å»ºä¸€ä¸ªMapperï¼ŒSetmealDishMapperå’Œå®ƒçš„xmlï¼Œç”¨äºåˆ¤æ–­èœå“æ˜¯å¦è¢«æŸä¸ªå¥—é¤å…³è”ã€‚</p><p>Mapperé‡Œé¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SetmealDishMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®èœå“idæŸ¥è¯¢å¥—é¤id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dishIds</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    List&lt;Long&gt; <span class="title function_">getSetmealIdsByDishIds</span><span class="params">(List&lt;Long&gt; dishIds)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>xmlåŠ¨æ€SQLæŸ¥è¯¢è¯­å¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getSetmealIdsByDishIds&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Long&quot;</span>&gt;</span></span><br><span class="line">        select setmeal_id from setmeal_dish where dish_id in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;dishIds&quot;</span> <span class="attr">item</span>=<span class="string">&quot;dishId&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">            #&#123;dishId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å¥—é¤ç®¡ç†"><a href="#å¥—é¤ç®¡ç†" class="headerlink" title="å¥—é¤ç®¡ç†"></a>å¥—é¤ç®¡ç†</h1><h2 id="1-æ–°å¢å¥—é¤"><a href="#1-æ–°å¢å¥—é¤" class="headerlink" title="1. æ–°å¢å¥—é¤"></a>1. æ–°å¢å¥—é¤</h2><h3 id="1-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#1-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="1.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>1.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><p>äº§å“åŸå‹ï¼š</p><p>ä¸šåŠ¡è§„åˆ™ï¼š</p><ul><li>å¥—é¤åç§°å”¯ä¸€</li><li>å¥—é¤å¿…é¡»å±äºæŸä¸ªåˆ†ç±»</li><li>å¥—é¤å¿…é¡»åŒ…å«èœå“</li><li>åç§°ã€åˆ†ç±»ã€ä»·æ ¼ã€å›¾ç‰‡ä¸ºå¿…å¡«é¡¹</li><li>æ·»åŠ èœå“çª—å£éœ€è¦æ ¹æ®åˆ†ç±»ç±»å‹æ¥å±•ç¤ºèœå“</li><li>æ–°å¢çš„å¥—é¤é»˜è®¤ä¸ºåœå”®çŠ¶æ€</li></ul><p>æ¥å£è®¾è®¡ï¼ˆå…±æ¶‰åŠåˆ°4ä¸ªæ¥å£ï¼‰ï¼š</p><ul><li>æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»ï¼ˆå·²å®Œæˆï¼‰</li><li>æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“</li><li>å›¾ç‰‡ä¸Šä¼ ï¼ˆå·²å®Œæˆï¼‰</li><li>æ–°å¢å¥—é¤</li></ul><p>æ•°æ®åº“è®¾è®¡ï¼š</p><p>setmealè¡¨ä¸ºå¥—é¤è¡¨ï¼Œç”¨äºå­˜å‚¨å¥—é¤çš„ä¿¡æ¯ã€‚å…·ä½“è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å­—æ®µå</th><th>æ•°æ®ç±»å‹</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>id</td><td>bigint</td><td>ä¸»é”®</td><td>è‡ªå¢</td></tr><tr><td>name</td><td>varchar(32)</td><td>å¥—é¤åç§°</td><td>å”¯ä¸€</td></tr><tr><td>category_id</td><td>bigint</td><td>åˆ†ç±»id</td><td>é€»è¾‘å¤–é”®</td></tr><tr><td>price</td><td>decimal(10,2)</td><td>å¥—é¤ä»·æ ¼</td><td></td></tr><tr><td>image</td><td>varchar(255)</td><td>å›¾ç‰‡è·¯å¾„</td><td></td></tr><tr><td>description</td><td>varchar(255)</td><td>å¥—é¤æè¿°</td><td></td></tr><tr><td>status</td><td>int</td><td>å”®å–çŠ¶æ€</td><td>1èµ·å”® 0åœå”®</td></tr><tr><td>create_time</td><td>datetime</td><td>åˆ›å»ºæ—¶é—´</td><td></td></tr><tr><td>update_time</td><td>datetime</td><td>æœ€åä¿®æ”¹æ—¶é—´</td><td></td></tr><tr><td>create_user</td><td>bigint</td><td>åˆ›å»ºäººid</td><td></td></tr><tr><td>update_user</td><td>bigint</td><td>æœ€åä¿®æ”¹äººid</td><td></td></tr></tbody></table><p>setmeal_dishè¡¨ä¸ºå¥—é¤èœå“å…³ç³»è¡¨ï¼Œç”¨äºå­˜å‚¨å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»ã€‚å…·ä½“è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å­—æ®µå</th><th>æ•°æ®ç±»å‹</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>id</td><td>bigint</td><td>ä¸»é”®</td><td>è‡ªå¢</td></tr><tr><td>setmeal_id</td><td>bigint</td><td>å¥—é¤id</td><td>é€»è¾‘å¤–é”®</td></tr><tr><td>dish_id</td><td>bigint</td><td>èœå“id</td><td>é€»è¾‘å¤–é”®</td></tr><tr><td>name</td><td>varchar(32)</td><td>èœå“åç§°</td><td>å†—ä½™å­—æ®µ</td></tr><tr><td>price</td><td>decimal(10,2)</td><td>èœå“å•ä»·</td><td>å†—ä½™å­—æ®µ</td></tr><tr><td>copies</td><td>int</td><td>èœå“ä»½æ•°</td><td></td></tr></tbody></table><h3 id="1-2-ä»£ç å®ç°"><a href="#1-2-ä»£ç å®ç°" class="headerlink" title="1.2 ä»£ç å®ç°"></a>1.2 ä»£ç å®ç°</h3><h4 id="1-2-1-DishController"><a href="#1-2-1-DishController" class="headerlink" title="1.2.1 DishController"></a>1.2.1 DishController</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“</span><br><span class="line">     * @param categoryId</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">@GetMapping(&quot;/list&quot;)</span><br><span class="line">@ApiOperation(&quot;æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“&quot;)</span><br><span class="line">public Result&lt;List&lt;Dish&gt;&gt; list(Lo ng categoryId)&#123;</span><br><span class="line">    List&lt;Dish&gt; list = dishService.list(categoryId);</span><br><span class="line">    return Result.success(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-2-DishService"><a href="#1-2-2-DishService" class="headerlink" title="1.2.2 DishService"></a>1.2.2 DishService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“</span><br><span class="line">     * @param categoryId</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">List&lt;Dish&gt; list(Long categoryId);</span><br></pre></td></tr></table></figure><h4 id="1-2-3-DishServiceImpl"><a href="#1-2-3-DishServiceImpl" class="headerlink" title="1.2.3 DishServiceImpl"></a>1.2.3 DishServiceImpl</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“</span><br><span class="line">     * @param categoryId</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">public List&lt;Dish&gt; list(Long categoryId) &#123;</span><br><span class="line">    Dish dish = Dish.builder()</span><br><span class="line">        .categoryId(categoryId)</span><br><span class="line">        .status(StatusConstant.ENABLE)</span><br><span class="line">        .build();</span><br><span class="line">    return dishMapper.list(dish);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-4-DishMapper"><a href="#1-2-4-DishMapper" class="headerlink" title="1.2.4 DishMapper"></a>1.2.4 DishMapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * åŠ¨æ€æ¡ä»¶æŸ¥è¯¢èœå“</span><br><span class="line">     * @param dish</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">List&lt;Dish&gt; list(Dish dish);</span><br></pre></td></tr></table></figure><h4 id="1-2-5-DishMapper-xml"><a href="#1-2-5-DishMapper-xml" class="headerlink" title="1.2.5 DishMapper.xml"></a>1.2.5 DishMapper.xml</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;list&quot; resultType=&quot;Dish&quot; parameterType=&quot;Dish&quot;&gt;</span><br><span class="line">    select * from dish</span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;if test=&quot;name != null&quot;&gt;</span><br><span class="line">            and name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot;categoryId != null&quot;&gt;</span><br><span class="line">            and category_id = #&#123;categoryId&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot;status != null&quot;&gt;</span><br><span class="line">            and status = #&#123;status&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">    order by create_time desc</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h4 id="1-2-6-SetmealController"><a href="#1-2-6-SetmealController" class="headerlink" title="1.2.6 SetmealController"></a>1.2.6 SetmealController</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å¥—é¤ç®¡ç†</span><br><span class="line"> */</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/admin/setmeal&quot;)</span><br><span class="line">@Api(tags = &quot;å¥—é¤ç›¸å…³æ¥å£&quot;)</span><br><span class="line">@Slf4j</span><br><span class="line">public class SetmealController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private SetmealService setmealService;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ–°å¢å¥—é¤</span><br><span class="line">     * @param setmealDTO</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @PostMapping</span><br><span class="line">    @ApiOperation(&quot;æ–°å¢å¥—é¤&quot;)</span><br><span class="line">    public Result save(@RequestBody SetmealDTO setmealDTO) &#123;</span><br><span class="line">        setmealService.saveWithDish(setmealDTO);</span><br><span class="line">        return Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-7-SetmealService"><a href="#1-2-7-SetmealService" class="headerlink" title="1.2.7 SetmealService"></a>1.2.7 SetmealService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public interface SetmealService &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ–°å¢å¥—é¤ï¼ŒåŒæ—¶éœ€è¦ä¿å­˜å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»</span><br><span class="line">     * @param setmealDTO</span><br><span class="line">     */</span><br><span class="line">    void saveWithDish(SetmealDTO setmealDTO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-8-SetmealServiceImpl"><a href="#1-2-8-SetmealServiceImpl" class="headerlink" title="1.2.8 SetmealServiceImpl"></a>1.2.8 SetmealServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¥—é¤ä¸šåŠ¡å®ç°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetmealServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SetmealService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SetmealMapper setmealMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SetmealDishMapper setmealDishMapper;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DishMapper dishMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢å¥—é¤ï¼ŒåŒæ—¶éœ€è¦ä¿å­˜å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> setmealDTO</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveWithDish</span><span class="params">(SetmealDTO setmealDTO)</span> &#123;</span><br><span class="line">        <span class="type">Setmeal</span> <span class="variable">setmeal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Setmeal</span>();</span><br><span class="line">        BeanUtils.copyProperties(setmealDTO, setmeal);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‘å¥—é¤è¡¨æ’å…¥æ•°æ®</span></span><br><span class="line">        setmealMapper.insert(setmeal);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–ç”Ÿæˆçš„å¥—é¤id</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">setmealId</span> <span class="operator">=</span> setmeal.getId();</span><br><span class="line"></span><br><span class="line">        List&lt;SetmealDish&gt; setmealDishes = setmealDTO.getSetmealDishes();</span><br><span class="line">        setmealDishes.forEach(setmealDish -&gt; &#123;</span><br><span class="line">            setmealDish.setSetmealId(setmealId);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¿å­˜å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»</span></span><br><span class="line">        setmealDishMapper.insertBatch(setmealDishes);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-9-SetmealMapper"><a href="#1-2-9-SetmealMapper" class="headerlink" title="1.2.9 SetmealMapper"></a>1.2.9 SetmealMapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ–°å¢å¥—é¤</span><br><span class="line">     * @param setmeal</span><br><span class="line">*/</span><br><span class="line">@AutoFill(OperationType.INSERT)</span><br><span class="line">void insert(Setmeal setmeal);</span><br></pre></td></tr></table></figure><h4 id="1-2-10-SetmealMapper-xml"><a href="#1-2-10-SetmealMapper-xml" class="headerlink" title="1.2.10 SetmealMapper.xml"></a>1.2.10 SetmealMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Setmeal&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    insert into setmeal</span><br><span class="line">    (category_id, name, price, status, description, image, create_time, update_time, create_user, update_user)</span><br><span class="line">    values (#&#123;categoryId&#125;, #&#123;name&#125;, #&#123;price&#125;, #&#123;status&#125;, #&#123;description&#125;, #&#123;image&#125;, #&#123;createTime&#125;, #&#123;updateTime&#125;,</span><br><span class="line">    #&#123;createUser&#125;, #&#123;updateUser&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-2-11-SetmealDishMapper"><a href="#1-2-11-SetmealDishMapper" class="headerlink" title="1.2.11 SetmealDishMapper"></a>1.2.11 SetmealDishMapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ‰¹é‡ä¿å­˜å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»</span><br><span class="line">     * @param setmealDishes</span><br><span class="line">*/</span><br><span class="line">void insertBatch(List&lt;SetmealDish&gt; setmealDishes);</span><br></pre></td></tr></table></figure><h4 id="1-2-12-SetmealDishMapper-xml"><a href="#1-2-12-SetmealDishMapper-xml" class="headerlink" title="1.2.12 SetmealDishMapper.xml"></a>1.2.12 SetmealDishMapper.xml</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id=&quot;insertBatch&quot; parameterType=&quot;list&quot;&gt;</span><br><span class="line">    insert into setmeal_dish</span><br><span class="line">    (setmeal_id,dish_id,name,price,copies)</span><br><span class="line">    values</span><br><span class="line">    &lt;foreach collection=&quot;setmealDishes&quot; item=&quot;sd&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">        (#&#123;sd.setmealId&#125;,#&#123;sd.dishId&#125;,#&#123;sd.name&#125;,#&#123;sd.price&#125;,#&#123;sd.copies&#125;)</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure><h3 id="1-3-åŠŸèƒ½æµ‹è¯•"><a href="#1-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="1.3 åŠŸèƒ½æµ‹è¯•"></a>1.3 åŠŸèƒ½æµ‹è¯•</h3><p>ç•¥</p><h2 id="2-å¥—é¤åˆ†é¡µæŸ¥è¯¢"><a href="#2-å¥—é¤åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="2. å¥—é¤åˆ†é¡µæŸ¥è¯¢"></a>2. å¥—é¤åˆ†é¡µæŸ¥è¯¢</h2><h3 id="2-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#2-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="2.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>2.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><p>ä¸šåŠ¡è§„åˆ™ï¼š</p><ul><li>æ ¹æ®é¡µç è¿›è¡Œåˆ†é¡µå±•ç¤º</li><li>æ¯é¡µå±•ç¤º10æ¡æ•°æ®</li><li>å¯ä»¥æ ¹æ®éœ€è¦ï¼ŒæŒ‰ç…§å¥—é¤åç§°ã€åˆ†ç±»ã€å”®å–çŠ¶æ€è¿›è¡ŒæŸ¥è¯¢</li></ul><h3 id="2-2-ä»£ç å®ç°"><a href="#2-2-ä»£ç å®ç°" class="headerlink" title="2.2 ä»£ç å®ç°"></a>2.2 ä»£ç å®ç°</h3><h4 id="2-2-1-SetmealController"><a href="#2-2-1-SetmealController" class="headerlink" title="2.2.1 SetmealController"></a>2.2.1 SetmealController</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * åˆ†é¡µæŸ¥è¯¢</span><br><span class="line">     * @param setmealPageQueryDTO</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">@GetMapping(&quot;/page&quot;)</span><br><span class="line">@ApiOperation(&quot;åˆ†é¡µæŸ¥è¯¢&quot;)</span><br><span class="line">public Result&lt;PageResult&gt; page(SetmealPageQueryDTO setmealPageQueryDTO) &#123;</span><br><span class="line">    PageResult pageResult = setmealService.pageQuery(setmealPageQueryDTO);</span><br><span class="line">    return Result.success(pageResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-2-SetmealService"><a href="#2-2-2-SetmealService" class="headerlink" title="2.2.2 SetmealService"></a>2.2.2 SetmealService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * åˆ†é¡µæŸ¥è¯¢</span><br><span class="line">     * @param setmealPageQueryDTO</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">PageResult pageQuery(SetmealPageQueryDTO setmealPageQueryDTO);</span><br></pre></td></tr></table></figure><h4 id="2-2-3-SetmealServiceImpl"><a href="#2-2-3-SetmealServiceImpl" class="headerlink" title="2.2.3 SetmealServiceImpl"></a>2.2.3 SetmealServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> setmealPageQueryDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> PageResult <span class="title function_">pageQuery</span><span class="params">(SetmealPageQueryDTO setmealPageQueryDTO)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pageNum</span> <span class="operator">=</span> setmealPageQueryDTO.getPage();</span><br><span class="line">    <span class="type">int</span> <span class="variable">pageSize</span> <span class="operator">=</span> setmealPageQueryDTO.getPageSize();</span><br><span class="line"></span><br><span class="line">    PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">    Page&lt;SetmealVO&gt; page = setmealMapper.pageQuery(setmealPageQueryDTO);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageResult</span>(page.getTotal(), page.getResult());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-4-SetmealMapper"><a href="#2-2-4-SetmealMapper" class="headerlink" title="2.2.4 SetmealMapper"></a>2.2.4 SetmealMapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * åˆ†é¡µæŸ¥è¯¢</span><br><span class="line">     * @param setmealPageQueryDTO</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">Page&lt;SetmealVO&gt; pageQuery(SetmealPageQueryDTO setmealPageQueryDTO);</span><br></pre></td></tr></table></figure><h4 id="2-2-5-SetmealMapper-xml"><a href="#2-2-5-SetmealMapper-xml" class="headerlink" title="2.2.5 SetmealMapper.xml"></a>2.2.5 SetmealMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;pageQuery&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.vo.SetmealVO&quot;</span>&gt;</span></span><br><span class="line">    select</span><br><span class="line">        s.*,c.name categoryName</span><br><span class="line">    from</span><br><span class="line">        setmeal s</span><br><span class="line">    left join</span><br><span class="line">        category c</span><br><span class="line">    on</span><br><span class="line">        s.category_id = c.id</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span></span><br><span class="line">            and s.name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span></span><br><span class="line">            and s.status = #&#123;status&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;categoryId != null&quot;</span>&gt;</span></span><br><span class="line">            and s.category_id = #&#123;categoryId&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    order by s.create_time desc</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-åŠŸèƒ½æµ‹è¯•"><a href="#2-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="2.3 åŠŸèƒ½æµ‹è¯•"></a>2.3 åŠŸèƒ½æµ‹è¯•</h3><p>ç•¥</p><h2 id="3-åˆ é™¤å¥—é¤"><a href="#3-åˆ é™¤å¥—é¤" class="headerlink" title="3. åˆ é™¤å¥—é¤"></a>3. åˆ é™¤å¥—é¤</h2><h3 id="3-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#3-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="3.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>3.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><p>ä¸šåŠ¡è§„åˆ™ï¼š</p><ul><li>å¯ä»¥ä¸€æ¬¡åˆ é™¤ä¸€ä¸ªå¥—é¤ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡åˆ é™¤å¥—é¤</li><li>èµ·å”®ä¸­çš„å¥—é¤ä¸èƒ½åˆ é™¤</li></ul><h3 id="3-2-ä»£ç å®ç°"><a href="#3-2-ä»£ç å®ç°" class="headerlink" title="3.2 ä»£ç å®ç°"></a>3.2 ä»£ç å®ç°</h3><h4 id="3-2-1-SetmealController"><a href="#3-2-1-SetmealController" class="headerlink" title="3.2.1 SetmealController"></a>3.2.1 SetmealController</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ‰¹é‡åˆ é™¤å¥—é¤</span><br><span class="line">     * @param ids</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">@DeleteMapping</span><br><span class="line">@ApiOperation(&quot;æ‰¹é‡åˆ é™¤å¥—é¤&quot;)</span><br><span class="line">public Result delete(@RequestParam List&lt;Long&gt; ids)&#123;</span><br><span class="line">    setmealService.deleteBatch(ids);</span><br><span class="line">    return Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-SetmealService"><a href="#3-2-2-SetmealService" class="headerlink" title="3.2.2 SetmealService"></a>3.2.2 SetmealService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ‰¹é‡åˆ é™¤å¥—é¤</span><br><span class="line">     * @param ids</span><br><span class="line">*/</span><br><span class="line">void deleteBatch(List&lt;Long&gt; ids);</span><br></pre></td></tr></table></figure><h4 id="3-2-3-SetmealServiceImpl"><a href="#3-2-3-SetmealServiceImpl" class="headerlink" title="3.2.3 SetmealServiceImpl"></a>3.2.3 SetmealServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡åˆ é™¤å¥—é¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ids</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteBatch</span><span class="params">(List&lt;Long&gt; ids)</span> &#123;</span><br><span class="line">    ids.forEach(id -&gt; &#123;</span><br><span class="line">        <span class="type">Setmeal</span> <span class="variable">setmeal</span> <span class="operator">=</span> setmealMapper.getById(id);</span><br><span class="line">        <span class="keyword">if</span>(StatusConstant.ENABLE == setmeal.getStatus())&#123;</span><br><span class="line">            <span class="comment">//èµ·å”®ä¸­çš„å¥—é¤ä¸èƒ½åˆ é™¤</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">DeletionNotAllowedException</span>(MessageConstant.SETMEAL_ON_SALE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    ids.forEach(setmealId -&gt; &#123;</span><br><span class="line">        <span class="comment">//åˆ é™¤å¥—é¤è¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line">        setmealMapper.deleteById(setmealId);</span><br><span class="line">        <span class="comment">//åˆ é™¤å¥—é¤èœå“å…³ç³»è¡¨ä¸­çš„æ•°æ®</span></span><br><span class="line">        setmealDishMapper.deleteBySetmealId(setmealId);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-4-SetmealMapper"><a href="#3-2-4-SetmealMapper" class="headerlink" title="3.2.4 SetmealMapper"></a>3.2.4 SetmealMapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢å¥—é¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from setmeal where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">Setmeal <span class="title function_">getById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idåˆ é™¤å¥—é¤</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> setmealId</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Delete(&quot;delete from setmeal where id = #&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long setmealId)</span>;</span><br></pre></td></tr></table></figure><h4 id="3-2-5-SetmealDishMapper"><a href="#3-2-5-SetmealDishMapper" class="headerlink" title="3.2.5 SetmealDishMapper"></a>3.2.5 SetmealDishMapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ ¹æ®å¥—é¤idåˆ é™¤å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»</span><br><span class="line">     * @param setmealId</span><br><span class="line">*/</span><br><span class="line">@Delete(&quot;delete from setmeal_dish where setmeal_id = #&#123;setmealId&#125;&quot;)</span><br><span class="line">void deleteBySetmealId(Long setmealId);</span><br></pre></td></tr></table></figure><h3 id="3-3-åŠŸèƒ½æµ‹è¯•"><a href="#3-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="3.3 åŠŸèƒ½æµ‹è¯•"></a>3.3 åŠŸèƒ½æµ‹è¯•</h3><p>ç•¥</p><h2 id="4-ä¿®æ”¹å¥—é¤"><a href="#4-ä¿®æ”¹å¥—é¤" class="headerlink" title="4. ä¿®æ”¹å¥—é¤"></a>4. ä¿®æ”¹å¥—é¤</h2><h3 id="4-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#4-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="4.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>4.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><p>æ¥å£è®¾è®¡ï¼ˆå…±æ¶‰åŠåˆ°5ä¸ªæ¥å£ï¼‰ï¼š</p><ul><li>æ ¹æ®idæŸ¥è¯¢å¥—é¤</li><li>æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»ï¼ˆå·²å®Œæˆï¼‰</li><li>æ ¹æ®åˆ†ç±»idæŸ¥è¯¢èœå“ï¼ˆå·²å®Œæˆï¼‰</li><li>å›¾ç‰‡ä¸Šä¼ ï¼ˆå·²å®Œæˆï¼‰</li><li>ä¿®æ”¹å¥—é¤</li></ul><h3 id="4-2-ä»£ç å®ç°"><a href="#4-2-ä»£ç å®ç°" class="headerlink" title="4.2 ä»£ç å®ç°"></a>4.2 ä»£ç å®ç°</h3><h4 id="4-2-1-SetmealController"><a href="#4-2-1-SetmealController" class="headerlink" title="4.2.1 SetmealController"></a>4.2.1 SetmealController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢å¥—é¤ï¼Œç”¨äºä¿®æ”¹é¡µé¢å›æ˜¾æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;æ ¹æ®idæŸ¥è¯¢å¥—é¤&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;SetmealVO&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">    <span class="type">SetmealVO</span> <span class="variable">setmealVO</span> <span class="operator">=</span> setmealService.getByIdWithDish(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(setmealVO);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å¥—é¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> setmealDTO</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@PutMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;ä¿®æ”¹å¥—é¤&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> SetmealDTO setmealDTO)</span> &#123;</span><br><span class="line">    setmealService.update(setmealDTO);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-2-SetmealService"><a href="#4-2-2-SetmealService" class="headerlink" title="4.2.2 SetmealService"></a>4.2.2 SetmealService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * æ ¹æ®idæŸ¥è¯¢å¥—é¤å’Œå…³è”çš„èœå“æ•°æ®</span><br><span class="line">     * @param id</span><br><span class="line">     * @return</span><br><span class="line">*/</span><br><span class="line">SetmealVO getByIdWithDish(Long id);</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">     * ä¿®æ”¹å¥—é¤</span><br><span class="line">     * @param setmealDTO</span><br><span class="line">*/</span><br><span class="line">void update(SetmealDTO setmealDTO);</span><br></pre></td></tr></table></figure><h4 id="4-2-3-SetmealServiceImpl"><a href="#4-2-3-SetmealServiceImpl" class="headerlink" title="4.2.3 SetmealServiceImpl"></a>4.2.3 SetmealServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idæŸ¥è¯¢å¥—é¤å’Œå¥—é¤èœå“å…³ç³»</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> SetmealVO <span class="title function_">getByIdWithDish</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="type">Setmeal</span> <span class="variable">setmeal</span> <span class="operator">=</span> setmealMapper.getById(id);</span><br><span class="line">    List&lt;SetmealDish&gt; setmealDishes = setmealDishMapper.getBySetmealId(id);</span><br><span class="line"></span><br><span class="line">    <span class="type">SetmealVO</span> <span class="variable">setmealVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SetmealVO</span>();</span><br><span class="line">    BeanUtils.copyProperties(setmeal, setmealVO);</span><br><span class="line">    setmealVO.setSetmealDishes(setmealDishes);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> setmealVO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹å¥—é¤</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> setmealDTO</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(SetmealDTO setmealDTO)</span> &#123;</span><br><span class="line">    <span class="type">Setmeal</span> <span class="variable">setmeal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Setmeal</span>();</span><br><span class="line">    BeanUtils.copyProperties(setmealDTO, setmeal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1ã€ä¿®æ”¹å¥—é¤è¡¨ï¼Œæ‰§è¡Œupdate</span></span><br><span class="line">    setmealMapper.update(setmeal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¥—é¤id</span></span><br><span class="line">    <span class="type">Long</span> <span class="variable">setmealId</span> <span class="operator">=</span> setmealDTO.getId();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2ã€åˆ é™¤å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»ï¼Œæ“ä½œsetmeal_dishè¡¨ï¼Œæ‰§è¡Œdelete</span></span><br><span class="line">    setmealDishMapper.deleteBySetmealId(setmealId);</span><br><span class="line"></span><br><span class="line">    List&lt;SetmealDish&gt; setmealDishes = setmealDTO.getSetmealDishes();</span><br><span class="line">    setmealDishes.forEach(setmealDish -&gt; &#123;</span><br><span class="line">        setmealDish.setSetmealId(setmealId);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//3ã€é‡æ–°æ’å…¥å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»ï¼Œæ“ä½œsetmeal_dishè¡¨ï¼Œæ‰§è¡Œinsert</span></span><br><span class="line">    setmealDishMapper.insertBatch(setmealDishes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-2-4-SetmealDishMapper"><a href="#4-2-4-SetmealDishMapper" class="headerlink" title="4.2.4 SetmealDishMapper"></a>4.2.4 SetmealDishMapper</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    * æ ¹æ®å¥—é¤idæŸ¥è¯¢å¥—é¤å’Œèœå“çš„å…³è”å…³ç³»</span><br><span class="line">    * @param setmealId</span><br><span class="line">    * @return</span><br><span class="line">    */</span><br><span class="line">   @Select(&quot;select * from setmeal_dish where setmeal_id = #&#123;setmealId&#125;&quot;)</span><br><span class="line">   List&lt;SetmealDish&gt; getBySetmealId(Long setmealId);</span><br></pre></td></tr></table></figure><h3 id="4-3-åŠŸèƒ½æµ‹è¯•"><a href="#4-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="4.3 åŠŸèƒ½æµ‹è¯•"></a>4.3 åŠŸèƒ½æµ‹è¯•</h3><p>ç•¥</p><h2 id="5-èµ·å”®åœå”®å¥—é¤"><a href="#5-èµ·å”®åœå”®å¥—é¤" class="headerlink" title="5. èµ·å”®åœå”®å¥—é¤"></a>5. èµ·å”®åœå”®å¥—é¤</h2><h3 id="5-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡"><a href="#5-1-éœ€æ±‚åˆ†æå’Œè®¾è®¡" class="headerlink" title="5.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡"></a>5.1 éœ€æ±‚åˆ†æå’Œè®¾è®¡</h3><p>ä¸šåŠ¡è§„åˆ™ï¼š</p><ul><li>å¯ä»¥å¯¹çŠ¶æ€ä¸ºèµ·å”®çš„å¥—é¤è¿›è¡Œåœå”®æ“ä½œï¼Œå¯ä»¥å¯¹çŠ¶æ€ä¸ºåœå”®çš„å¥—é¤è¿›è¡Œèµ·å”®æ“ä½œ</li><li>èµ·å”®çš„å¥—é¤å¯ä»¥å±•ç¤ºåœ¨ç”¨æˆ·ç«¯ï¼Œåœå”®çš„å¥—é¤ä¸èƒ½å±•ç¤ºåœ¨ç”¨æˆ·ç«¯</li><li>èµ·å”®å¥—é¤æ—¶ï¼Œå¦‚æœå¥—é¤å†…åŒ…å«åœå”®çš„èœå“ï¼Œåˆ™ä¸èƒ½èµ·</li></ul><h3 id="5-2-ä»£ç å®ç°"><a href="#5-2-ä»£ç å®ç°" class="headerlink" title="5.2 ä»£ç å®ç°"></a>5.2 ä»£ç å®ç°</h3><h4 id="5-2-1-SetmealController"><a href="#5-2-1-SetmealController" class="headerlink" title="5.2.1 SetmealController"></a>5.2.1 SetmealController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¥—é¤èµ·å”®åœå”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/status/&#123;status&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;å¥—é¤èµ·å”®åœå”®&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">startOrStop</span><span class="params">(<span class="meta">@PathVariable</span> Integer status, Long id)</span> &#123;</span><br><span class="line">    setmealService.startOrStop(status, id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-2-SetmealService"><a href="#5-2-2-SetmealService" class="headerlink" title="5.2.2 SetmealService"></a>5.2.2 SetmealService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">     * å¥—é¤èµ·å”®ã€åœå”®</span><br><span class="line">     * @param status</span><br><span class="line">     * @param id</span><br><span class="line">*/</span><br><span class="line">void startOrStop(Integer status, Long id);</span><br></pre></td></tr></table></figure><h4 id="5-2-3-SetmealServiceImpl"><a href="#5-2-3-SetmealServiceImpl" class="headerlink" title="5.2.3 SetmealServiceImpl"></a>5.2.3 SetmealServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¥—é¤èµ·å”®ã€åœå”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> status</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">startOrStop</span><span class="params">(Integer status, Long id)</span> &#123;</span><br><span class="line">    <span class="comment">//èµ·å”®å¥—é¤æ—¶ï¼Œåˆ¤æ–­å¥—é¤å†…æ˜¯å¦æœ‰åœå”®èœå“ï¼Œæœ‰åœå”®èœå“æç¤º&quot;å¥—é¤å†…åŒ…å«æœªå¯å”®èœå“ï¼Œæ— æ³•å¯å”®&quot;</span></span><br><span class="line">    <span class="keyword">if</span>(status == StatusConstant.ENABLE)&#123;</span><br><span class="line">        <span class="comment">//select a.* from dish a left join setmeal_dish b on a.id = b.dish_id where b.setmeal_id = ?</span></span><br><span class="line">        List&lt;Dish&gt; dishList = dishMapper.getBySetmealId(id);</span><br><span class="line">        <span class="keyword">if</span>(dishList != <span class="literal">null</span> &amp;&amp; dishList.size() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            dishList.forEach(dish -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span>(StatusConstant.DISABLE == dish.getStatus())&#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SetmealEnableFailedException</span>(MessageConstant.SETMEAL_ENABLE_FAILED);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Setmeal</span> <span class="variable">setmeal</span> <span class="operator">=</span> Setmeal.builder()</span><br><span class="line">        .id(id)</span><br><span class="line">        .status(status)</span><br><span class="line">        .build();</span><br><span class="line">    setmealMapper.update(setmeal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-2-4-DishMapper"><a href="#5-2-4-DishMapper" class="headerlink" title="5.2.4 DishMapper"></a>5.2.4 DishMapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å¥—é¤idæŸ¥è¯¢èœå“</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> setmealId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Select(&quot;select a.* from dish a left join setmeal_dish b on a.id = b.dish_id where b.setmeal_id = #&#123;setmealId&#125;&quot;)</span></span><br><span class="line">List&lt;Dish&gt; <span class="title function_">getBySetmealId</span><span class="params">(Long setmealId)</span>;</span><br></pre></td></tr></table></figure><h3 id="5-3-åŠŸèƒ½æµ‹è¯•"><a href="#5-3-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="5.3 åŠŸèƒ½æµ‹è¯•"></a>5.3 åŠŸèƒ½æµ‹è¯•</h3><p>ç•¥</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‹ç©¹å¤–å– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonè°ƒç”¨ChatGPTæ¥å£(2023)</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/Python%E8%B0%83%E7%94%A8ChatGPT%E6%8E%A5%E5%8F%A3-2023/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/Python%E8%B0%83%E7%94%A8ChatGPT%E6%8E%A5%E5%8F%A3-2023/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡å°†ä½¿ç”¨ pythonè°ƒç”¨chatgptæ¥å£</p><h2 id="æ³¨å†ŒOpenAiè´¦å·"><a href="#æ³¨å†ŒOpenAiè´¦å·" class="headerlink" title="æ³¨å†ŒOpenAiè´¦å·#"></a>æ³¨å†ŒOpenAiè´¦å·<a href="https://www.cnblogs.com/hepingan/p/17683768.html#1294830445">#</a></h2><p>éšä¾¿æ‰¾ä¸€ä¸ªé­”æ³•è½¯ä»¶ç™»å½•OpenAiã€‚åœ°å€å°±ç®—æ¼‚äº®å›½æˆ–æ–°åŠ å¡å§ï¼Œè¿›å…¥OpenAiå®˜ç½‘ï¼š<a href="https://openai.com/product">Product (openai.com)</a>ï¼Œç‚¹å‡»å³ä¸Šæ–¹çš„log in</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230907002932704-1898250926.png" alt="img"></p><p>è¿›å…¥åä¾¿å¯ä»¥æ³¨å†Œä½ çš„ openaiè´¦å·äº†ï¼Œä½¿ç”¨ä¸‹é¢çš„Goodgleè´¦å·ç™»å½•ï¼Œå†æ³¨å†Œä¸€ä¸ªè°·æ­Œè´¦å·ï¼Œç„¶åæŒ‰è¦æ±‚å†™å°±è¡Œã€‚</p><p><strong>æ³¨æ„æœ€é‡è¦çš„æ¥äº†ï¼</strong></p><p>ç”µè¯å·ç ç”±äºå›½å†…çš„å·ç openaiä¸æ”¯æŒï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨å¤–ç½‘çš„è™šæ‹Ÿç”µè¯å·è¿›è¡Œæ¥æ”¶çŸ­ä¿¡éªŒè¯ç äº†ã€‚ä½¿ç”¨SMSç½‘ç«™ï¼š<a href="https://sms-activate.org/cn">SMS-Activateæ˜¯åœ¨çº¿æ¥å—çŸ­ä¿¡çš„è™šæ‹Ÿå·ç æœåŠ¡</a>ï¼Œç„¶ååœ¨å·¦è¾¹çš„ä¾§è¾¹æ é‡Œçš„æœç´¢æ¡†è¾“å…¥openaiï¼Œå†é€‰ç€ä¸€ä¸ªå·ç ï¼Œæˆ‘é€‰çš„æ˜¯å°åº¦å°¼è¥¿äºšçš„ï¼Œåªéœ€è¦10pï¼ˆ0.1ç¾å…ƒï¼‰ï¼Œä½†æ˜¯åˆå§‹æ˜¯æ²¡æœ‰é’±çš„ï¼Œå…ˆæ³¨å†Œç™»å½•è¿™ä¸ªç½‘ç«™ï¼Œç„¶åå³ä¸Šæ–¹è´¦æˆ·ä¸‹é¢æœ‰ä¸ªåŠ å·ï¼Œè¿™é‡Œå°±æ˜¯å……å€¼çš„åœ°æ–¹ã€‚<img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230907003552244-163135568.png" alt="img"></p><p> æœ€æ–°çš„SMSä»…æ”¯æŒæœ€ä½å……å€¼2ç¾å…ƒï¼Œä¹Ÿå°±æ˜¯14RMBçš„æ ·å­ï¼Œå‡†å¤‡å¥½é’±é’±å“¦~ï¼Œé‡Œé¢çš„æ”¯ä»˜æ–¹å¼æ¯”è¾ƒç†Ÿæ‚‰çš„æœ‰æ”¯ä»˜å®ã€‚</p><p>å……å€¼å®Œæˆåè´­ä¹°ä¸€ä¸ªå¤–ç½‘çš„å·ç ï¼Œè¿™æ—¶ä¼šè‡ªåŠ¨ç»™ä½ è·³è½¬åˆ°æ¥æ”¶çŸ­ä¿¡çš„é¡µé¢ã€‚</p><p>è¿”å›åˆšåˆšçš„Openaiå®˜ç½‘ç™»å½•ç•Œé¢ï¼Œè¿™æ—¶å°†è¿‡ç¨‹ä¸­ä¸æ”¯æŒå›½å†…çš„å·ç æ”¹æˆåˆšåˆšä¹°çš„å¤–ç½‘å·ç å°±å¯ä»¥äº†ã€‚</p><h2 id="è·å–OpenAiå¯†é’¥ï¼ˆkeyï¼‰"><a href="#è·å–OpenAiå¯†é’¥ï¼ˆkeyï¼‰" class="headerlink" title="è·å–OpenAiå¯†é’¥ï¼ˆkeyï¼‰#"></a>è·å–OpenAiå¯†é’¥ï¼ˆkeyï¼‰<a href="https://www.cnblogs.com/hepingan/p/17683768.html#3965658026">#</a></h2><p>ç™»å½•openaiåä¼šå‡ºç°ä¸‹é¢çš„ç•Œé¢ï¼Œé€‰æ‹©APIå³å¯</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230907004436220-1043641621.png" alt="img"></p><p>ç„¶åå†ç‚¹å‡»å³ä¸Šè§’å¤´åƒé€‰æ‹©æŸ¥çœ‹API keyï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230907004720758-1498191959.png" alt="img"></p><p>ç„¶åå†ç‚¹å‡»Create new sercet keyå°±å¯ä»¥æŸ¥çœ‹ä½ çš„keyäº†</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230907005353446-1374399849.png" alt="img"></p><h2 id="åœ¨Pythonä¸­å®ç°chatgptå¯¹è¯çª—"><a href="#åœ¨Pythonä¸­å®ç°chatgptå¯¹è¯çª—" class="headerlink" title="åœ¨Pythonä¸­å®ç°chatgptå¯¹è¯çª—#"></a>åœ¨Pythonä¸­å®ç°chatgptå¯¹è¯çª—<a href="https://www.cnblogs.com/hepingan/p/17683768.html#1463771214">#</a></h2><p>ç›´æ¥å¤åˆ¶ä¸‹é¢çš„ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># ç”¨äºå­˜å‚¨APIè¿”å›çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">gpt</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_request</span>(<span class="params">self,messages</span>):</span><br><span class="line">        <span class="comment"># è®¾ç½®ä»£ç†æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£</span></span><br><span class="line">        proxies = &#123;</span><br><span class="line">            <span class="string">&quot;http&quot;</span>: <span class="string">&quot;http://127.0.0.1:7890&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https&quot;</span>: <span class="string">&quot;http://127.0.0.1:7890&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># ChatGPT APIçš„URL</span></span><br><span class="line">        url = <span class="string">&quot;https://api.openai.com/v1/chat/completions&quot;</span></span><br><span class="line">        <span class="comment"># ChatGPT APIçš„è®¿é—®å¯†é’¥</span></span><br><span class="line">        api_key = <span class="string">&quot;ã€åœ¨è¿™è¾“å…¥ ChatGPT APIçš„è®¿é—®å¯†é’¥ã€‘&quot;</span></span><br><span class="line">        <span class="comment"># è¯·æ±‚å‚æ•°</span></span><br><span class="line">        parameters = &#123;</span><br><span class="line">                      <span class="string">&quot;model&quot;</span>: <span class="string">&quot;gpt-3.5-turbo-0301&quot;</span>, <span class="comment">#gpt-3.5-turbo-0301</span></span><br><span class="line">                      <span class="string">&quot;messages&quot;</span>:messages<span class="comment"># [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: context&#125;]</span></span><br><span class="line">                    &#125;</span><br><span class="line">        <span class="comment"># è¯·æ±‚å¤´</span></span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;api_key&#125;</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># å‘é€è¯·æ±‚</span></span><br><span class="line">        response = requests.post(url, headers=headers, json=parameters, proxies=proxies)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è§£æå“åº”</span></span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            data = response.json()</span><br><span class="line">            text = data[<span class="string">&quot;choices&quot;</span>][<span class="number">0</span>][<span class="string">&quot;message&quot;</span>]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> text</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(response)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Sorry, something went wrong.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_conversation</span>(<span class="params">self,messages</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Welcome to ChatGPT! How can I help you today?&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿›å…¥å¯¹è¯å¾ªç¯</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># è·å–ç”¨æˆ·è¾“å…¥</span></span><br><span class="line">            user_input = <span class="built_in">input</span>(<span class="string">&quot;&gt; &quot;</span>)</span><br><span class="line">            user_message=&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_input&#125;</span><br><span class="line">            <span class="comment"># å°†ç”¨æˆ·è¾“å…¥æ·»åŠ åˆ°messagesä¸­</span></span><br><span class="line">            messages.append(user_message)</span><br><span class="line">            <span class="comment"># å‘é€APIè¯·æ±‚</span></span><br><span class="line">            response = self.send_request(messages)</span><br><span class="line">            <span class="comment"># è¾“å‡ºAPIè¿”å›å†…å®¹</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ChatBotï¼š&quot;</span>,response[<span class="string">&quot;content&quot;</span>])</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#å°†APIæ¥å£è¿”å›çš„å†…å®¹æ·»åŠ è‡³messagesï¼Œä»¥ç”¨ä½œå¤šè½®å¯¹è¯</span></span><br><span class="line">            messages.append(response)</span><br><span class="line">            <span class="comment"># å¦‚æœAPIè¿”å›çš„å†…å®¹åŒ…å«&quot;goodbye&quot;ï¼Œåˆ™ç»“æŸå¯¹è¯å¾ªç¯</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&quot;goodbye&quot;</span> <span class="keyword">in</span> user_input:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Goodbye!&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    messages=[&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹&quot;</span>&#125;] <span class="comment">#åˆå§‹åŒ–prompt</span></span><br><span class="line">    gpt().start_conversation(messages)</span><br></pre></td></tr></table></figure><p>è®°å¾—ä¿®æ”¹ä½ çš„openai key</p><p><strong>æŸ¥çœ‹ä½ çš„å‰©ä½™é¢åº¦ï¼š</strong></p><p> <img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230907005649289-456792170.png" alt="img"></p><p>è¿”å›åˆšåˆšçš„openaiç½‘ç«™ï¼Œç‚¹å‡»è¿™ä¸ªUpgradeå°±å¯ä»¥æŸ¥çœ‹äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Redisæ•°æ®åº“å­¦ä¹ </title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>Redis æ•°æ®åº“çš„å­˜å‚¨æ ¼å¼å°±æœ‰ç‚¹åƒMapé›†åˆï¼Œæœ‰key-valueï¼Œä¸€ä¸ªkeyæŒ‡å‘ä¸€ä¸ªvalueã€‚</p><p>Redis åœ¨ Java Web ä¸»è¦æœ‰ä¸¤ä¸ªåº”ç”¨åœºæ™¯ï¼š</p><ul><li>å­˜å‚¨ ç¼“å­˜ ç”¨çš„æ•°æ®ï¼›</li><li>éœ€è¦é«˜é€Ÿè¯»&#x2F;å†™çš„åœºåˆä½¿ç”¨å®ƒå¿«é€Ÿè¯»&#x2F;å†™ï¼›</li></ul><h2 id="ä¸‹è½½å’Œå®‰è£…"><a href="#ä¸‹è½½å’Œå®‰è£…" class="headerlink" title="ä¸‹è½½å’Œå®‰è£…"></a>ä¸‹è½½å’Œå®‰è£…</h2><p>é“¾æ¥: <a href="https://pan.baidu.com/s/174vGmyAcUwaIvl4FgXRfnA?pwd=1234">https://pan.baidu.com/s/174vGmyAcUwaIvl4FgXRfnA?pwd=1234</a> æå–ç : 1234 </p><p>è§£å‹åæ–‡ä»¶å¤¹çš„å†…å®¹ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230906133134044-61353266.png" alt="img"></p><p>ç„¶ååœ¨å½“å‰ç›®å½•ä¸‹è¿è¡Œcmdï¼Œå¹¶è¾“å…¥redis-server.conf redis-windows.conf,å°±ä¼šå‡ºç°ä¸‹é¢çš„ç”»é¢</p><p> <img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230906133857648-1743803675.png" alt="img"></p><p>ç»“æŸredisæœåŠ¡æŒ‰ä¸‹ å¿«æ·é”®ctrl+c</p><p>**è¿æ¥redis:**åœ¨å½“å‰ç›®å½•å†è¿è¡Œä¸€ä¸ªcmdå‘½ä»¤çª—ï¼Œå¹¶è¾“å…¥redis-cli.exe -h localhost -p 6379,æ„æ€å°±åœ¨åœ¨å½“å‰è®¡ç®—æœºipä¸‹è¿è¡Œç«¯å£å·ä¸º6379çš„redisæœåŠ¡ã€‚</p><p><strong>æ›´æ”¹redisè¿æ¥å¯†ç ï¼š</strong>æ­¤æ—¶çš„redisè¿æ¥æ˜¯ä¸éœ€è¦å¯†ç çš„ï¼Œè¿™æ—¶å°±éœ€è¦è¿›å…¥redis.windows.confæ–‡ä»¶é…ç½®å¯†ç ï¼Œåœ¨ç¬¬443è¡Œå°†requirepass foobaredæ³¨é‡Šå»æ‰å¹¶å°†foobaredæ›´æ”¹ä¸ºæ‚¨çš„å¯†ç ã€‚</p><p>è¿™æ—¶å†å»è¿æ¥å°±ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230906140550277-210793071.png" alt="img"></p><p>æˆ–è€…å¦ä¸€ç§æ–¹å¼è®¾ç½®å¯†ç ï¼š</p><p><a href="https://blog.csdn.net/u014026084/article/details/105767907">Redisè¿æ¥æŠ¥é”™ï¼šERR Client sent AUTH, but no password is set_rediscommandexecutionexception: err client sent au_é”¦ä¹¦éš¾æ‰˜çš„åšå®¢-CSDNåšå®¢</a></p><p>è¿™æ—¶å†ctrl+cé€€å‡ºå†è¾“å…¥redis-cli.exe -h localhost -p 6379 -a å¯†ç ã€‚è¿™æ—¶å°±å¯ä»¥äº†ã€‚</p><h3 id="ä½¿ç”¨å›¾å½¢åŒ–ç®¡ç†å™¨è¿è¡Œè¿æ¥redis"><a href="#ä½¿ç”¨å›¾å½¢åŒ–ç®¡ç†å™¨è¿è¡Œè¿æ¥redis" class="headerlink" title="ä½¿ç”¨å›¾å½¢åŒ–ç®¡ç†å™¨è¿è¡Œè¿æ¥redis"></a>ä½¿ç”¨å›¾å½¢åŒ–ç®¡ç†å™¨è¿è¡Œè¿æ¥redis</h3><p>ä¸‹è½½ï¼šé“¾æ¥: <a href="https://pan.baidu.com/s/1FTxH7lmsJy2mB8BR4_IqSw?pwd=1234">https://pan.baidu.com/s/1FTxH7lmsJy2mB8BR4_IqSw?pwd&#x3D;1234</a> æå–ç : 1234 ï¼Œç„¶åç‚¹å‡»å·¦ä¸Šè§’çš„æ–°å»ºè¿æ¥ã€‚åœ°å€è¾“å…¥localhostï¼Œå¯†ç å°±æ˜¯ä½ çš„å¯†ç ã€‚</p><h2 id="Rediså¸¸ç”¨æ•°æ®ç±»å‹"><a href="#Rediså¸¸ç”¨æ•°æ®ç±»å‹" class="headerlink" title="Rediså¸¸ç”¨æ•°æ®ç±»å‹"></a>Rediså¸¸ç”¨æ•°æ®ç±»å‹</h2><p>åŸºç¡€çš„5ç§valueï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230906141811057-297994851.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230906141947966-1777001366.png" alt="img"></p><h2 id="Rediså¸¸ç”¨å‘½ä»¤"><a href="#Rediså¸¸ç”¨å‘½ä»¤" class="headerlink" title="Rediså¸¸ç”¨å‘½ä»¤"></a>Rediså¸¸ç”¨å‘½ä»¤</h2><p> åœ¨Another Redis Desktop Managerå›¾å½¢åŒ–æ“ä½œè½¯ä»¶é‡Œé¢æ“ä½œredisï¼šæ–°å»ºè¿æ¥ï¼šåœ°å€è¾“å…¥localhostï¼Œå¯†ç å°±æ˜¯ä½ çš„rediså¯†ç ï¼Œç„¶åæ˜¯åå­—ï¼Œè®°å¾—å…ˆå¼€å¯redisæœåŠ¡ã€‚ç„¶åç‚¹å‡»redis consoleï¼Œå°±å¯ä»¥è¾“å…¥å‘½ä»¤äº†ã€‚</p><h4 id="å­—ç¬¦ä¸²å‘½ä»¤"><a href="#å­—ç¬¦ä¸²å‘½ä»¤" class="headerlink" title="å­—ç¬¦ä¸²å‘½ä»¤"></a>å­—ç¬¦ä¸²å‘½ä»¤</h4><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917114046484-1098819874.png" alt="img"></p><h4 id="å“ˆå¸Œå‘½ä»¤"><a href="#å“ˆå¸Œå‘½ä»¤" class="headerlink" title="å“ˆå¸Œå‘½ä»¤"></a>å“ˆå¸Œå‘½ä»¤</h4><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917114005858-1604787660.png" alt="img"></p><h4 id="åˆ—è¡¨å‘½ä»¤"><a href="#åˆ—è¡¨å‘½ä»¤" class="headerlink" title="åˆ—è¡¨å‘½ä»¤"></a>åˆ—è¡¨å‘½ä»¤</h4><p>æœ‰åº</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917115957619-1141054209.png" alt="img"></p><h4 id="é›†åˆå‘½ä»¤"><a href="#é›†åˆå‘½ä»¤" class="headerlink" title="é›†åˆå‘½ä»¤"></a>é›†åˆå‘½ä»¤</h4><p>æ— åº</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917132323881-971699888.png" alt="img"></p><h4 id="æœ‰åºé›†åˆ"><a href="#æœ‰åºé›†åˆ" class="headerlink" title="æœ‰åºé›†åˆ"></a>æœ‰åºé›†åˆ</h4><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917132551134-2115034583.png" alt="img"></p><h4 id="é€šç”¨å‘½ä»¤"><a href="#é€šç”¨å‘½ä»¤" class="headerlink" title="é€šç”¨å‘½ä»¤"></a>é€šç”¨å‘½ä»¤</h4><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917133240357-1983959648.png" alt="img"></p><p>keys *ï¼šæŸ¥çœ‹æ‰€æœ‰keyï¼›</p><p>keys 10*ï¼šæŸ¥çœ‹åå­—åŒ…å«10çš„æ‰€æœ‰key</p><h2 id="Javaä¸­æ“ä½œRedis"><a href="#Javaä¸­æ“ä½œRedis" class="headerlink" title="Javaä¸­æ“ä½œRedis"></a>Javaä¸­æ“ä½œRedis</h2><p>ä½¿ç”¨å®¢æˆ·ç«¯æ“ä½œï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917133815151-1973854951.png" alt="img"></p><p>è¿™é‡Œé€‰ç”¨çš„æ˜¯springæ¡†æ¶çš„spring data redis</p><p>æ–¹æ³•ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230917134200101-1195312880.png" alt="img"></p><p>åœ¨configè½¯ä»¶åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªredisé…ç½®ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹åˆ›å»ºrediså¯¹è±¡:&#123;&#125;&quot;</span>,redisConnectionFactory);</span><br><span class="line">        <span class="type">RedisTemplate</span> <span class="variable">redisTemplate</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®rediså·¥å‚å¯¹è±¡</span></span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testRedis</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(redisTemplate);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå¦‚æœæ§åˆ¶å°è¾“å‡ºorg.springframework.data.redis.core.RedisTemplate@xxxxxxå°±æˆåŠŸäº†</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨OneDriveåœ¨ç½‘ç«™åœ¨çº¿æ’­æ”¾éŸ³è§†é¢‘</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E4%BD%BF%E7%94%A8OneDrive%E5%9C%A8%E7%BD%91%E7%AB%99%E5%9C%A8%E7%BA%BF%E6%92%AD%E6%94%BE%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E4%BD%BF%E7%94%A8OneDrive%E5%9C%A8%E7%BD%91%E7%AB%99%E5%9C%A8%E7%BA%BF%E6%92%AD%E6%94%BE%E9%9F%B3%E8%A7%86%E9%A2%91/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://wuuconix.link/2022/03/02/onedrive/#%E8%A7%86%E9%A2%91%E5%BA%8A">OneDriveçš„å¦™ç”¨ å›¾&#x2F;éŸ³é¢‘&#x2F;è§†é¢‘åºŠ - wuuconixâ€™s blog</a></p><p>ä¹Ÿæ˜¯æœ€è¿‘æƒ³åœ¨è‡ªå·±ç½‘ç«™æä¸ªå›¾åºŠï¼Œä½†æ˜¯ç½‘ç«™å†…å­˜å¯èƒ½ä¸å¤ªæ”¯æŒå¤§é‡çš„å›¾ç‰‡ï¼Œå°¤å…¶æ˜¯è§†é¢‘ï¼Œè¿™æ—¶å°±éœ€è¦å¤–ç”¨åµŒå…¥urlè¿›è¡Œï¼Œæˆ‘è¯•äº†ä¸‹OneDriveæ’­æ”¾1080Pçš„è§†é¢‘è¿˜æ˜¯ä¸æ€ä¹ˆå¡ï¼ŒåŠ è½½ä¸ª3ç§’å·¦å³å°±å¯ä»¥çœ‹äº†ã€‚ä¸»è¦æ˜¯å®ƒç”»è´¨ä¸å‹ç¼©ã€‚è€Œä¸”åšå®¢å›­ä¹Ÿä¸æ”¯æŒä¸Šä¼ è§†é¢‘æ–‡ä»¶å¾—å˜›ï¼Œè¿™æ—¶ä¸€ä¸ªå¤–é“¾å°±å¾ˆé‡è¦ã€‚</p><p>åŸæ–‡æ•™ç¨‹ï¼š<a href="https://mapaler.github.io/GetOneDriveDirectLink/">è·å–OneDriveç›´é“¾ (mapaler.github.io)</a></p><p><strong>å¯¹äº†ç°åœ¨å¥½åƒéœ€è¦é­”æ³•äº†â€¦</strong></p><h2 id="è¯¦ç»†æ•™ç¨‹"><a href="#è¯¦ç»†æ•™ç¨‹" class="headerlink" title="è¯¦ç»†æ•™ç¨‹"></a>è¯¦ç»†æ•™ç¨‹</h2><p>å¦‚æœå•åªå¤–é“¾å›¾ç‰‡ç›´æ¥ç”¨åšå®¢å›­çš„ä¸Šä¼ å›¾ç‰‡æˆ–è€…å…è´¹å›¾åºŠç½‘å€ï¼š<a href="https://www.imgtp.com/">ImgTP - å…è´¹å…¬å…±å›¾åºŠ</a></p><p>éœ€è¦ä¸Šä¼ è§†é¢‘çš„è¯å°±ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼›</p><p>æ³¨å†Œå¾®è½¯è´¦å·å¹¶ç™»å½•åˆ°OneDriveï¼š<a href="https://onedrive.live.com/%EF%BC%8C%E8%BF%99%E4%B8%AA%E7%BD%91%E5%9D%80%E5%B0%B1%E6%98%AF%E4%BD%A0%E5%AD%98%E5%82%A8%E5%9B%BE%E5%BA%8A%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%8C%E4%B8%8A%E4%BC%A0%E4%BD%A0%E7%9A%84%E9%9F%B3%E8%A7%86%E9%A2%91%EF%BC%8C%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%9C%895GB%E7%9A%84%E5%85%8D%E8%B4%B9%E7%A9%BA%E9%97%B4%EF%BC%8C%E5%A4%A7%E4%B8%80%E7%82%B9%E7%9A%8440RMB%E4%B8%80%E4%B8%AA%E6%9C%88%EF%BC%8C%E7%A9%BA%E9%97%B4%E6%9C%89500GB%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BD%A0%E5%BF%98%E4%BA%86%E5%8F%AF%E4%BB%A5%E5%BC%80%E5%B0%8F%E5%8F%B7%E5%BE%97%E5%98%9B%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%8F%B7%E4%B8%8D%E8%A1%8C%E5%B0%B1%E5%A4%9A%E4%B8%AA%E5%8F%B7%E3%80%82">https://onedrive.live.com/ï¼Œè¿™ä¸ªç½‘å€å°±æ˜¯ä½ å­˜å‚¨å›¾åºŠçš„ä½ç½®ï¼Œä¸Šä¼ ä½ çš„éŸ³è§†é¢‘ï¼Œæ™®é€šç”¨æˆ·æœ‰5GBçš„å…è´¹ç©ºé—´ï¼Œå¤§ä¸€ç‚¹çš„40RMBä¸€ä¸ªæœˆï¼Œç©ºé—´æœ‰500GBï¼Œä½†æ˜¯ä½ å¿˜äº†å¯ä»¥å¼€å°å·å¾—å˜›ï¼Œä¸€ä¸ªå·ä¸è¡Œå°±å¤šä¸ªå·ã€‚</a></p><p>ä¸Šä¼ æ–‡ä»¶åå³é”®é€‰æ‹©åµŒå…¥ï¼Œç„¶åå°±å¯ä»¥å¤åˆ¶ä½ çš„ä»£ç åˆ°ä½ çš„ç½‘å€ä¸Šäº†ï¼Œä½†æ˜¯è¿™ç§ç›´æ¥åµŒå…¥å…¨éƒ¨ä»£ç æ’­æ”¾è§†é¢‘ä¼šè·³è½¬åˆ°OneDriveçš„ç½‘ç«™æ’­æ”¾ï¼Œå¦‚æœéœ€è¦é“¾æ¥ç›´æ¥æ‰¾åˆ°ä»£ç é‡Œé¢çš„httpsé“¾æ¥å°±è¡Œã€‚</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230902171147400-556228805.png" alt="img"></p><p>å¦‚æœéœ€è¦æ”¹å˜URLåœ°å€æ©ç ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://mapaler.github.io/GetOneDriveDirectLink/">è·å–OneDriveç›´é“¾ (mapaler.github.io)</a>ç½‘ç«™æ‰€æä¾›çš„æ§åˆ¶é¢æ¿æ¥æ”¹å˜ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230902171131408-1589537501.png" alt="img"></p><h2 id="ä¸¤ç§æ–¹æ³•åµŒå…¥åˆ°åšå®¢å±•ç¤º"><a href="#ä¸¤ç§æ–¹æ³•åµŒå…¥åˆ°åšå®¢å±•ç¤º" class="headerlink" title="ä¸¤ç§æ–¹æ³•åµŒå…¥åˆ°åšå®¢å±•ç¤º"></a>ä¸¤ç§æ–¹æ³•åµŒå…¥åˆ°åšå®¢å±•ç¤º</h2><p>ï¼ˆæµ‹è¯•è§†é¢‘å¤§å°ï¼š103MBï¼Œ20sï¼Œ1080pï¼‰</p><p>è·³è½¬åˆ° OneDrive ç½‘ç«™æ’­æ”¾ï¼šï¼ˆæµç•…ï¼Œé€‚åˆå¤§è§†é¢‘ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;YOUR URL&quot;</span> <span class="attr">width</span>=<span class="string">&quot;320&quot;</span> <span class="attr">height</span>=<span class="string">&quot;320&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">allowfullscreen</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.cnblogs.com/tinymce3/themes/advanced/img/trans.gif" alt="img"> </p><p>(æµ‹è¯•è§†é¢‘ï¼š39MBï¼Œ13sï¼Œ1080pï¼‰<br>ç›´æ¥åœ¨å½“å‰é¡µé¢æ’­æ”¾ï¼šï¼ˆæ–¹ä¾¿ï¼Œé€‚åˆå°è§†é¢‘ï¼‰ç›´æ¥åœ¨åšå®¢å›­è‡ªå¸¦çš„æ’å…¥è§†é¢‘å†™å…¥URLå°±è¡Œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;YOUR URL&quot;</span> <span class="attr">preload</span>=<span class="string">&quot;none&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;240&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">object</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;240&quot;</span> <span class="attr">data</span>=<span class="string">&quot;https://i.cnblogs.com/tinymce3/plugins/media/moxieplayer.swf&quot;</span> <span class="attr">type</span>=<span class="string">&quot;application/x-shockwave-flash&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;src&quot;</span> <span class="attr">value</span>=<span class="string">&quot;https://i.cnblogs.com/tinymce3/plugins/media/moxieplayer.swf&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;flashvars&quot;</span> <span class="attr">value</span>=<span class="string">&quot;url=http%3A//storage.live.com/items/FD2CF6A8D4B567B9%21106%3A/69725401FBD644A131110FCDE1DC5643.mp4<span class="symbol">&amp;amp;</span>poster=/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;allowfullscreen&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;allowscriptaccess&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">object</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.cnblogs.com/tinymce3/themes/advanced/img/trans.gif" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>äº‹åŠ¡ç®¡ç†+AOPè®°å½•æŠ€æœ¯</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/java/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86-AOP%E8%AE%B0%E5%BD%95%E6%8A%80%E6%9C%AF/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/java/%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86-AOP%E8%AE%B0%E5%BD%95%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®æ–‡ä»¶åœ¨ä¹‹å‰çš„å…¬å¸ç®¡ç†ç³»ç»Ÿä¸Šå¢æ·»çš„â€¦.</p><p><strong>â€”äº‹åŠ¡ç®¡ç†â€”</strong></p><p><strong>äº‹åŠ¡</strong>æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œè¿™äº›æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚</p><p>ç®€å•æ¡ˆä¾‹ï¼šåˆ é™¤éƒ¨é—¨ï¼ŒåŒæ—¶åˆ é™¤è¯¥éƒ¨é—¨ä¸‹çš„å‘˜å·¥ã€‚</p><p>ç›´æ¥åœ¨åˆ é™¤éƒ¨é—¨æ–¹æ³•çš„Serviceç±»ä¸‹æ·»åŠ ä¸ªåˆ é™¤å‘˜å·¥çš„æ–¹æ³•å¹¶åœ¨EmpMapperé‡Œæ·»åŠ åˆ é™¤å¯¹åº”éƒ¨é—¨å‘˜å·¥çš„æ–¹æ³•ã€‚</p><p>å¦‚æœæƒ³åœ¨è®©å¤„ç†çš„äº‹ä»¶å›æ»šå¹¶æŠ¥é”™ï¼Œæ¯”å¦‚åœ¨DeptServiceé‡Œåˆ é™¤æ–¹æ³•é‡Œï¼Œæ·»åŠ ä¸Š@Transactional(rollbackFor &#x3D; Exception.class),è¿™é‡Œçš„rollbackForæŒ‡å‡ºç°ä»€ä¹ˆå¼‚å¸¸å°±å›æ»šï¼Œè¿™é‡Œæ˜¯æ‰€æœ‰å¼‚å¸¸ã€‚ä¸ºäº†æµ‹è¯•å°±ç›´æ¥åœ¨æ–¹æ³•é‡Œé¢çš„åˆ é™¤éƒ¨é—¨çš„deptMapperæ–¹æ³•ä¸‹ç¼–å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (true)&#123;</span><br><span class="line">throw new Exception(&quot;å‡ºå·®å•¦..&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™å†å»åˆ é™¤éƒ¨é—¨å°±ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”éƒ¨é—¨ä¹Ÿåˆ é™¤ä¸äº†</p><p><strong>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</strong>æ¯”å¦‚è¦è®°å½•æ¯”è¾ƒé‡è¦çš„æ“ä½œæ—¶ï¼Œå¦‚åˆ é™¤éƒ¨é—¨ï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½è¦è®°å½•æ—¥å¿—ã€‚è¿™æ—¶å°±å†åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ç”¨äºè®°å½•æ—¥å¿—ã€‚åœ¨DeptServiceåˆ é™¤æ–¹æ³•ä¸‹è°ƒç”¨æ·»åŠ æ—¥å¿—çš„æ–¹æ³•ï¼Œç„¶ååœ¨DeptLogServiceç±»ä¸‹çš„æ·»åŠ çš„æ—¥å¿—æ–¹æ³•ä¸‹required:å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç”¨è¯¥ä¼ æ’­è¡Œä¸ºå³å¯ï¼›requires_newï¼šå½“ä¸å¸Œæœ›äº‹åŠ¡ä¹‹é—´ç›¸äº’å½±å“</p><p>DeptLogServiceImplç±»é‡Œé¢ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class DeptLogServiceImpl implements DeptLogService &#123;</span><br><span class="line">@Autowired</span><br><span class="line">private DeptLogMapper deptLogMapper;</span><br><span class="line"></span><br><span class="line">@Transactional(propagation = Propagation.REQUIRES_NEW)</span><br><span class="line">@Override</span><br><span class="line">public void insertLog(DeptLog deptLog) &#123;</span><br><span class="line">deptLogMapper.insert(deptLog);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="â€”AOPâ€”"><a href="#â€”AOPâ€”" class="headerlink" title="â€”AOPâ€”"></a><strong>â€”AOPâ€”</strong></h2><p>Aspect Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œè¿™é‡Œä¸»è¦ç¼–å†™ç”¨äºè®°å½•æ—¥å¿—ã€‚</p><p>å…ˆpom.xmlå¯¼å…¥AOPçš„ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>å¿«é€Ÿå…¥é—¨ç¨‹åºï¼šç»Ÿè®¡å„ä¸ªä¸šåŠ¡å±‚æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</p><p>@Slf4j</p><p>@Component</p><p>@Aspect&#x2F;&#x2F;è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªAOPç±»</p><p>public class TimeAspect {</p><p>@Around(â€œexecution(* top.hepingan.service.<em>.</em>(..))â€œ) <em>&#x2F;&#x2F;åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</em></p><p>public Object recordTime(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {</p><p>&#x2F;&#x2F;è®°å½•å¼€å§‹æ—¶é—´</p><p>long begin&#x3D;System.currentTimeMillis();</p><p>&#x2F;&#x2F;è°ƒç”¨åŸå§‹æ–¹æ³•è¿è¡Œ</p><p>Object result&#x3D;proceedingJoinPoint.proceed();</p><p>&#x2F;&#x2F;è®°å½•ç»“æŸæ—¶é—´ l</p><p>ong end&#x3D;System.currentTimeMillis();</p><p>log.info(proceedingJoinPoint.getSignature()+â€œæ–¹æ³•æ‰§è¡Œè€—æ—¶ï¼š{}msâ€,endâ€“begin);</p><p>return result; }</p><p>}</p><hr><p>@Around(â€œexecution(* top.hepingan.service.<em>.</em>(..))â€)ç¯ç»•é€šçŸ¥æ³¨è§£è¡¨ç¤ºåŒ…æ‹¬serviceå±‚ä¸‹çš„æ‰€æœ‰ä¸šåŠ¡éƒ½è¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</p><p>ç›´æ¥é€šè¿‡æ¡ˆä¾‹æ¥ï¼šå…ˆæ·»åŠ ä¸€ä¸ªæ•°æ®åº“è¡¨ç”¨äºå­˜å‚¨æ—¥å¿—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- æ“ä½œæ—¥å¿—è¡¨</span><br><span class="line">create table operate_log(</span><br><span class="line">id int unsigned primary key auto_increment comment &#x27;ID&#x27;,</span><br><span class="line">operate_user int unsigned comment &#x27;æ“ä½œäººID&#x27;,</span><br><span class="line">operate_time datetime comment &#x27;æ“ä½œæ—¶é—´&#x27;,</span><br><span class="line">class_name varchar(100) comment &#x27;æ“ä½œçš„ç±»å&#x27;,</span><br><span class="line">method_name varchar(100) comment &#x27;æ“ä½œçš„æ–¹æ³•å&#x27;,</span><br><span class="line">method_params varchar(1000) comment &#x27;æ–¹æ³•å‚æ•°&#x27;,</span><br><span class="line">return_value varchar(2000) comment &#x27;è¿”å›å€¼&#x27;,</span><br><span class="line">cost_time bigint comment &#x27;æ–¹æ³•æ‰§è¡Œè€—æ—¶, å•ä½:ms&#x27;</span><br><span class="line">) comment &#x27;æ“ä½œæ—¥å¿—è¡¨&#x27;;</span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨pojoé‡Œåˆ›å»ºä¸€ä¸ªOperate(æ“ä½œçš„æ„æ€)ç±»ï¼šç”¨äºå®šä¹‰æ•°æ®åº“é‡Œé¢æ‰€æœ‰çš„åˆ—ï¼Œå¹¶åŠ ä¸Š@Dataç­‰lombokæ³¨è§£ã€‚</p><p>ç„¶åå†åœ¨top.hepinganä¸‹åˆ›å»ºä¸€ä¸ªæ³¨è§£ï¼šanno.Log,é‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Target(ElementType.METHOD)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface Log &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€åœ¨Mapperé‡Œé¢åˆ›å»ºOperateLogMapperï¼Œç¼–å†™çš„ä»£ç å°±æ˜¯å°†ä¼ é€’çš„æ—¥å¿—æ•°æ®æ·»åŠ åˆ°æ•°æ®åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Insert(&quot;insert into operate_log (operate_user, operate_time, class_name, method_name, method_params, return_value, cost_time) &quot; +</span><br><span class="line">&quot;values (#&#123;operateUser&#125;, #&#123;operateTime&#125;, #&#123;className&#125;, #&#123;methodName&#125;, #&#123;methodParams&#125;, #&#123;returnValue&#125;, #&#123;costTime&#125;);&quot;)</span><br><span class="line">public void insert(OperateLog log);</span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨aopé‡Œé¢åˆ›å»ºä¸€ä¸ªLogAspectï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAscpect</span> &#123;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> OperateLogMapper operateLogMapper;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> HttpServletRequest httpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Around(&quot;@annotation(top.hepingan.anno.Log)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">recordLog</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">//è·å–JWTä»¤ç‰Œå¹¶è§£æ</span></span><br><span class="line"> String jwt=httpServletRequest.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">Claims claims= JwtUtils.parseJWT(jwt);<span class="comment">//è§£æJWTä»¤ç‰Œ</span></span><br><span class="line"> <span class="type">Integer</span> <span class="variable">operateUser</span> <span class="operator">=</span>(Integer) claims.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line">LocalDateTime operateTime=LocalDateTime.now();</span><br><span class="line"><span class="comment">//è·å–æ“ä½œç±»å</span></span><br><span class="line"> String className=proceedingJoinPoint.getTarget().getClass().getName();</span><br><span class="line"><span class="comment">//è·å–æ–¹æ³•å</span></span><br><span class="line"> String methodName=proceedingJoinPoint.getSignature().getName();</span><br><span class="line"><span class="comment">//è·å–æ–¹æ³•å‚æ•°</span></span><br><span class="line"> Object[] args=proceedingJoinPoint.getArgs();</span><br><span class="line">String methodParams= Arrays.toString(args);</span><br><span class="line"><span class="comment">//æ–¹æ³•æ‰§è¡Œè€—æ—¶</span></span><br><span class="line"> <span class="type">long</span> begin=System.currentTimeMillis();</span><br><span class="line"><span class="comment">//è°ƒç”¨åŸå§‹ç›®æ ‡æ–¹æ³•è¿è¡Œ</span></span><br><span class="line"> Object result=proceedingJoinPoint.proceed();</span><br><span class="line"><span class="comment">//æ–¹æ³•è¿”å›å€¼</span></span><br><span class="line"> String returnValue= JSONObject.toJSONString(result);</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> end=System.currentTimeMillis();</span><br><span class="line">Long costTime=end-begin;</span><br><span class="line">OperateLog operateLog=<span class="keyword">new</span> <span class="title class_">OperateLog</span>(<span class="literal">null</span>,operateUser,operateTime,className,methodName,methodParams,returnValue,costTime);</span><br><span class="line">operateLogMapper.insert(operateLog);</span><br><span class="line">log.info(<span class="string">&quot;AOPè®°å½•æ“ä½œæ—¥å¿—ï¼š&#123;&#125;&quot;</span>,operateLog);</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éƒ½æœ‰æ³¨é‡Šç›´æ¥çœ‹å°±è¡Œï¼Œå°±æ˜¯æŠŠæ•°æ®åº“ä¸­çš„æ¯ä¸€ä¸ªå¯¹åº”çš„å‚æ•°éƒ½å†™å‡ºæ¥ã€‚</p><p>æˆ‘ä»¬çš„ç›®çš„æ˜¯åœ¨å¢åˆ æ”¹æ“ä½œåéƒ½è¾“å‡ºä¸€æ®µæ—¥å¿—åˆ°æ•°æ®åº“ä¸­ï¼Œè¿™æ—¶å°±ç›´æ¥åœ¨å„ä¸ªå¢åˆ æ”¹æ–¹æ³•ä¸Šæ·»åŠ ä¸Š@Logæ³¨è§£ã€‚</p><p>å†·çŸ¥è¯†ï¼šå­¦Javaè¦æŒæ¡çš„è‹±è¯­å•è¯è¿˜æœ‰ç‚¹å¤šï¼š[Javaç¨‹åºå‘˜å¿…èƒŒè‹±è¯­å•è¯70ä¸ª_ç¼–å†™èƒŒå•è¯ç¨‹åºjava_âœªé¾è¡Œå¤©ä¸‹âœªçš„åšå®¢-CSDNåšå®¢](<a href="https://blog.csdn.net/a313970281/article/details/79775819#:~:text=Java%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BF%85%E8%83%8C%E8%8B%B1%E8%AF%AD%E5%8D%95%E8%AF%8D70%E4%B8%AA">https://blog.csdn.net/a313970281/article/details/79775819#:~:text=Javaç¨‹åºå‘˜å¿…èƒŒè‹±è¯­å•è¯70ä¸ª</a> 1 Compile%3Aç¼–ç» 2 Run%3Aè¿è¡Œ 3 Class%3Aç±» 4,System%3Aç³»ç»Ÿ 6 out%3Aè¾“å‡º 7 print%3Aæ‰“å° 8 line%3Aè¡Œ æ›´å¤šé¡¹ç›®)</p><p><strong>é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</strong>ï¼šproperties&gt;yml&gt;yamlï¼Œåœ¨ä¼ä¸šå¼€å‘ä¸­ï¼Œymlä¸ºç›®å‰çš„ä¸»æµã€‚cmdå‘½ä»¤è¡Œå‚æ•°çº§ä¼˜å…ˆçº§è¦é«˜äºJAVAç³»ç»Ÿå‚æ•°çº§</p><h2 id="â€”Beançš„ç®¡ç†â€”"><a href="#â€”Beançš„ç®¡ç†â€”" class="headerlink" title="â€”Beançš„ç®¡ç†â€”"></a><strong>â€”Beançš„ç®¡ç†â€”</strong></h2><p><strong>ä»IOCå®¹å™¨è·å–bean</strong></p><p>springbootå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºbeanå¯¹è±¡ï¼Œè·å–beanå¯¹è±¡ä¸‰ç§æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testBean()&#123;</span><br><span class="line">//æ ¹æ®beançš„åç§°è·å–</span><br><span class="line"> DeptController bean1= (DeptController) applicationContext.getBean(&quot;deptController&quot;);</span><br><span class="line">System.out.println(bean1);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®beançš„ç±»å‹è·å–</span><br><span class="line"> DeptController bean2= applicationContext.getBean(DeptController.class );</span><br><span class="line">System.out.println(bean2);</span><br><span class="line"></span><br><span class="line">//æ ¹æ®bean çš„åç§°åŠç±»å‹è·å–</span><br><span class="line"> DeptController bean3 =applicationContext.getBean(&quot;deptController&quot;, DeptController.class);</span><br><span class="line">System.out.println(bean3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåå¯ä»¥å‘ç°è¾“å‡ºçš„beanå¯¹è±¡éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™å°±è¯´æ˜é»˜è®¤åªåˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><p><strong>beançš„ä½œç”¨åŸŸ</strong></p><p>ä¸»è¦çš„ä½œç”¨åŸŸï¼šsingletionï¼šå®¹å™¨å†…åŒ åç§° çš„bean åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆé»˜è®¤ï¼‰ï¼›prototypeæ¯æ¬¡ä½¿ç”¨è¯¥beanæ—¶ä¼šåˆ›å»ºæ–°çš„å®ä¾‹.</p><p>@Lazyæ³¨è§£å¯ä»¥å»¶ç¼“åˆå§‹åŒ–ï¼Œå»¶è¿Ÿåˆ°ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™</p><p>è®¾ç½®ä½œç”¨åŸŸæ³¨è§£ï¼šåœ¨DeptControllerä¸Šåˆ›å»ºä¸»æœºå‘ƒå‘ƒï¼š**@Scope(â€œprototypeâ€)**ï¼Œè¿™æ—¶å†è¿è¡Œbeanå°±ä¸ä¸€æ ·äº†ã€‚</p><p><strong>ç¬¬ä¸‰æ–¹ç±»bean</strong>ï¼ˆäº†è§£ï¼‰</p><p>åœ¨é…ç½®ç±»ä½¿ç”¨@Beanæ³¨è§£</p><p><strong>â€”SpringBootåŸç†â€”</strong></p><p>åº•å±‚åŸç†æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯èµ·æ­¥ä¾èµ–ï¼Œä¸€ä¸ªæ˜¯è‡ªåŠ¨é…ç½®ã€‚</p><p>èµ·æ­¥ä¾èµ–å°±æ˜¯å¯¼å…¥æœ€é«˜çº§çš„jaråŒ…ï¼Œç„¶åé€šè¿‡Mavenä¼ é€’ä¾èµ–çš„åŒ…ï¼Œå°±æŠŠæ•´ä¸ªspringbootçš„ä¾èµ–å¯¼å…¥è¿›æ¥äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰Cå’ŒJavaçš„åº•å­å¦‚ä½•é€Ÿé€šPythonè¯­æ³•</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E6%9C%89C%E5%92%8CJava%E7%9A%84%E5%BA%95%E5%AD%90%E5%A6%82%E4%BD%95%E9%80%9F%E9%80%9APython%E8%AF%AD%E6%B3%95/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E6%9C%89C%E5%92%8CJava%E7%9A%84%E5%BA%95%E5%AD%90%E5%A6%82%E4%BD%95%E9%80%9F%E9%80%9APython%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬äºº4å°æ—¶é€Ÿé€špython</strong>ï¼Œä¸ºå•¥è¦å­¦python,emmmmâ€¦æˆ‘é€‰çš„ä¸“ä¸šè¦å­¦ ã€‚ã€‚ã€‚æ—©ç‚¹æŠŠå®ƒå­¦äº†ä¸Šè¯¾å°±å¯ä»¥æ‰“çŒç¡äº†</p><p><strong>ç”±äºjavaå’ŒCè¿™ä¸¤ä¸ªæˆ‘æ›´ç²¾é€šjava,æ‰€ä»¥ç›´æ¥æ‹¿Javaåšå¯¹æ¯”å•¦ã€‚å› ä¸ºpythonä¸­ä¸ç”¨ç”¨â€™;â€˜æ¢è¡Œ,æ‰€ä»¥å°±æ‹¿â€™;â€˜è¡¨ç¤ºpythonä¸­çš„æ¢è¡Œå•¦~</strong></p><hr><p>&gt;åœ¨pythonä¸­å¯ä»¥<strong>ä¸ç”¨å®šä¹‰å˜é‡ç±»å‹</strong>ï¼Œæ¯”å¦‚ç›´æ¥è¾“age&#x3D;18å°±è¡Œäº†ï¼›å¸ƒå°”ç±»å‹Trueå’ŒFalseéƒ½è¦é¦–å­—æ¯å¤§å†™</p><p>&gt;<strong>inputè¾“å…¥</strong>è¯­æ³•ï¼šxxx&#x3D;input(â€œè¯·è¾“å…¥ï¼šâ€)é»˜è®¤ä¸ºStringç±»å‹ï¼Œè¦æƒ³å®šä¹‰å˜é‡ç±»å‹åœ¨inputå‰é¢åŠ ä¸ªæ‹¬å·å†è¾“å…¥å˜é‡ç±»å‹,å³int(input)ã€‚ç›¸å½“äºjavaä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Scanner input =new Scanner(System.in);</span><br><span class="line">System.out.println(&quot;è¯·è¾“å…¥:&quot;);</span><br><span class="line">String input_name=input.nextLine();</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºjavaä¸­å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æœ‰å¥è¯å«äººç”Ÿè‹¦çŸ­æˆ‘ç”¨pythonâ€¦.</p><p>&gt;åˆ›å»º<strong>åˆ—è¡¨</strong>ï¼šList&#x3D;[â€œhhâ€,â€hpaâ€,18,3.14],è¾“å‡ºåˆ—è¡¨å…ƒç´ :for i in List: print(i);<strong>é›†åˆ</strong>ï¼šjihe&#x3D;{1,â€hhâ€,True}ï¼›é›†åˆæœ‰æ— åºæ€§å’Œé‡å¤æ€§ã€‚<strong>å…ƒç»„</strong>ï¼šyuanzu&#x3D;(1,â€hhâ€)ï¼›å…ƒç»„é‡Œé¢çš„æ•°æ®ä¸èƒ½è¢«ä¿®æ”¹ã€‚<strong>å­—å…¸</strong>ï¼šzidian&#x3D;dict&#x3D;{â€˜nâ€™&#x3D;1,â€™mâ€™&#x3D;2};å­—å…¸æ ¼å¼:{â€˜é”®â€™:å€¼}</p><p>&gt;å¤šè¡Œ<strong>æ³¨é‡Š</strong>ï¼šâ€â€â€xxxâ€â€â€æˆ–â€â€™xxxâ€â€™,ç›¸å½“äºjavaä¸­çš„&#x2F;**xxx&#x2F;ï¼›æ™®é€šæ³¨é‡Šï¼š#xxx</p><p>&gt;åœ¨è¯­å¥ä¸­è¾“å‡ºå˜é‡ï¼šprint(fâ€balbal{a}â€)æˆ–print(â€œbalbal%dâ€%a)#aä¸ºå˜é‡</p><p>&gt;a&#x3D;12;b&#x3D;float(a)#å¼ºåˆ¶è½¬æ¢å˜é‡ç±»å‹</p><p>&gt;åˆ›å»ºéšæœºæ•°:a&#x3D;random.randint(1,100)#1~100çš„éšæœºä¸€ä¸ªæ•°;b&#x3D;random.u</p><p>&gt;**è¡¨ç¤ºä¹˜æ–¹ï¼Œå¦‚æœä¸€ä¸ªæ•´æ•°é™¤ä¸å°½ä¼šè‡ªåŠ¨å˜æˆå°æ•°</p><p>&gt;pythonä¸­å­—ç¬¦ä¸²ä¹Ÿèƒ½è¿›è¡ŒåŠ ä¹˜ï¼ï¼</p><p>&gt;ifè¯­å¥:if æ¡ä»¶: ;elif&#x3D;else if</p><p>&gt;while,forå¾ªç¯è¯­å¥æ¡ä»¶ä¸ç”¨æ‰“æ‹¬å·ã€‚ä¸¾ä¾‹å¥½è®²äº›ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">while a&lt;15:</span><br><span class="line">    a+=1</span><br><span class="line">for i in range(10):#range(x)è¡¨ç¤ºä»0åˆ°xï¼Œä¸åŒ…æ‹¬x,åŒ…æ‹¬0</span><br><span class="line">    print(i)</span><br><span class="line">arr = [1, 3, 5, 6]</span><br><span class="line">for i in arr:#è‡ªå®šä¹‰è¾“å‡º</span><br><span class="line">    print(i)</span><br><span class="line">f=&quot;hepingan&quot;#è¾“å‡ºå­—ç¬¦ä¸²</span><br><span class="line">for i in f:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><p>**&gt;å­—ç¬¦ä¸²çš„æˆªå–:<br>**f&#x3D;â€Hello Worldâ€<br>f&#x3D;f[2:6]#ä»ä¸‹æ ‡2å¼€å§‹æˆªå–åˆ°ä¸‹æ ‡4,å³â€™llo Wâ€™;<br>f&#x3D;f[:6]#ä»ä¸‹æ ‡0æˆªå–åˆ°5,å³â€™Hello Wâ€™<br>f&#x3D;f[2:]#ä»2æˆªå®Œ,å³â€™llo Worldâ€™<br>f&#x3D;f[::2]#æ¯éš”1ä¸ªæˆªå–â€™HloWrdâ€™<br>f&#x3D;f[::-1]#åå‘è¾“å‡ºâ€™dlroW olleHâ€™<br>f&#x3D;f[-5:-1]#å€’èµ·æ•°ä¸‹æ ‡è¾“å‡º,â€™Worlâ€™</p><p><strong>&gt;å­—ç¬¦ä¸²çš„ä¸€äº›æ–¹æ³•ï¼š</strong></p><p>g&#x3D;â€™my name is hpaâ€™<br>g&#x3D;g.replace(â€˜hpaâ€™,â€™hhâ€™)#æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„éƒ¨åˆ†å†…å®¹<br>arr&#x3D;g.split(â€ â€œ)#åˆ†å‰²å­—ç¬¦ä¸²çš„ä¸œè¥¿æˆåˆ—è¡¨ï¼Œè¿™é‡Œæ˜¯ç©ºæ ¼<br>g&#x3D;â€-â€œ.join(arr)#å°†åˆ—è¡¨ä»¥â€-â€œè¿æ¥æˆå­—ç¬¦ä¸²<br>å­—ç¬¦ä¸²çš„å…¶ä»–æ–¹æ³•ï¼š<br>titleæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œcapitalizeé¦–ä¸ªå­—æ¯å¤§å†™ï¼Œlstripåˆ é™¤å·¦ä¾§ç©ºç™½å­—ç¬¦ï¼Œrstripåˆ é™¤å³ä¾§ç©ºç™½å­—ç¬¦,stripåˆ é™¤ä¸¤ä¾§ç©ºç™½</p><p><strong>&gt;å¤šç»´åˆ—è¡¨ï¼š</strong><br>arr&#x3D;[[1,2,4],[2,5,7],[5,7,9]]#äºŒç»´åˆ—è¡¨<br>print(arr[1][2])#è¾“å‡º7<br>print(arr[0])#è¾“å‡º[1,2,4]<br>arr&#x3D;[<br>[[1,2,3],[4,5,6],[7,8,9]],<br>[[a,b,â€™sssâ€™],[9,8,7],[6,5,4]],<br>[[16,456,23],[False,12,543],[34,234,546]]<br>]#å¤šç»´åˆ—è¡¨ï¼Œè¿˜å¯ä»¥å¾€ä¸Šå ï¼Œè¿™æ˜¯ä¸‰ç»´çš„<br>print(arr[1][0][2])#è¾“å‡ºsss</p><p><strong>&gt;åˆ—è¡¨çš„æŸ¥æ‰¾,åˆ é™¤å’Œæ’åº:</strong><br>h1&#x3D;12<br>h&#x3D;[1,True,â€™hhâ€™,h1,[1,â€™ooâ€™,99]]<br>if 12 not in h:#åˆ¤æ–­12è¿™ä¸ªå…ƒç´ åœ¨ä¸åœ¨hä¸­<br>print(â€œâ€¦â€)<br>else:<br>print(â€œ^^^â€)<br>h.append(â€œsadnessâ€)#å‘åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ <br>h.insert(2,â€™happynessâ€™)#å‘ä¸‹æ ‡2æ·»åŠ å…ƒç´ <br>h.pop(0)#åˆ é™¤0å·ä¸‹æ ‡çš„å…ƒç´ <br>h.remove(True)#åˆ é™¤æŒ‡å®šå…ƒç´ <br>print(h)<br>i&#x3D;[1,6,2,9,3]<br>i.sort()#è‡ªåŠ¨æ’åºæ–¹æ³•<br>print(i)</p><p><strong>&gt;æ–¹æ³•çš„ä½¿ç”¨:</strong></p><p>pythonä¸­åˆ›å»ºæ–¹æ³•ç›´æ¥def xxx():</p><p>def run():<br>print(â€œè·‘æ­¥â€)<br>print(â€œç»§ç»­è·‘â€)<br>run()<br>def jisuan(i):<br>if i%2&#x3D;&#x3D;0:<br>print(â€œå¶æ•°â€)<br>else:<br>print(â€œå¥‡æ•°â€)</p><p>num&#x3D;14<br>print(jisuan(num))#è¾“å‡ºä¼šæœ‰Noneï¼Œæ˜¯å› ä¸ºæ²¡æœ‰è¿”å›å€¼(return)<br>if <strong>name</strong> &#x3D;&#x3D;â€™__jisuan__â€™:<br>jisuan(23)<br>def j(n,age&#x3D;19,*args,<strong>kwargs):#ä¸€ä¸ª*è¡¨ç¤ºæ— é™åˆ—è¡¨ï¼Œä¸¤ä¸ª</strong>å°±éœ€è¦åœ¨æ•°æ®å‰æ·»åŠ åç§°<br>if age&gt;&#x3D;18:<br>print(n)<br>for i in args:#è¾“å‡ºå¯ä»¥æ— é™å…ƒç´ çš„argsçš„æ¯ä¸ªå…ƒç´ <br>print(i)<br>else:<br>print(â€˜noâ€™)<br>print(kwargs[â€œhhâ€])#è¾“å‡ºkwargsä¸­åä¸ºâ€™hhâ€™çš„æ•°æ®<br>j(5,20,1,5,4,2,hh&#x3D;12,ss&#x3D;43)#è¾“å‡º5,1,5,4,2,12</p><hr><p><strong>pythonåŸºç¡€è¯­æ³•å­¦ä¹ æ—¶çš„ä»£ç ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">3</span>*<span class="number">1.23</span>)<span class="comment">#ä¸¤ç§ä¸åŒç±»å‹numberå‹æ•°å¯ç›´æ¥ç”¨</span></span><br><span class="line">str1=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line"><span class="built_in">bool</span>=<span class="literal">True</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">s12332321</span></span><br><span class="line"><span class="string">123æˆ‘æ˜¯æ³¨é‡Š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;æˆ‘ä¹Ÿæ˜¯æ³¨é‡Š&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1.replace(<span class="string">&quot;World&quot;</span>,<span class="string">&quot;ä½•å¹³å®‰&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(str1.upper())<span class="comment">#å˜å¤§å†™</span></span><br><span class="line"><span class="built_in">print</span>(str1.lower())<span class="comment">#å˜å°å†™</span></span><br><span class="line"><span class="type">List</span> =[<span class="string">&quot;hh&quot;</span>,<span class="string">&quot;hpa&quot;</span>,<span class="number">19</span>,<span class="literal">True</span>]<span class="comment">#é›†åˆ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">List</span>)</span><br><span class="line"><span class="type">List</span>.pop(<span class="number">0</span>)<span class="comment">#åˆ é™¤åˆ—è¡¨ç¬¬1ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="type">List</span>.append(<span class="number">123</span>)<span class="comment">#åˆ—è¡¨æ·»åŠ å…ƒç´ </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="type">List</span>:<span class="comment">#è¾“å‡ºåˆ—è¡¨å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">jihe=&#123;<span class="number">1</span>,<span class="string">&quot;hh&quot;</span>,<span class="literal">True</span>&#125;<span class="comment">#é›†åˆ</span></span><br><span class="line">yuanzu=(str1,<span class="number">1</span>,<span class="string">&quot;hpa&quot;</span>)<span class="comment">#å…ƒç»„</span></span><br><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;n&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;m&#x27;</span>:<span class="number">2</span>&#125;<span class="comment">#å­—å…¸</span></span><br><span class="line"></span><br><span class="line">a=<span class="number">12</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;balabala<span class="subst">&#123;a&#125;</span>&quot;</span>)<span class="comment">#åœ¨è¯­å¥ä¸­è¾“å‡ºå˜é‡</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;balabala%d&quot;</span>%a)</span><br><span class="line"></span><br><span class="line">b=<span class="built_in">float</span>(a)<span class="comment">#å¼ºåˆ¶è½¬æ¢å˜é‡ç±»å‹</span></span><br><span class="line"></span><br><span class="line">c=random.randint(<span class="number">1</span>,<span class="number">100</span>)<span class="comment">#åˆ›å»ºéšæœºæ•°</span></span><br><span class="line">d=random.uniform(<span class="number">1</span>,<span class="number">100</span>)<span class="comment">#åˆ›å»ºå°æ•°éšæœºæ•°</span></span><br><span class="line"><span class="built_in">print</span>(c,d)</span><br><span class="line">str2=<span class="string">&quot;aaa&quot;</span></span><br><span class="line"><span class="built_in">print</span>(str1+str2*<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">e=<span class="number">12</span>%<span class="number">5</span></span><br><span class="line"><span class="keyword">if</span> e==<span class="number">0</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ•´é™¤&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> e==<span class="number">2</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ä½™2&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ä¸èƒ½æ•´é™¤&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> a&lt;<span class="number">15</span>:</span><br><span class="line">a+=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):<span class="comment">#range(x)è¡¨ç¤ºä»0åˆ°xï¼Œä¸åŒ…æ‹¬x,åŒ…æ‹¬0</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> arr:<span class="comment">#è‡ªå®šä¹‰è¾“å‡º</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">f=<span class="string">&quot;hepingan&quot;</span><span class="comment">#è¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f:</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å­—ç¬¦ä¸²çš„æˆªå–</span></span><br><span class="line">f=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">f=f[<span class="number">2</span>:<span class="number">6</span>]<span class="comment">#ä»ä¸‹æ ‡2å¼€å§‹æˆªå–åˆ°ä¸‹æ ‡4,å³&#x27;llo W&#x27;;</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">f=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">f=f[:<span class="number">6</span>]<span class="comment">#ä»ä¸‹æ ‡0æˆªå–åˆ°5,&#x27;Hello W&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">f=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">f=f[<span class="number">2</span>:]<span class="comment">#ä»2æˆªå®Œ</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">f=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">f=f[::<span class="number">2</span>]<span class="comment">#æ¯éš”1ä¸ªæˆªå–</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">f=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">f=f[::-<span class="number">1</span>]<span class="comment">#åå‘è¾“å‡º</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">f=<span class="string">&quot;Hello World&quot;</span></span><br><span class="line">f=f[-<span class="number">5</span>:-<span class="number">1</span>]<span class="comment">#å€’èµ·æ•°ä¸‹æ ‡è¾“å‡º,&#x27;Worl&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line"></span><br><span class="line">g=<span class="string">&#x27;my name is hpa&#x27;</span></span><br><span class="line">g=g.replace(<span class="string">&#x27;hpa&#x27;</span>,<span class="string">&#x27;hh&#x27;</span>)<span class="comment">#æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„éƒ¨åˆ†å†…å®¹</span></span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line">arr=g.split(<span class="string">&quot; &quot;</span>)<span class="comment">#åˆ†å‰²å­—ç¬¦ä¸²çš„ä¸œè¥¿æˆåˆ—è¡¨ï¼Œè¿™é‡Œæ˜¯ç©ºæ ¼</span></span><br><span class="line"><span class="built_in">print</span>(arr)</span><br><span class="line">g=<span class="string">&quot;-&quot;</span>.join(arr)<span class="comment">#å°†åˆ—è¡¨ä»¥&quot;-&quot;è¿æ¥æˆå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;å­—ç¬¦ä¸²çš„å…¶ä»–æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="string">titleæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œcapitalizeé¦–ä¸ªå­—æ¯å¤§å†™ï¼Œlstripåˆ é™¤å·¦ä¾§ç©ºç™½å­—ç¬¦ï¼Œrstripåˆ é™¤å³ä¾§ç©ºç™½å­—ç¬¦,stripåˆ é™¤ä¸¤ä¾§ç©ºç™½</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">arr=[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>],[<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>],[<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]]<span class="comment">#äºŒç»´åˆ—è¡¨</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>][<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">0</span>])</span><br><span class="line">arr=[</span><br><span class="line">[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]],</span><br><span class="line">[[a,b,<span class="string">&#x27;sss&#x27;</span>],[<span class="number">9</span>,<span class="number">8</span>],[<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>]],</span><br><span class="line">[[<span class="number">16</span>,<span class="number">456</span>,<span class="number">23</span>,<span class="string">&#x27;ppp&#x27;</span>],[<span class="literal">False</span>,<span class="number">12</span>,<span class="number">543</span>],[<span class="number">34</span>,<span class="number">234</span>,<span class="number">546</span>]]</span><br><span class="line">]<span class="comment">#å¤šç»´åˆ—è¡¨ï¼Œè¿˜å¯ä»¥å¾€ä¸Šå ï¼Œè¿™æ˜¯ä¸‰ç»´çš„</span></span><br><span class="line"><span class="built_in">print</span>(arr[<span class="number">1</span>][<span class="number">0</span>][<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">h1=<span class="number">12</span></span><br><span class="line">h=[<span class="number">1</span>,<span class="literal">True</span>,<span class="string">&#x27;hh&#x27;</span>,h1,[<span class="number">1</span>,<span class="string">&#x27;oo&#x27;</span>,<span class="number">99</span>]]</span><br><span class="line"><span class="keyword">if</span> <span class="number">12</span> <span class="keyword">not</span> <span class="keyword">in</span> h:<span class="comment">#åˆ¤æ–­12è¿™ä¸ªå…ƒç´ åœ¨ä¸åœ¨hä¸­</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;...&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;^^^&quot;</span>)</span><br><span class="line">h.append(<span class="string">&quot;sadness&quot;</span>)<span class="comment">#å‘åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ </span></span><br><span class="line">h.insert(<span class="number">2</span>,<span class="string">&#x27;happyness&#x27;</span>)<span class="comment">#å‘ä¸‹æ ‡2æ·»åŠ å…ƒç´ </span></span><br><span class="line">h.pop(<span class="number">0</span>)<span class="comment">#åˆ é™¤0å·ä¸‹æ ‡çš„å…ƒç´ </span></span><br><span class="line">h.remove(<span class="literal">True</span>)<span class="comment">#åˆ é™¤æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(h)</span><br><span class="line"></span><br><span class="line">i=[<span class="number">1</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">3</span>]</span><br><span class="line">i.sort()</span><br><span class="line"><span class="built_in">print</span>(i)<span class="comment">#æ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dict</span>=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&quot;hh&quot;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">19</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="literal">True</span>,<span class="string">&#x27;hobby&#x27;</span>:<span class="string">&#x27;basketball&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">dict</span>[<span class="string">&#x27;age&#x27;</span>]=<span class="string">&#x27;AGE&#x27;</span><span class="comment">#ä¿®æ”¹é”®</span></span><br><span class="line"><span class="keyword">del</span> <span class="built_in">dict</span>[<span class="string">&#x27;hobby&#x27;</span>]<span class="comment">#åˆ é™¤é”®åŠå…¶å€¼</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>.items())<span class="comment">#ä»¥åˆ—è¡¨åŒ…å›´å…ƒç»„çš„å½¢å¼å±•ç¤º</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>.keys())<span class="comment">#è·å–æ‰€ä»¥é”®</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>.values())<span class="comment">#è·å–æ‰€æœ‰å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è·‘æ­¥&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç»§ç»­è·‘&quot;</span>)</span><br><span class="line">run()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jisuan</span>(<span class="params">i</span>):</span><br><span class="line"><span class="keyword">if</span> i%<span class="number">2</span>==<span class="number">0</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¶æ•°&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¥‡æ•°&quot;</span>)</span><br><span class="line"></span><br><span class="line">num=<span class="number">14</span></span><br><span class="line"><span class="built_in">print</span>(jisuan(num))<span class="comment">#è¾“å‡ºä¼šæœ‰Noneï¼Œæ˜¯å› ä¸ºæ²¡æœ‰è¿”å›å€¼(return)</span></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">&#x27;__jisuan__&#x27;</span>:</span><br><span class="line">jisuan(<span class="number">23</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">j</span>(<span class="params">n,age=<span class="number">19</span>,*args,**kwargs</span>):<span class="comment">#ä¸€ä¸ª*è¡¨ç¤ºæ— é™åˆ—è¡¨ï¼Œä¸¤ä¸ª**å°±éœ€è¦åœ¨æ•°æ®å‰æ·»åŠ åç§°</span></span><br><span class="line"><span class="keyword">if</span> age&gt;=<span class="number">18</span>:</span><br><span class="line"><span class="built_in">print</span>(n)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> args:<span class="comment">#è¾“å‡ºå¯ä»¥æ— é™å…ƒç´ çš„argsçš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;no&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(kwargs[<span class="string">&quot;hh&quot;</span>])<span class="comment">#è¾“å‡ºkwargsä¸­åä¸º&#x27;hh&#x27;çš„æ•°æ®</span></span><br><span class="line">j(<span class="number">5</span>,<span class="number">20</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">2</span>,hh=<span class="number">12</span>,ss=<span class="number">43</span>)<span class="comment">#è¾“å‡º5,1,5,4,2,12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">input_name=<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„åå­—ï¼š&quot;</span>)<span class="comment">#è¾“å…¥</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ä½ çš„åå­—æ˜¯:&quot;</span>+input_name)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ•°æ®åº“å­¦ä¹ ï¼ˆäºŒï¼‰</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æ’åºæŸ¥è¯¢</strong>ï¼šselect å­—æ®µåˆ—è¡¨ from [è¡¨å] <strong>order by</strong> [å­—æ®µå1] [ascå‡åº&#x2F;descé™åºï¼Œé»˜è®¤å€¼ä¸ºå‡åº],[å­—æ®µå2] [æ’åºæ–¹å¼]ï¼›&#x2F;&#x2F;å­—æ®µå1ä¸ºä¼˜å…ˆçº§æ’åºï¼Œå¦‚æœå­—æ®µå1æœ‰ç›¸åŒçš„ï¼Œå†ä»¥å­—æ®µå2æ’åº</p><p><strong>èšåˆå‡½æ•°</strong>ï¼š</p><table><thead><tr><th>count</th><th>ç»Ÿè®¡æ•°é‡ï¼ˆä¸€èˆ¬ä¸é€‰nullçš„åˆ—ï¼‰</th></tr></thead><tbody><tr><td>max</td><td>æœ€å¤§å€¼</td></tr><tr><td>min</td><td>æœ€å°å€¼</td></tr><tr><td>sum</td><td>æ€»å’Œ</td></tr><tr><td>avg</td><td>å¹³å‡å€¼</td></tr></tbody></table><p>Select èšåˆå‡½æ•°(å­—æ®µå) from è¡¨åï¼›&#x2F;&#x2F;nullå€¼ä¸å‚ä¸æ‰€æœ‰èšåˆå‡½æ•°è¿ç®— ! ï¼</p><p><strong>åˆ†ç»„æŸ¥è¯¢</strong>ï¼šselcet å­—æ®µåˆ—è¡¨ from [where åˆ†ç»„å‰æ¡ä»¶é™å®š] group by åˆ†ç»„å­—æ®µå [having åˆ†ç»„åæ¡ä»¶è¿‡æ»¤];&#x2F;&#x2F;åˆ†ç»„åæŸ¥è¯¢çš„å­—æ®µä¸ºèšåˆå‡½æ•°å’Œåˆ†ç»„å­—æ®µï¼ŒæŸ¥è¯¢å…¶ä»–å­—æ®µæ— æ„ä¹‰ï¼Œæ‰§è¡Œé¡ºåºï¼šwhere&gt;èšåˆå‡½æ•°&gt;having</p><p>egï¼šselect sex,avg(score),count(<em>) from where score&gt;60 student group by sex having count(</em>)&gt;1;&#x2F;&#x2F;æŸ¥è¯¢studentè¡¨æ ¼ä¸­ä»¥sex(æ€§åˆ«)ä¸ºåˆ†ç»„çš„scoreå€¼å¤§äº60çš„äººçš„å¹³å‡scoreï¼ˆæˆç»©ï¼‰å¹¶ä¸”å‰é¢åŠ ä¸Šsexçš„æ•°æ®åé¢åŠ ä¸Šåˆ†ç»„åæ¯ä¸ªç»„çš„æ•°é‡,å¦‚æœäººæ•°å°äº2åˆ™è¿‡æ»¤æ‰</p><p>ASçš„ç”¨æ³•ï¼š select [å­—æ®µ] [èšåˆå‡½æ•°] as [your_name] from â€¦ ï¼šaså°±æ˜¯å°†èšåˆå‡½æ•°çš„å†…å®¹çš„å­—æ®µæœ‰ä¸ªåå­—</p><p><strong>åˆ†é¡µæŸ¥è¯¢</strong>ï¼šselect å­—æ®µåˆ—è¡¨ from limit èµ·å§‹ç´¢å¼• , æŸ¥è¯¢æ¡ç›®æ•°;&#x2F;&#x2F;èµ·å§‹ç´¢å¼•&#x3D;ï¼ˆå½“å‰é¡µç -1ï¼‰*æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°</p><h2 id="â€”å¤šè¡¨æŸ¥è¯¢â€”"><a href="#â€”å¤šè¡¨æŸ¥è¯¢â€”" class="headerlink" title="â€”å¤šè¡¨æŸ¥è¯¢â€”"></a>â€”<strong>å¤šè¡¨æŸ¥è¯¢</strong>â€”</h2><p>åŸºç¡€ï¼šselect *from è¡¨å1,è¡¨å2; è¿™ç§æŸ¥ä¼šæ˜¾ç¤ºè¡¨1å’Œè¡¨2çš„é›†åˆä¹˜ï¼Œå³å±•ç¤ºçš„è¡¨ä¼šæœ‰è¡¨1æ•°é‡ä¹˜è¡¨2æ•°é‡çš„ä¹˜ç§¯ã€‚</p><p>éšå¼å†…è¿æ¥ï¼šselect å­—æ®µåˆ—è¡¨ from è¡¨1ï¼Œè¡¨2â€¦ where æ¡ä»¶;</p><p>æ˜¾ç¤ºå†…è¿æ¥ï¼šselect å­—æ®µåˆ—è¡¨ from è¡¨1 [inner] join è¡¨2 on æ¡ä»¶;&#x2F;&#x2F;è¿™ä¸¤ç§å·®ä¸å¤šï¼Œåªæ˜¯è¡¨è¾¾ä¸ä¸€æ ·ã€‚</p><p>å·¦å³è¿æ¥ï¼šselect å­—æ®µåˆ—è¡¨ from è¡¨1 left&#x2F;right join è¡¨2 on æ¡ä»¶;&#x2F;&#x2F;æ˜¾ç¤ºå·¦&#x2F;å³è¾¹çš„æ‰€æœ‰æ•°æ®ï¼ˆå› ä¸ºæœ‰äº›æ¡ä»¶ä¼šä¸æ˜¾ç¤ºéƒ¨åˆ†æ•°æ®æˆ–æœ‰äº›æ•°æ®ä¸ºnullï¼‰</p><h2 id="ç´¢å¼•index"><a href="#ç´¢å¼•index" class="headerlink" title="ç´¢å¼•index"></a>ç´¢å¼•index</h2><p>ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§ç»“æ„ã€‚MySQLç´¢å¼•çš„å»ºç«‹å¯¹äºMySQLçš„é«˜æ•ˆè¿è¡Œæ˜¯å¾ˆé‡è¦çš„ï¼Œç´¢å¼•å¯ä»¥å¤§å¤§æé«˜MySQLçš„æ£€ç´¢é€Ÿåº¦</p><ul><li>ä¸»é”®ç´¢å¼•ï¼šä¸€å¼ è¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•ï¼Œä¸å…è®¸é‡å¤ã€ä¸å…è®¸ä¸º NULLï¼›</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE TableName ADD PRIMARY KEY(column_list); </span><br></pre></td></tr></table></figure><ul><li>å”¯ä¸€ç´¢å¼•ï¼šæ•°æ®åˆ—ä¸å…è®¸é‡å¤ï¼Œå…è®¸ä¸º NULL å€¼ï¼Œä¸€å¼ è¡¨å¯æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼Œç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE UNIQUE INDEX IndexName ON `TableName`(`å­—æ®µå`(length));</span><br><span class="line"># æˆ–è€…</span><br><span class="line">ALTER TABLE TableName ADD UNIQUE (column_list); </span><br></pre></td></tr></table></figure><ul><li>æ™®é€šç´¢å¼•ï¼šä¸€å¼ è¡¨å¯ä»¥åˆ›å»ºå¤šä¸ªæ™®é€šç´¢å¼•ï¼Œä¸€ä¸ªæ™®é€šç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªå­—æ®µï¼Œå…è®¸æ•°æ®é‡å¤ï¼Œå…è®¸ NULL å€¼æ’å…¥ï¼›</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX IndexName ON `TableName`(`å­—æ®µå`(length));</span><br><span class="line"># æˆ–è€…</span><br><span class="line">ALTER TABLE TableName ADD INDEX IndexName(`å­—æ®µå`(length));</span><br></pre></td></tr></table></figure><h2 id="è§†å›¾view"><a href="#è§†å›¾view" class="headerlink" title="è§†å›¾view"></a>è§†å›¾view</h2><p>è§†å›¾æ˜¯è™šæ‹Ÿè¡¨ï¼Œæœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯æŒ‰ç…§æŒ‡å®šçš„æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ã€‚æ‰€ä»¥å€ŸåŠ©è§†å›¾ï¼Œæ¥æ‰§è¡Œç›¸åŒæˆ–ç›¸ä¼¼çš„æŸ¥è¯¢ã€‚</p><p>ä½¿ç”¨è§†å›¾å’Œä½¿ç”¨è¡¨å®Œå…¨ä¸€æ ·ï¼Œåªéœ€è¦æŠŠè§†å›¾å½“æˆä¸€å¼ è¡¨å°±OKäº†ã€‚è§†å›¾æ˜¯ä¸€å¼ è™šæ‹Ÿè¡¨</p><table><thead><tr><th>æ“ä½œæŒ‡ä»¤</th><th>ä»£ç </th></tr></thead><tbody><tr><td>åˆ›å»ºè§†å›¾</td><td><code>CREATE VIEW è§†å›¾å(åˆ—1ï¼Œåˆ—2...) AS SELECT (åˆ—1ï¼Œåˆ—2...) FROM ...;</code></td></tr><tr><td>ä½¿ç”¨è§†å›¾</td><td><code>å½“æˆè¡¨ä½¿ç”¨å°±å¥½</code></td></tr><tr><td>ä¿®æ”¹è§†å›¾</td><td><code>CREATE OR REPLACE VIEW è§†å›¾å AS SELECT [...] FROM [...];</code></td></tr><tr><td>æŸ¥çœ‹æ•°æ®åº“å·²æœ‰è§†å›¾</td><td><code>&gt;SHOW TABLES [like...];</code>ï¼ˆå¯ä»¥ä½¿ç”¨æ¨¡ç³ŠæŸ¥æ‰¾ï¼‰</td></tr><tr><td>æŸ¥çœ‹è§†å›¾è¯¦æƒ…</td><td><code>DESC è§†å›¾å</code>æˆ–è€…<code>SHOW FIELDS FROM è§†å›¾å</code></td></tr><tr><td>è§†å›¾æ¡ä»¶é™åˆ¶</td><td><code>[WITH CHECK OPTION]</code></td></tr></tbody></table><h2 id="æˆæƒä¸å›æ”¶æƒé™"><a href="#æˆæƒä¸å›æ”¶æƒé™" class="headerlink" title="æˆæƒä¸å›æ”¶æƒé™"></a>æˆæƒä¸å›æ”¶æƒé™</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">MySQL èµ‹äºˆç”¨æˆ·æƒé™å‘½ä»¤çš„ç®€å•æ ¼å¼å¯æ¦‚æ‹¬ä¸ºï¼š</span><br><span class="line"></span><br><span class="line"> 1 grant æƒé™ on æ•°æ®åº“å¯¹è±¡ to ç”¨æˆ·  </span><br><span class="line">ä¸€ã€grant æ™®é€šæ•°æ®ç”¨æˆ·ï¼ŒæŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨æ•°æ®çš„æƒåˆ©</span><br><span class="line">1 grant select on testdb.* to common_user@&#x27;%&#x27;  </span><br><span class="line">2 grant insert on testdb.* to common_user@&#x27;%&#x27;  </span><br><span class="line">3 grant update on testdb.* to common_user@&#x27;%&#x27;  </span><br><span class="line">4 grant delete on testdb.* to common_user@&#x27;%&#x27; </span><br><span class="line">æˆ–è€…ï¼Œç”¨ä¸€æ¡ MySQL å‘½ä»¤æ¥æ›¿ä»£ï¼š</span><br><span class="line"></span><br><span class="line"> 1 grant select, insert, update, delete on testdb.* to common_user@&#x27;%&#x27;  </span><br><span class="line">äºŒã€grant æ•°æ®åº“å¼€å‘äººå‘˜ï¼Œåˆ›å»ºè¡¨ã€ç´¢å¼•ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç­‰æƒé™</span><br><span class="line"></span><br><span class="line">grant åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ MySQL æ•°æ®è¡¨ç»“æ„æƒé™ã€‚</span><br><span class="line">1 grant create on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line">2 grant alter  on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line">3 grant drop   on testdb.* to developer@&#x27;192.168.0.%&#x27;; </span><br><span class="line">grant æ“ä½œ MySQL å¤–é”®æƒé™ï¼š</span><br><span class="line"></span><br><span class="line"> 1 grant references on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line"></span><br><span class="line">grant æ“ä½œ MySQL ä¸´æ—¶è¡¨æƒé™ï¼š</span><br><span class="line"></span><br><span class="line"> 1 grant create temporary tables on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line"></span><br><span class="line">grant æ“ä½œ MySQL ç´¢å¼•æƒé™ï¼š</span><br><span class="line"></span><br><span class="line"> 1 grant index on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line"></span><br><span class="line">grant æ“ä½œ MySQL è§†å›¾ã€æŸ¥çœ‹è§†å›¾æºä»£ç æƒé™ï¼š</span><br><span class="line">1 grant create view on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line">2 grant show   view on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line">grant æ“ä½œ MySQL å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°æƒé™ï¼š</span><br><span class="line">1 grant create routine on testdb.* to developer@&#x27;192.168.0.%&#x27;; -- now, can show procedure status  </span><br><span class="line">2 grant alter  routine on testdb.* to developer@&#x27;192.168.0.%&#x27;; -- now, you can drop a procedure  </span><br><span class="line">3 grant execute        on testdb.* to developer@&#x27;192.168.0.%&#x27;;  </span><br><span class="line">ä¸‰ã€grant æ™®é€š DBA ç®¡ç†æŸä¸ª MySQL æ•°æ®åº“çš„æƒé™</span><br><span class="line"></span><br><span class="line">  1 grant all privileges on testdb to dba@&#x27;localhost&#x27;  </span><br><span class="line"></span><br><span class="line">å…¶ä¸­ï¼Œå…³é”®å­— â€œprivilegesâ€ å¯ä»¥çœç•¥ã€‚</span><br><span class="line"></span><br><span class="line">å››ã€grant é«˜çº§ DBA ç®¡ç† MySQL ä¸­æ‰€æœ‰æ•°æ®åº“çš„æƒé™ï¼š</span><br><span class="line"></span><br><span class="line"> 1 grant all on *.* to dba@&#x27;localhost&#x27;  </span><br><span class="line"></span><br><span class="line">äº”ã€MySQL grant æƒé™ï¼Œåˆ†åˆ«å¯ä»¥ä½œç”¨åœ¨å¤šä¸ªå±‚æ¬¡ä¸Š</span><br><span class="line"></span><br><span class="line">1. grant ä½œç”¨åœ¨æ•´ä¸ª MySQL æœåŠ¡å™¨ä¸Šï¼š</span><br><span class="line">1 grant select on *.* to dba@localhost; -- dba å¯ä»¥æŸ¥è¯¢ MySQL ä¸­æ‰€æœ‰æ•°æ®åº“ä¸­çš„è¡¨ã€‚  </span><br><span class="line">2 grant all    on *.* to dba@localhost; -- dba å¯ä»¥ç®¡ç† MySQL ä¸­çš„æ‰€æœ‰æ•°æ®åº“  </span><br><span class="line">2. grant ä½œç”¨åœ¨å•ä¸ªæ•°æ®åº“ä¸Šï¼š</span><br><span class="line">1 grant select on testdb.* to dba@localhost; -- dba å¯ä»¥æŸ¥è¯¢ testdb ä¸­çš„è¡¨ã€‚  </span><br><span class="line">3. grant ä½œç”¨åœ¨å•ä¸ªæ•°æ®è¡¨ä¸Šï¼š</span><br><span class="line">1 grant select, insert, update, delete on testdb.orders to dba@localhost;  </span><br><span class="line">è¿™é‡Œåœ¨ç»™ä¸€ä¸ªç”¨æˆ·æˆæƒå¤šå¼ è¡¨æ—¶ï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œä»¥ä¸Šè¯­å¥ã€‚ä¾‹å¦‚ï¼š</span><br><span class="line">1 grant select(user_id,username) on smp.users to mo_user@&#x27;%&#x27; identified by &#x27;123345&#x27;;  </span><br><span class="line">2 grant select on smp.mo_sms to mo_user@&#x27;%&#x27; identified by &#x27;123345&#x27;;  </span><br><span class="line">4. grant ä½œç”¨åœ¨è¡¨ä¸­çš„åˆ—ä¸Šï¼š</span><br><span class="line">1 grant select(id, se, rank) on testdb.apache_log to dba@localhost;  </span><br><span class="line">5. grant ä½œç”¨åœ¨å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ä¸Šï¼š</span><br><span class="line">1 grant execute on procedure testdb.pr_add to &#x27;dba&#x27;@&#x27;localhost&#x27;  </span><br><span class="line">2 grant execute on function testdb.fn_add to &#x27;dba&#x27;@&#x27;localhost&#x27;  </span><br><span class="line">å…­ã€æŸ¥çœ‹ MySQL ç”¨æˆ·æƒé™</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆè‡ªå·±ï¼‰æƒé™ï¼š</span><br><span class="line">1 show grants;  </span><br><span class="line">æŸ¥çœ‹å…¶ä»– MySQL ç”¨æˆ·æƒé™ï¼š</span><br><span class="line">1 show grants for dba@localhost;  </span><br><span class="line">ä¸ƒã€æ’¤é”€å·²ç»èµ‹äºˆç»™ MySQL ç”¨æˆ·æƒé™çš„æƒé™ã€‚</span><br><span class="line"></span><br><span class="line">revoke è·Ÿ grant çš„è¯­æ³•å·®ä¸å¤šï¼Œåªéœ€è¦æŠŠå…³é”®å­— â€œtoâ€ æ¢æˆ â€œfromâ€ å³å¯ï¼š</span><br><span class="line">1 grant  all on *.* to   dba@localhost;  </span><br><span class="line">2 revoke all on *.* from dba@localhost; </span><br><span class="line">å…«ã€MySQL grantã€revoke ç”¨æˆ·æƒé™æ³¨æ„äº‹é¡¹</span><br><span class="line"></span><br><span class="line">1. grant, revoke ç”¨æˆ·æƒé™åï¼Œè¯¥ç”¨æˆ·åªæœ‰é‡æ–°è¿æ¥ MySQL æ•°æ®åº“ï¼Œæƒé™æ‰èƒ½ç”Ÿæ•ˆã€‚</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¼ä¸šçº§å¼€å‘é¡¹ç›®ã€Šè‹ç©¹å¤–å–ã€‹(ä¸€)</title>
      <link href="/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E4%B8%80/"/>
      <url>/2024/02/04/%E9%A1%B9%E7%9B%AE%E6%97%A5%E5%BF%97/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä¸è¦å½“éª‘æ‰‹ï¼Œæˆ‘è¦å½“è€æ¿~ï¼</p><h2 id="â€”ç¯å¢ƒæ­å»ºâ€”"><a href="#â€”ç¯å¢ƒæ­å»ºâ€”" class="headerlink" title="â€”ç¯å¢ƒæ­å»ºâ€”"></a><strong>â€”ç¯å¢ƒæ­å»ºâ€”</strong></h2><p>å…ˆä¸‹è½½é»‘é©¬çš„èµ„æ–™æ–‡ä»¶ï¼Œé‡Œé¢day1çš„å‰ç«¯ä»£ç æ–‡ä»¶æ–‡ä»¶å¤¹å°†å…¶å¤åˆ¶åˆ°ä¸€ä¸ªå…¨è‹±æ–‡è·¯å¾„çš„åœ°æ–¹ï¼Œç„¶åè¿è¡Œé‡Œé¢çš„<strong>nginx.exe</strong>ï¼Œæµè§ˆå™¨è¾“å…¥localhostå¦‚æœæœ‰è‹ç©¹å¤–å–çš„ç•Œé¢è¯´æ˜å°±æˆåŠŸäº†ã€‚</p><p>IDEAæ‰“å¼€åç«¯ä»£ç æ–‡ä»¶é‡Œé¢çš„sky-take-outï¼Œé‡Œé¢å·²ç»æ­å»ºå¥½äº†ä¸‰ä¸ªæ¨¡å—åŠå„ä¸ªæ¨¡å—çš„å†…å®¹ã€‚</p><p><strong>gitç¯å¢ƒæ­å»º</strong></p><p>åˆ›å»ºgitä»“åº“ï¼šVCSæ é‡Œæ‰¾åˆ°åˆ›å»ºgitä»“åº“ï¼Œè·¯å¾„å°±é€‰æ‹©sky-take-outï¼Œæ²¡æœ‰ä¸‹è½½gitçš„è¯å°±å»å…ˆä¸‹è½½ï¼š<a href="https://registry.npmmirror.com/-/binary/git-for-windows/v2.40.0.windows.1/Git-2.40.0-64-bit.exe">https://registry.npmmirror.com/-/binary/git-for-windows/v2.40.0.windows.1/Git-2.40.0-64-bit.exe</a></p><p>æˆ‘çš„åšå®¢çš„ä¸‹ä¸€æ–‡ç« å°±æœ‰gitçš„è¯¦ç»†æ•™å­¦</p><p> å®‰è£…æ•™ç¨‹ï¼š<a href="https://blog.csdn.net/mukes/article/details/115693833">Git è¯¦ç»†å®‰è£…æ•™ç¨‹ï¼ˆè¯¦è§£ Git å®‰è£…è¿‡ç¨‹çš„æ¯ä¸€ä¸ªæ­¥éª¤ï¼‰_gitå®‰è£…_mukesçš„åšå®¢-CSDNåšå®¢</a>æˆ–<a href="https://zhuanlan.zhihu.com/p/597447255">gitçš„å®‰è£…ä¸é…ç½®ï¼ˆè¯¦ç»†ï¼‰ - çŸ¥ä¹ (zhihu.com)</a>,</p><p> IDEAé…ç½®gitæ•™ç¨‹ï¼š<a href="https://blog.csdn.net/ITjavaxiaobai/article/details/122326046">IDEAé…ç½®gitè¯¦ç»†æ­¥éª¤_idea git config_å­—èŠ‚å°é¾™çš„åšå®¢-CSDNåšå®¢</a>ï¼ŒgithubåŠ é€Ÿå™¨æ¨èé€‰æ‹©ç½‘æ˜“çš„UUåŠ é€Ÿå™¨,æˆ–è€…ç”¨å›½å†…çš„giteeï¼ˆç äº‘ï¼‰</p><p> ç„¶åç‚¹å‡»æäº¤(ctrl+k)ï¼Œé€‰ä¸­å…¨éƒ¨æ–‡ä»¶ç„¶åä¸‹é¢å†™æ³¨é‡Šè‹ç©¹å¤–å–ï¼Œæäº¤å³å¯ã€‚è¿™æ˜¯æäº¤åˆ°æœ¬åœ°gitä»“åº“</p><p> åˆ›å»ºè¿œç¨‹giteeä»“åº“ï¼š<a href="https://gitee.com/">å·¥ä½œå° - Gitee.com</a>ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªè´¦å·ç„¶åç‚¹å‡»åˆ›å»ºä»“åº“(<a href="https://gitee.com/projects/new">æ–°å»ºä»“åº“ - Gitee.com</a>),åå­—å°±æ˜¯sky-take-outå§ï¼Œå®šä¹‰ä¸ºç§æœ‰ã€‚ç„¶åå†å¤åˆ¶ï¼Œå›åˆ°IDEA,æ‰¾åˆ°gité‡Œé¢çš„æ¨é€ï¼ˆä¸€ä¸ªç®­å¤´ç¬¦å·ï¼‰ï¼Œç‚¹å‡»å·¦è¾¹ä¸‹åˆ’çº¿éƒ¨åˆ†ï¼Œè¾“å…¥åˆšåˆšå¤åˆ¶çš„urlï¼Œç„¶åç‚¹å‡»ä»ç„¶æ¨é€ã€‚</p><p><strong>æ•°æ®ç¯å¢ƒæ­å»º</strong></p><p> æ•°æ®åº“æ–‡ä»¶ä¸‹è½½ï¼š<a href="https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/sky.sql%EF%BC%8C%E5%86%8D%E5%9C%A8resources%E9%87%8C%E9%9D%A2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E9%85%8D%E7%BD%AE%E5%92%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%86%E7%A0%81%E7%AD%89%E4%BF%A1%E6%81%AF%E3%80%82">https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/sky.sqlï¼Œå†åœ¨resourcesé‡Œé¢é…ç½®æ–‡ä»¶é‡Œé¢é…ç½®å’Œæ•°æ®åº“å¯†ç ç­‰ä¿¡æ¯ã€‚</a></p><p><strong>å‰åç«¯è”è°ƒ</strong></p><p> è¿è¡ŒMavenç”Ÿå‘½å‘¨æœŸçš„compileï¼Œç„¶åå†è¿è¡Œserveræ¨¡å—é‡Œé¢çš„è¿è¡Œç±»ã€‚æ‰“å¼€localhostç½‘å€ï¼ˆé»˜è®¤ç«¯å£å·ä¸º80ï¼‰ï¼Œæ•°æ®åº“é‡Œé¢æœ‰ä¸ªç®¡ç†çš„è´¦å·ï¼šadminï¼Œå¯†ç 123456ï¼Œè¾“å…¥å¹¶ç™»å½•ã€‚å¯ä»¥å…ˆå»è°ƒè¯•ä¸‹EmpControllerImplç†Ÿæ‚‰ä¸‹é¡¹ç›®ã€‚</p><p><strong>Nginxåå‘ä»£ç†</strong></p><p>å°†å‰ç«¯å‘é€çš„åŠ¨æ€è¯·æ±‚ç”±nignxè½¬å‘åˆ°åç«¯æœåŠ¡å™¨ã€‚å¥½å¤„ï¼šæé«˜è®¿é—®é€Ÿåº¦ï¼Œè¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œä¿è¯åç«¯å®‰å…¨ã€‚</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230829191422133-356554957.png" alt="img"></p><p>nginxè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230829192042293-1158764306.png" alt="img"></p><p> nignx.confé‡Œé¢æœ‰ä¸ªå¯ä»¥é…ç½®æœåŠ¡å™¨çš„æƒé‡ï¼ˆä½†æ˜¯å¾—æœ‰ä¸¤å°ä»¥ä¸Šçš„æœåŠ¡å™¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream webservers&#123;</span><br><span class="line">      server <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8080</span> weight=<span class="number">90</span> ;</span><br><span class="line">      #server <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8088</span> weight=<span class="number">10</span> ;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> <strong>ç™»å½•ç³»ç»Ÿçš„å®Œå–„</strong></p><p>ä¸ºäº†å¢åŠ å®‰å…¨æ€§ï¼Œä½¿ç”¨md5è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒæŠŠä¸€ä¸ªæ˜æ–‡åŠ å¯†å¤„ç†ï¼Œä½†æ˜¯ä¸èƒ½åå‘å›è§£ï¼Œæ‰€ä»¥æ˜¯å•å‘çš„ã€‚æ¯”å¦‚å°†adminçš„å¯†ç 123456è¿›è¡ŒåŠ å¯†å°±æ˜¯ï¼še10adc3949ba59abbe56e057f20f883eï¼Œå°†å…¶å¤åˆ¶åˆ°employeeæ•°æ®åº“é‡Œçš„passwordï¼Œç„¶åå†åœ¨EmployeeServiceImplé‡Œçš„&#x2F;&#x2F;TODD æ³¨é‡Šä¸‹å°†passwordå˜é‡è¿›è¡ŒåŠ å¯†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">password =DigestUtils.md5DigestAsHex(password.getBytes());</span><br></pre></td></tr></table></figure><p><strong>å¯¼å…¥æ¥å£æ–‡æ¡£</strong></p><p>ä½¿ç”¨å‰åç«¯åˆ†ç¦»çš„æ–¹å¼å¼€å‘ã€‚æ‰¾åˆ°èµ„æ–™é‡Œé¢çš„ä¸¤ä¸ªjsonæ ¼å¼æ¥å£æ–‡ä»¶ï¼Œå†åœ¨YAPIå®˜ç½‘ï¼ˆ<a href="https://yapi.pro/%EF%BC%89%E9%87%8C%E5%AF%BC%E5%85%A5%E8%BF%99%E4%B8%AA%E4%B8%A4%E4%B8%AA%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%A6%81%E5%88%86%E5%88%AB%E6%96%B0%E5%BB%BA%E4%B8%A4%E4%B8%AA%E9%A1%B9%E7%9B%AE%EF%BC%8C%E5%86%8D%E5%9C%A8%E9%A1%B9%E7%9B%AE%E9%87%8C%E9%9D%A2%E7%9A%84%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E9%87%8C%E9%80%89%E6%8B%A9json%E6%A0%BC%E5%BC%8F%E5%B8%A6%E5%85%A5%E3%80%82">https://yapi.pro/ï¼‰é‡Œå¯¼å…¥è¿™ä¸ªä¸¤ä¸ªæ¥å£ï¼Œè¦åˆ†åˆ«æ–°å»ºä¸¤ä¸ªé¡¹ç›®ï¼Œå†åœ¨é¡¹ç›®é‡Œé¢çš„æ•°æ®ç®¡ç†é‡Œé€‰æ‹©jsonæ ¼å¼å¸¦å…¥ã€‚</a></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230829195818199-1546088218.png" alt="img"></p><p><strong>Swagger</strong></p><p>Swagger æ˜¯ä¸€ä¸ªè§„èŒƒå’Œå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£æ ¼çš„ Web æœåŠ¡(<a href="https://swagger.io/)%E3%80%82">https://swagger.io/)ã€‚</a> å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼š</p><ol><li><p>ä½¿å¾—å‰åç«¯åˆ†ç¦»å¼€å‘æ›´åŠ æ–¹ä¾¿ï¼Œæœ‰åˆ©äºå›¢é˜Ÿåä½œ</p></li><li><p>æ¥å£çš„æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆï¼Œé™ä½åç«¯å¼€å‘äººå‘˜ç¼–å†™æ¥å£æ–‡æ¡£çš„è´Ÿæ‹…</p></li><li><p>åŠŸèƒ½æµ‹è¯•</p><p>Springå·²ç»å°†Swaggerçº³å…¥è‡ªèº«çš„æ ‡å‡†ï¼Œå»ºç«‹äº†Spring-swaggeré¡¹ç›®ï¼Œç°åœ¨å«Springfoxã€‚é€šè¿‡åœ¨é¡¹ç›®ä¸­å¼•å…¥Springfox ï¼Œå³å¯éå¸¸ç®€å•å¿«æ·çš„ä½¿ç”¨Swaggerã€‚</p></li></ol><p>ç›´æ¥ä½¿ç”¨Knife4jï¼ˆä¸ºJava MVCæ¡†æ¶é›†æˆSwaggerç”ŸæˆApiæ–‡æ¡£çš„å¢å¼ºè§£å†³æ–¹æ¡ˆï¼‰ï¼Œé‡Œé¢å°è£…äº†Swaggerçš„ï¼Œåœ¨pom.xmlé‡Œå¯¼å…¥å®ƒçš„ä¾èµ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.0</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>å†åœ¨WebMvcConfiguration.javaé‡Œæ·»åŠ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®é™æ€èµ„æºæ˜ å°„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/doc.html&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡knife4jç”Ÿæˆæ¥å£æ–‡æ¡£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ApiInfo</span> <span class="variable">apiInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ApiInfoBuilder</span>()</span><br><span class="line">                .title(<span class="string">&quot;è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;2.0&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="type">Docket</span> <span class="variable">docket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.sky.controller&quot;</span>))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> docket;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>é‡Œé¢å·²ç»è‡ªåŠ¨ç¼–å†™å¥½äº†çš„ã€‚</p><p>å°±æ˜¯æ·»åŠ ç‚¹æ³¨é‡Šçš„æ„æ€:@Apiæ·»åŠ åœ¨æ§åˆ¶ç±»ä¸Šï¼Œ@ApiOperationï¼Œ@ApiModelï¼Œ@ApiModelPropertyï¼›</p><p>ç¼–å†™Swageræ³¨è§£åå°±å¯ä»¥åœ¨æ¥å£æ–‡æ¡£é‡Œçœ‹åˆ°æ·»åŠ çš„æ¥å£ã€‚</p><h2 id="â€”åŠŸèƒ½å¼€å‘â€”"><a href="#â€”åŠŸèƒ½å¼€å‘â€”" class="headerlink" title="â€”åŠŸèƒ½å¼€å‘â€”"></a>â€”åŠŸèƒ½å¼€å‘â€”</h2><h3 id="æ–°å¢å‘˜å·¥"><a href="#æ–°å¢å‘˜å·¥" class="headerlink" title="æ–°å¢å‘˜å·¥"></a>æ–°å¢å‘˜å·¥</h3><p>åœ¨YApié‡Œé¢æŸ¥çœ‹æ–°å¢å‘˜å·¥çš„æ¥å£ï¼š</p><p> <img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230908170525491-1501688491.png" alt="img"></p><p>Serveræ¨¡å—é‡Œé¢çš„Controllerå±‚ä¸‹çš„EmployeeControllerç±»é‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;æ–°å¢å‘˜å·¥&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> EmployeeDTO employeeDTO)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;æ–°å¢å‘˜å·¥ï¼š&#123;&#125;&quot;</span>,employeeDTO);</span><br><span class="line">        employeeService.save(employeeDTO);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> ç„¶åå†ç‚¹æŠ¥é”™çš„saveè‡ªåŠ¨æ·»åŠ åˆ°serverå±‚ï¼Œç„¶ååœ¨Implé‡Œé¢å®ç°æ¥å£æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(EmployeeDTO employeeDTO)</span> &#123;</span><br><span class="line">        Employee employee=<span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"><span class="comment">//        å¯¹è±¡å±æ€§æ‹·è´</span></span><br><span class="line">        BeanUtils.copyProperties(employeeDTO,employee);</span><br><span class="line">        <span class="comment">//è®¾ç½®è´¦å·çš„çŠ¶æ€ï¼Œé»˜è®¤æ­£å¸¸çŠ¶æ€1è¡¨ç¤ºæ­£å¸¸ï¼Œ0è¡¨ç¤ºé”å®š</span></span><br><span class="line">        employee.setStatus(StatusConstant.ENABLE);</span><br><span class="line"><span class="comment">//        è®¾ç½®é»˜è®¤å¯†ç </span></span><br><span class="line">        employee.setPassword(DigestUtils.md5DigestAsHex(PasswordConstant.DEFAULT_PASSWORD.getBytes()));</span><br><span class="line"><span class="comment">//        è®¾ç½®æ—¶é—´</span></span><br><span class="line">        employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        employee.setCreateTime(LocalDateTime.now());</span><br><span class="line"><span class="comment">//        è®¾ç½®è®°å½•äººå’Œä¿®æ”¹äººçš„id</span></span><br><span class="line"><span class="comment">//        TODO åæœŸä¿®æ”¹</span></span><br><span class="line">        employee.setCreateUser(<span class="number">10L</span>);</span><br><span class="line">        employee.setUpdateUser(<span class="number">10L</span>);</span><br><span class="line"></span><br><span class="line">        employeeMapper.insert(employee);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> EmployeeMapperï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into employee (name, username, password, phone, sex, id_number, create_time, update_time, create_user, update_user,status) &quot; +</span></span><br><span class="line"><span class="meta">            &quot;values(#&#123;name&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;phone&#125;,#&#123;sex&#125;,#&#123;idNumber&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;,#&#123;createUser&#125;,#&#123;updateUser&#125;,#&#123;status&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Employee employee)</span>;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•è¿æ¥</strong></p><p>æ‰“å¼€<a href="http://localhost:8080/doc.html#/default/employee-controller/saveUsingPOST">è‹ç©¹å¤–å–é¡¹ç›®æ¥å£æ–‡æ¡£</a>ï¼Œå…ˆå»å‘˜å·¥ç™»å½•æ¥å£æµ‹è¯•æ‹¿åˆ°ä¸€ä¸ªJWTä»¤ç‰Œï¼Œç„¶åå†åœ¨æ–‡æ¡£ç®¡ç†çš„å…¨å±€å‚æ•°é…ç½®é‡Œæ·»åŠ åä¸ºtokençš„å€¼ä¸ºJWTä»¤ç‰Œçš„å‚æ•°ï¼Œç„¶åå†å»æµ‹è¯•æ·»åŠ å‘˜å·¥çš„æ¥å£ã€‚è®°å¾—è¾“å…¥è§„å®šçš„å†…å®¹ï¼Œæ¯”å¦‚idNumberå°±ä¸º18ä½èº«ä»½è¯å·ã€‚phoneä¸º11ä½ã€‚å¦‚æœæŠ¥401å°±æ˜¯ä»¤ç‰Œè¿‡æœŸäº†ï¼Œè®°å¾—é‡æ–°ç”³è¯·ï¼</p><p><strong>ä»£ç è¡¥å……</strong></p><p>å¦‚æœæ·»åŠ ä¸€ä¸ªç›¸åŒçš„å‘˜å·¥åå­—å°±ä¼šæŠ¥500çš„é”™è¯¯ï¼Œè¿™æ—¶å°±éœ€è¦ç»™ç”¨æˆ·è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œåœ¨GobleExceptionHandlerç±»ä¸­æ·»åŠ ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">exceptionHandler</span><span class="params">(SQLIntegrityConstraintViolationException ex)</span>&#123;</span><br><span class="line"><span class="comment">//        Duplicate entry &#x27;hpan&#x27; for key &#x27;employee.idx_username&#x27;</span></span><br><span class="line">        String message=ex.getMessage();</span><br><span class="line">        <span class="keyword">if</span>(message.contains(<span class="string">&quot;Duplicate entry&quot;</span>))&#123;</span><br><span class="line">            String[] split=message.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            String username=split[<span class="number">2</span>];</span><br><span class="line">            String msg=username+ <span class="string">&quot;å·²å­˜åœ¨&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> Result.error(msg);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Result.error(MessageConstant.UNKNOWN_ERROR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæµ‹è¯•æ¥å£æ–‡æ¡£å°±ä¼šæŠ¥ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230909004015276-2129659358.png" alt="img"></p><p>å®Œå–„æ“ä½œäººçš„IDï¼šå°±æ˜¯saveé‡Œé¢çš„10Lï¼Œä½¿ç”¨Thread.currentThread().getId()è·å–å½“å‰çº¿ç¨‹çš„IDï¼Œè¾“å‡ºåæ¯æ¬¡è¯·æ±‚çš„IDéƒ½ä¸ä¸€æ ·ï¼Œè¿™æ ·å¯ä»¥éªŒè¯æ¯æ¬¡æ“ä½œçš„çº¿ç¨‹éƒ½ä¸ä¸€æ ·ï¼Œåœ¨JWTä»¤ç‰Œæ·»åŠ æ¨¡å—é‡Œé¢ä½¿ç”¨BaseContext.setCurrentId(empId)å°†IDå­˜å‚¨åˆ°ä¸€ä¸ªç©ºé—´é‡Œå»ï¼Œç„¶åå†å°†10Læ›¿æ¢æˆBaseContext.getCurrentId()å–å‡ºæ¥ã€‚</p><h3 id="å‘˜å·¥åˆ†é¡µæŸ¥è¯¢"><a href="#å‘˜å·¥åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="å‘˜å·¥åˆ†é¡µæŸ¥è¯¢"></a>å‘˜å·¥åˆ†é¡µæŸ¥è¯¢</h3><p>è€æ ·å­Controllerå±‚â€“&gt;Serviceå±‚â€“&gt;Mapperå±‚</p><p>Controllerå±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;åˆ†é¡µæŸ¥è¯¢&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;PageResult&gt; <span class="title function_">page</span><span class="params">(EmployeePageQueryDTO employeePageQueryDTO)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;åˆ†é¡µæŸ¥è¯¢:&#123;&#125;&quot;</span>,employeePageQueryDTO);</span><br><span class="line">        PageResult pageResult=employeeService.page(employeePageQueryDTO);</span><br><span class="line">        <span class="keyword">return</span> Result.success(pageResult);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>pom.xmlæ–‡ä»¶é‡Œé¢æ·»åŠ åˆ†é¡µæŸ¥è¯¢çš„ä¾èµ–ï¼Œæºæ–‡ä»¶å·²ç»é…ç½®å¥½äº†ã€‚</p><p>å†åœ¨ServiceImplé‡Œé¢ç¼–å†™ï¼šPageHelper.startPage(employeePageQueryDTO.getPage(),employeePageQueryDTO.getPageSize());</p><p>ç”±äºSQLè¯­å¥æ¯”è¾ƒå¤æ‚è¦ç”¨åˆ°æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ‰€ä»¥å°±åœ¨xmlé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;pageQuery&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.entity.Employee&quot;</span>&gt;</span></span><br><span class="line">        select * from sky_take_out.employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                name like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">        order by create_time desc</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘ï¼Œæ ¹æ®IDæŸ¥è¯¢å‘˜å·¥"><a href="#ç¼–è¾‘ï¼Œæ ¹æ®IDæŸ¥è¯¢å‘˜å·¥" class="headerlink" title="ç¼–è¾‘ï¼Œæ ¹æ®IDæŸ¥è¯¢å‘˜å·¥"></a>ç¼–è¾‘ï¼Œæ ¹æ®IDæŸ¥è¯¢å‘˜å·¥</h3><p>è¡¥å……å¯åŠ¨è­¦ç”¨å‘˜å·¥(ä¹Ÿé¡ºä¾¿å¼„å‡ºç¼–è¾‘å‘˜å·¥çš„æ¨¡å—)ï¼šP0STçš„Controllerâ€“&gt;updateçš„SQLï¼šï¼ˆæ ¹æ®IDæ¥æ“ä½œï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">        update sky_take_out.employee</span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name !=null&quot;</span>&gt;</span></span><br><span class="line">                name=#&#123;name&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username !=null&quot;</span>&gt;</span></span><br><span class="line">                username=#&#123;username&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password !=null&quot;</span>&gt;</span></span><br><span class="line">                password=#&#123;password&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone !=null&quot;</span>&gt;</span></span><br><span class="line">                phone=#&#123;phone&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;sex !=null&quot;</span>&gt;</span></span><br><span class="line">                sex=#&#123;sex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;idNumber !=null&quot;</span>&gt;</span></span><br><span class="line">                idNumber=#&#123;idNumber&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime !=null&quot;</span>&gt;</span></span><br><span class="line">                updateTime=#&#123;updateTime&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateUser !=null&quot;</span>&gt;</span></span><br><span class="line">                updateUser=#&#123;updateUser&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status !=null&quot;</span>&gt;</span></span><br><span class="line">                status=#&#123;status&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        where id =#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ¹æ®idæŸ¥è¯¢å‘˜å·¥å’Œç¼–è¾‘å‘˜å·¥ï¼š</p><p>è¿˜æ˜¯æ ¹æ®æ¥å£æ–‡æ¡£æ¥ç¼–å†™ï¼Œä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><p>ç¼–è¾‘å‘˜å·¥ä¿¡æ¯çš„ServiceImpl:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(EmployeeDTO employeeDTO)</span> &#123;</span><br><span class="line">        Employee employee=<span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">        BeanUtils.copyProperties(employeeDTO,employee);</span><br><span class="line">        <span class="comment">//è®¾ç½®æ—¶é—´</span></span><br><span class="line">        employee.setUpdateTime(LocalDateTime.now());</span><br><span class="line">        employee.setUpdateUser(BaseContext.getCurrentId());</span><br><span class="line">        employeeMapper.update(employee);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> è¿™é‡Œæ˜¯ç›´æ¥è°ƒç”¨åˆšåˆšå¯åŠ¨ç¦ç”¨å‘˜å·¥çš„SQLè¯­å¥</p><p>æ ¹æ®IDæŸ¥è¯¢çš„ServiceImplå±‚ï¼šåŠ ä¸€ä¸ªå¯†ç åŠ å¯†çš„ï½“ï½…ï½”æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        Employee employee=employeeMapper.getById(id);</span><br><span class="line">        employee.setPassword(<span class="string">&quot;******&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p> æœ€åå†å¯¼å…¥åˆ†ç±»ç®¡ç†çš„ä»£ç ï¼Œåœ¨èµ„æ–™ï½„ï½ï½™ï¼’é‡Œé¢çš„åˆ†ç±»ç®¡ç†æ¨¡å—ä»£ç ï¼Œç”±äºè·Ÿå‘˜å·¥ç®¡ç†çš„ä»£ç å·®ä¸å¤šï¼Œå°±ç›´æ¥ï¼­ï½ï½ï½ï½…ï½’çš„å¯¼ï½ï½ï½ï½ï½…ï½’ï¼Œï½“ï½…ï½’ï½–ï½‰ï½ƒï½…çš„å…¥ï½“ï½…ï½’ï½–ï½‰ï½ƒï½…ï¼Œï½ƒï½ï½ï½”ï½’ï½ï½Œï½Œï½…ï½’çš„å¯¼å…¥ï½ƒï½ï½ï½”ï½’ï½ï½Œï½Œï½…ï½’ï¼ä¸ç”¨ç¼–å†™äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ—¥å¿— </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‹ç©¹å¤–å– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿®å¤åŸŸåè®¿é—®é—®é¢˜</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E4%BF%AE%E5%A4%8D%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E4%BF%AE%E5%A4%8D%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ç ”ç©¶äº†ä¸€ä¸‹åˆ,ä¸€å¼€å§‹æ€è€ƒä¸ºä»€ä¹ˆä¸èƒ½ä¸€ç›´ç”¨åŸŸåè®¿é—®ï¼Œåœ¨ä¸»é¡µé¢ç‚¹è¿›æ–°é¡µé¢åå°±ä¸èƒ½ç»§ç»­ä½¿ç”¨åŸŸåè®¿é—®äº†ï¼Œæ‰€ä»¥å°±å¼€å§‹ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œé—®äº†é—®AIæ˜¯åå‘ä»£ç†æœåŠ¡å™¨çš„é—®é¢˜ï¼Œç»“æœç»™æˆ‘ç½‘ç«™æå´©äº†ï¼ŒæŸ¥äº†ä¸€å †èµ„æ–™è¿˜æ˜¯æ²¡è§£å†³ï¼Œç»“æœè‡ªå·±éšä¾¿é€›äº†é€›å®å¡”é¢æ¿ï¼Œçœ‹åˆ°PHPæ˜¯é™æ€çš„ï¼Œæˆ‘å°±çŸ¥é“é—®é¢˜äº†ï¼Œå¦ˆçš„ï¼Œè¿˜æ˜¯è‡ªå·±çš„è„‘è¢‹èªæ˜</p><p>å¸®å¿™é¿é›·ï¼šå¦‚æœæ‰“å¼€ç½‘ç«™æ˜¯ç›´æ¥ç»™ä½ ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ä¸”ä½ æ‰“å¼€æ–‡ä»¶é‡Œé¢çš„å†…å®¹æ˜¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php`</span><br><span class="line">`/**`</span><br><span class="line">`* Front to the WordPress application. This file doesn&#x27;t do anything, but loads`</span><br><span class="line">`* wp-blog-header.php which does and tells WordPress to load the theme.`</span><br><span class="line">`*`</span><br><span class="line">`* @package WordPress`</span><br><span class="line">`*/</span><br><span class="line">/**`</span><br><span class="line">`* Tells WordPress to load the WordPress theme and output it.`</span><br><span class="line">`*`</span><br><span class="line">`* @var bool`</span><br><span class="line">`*/`</span><br><span class="line">`define( &#x27;WP_USE_THEMES&#x27;, true );</span><br><span class="line">/** Loads the WordPress Environment and Template */`</span><br><span class="line">`require __DIR__ . &#x27;/wp-blog-header.php&#x27;;</span><br></pre></td></tr></table></figure><p>å°±è¯æ˜ä½ è·Ÿæˆ‘èŒƒäº†ä¸€æ ·çš„é”™è¯¯&#x3D; &#x3D;</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œäº‘ç½‘ç«™æ­å»ºåˆ†äº«</title>
      <link href="/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E9%98%BF%E9%87%8C%E4%BA%91%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E5%88%86%E4%BA%AB/"/>
      <url>/2024/02/04/IT%E7%AC%94%E8%AE%B0/%E9%98%BF%E9%87%8C%E4%BA%91%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA%E5%88%86%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<p>è´­ä¹°æœåŠ¡å™¨(æ–°äººéƒ½æœ‰å…è´¹çš„)â€“&gt;å»æ§åˆ¶å°åˆ°å®ä¾‹ç®¡ç†é‡Œé‡ç½®å®ä¾‹å¯†ç â€“&gt;å›åˆ°æ¦‚å†µç‚¹å‡»è¿œç¨‹è¿æ¥ï¼Œç„¶åè¾“å…¥åˆšåˆšè®¾ç½®çš„å¯†ç â€“&gt;å»å®å¡”å®˜æ–¹å¤åˆ¶Linuxé¢æ¿çš„å®‰è£…è„šæœ¬(çœ‹æ“ä½œç³»ç»Ÿè¿›è¡Œé€‰æ‹©<a href="https://www.bt.cn/new/download.html">å®å¡”é¢æ¿ä¸‹è½½ï¼Œå…è´¹å…¨èƒ½çš„æœåŠ¡å™¨è¿ç»´è½¯ä»¶ (bt.cn)</a>)â€“&gt;ç²˜è´´åˆ°è¿œç¨‹è¿æ¥å°â€“&gt;å®‰è£…å®Œæˆåè¾“å…¥bt 14æŸ¥çœ‹åœ°å€å’Œè´¦å·å’Œè®°ä½ç«¯å£â€“&gt;å®‰å…¨ç»„æ·»åŠ ATPå¯¹åº”ç«¯å£å’Œ80ç«¯å£â€“&gt; ç™»å½•å®å¡”Linuxé¢æ¿â€“&gt;é€‰æ‹©æ¨èæé€Ÿå®‰è£…é…ç½®(ä¸ºä½ çš„ç½‘ç«™æ·»åŠ å¿…è¦çš„æ’ä»¶ï¼Œå¦‚ï¼šé˜²ç›—)â€“&gt;å·¦ä¾§ä»»åŠ¡æ é€‰æ‹©è½¯ä»¶å•†åº—(å¯ä»¥çœ‹åˆ°ä½ å·²ç»å®‰è£…çš„æ’ä»¶)â€“&gt;é€‰æ‹©ä¸€é”®éƒ¨ç½²ï¼Œç„¶åæ¨èä½¿ç”¨wordpressä¸€é”®éƒ¨ç½²â€“&gt;å®‰è£…å¥½ååŸŸåæ è¾“å…¥IPåœ°å€ï¼Œæ•°æ®åº“å¯ä»¥ä¿®æ”¹ï¼Œç„¶åæäº¤â€“&gt;ç‚¹å‡»é“¾æ¥è¿›å…¥wordPressâ€“&gt;é€‰æ‹©è¯­è¨€ï¼Œå‹¾é€‰éœ¸ç‹æ¡æ¬¾åå†æ³¨å†Œè´¦å·å³å¯è¿›å…¥ç®¡ç†ä½ çš„ç½‘ç«™â€“&gt;å¯ä»¥æŒ‘é€‰ä¸€ä¸ªä½ å–œæ¬¢çš„ä¸»é¢˜å°±å¯ä»¥æ„‰å¿«çš„è¿›è¡Œç¼–è¾‘äº†<br>åŸŸåæ·»åŠ ï¼šè´­ä¹°åŸŸåï¼ˆæœ€ä½çš„ä½è‡³ä¸ªä½æ•°ä¸€å¹´ï¼‰â€“&gt;è¿›å…¥åŸŸåæ§åˆ¶å°â€“&gt;ç‚¹å‡»åŸŸååˆ—è¡¨â€“&gt;é€‰æ‹©ä¸€ä¸ªåŸŸåç‚¹å‡»è§£æâ€“&gt;ç‚¹å‡»ä¸Šæ–¹æ–°æ‰‹å¼•å¯¼ï¼Œæ·»åŠ ä½ çš„IPå³å¯è‡ªåŠ¨æ·»åŠ wwwå’Œ@å‹ï¼Œæ­¤æ—¶ä½ çš„åŸŸåç½‘ç«™è¿˜ä¸èƒ½é—®ï¼Œæœªè¿›è¡Œå¤‡æ¡ˆâ€“&gt;è¿›å…¥ICPå¤‡æ¡ˆï¼Œç‚¹å‡»æ·»åŠ å¤‡æ¡ˆâ€“&gt;æŒ‰ç…§æµç¨‹è¾“å…¥ä¿¡æ¯ï¼Œåœ°åŒºå¡«èº«ä»½è¯ä¸Šçš„(PS:å¤‡æ¡ˆæ•´ä¸ªæµç¨‹å¤§æ¦‚éœ€è¦1ä¸ªæœˆ)</p><p>äºŒçº§åŸŸåæ·»åŠ ï¼šåŸŸåè§£æâ€“&gt;æ·»åŠ åŸŸåâ€“&gt;é€‰æ‹©äºŒçº§åŸŸåâ€“&gt;è¾“å…¥å‰ç¼€å°±è¡Œï¼Œç„¶åå†åˆ°å®å¡”é¢æ¿æ·»åŠ è¯¥åŸŸå,å¦‚æˆ‘çš„äºŒçº§åŸŸå:hy.hepingan.top</p><p>æœ‰é—®é¢˜åŠ Q:1973016127</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¤§ä¸€ä¸‹javaæœŸæœ«è®¾è®¡ï¼šå­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼ˆè£è·ç­ä¸Šç¬¬ä¸€ï¼‰</title>
      <link href="/2024/02/03/IT%E7%AC%94%E8%AE%B0/java/%E5%A4%A7%E4%B8%80%E4%B8%8Bjava%E6%9C%9F%E6%9C%AB%E8%AE%BE%E8%AE%A1%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88%E8%8D%A3%E8%8E%B7%E7%8F%AD%E4%B8%8A%E7%AC%AC%E4%B8%80%EF%BC%89/"/>
      <url>/2024/02/03/IT%E7%AC%94%E8%AE%B0/java/%E5%A4%A7%E4%B8%80%E4%B8%8Bjava%E6%9C%9F%E6%9C%AB%E8%AE%BE%E8%AE%A1%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88%E8%8D%A3%E8%8E%B7%E7%8F%AD%E4%B8%8A%E7%AC%AC%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å…¶å®å°±æ˜¯å½“æ—¶æˆ‘ä»¬æ²¡æ•™æ•°æ®åº“ç„¶åæˆ‘ä¼šJDBCç„¶åå°±å¾—äº†ç¬¬ä¸€äº†ï¼Œä¸€å †ifåˆ¤æ–­è¯­å¥ï¼Œè¿ä¸ªå›¾å½¢åŒ–ç•Œé¢éƒ½æ²¡æœ‰ï¼Œç°åœ¨çœ‹æ¥è¿˜æ˜¯æ„Ÿè§‰å¤ªä½çº§äº†â€¦â€“by 2024-2-7</p><p>ä»æ­¤ä¹‹åå°±ä¸€ç›´æ˜¯æœŸæœ«è®¾è®¡ç¬¬ä¸€äº†   â€“by 2024-8-2</p><h2 id="å…ˆä¸Šjavaä»£ç ï¼š"><a href="#å…ˆä¸Šjavaä»£ç ï¼š" class="headerlink" title="å…ˆä¸Šjavaä»£ç ï¼š"></a><strong>å…ˆä¸Šjavaä»£ç ï¼š</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">å…ˆä¸Šjavaä»£ç ï¼š</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">cs2</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// æœªå®Œæˆçš„swingç•Œé¢è®¾è®¡</span></span><br><span class="line"><span class="comment">// JFrame frame = new JFrame(&quot;å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ&quot;);</span></span><br><span class="line"><span class="comment">// frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span></span><br><span class="line"><span class="comment">// frame.setSize(600,400);</span></span><br><span class="line"><span class="comment">// frame.setVisible(true);</span></span><br><span class="line"><span class="comment">// frame.setLayout(new FlowLayout());</span></span><br><span class="line"><span class="comment">// JButton loginbutton=new JButton(&quot;ç™»å½•&quot;);</span></span><br><span class="line"><span class="comment">// frame.add(loginbutton);</span></span><br><span class="line"><span class="comment">// JButton zhucebutton=new JButton(&quot;æ³¨å†Œ&quot;);</span></span><br><span class="line"><span class="comment">// frame.add(zhucebutton);</span></span><br><span class="line"><span class="comment">// JButton checkBot= new JButton(&quot;æŸ¥è¯¢&quot;);</span></span><br><span class="line"><span class="comment">// checkBot.setEnabled(false);</span></span><br><span class="line"><span class="comment">// JButton luruBot =new JButton(&quot;å½•å…¥&quot;);</span></span><br><span class="line"><span class="comment">// luruBot.setEnabled(false);</span></span><br><span class="line"><span class="comment">// frame.add(checkBot);</span></span><br><span class="line"><span class="comment">// frame.add(luruBot);</span></span><br><span class="line"><span class="comment">// ImageIcon imageIcon =new ImageIcon((&quot;src/hehao.jpg&quot;));</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// JPanel loginPanel =new JPanel();</span></span><br><span class="line"><span class="comment">// loginPanel.setLayout(new GridLayout(3,2));</span></span><br><span class="line"><span class="comment">// loginPanel.add(new JLabel(&quot;å§“åï¼š&quot;));</span></span><br><span class="line"><span class="comment">// JTextField usernameField=new JTextField();</span></span><br><span class="line"><span class="comment">// loginPanel.add(new JLabel(&quot;å¯†ç :&quot;));</span></span><br><span class="line"><span class="comment">// JTextField PasswordField= new JTextField();</span></span><br><span class="line"><span class="comment">// loginPanel.add(PasswordField);</span></span><br><span class="line"><span class="comment">// loginPanel.add(loginbutton);</span></span><br><span class="line"><span class="comment">// loginPanel.add(zhucebutton);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// loginbutton.addActionListener(new ActionListener() &#123;</span></span><br><span class="line"><span class="comment">// @Override</span></span><br><span class="line"><span class="comment">// public void actionPerformed(ActionEvent e) &#123;</span></span><br><span class="line"><span class="comment">// String username = usernameField.getText();</span></span><br><span class="line"><span class="comment">// String password = String.valueOf(PasswordField.getText());</span></span><br><span class="line"><span class="comment">// if(username.equals(&quot;name&quot;)&amp;&amp;password.equals(&quot;password&quot;))&#123;</span></span><br><span class="line"><span class="comment">// loginbutton.setVisible(false);</span></span><br><span class="line"><span class="comment">// luruBot.setEnabled(true);</span></span><br><span class="line"><span class="comment">// checkBot.setEnabled(true);</span></span><br><span class="line"><span class="comment">// &#125;else&#123;</span></span><br><span class="line"><span class="comment">// JOptionPane.showMessageDialog(frame,</span></span><br><span class="line"><span class="comment">// &quot;ç”¨æˆ·åæˆ–å¯†ç è¾“å…¥é”™è¯¯&quot;,</span></span><br><span class="line"><span class="comment">// &quot;ç™»å½•å¤±è´¥&quot;,</span></span><br><span class="line"><span class="comment">// JOptionPane.ERROR_MESSAGE);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// zhucebutton.addActionListener(new ActionListener() &#123;</span></span><br><span class="line"><span class="comment">// @Override</span></span><br><span class="line"><span class="comment">// public void actionPerformed(ActionEvent e) &#123;</span></span><br><span class="line"><span class="comment">// loginbutton.setEnabled(false);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// SwingUtilities.invokeLater(new Runnable() &#123;</span></span><br><span class="line"><span class="comment">// @Override</span></span><br><span class="line"><span class="comment">// public void run() &#123;</span></span><br><span class="line"><span class="comment">// new cs2();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;);2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æ¬¢è¿ä½¿ç”¨å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿï¼&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;æ­£åœ¨ä¸ºä½ åŠ è½½ç¨‹åº...&quot;</span>);</span><br><span class="line"><span class="keyword">final</span> <span class="type">String</span> <span class="variable">JDBC_DRIVER</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="type">String</span> <span class="variable">DB_URL</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/hh&quot;</span>;<span class="comment">//æ•°æ®åº“åä¸ºhh</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">String</span> <span class="variable">USER</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="type">String</span> <span class="variable">PASS</span> <span class="operator">=</span> <span class="string">&quot;123cd233&quot;</span>;<span class="comment">//è´¦å·å’Œå¯†ç </span></span><br><span class="line">System.out.println(<span class="string">&quot;è¯·é€‰æ‹©ä½ çš„æ“ä½œï¼šç™»å½•æŒ‰1ï¼Œæ³¨å†Œè´¦å·æŒ‰2&quot;</span>);</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line"><span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">pstmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">Statement</span> <span class="variable">stmt</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (x != <span class="number">1</span> &amp;&amp; x != <span class="number">2</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ‚¨è¾“å…¥çš„æœ‰è¯¯ï¼Œè¯·é‡æ–°è¿è¡Œç¨‹åº&quot;</span>);</span><br><span class="line">System.exit(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">zhuce:</span><br><span class="line"><span class="keyword">while</span> (x == <span class="number">2</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ‚¨å·²è¿›å…¥æ³¨å†Œç³»ç»Ÿ&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(JDBC_DRIVER);</span><br><span class="line">conn = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å­¦å·:&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å§“å:&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æ³¨å†Œçš„å¯†ç :&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> scanner.next();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span><span class="string">&quot;SELECT * FROM student WHERE id=? &quot;</span>;</span><br><span class="line">pstmt=conn.prepareStatement(sql2);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>,id);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO student (id, name, password) VALUES (?, ?, ?)&quot;</span>;</span><br><span class="line">pstmt = conn.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, id);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, name);</span><br><span class="line">pstmt.setString(<span class="number">3</span>, password);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line"><span class="keyword">if</span> (rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ³¨å†ŒæˆåŠŸï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (pstmt != <span class="literal">null</span>) pstmt.close();</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="literal">null</span>) conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">x = -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">denglu:</span><br><span class="line"><span class="keyword">while</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;æ‚¨å·²è¿›å…¥ç™»å½•ç³»ç»Ÿ&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(JDBC_DRIVER);</span><br><span class="line">conn = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å­¦å·:&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ å§“å:&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> scanner.next();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å¯†ç :&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> scanner.next();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM student WHERE id = ? and name = ? and password = ?&quot;</span>;</span><br><span class="line">pstmt = conn.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, id);</span><br><span class="line">pstmt.setString(<span class="number">2</span>, name);</span><br><span class="line">pstmt.setString(<span class="number">3</span>, password);</span><br><span class="line"></span><br><span class="line">rs = pstmt.executeQuery();</span><br><span class="line"><span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è¾“å…¥æˆåŠŸ.&quot;</span>);</span><br><span class="line">y = <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ä½ è¾“å…¥çš„æœ‰è¯¯ï¼Œå·²ä¸ºä½ é‡æ–°è¿è¡Œç™»å½•ç³»ç»Ÿè¯·å†æ¬¡è¾“å…¥.&quot;</span>);</span><br><span class="line">y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (rs != <span class="literal">null</span>) rs.close();</span><br><span class="line"><span class="keyword">if</span> (pstmt != <span class="literal">null</span>) pstmt.close();</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="literal">null</span>) conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (y == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (y == <span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (y == <span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;--------------------&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;æ¬¢è¿è¿›å…¥å­¦ç”Ÿä¿¡æ¯ç®¡ç†ç³»ç»Ÿ&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;---------------------&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·é€‰æ‹©ä½ çš„æ“ä½œï¼šæŸ¥è¯¢æˆç»©è¯·æŒ‰1ï¼Œå½•å…¥æˆç»©è¯·æŒ‰2&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line"><span class="keyword">if</span> (r == <span class="number">2</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æˆç»©ï¼š&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(JDBC_DRIVER);</span><br><span class="line">conn = DriverManager.getConnection(DB_URL, USER, PASS);</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å­¦å·ï¼š&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> scanner.nextInt();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE student SET score= ? WHERE id=?&quot;</span>;</span><br><span class="line">pstmt = conn.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, score);</span><br><span class="line">pstmt.setInt(<span class="number">2</span>, id);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> pstmt.executeUpdate();</span><br><span class="line"><span class="keyword">if</span> (rows &gt; <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;å½•å…¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (pstmt != <span class="literal">null</span>) pstmt.close();</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="literal">null</span>) conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (r == <span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„å­¦å·:&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Class.forName(JDBC_DRIVER);</span><br><span class="line">conn = DriverManager.getConnection(DB_URL,USER,PASS);</span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT score FROM student WHERE id = ?&quot;</span>; <span class="comment">// Use placeholders</span></span><br><span class="line">pstmt = conn.prepareStatement(sql);</span><br><span class="line">pstmt.setInt(<span class="number">1</span>, id);</span><br><span class="line">rs = pstmt.executeQuery();</span><br><span class="line"><span class="keyword">if</span>(rs.next()) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;score&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;æˆç»©ä¸º: &quot;</span> + score+<span class="string">&quot; , tips:å¦‚æœæœªå½•å…¥æˆç»©é»˜è®¤æˆç»©ä¸º0åˆ†&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">input.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (rs != <span class="literal">null</span>)</span><br><span class="line">rs.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException se) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (pstmt != <span class="literal">null</span>)</span><br><span class="line">pstmt.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException se) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (conn != <span class="literal">null</span>)</span><br><span class="line">conn.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (SQLException se) &#123;</span><br><span class="line">se.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ†äº«ä¸€ä¸ªIDEAçš„ç ´è§£ç½‘ç«™æ•™ç¨‹ï¼š<a href="https://aijihuo.cn/post/43.html">IDEA2023.1ç ´è§£ æ°¸ä¹…æ¿€æ´» æœ€æ–°ç‰ˆIDEAæ¿€æ´» äº²æµ‹å¯ç”¨ï¼ â€“ çˆ±æ¿€æ´»ç½‘ (aijihuo.cn)</a></p><p><strong>æ•°æ®ä½¿ç”¨çš„mysqlæ•°æ®åº“ï¼Œç‰ˆæœ¬æ˜¯8.1ï¼Œåˆ›å»ºstudentè¡¨çš„æ•°æ®åº“ä»£ç ï¼š</strong></p><p>create table student(id int name varchar(20),password varchar(20),score int);</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ•…äº‹ï¼ˆå¤§äºŒä¸Šï¼‰</title>
      <link href="/2024/02/03/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%BA%8C%E4%B8%8A%EF%BC%89/"/>
      <url>/2024/02/03/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%BA%8C%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘å¤§ä¸€ä¸‹å®šçš„æš‘å‡è®¡åˆ’é—æ†¾ç¦»åœºï¼Œè¿˜æ˜¯å¾—å¤šå­¦ç‚¹å„¿æŠ€æœ¯ï¼ŒæŠŠJavaWebç»™æå®Œäº†ï¼Œä»€ä¹ˆSSM, Springbootéƒ½overäº†ï¼Œç¬¬ä¸€ä¸ªå°å‹é¡¹ç›®å…¬å¸å‘˜å·¥ç®¡ç†ç³»ç»Ÿå°±æ˜¯æ ¹æ®ä¸‰å±‚æ¶æ„å†™çš„ï¼Œè™½ç„¶æ˜¯æ¬è¿ä½†è¿˜æ˜¯å­¦åˆ°äº†äº›æŠ€æœ¯ï¼Œç»ƒç«¹å›­ä¹Ÿä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œå¤©é¦™å›­æ²¡ç®¡äº†ï¼Œé©¾ç…§ä¹Ÿæ‹¿åˆ°äº†ï¼Œè€ä¹Ÿè€äº†ï¼Œå¾ˆå……å®çš„ä¸€ä¸ªæš‘å‡ã€‚å¤§äºŒä¸Šå¼€å­¦äº†ï¼Œä¼ä¸šçº§å¼€å‘é¡¹ç›®è‹ç©¹å¤–å–ç™»åœºï¼Œå†™äº†åŠä¸ªæœˆï¼Œæœ€åçš„è®¢å•ç»Ÿè®¡å•¥çš„æ²¡å†™ï¼Œä¹Ÿç®—æ˜¯ç¬¬ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„é¡¹ç›®ï¼ŒåŸºäºspringbootå†™çš„ï¼ŒåŠŸèƒ½å¾ˆé½å…¨å®¢æˆ·ç«¯è¿˜æ˜¯å°ç¨‹åºã€‚10æœˆä»½å‘ç”Ÿäº†ä¸å¥½çš„äº‹æƒ…â€¦.. 10æœˆä»½å­¦å¾—é›¶é›¶æ•£æ•£çš„ï¼Œä¸»è¦å°±æ˜¯springcloud å¾®æœåŠ¡çš„ä¸€äº›åŸºç¡€ï¼ŒFeign, gateway ç½‘å…³ï¼Œdockerå•¥çš„ï¼Œåé¢æ„Ÿè§‰æ²¡å¤šå¤§ç”¨ä»¥åè¦ç”¨çš„æ—¶å€™å†çœ‹ã€‚ç„¶åä¸€ç›´åœ¨ç ”ç©¶å‰åç«¯è°ƒè¿ï¼Œaxios, ajax, vueå’Œnode. jså•¥çš„ã€‚11æœˆæœ‰ç‚¹å„¿æ‘†ï¼Œå¯èƒ½æ˜¯é‚£ä»¶ä¸å¥½çš„äº‹å§ï¼Œæ„Ÿè§‰å¤§å­¦é‚£ä¹ˆç‚¹æ—¶é—´è¿˜æ˜¯è¦å¤šå‡ºå»èµ°èµ°ï¼Œå°±åˆ°å¤„è€å»äº†ï¼Œåæ¥å‘ç°è€æ˜¯éœ€è¦èµ„æœ¬çš„ï¼Œä¸¤è¢–æ¸…é£ä½•èƒ½æ¸¸å¤©ä¸‹ï¼Œçœ‹æˆ‘åšå®¢å°±çŸ¥é“äº†11æœˆå•¥éƒ½æ²¡å¹²ã€‚æ‰¯è¿œäº†æ¥è°ˆå­¦ä¹ çš„ï¼Œåé¢12æœˆä»½æˆ‘å°±æ¢å¤çŠ¶æ€äº†ï¼Œè¿˜æ˜¯ä¸€ä¸ªå­¦é•¿å–Šæˆ‘ä¸€è·¯å¼€å‘å°ç¨‹åºæ¥å£ï¼Œæˆ‘å°±å»å­¦äº†Python çˆ¬è™«ï¼Œä¹Ÿæ˜¯æˆåŠŸçˆ¬å–åˆ°æˆ‘ä»¬å­¦æ ¡æ•™åŠ¡ç³»ç»Ÿçš„ä¿¡æ¯ï¼Œä¹‹å‰11æœˆä»½æˆ‘è¿˜è€ƒè™‘è¿‡è°ƒç”¨chatgptæ¥å£çš„è¿™ä¸‹ä¸å°±ä¼šäº†ï¼Œä¹‹åæˆ‘è‡ªå·±è¿˜å»ç ”ç©¶äº†å°ç¨‹åºå¼€å‘çš„æµç¨‹ï¼Œè¿˜æœ‰å°±æ˜¯æ²¡é’±ä¹°æœåŠ¡å™¨äº†TwTã€‚è·¨å®Œå¹´2024å¹´åæˆ‘å°±å‡†å¤‡å»ç©ç©å¾®æœåŠ¡é¡¹ç›®ï¼Œå­¦æˆåœ¨çº¿ï¼Œç»“æœå¼€å‘ç¯å¢ƒæ­ç©å°±æ²¡æäº†ï¼Œç”µè„‘å¤ªçƒ‚äº†è·‘ä¸äº†å¤§é¡¹ç›®ï¼Œè¿˜è¦è·‘è™šæ‹Ÿæœºâ€¦. ä¹‹åæœ‰äººå–Šæˆ‘å»æå¾®ä¿¡å°ç¨‹åºäº†ï¼Œè¿˜æ˜¯æäº†ä¸ªå°é¡¹ç›®å‡ºæ¥ï¼Œä¹‹åå°±æ˜¯æœŸæœ«è€ƒè¯•é¢„ä¹ äº†ã€‚</p><p>è‡³äºå¯’å‡å˜›ï¼Œæˆ‘æ‰“ç®—å¾€å¤§æ•°æ®æ–¹å‘ä¸Šå‘å±•äº†ï¼Œçœ‹çœ‹è¡Œä¸è¡Œï¼Œæ¯•ç«ŸJavaç¯å¢ƒå¤ªå·äº†ï¼Œå‰åç«¯å¼€å‘æœ‰ç‚¹å„¿é¥±å’Œäº†ï¼Œå¦‚æœå¾€å¤§æ•°æ®æ–¹å‘èµ°çš„è¯å¯èƒ½å°±è¦è€ƒç ”äº†â€¦. æˆ–è€…æä¸ªå®Œæ•´çš„è‡ªå·±çš„é¡¹ç›®ï¼Œå…¨æ ˆå¼€å‘ï¼Œå‰åç«¯åˆ†ç¦»å…³æˆ‘äººä¸åˆ†ç¦»ä»€ä¹ˆäº‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>html,cssåŸºç¡€</title>
      <link href="/2024/02/03/IT%E7%AC%94%E8%AE%B0/html-css%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/02/03/IT%E7%AC%94%E8%AE%B0/html-css%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>æ¨èå¯ä»¥å»çœ‹çœ‹å¤§ä½¬çš„ï¼š<a href="https://blog.csdn.net/m0_55221239/article/details/115313923">(3æ¡æ¶ˆæ¯) Webå‰ç«¯ï¼šJavaScriptæœ€å¼ºæ€»ç»“ é™„è¯¦ç»†ä»£ç  ï¼ˆå¸¦å¸¸ç”¨æ¡ˆä¾‹ï¼ï¼‰_å‰ç«¯ä»£ç ç¤ºä¾‹_åŒ—ç¾ç¨‹åºå‘˜çš„äº§å“ä¹‹æ—…çš„åšå®¢-CSDNåšå®¢</a></p><hr><p>ä¸‹é¢æ˜¯æˆ‘è‡ªå·±æ‰‹å†™çš„ï¼šï¼ˆç”¨äºè‡ªå·±å­¦ä¹ è®°å½•ç”¨çš„ï¼‰</p><p>strong åŠ ç²— b<br>ins ä¸‹åˆ’ u<br>em å€¾æ–œ i(italic)<br>del åˆ é™¤çº¿ s<br>br æ¢è¡Œ hr æ°´å¹³çº¿ pè‡ªåŠ¨æ¢è¡Œ<br>srcè·¯å¾„ controlsæ§åˆ¶ loopå¾ªç¯ autoplayè‡ªåŠ¨æ’­æ”¾(mutecè§†é¢‘é™éŸ³æ’­æ”¾)<br># ç©ºè¿æ¥ hrefè¶…é“¾æ¥è·³è½¬ target(_selfè¦†ç›–åŸç½‘é¡µ _blankæ–°çª—å£æ‰“å¼€)<br>dlè‡ªå®šä¹‰åˆ—è¡¨ dtè‡ªå®šä¹‰åˆ—è¡¨ä¸»é¢˜ ddè‡ªå®šä¹‰åˆ—è¡¨çš„å†…å®¹ ulæ— åºåˆ—è¡¨ olæœ‰åºåˆ—è¡¨ liæ¯ä¸€é¡¹<br>tableè¡¨æ ¼ trè¡¨æ ¼è¡Œ tdå•å…ƒ borderè¾¹æ¡† rowspanåˆå¹¶å‚ç›´ colspanåˆå¹¶æ°´å¹³(å·¦ä¸ŠåŸåˆ™)<br>input:è¾“å…¥ textå•è¡Œæ–‡æœ¬ passwordè¾“å…¥å¯†ç  radioå•é€‰æ¡†(ç”¨äºå¤šé€‰ä¸€) checkboxå¤šé€‰æ¡†,ç”¨äºå¤šé€‰å¤š<br>fileä¸Šä¼ æ–‡ä»¶ submitæäº¤æŒ‰é’® reseté‡ç½®æŒ‰é’® buttonæ™®é€šæŒ‰é’®(é»˜è®¤æ— åŠŸèƒ½) placeholderå ä½ç¬¦ï¼Œæç¤ºè¾“å…¥å†…å®¹<br>checkedé»˜è®¤é€‰ä¸­ multipleé€‰ä¸­å¤šä¸ªæ–‡ä»¶(fileä¸Šä¼ æ–‡ä»¶)<br>selectä¸‹æ‹‰èœå• optionä¸‹æ‹‰æ¯ä¸€é¡¹<br>textareaæ–‡æœ¬åŸŸæ ‡ç­¾<br>labelç»‘å®šå†…å®¹æ¬²è¡¨å•æ ‡ç­¾çš„å…³ç³»<br>divèƒŒæ™¯å›¾æ ‡ç­¾ spone spanè¡Œå†…æ ‡ç­¾<br>headerç½‘ç«™å¤´éƒ¨ nav ç½‘ç«™å¯¼èˆª footerç½‘é¡µåº•éƒ¨ asideä¾§è¾¹æ  sectionåŒºå— articleæ–‡ç« <br>style cssæ ¸å¿ƒ coloré¢œè‰² font-sizeå­—ä½“å¤§å° background-colorèƒŒæ™¯é¢œè‰²(width height)<br>font:ç›´æ¥è¾“å…¥å‚æ•°å°±è¡Œ text-decoration:å­—ä½“è®¾ç½®<br>background-image: url()ï¼šèƒŒæ™¯å›¾ â€œ&gt;display flex<br>marginè°ƒæ•´ä½ç½®<br>border-bottomä¸‹åˆ’çº¿</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloudå¾®æœåŠ¡å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ã€ä»‹ç»,Eureka,Ribbon,Nacosã€‘</title>
      <link href="/2024/02/03/IT%E7%AC%94%E8%AE%B0/java/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E3%80%90%E4%BB%8B%E7%BB%8D-Eureka-Ribbon-Nacos%E3%80%91/"/>
      <url>/2024/02/03/IT%E7%AC%94%E8%AE%B0/java/SpringCloud%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E3%80%90%E4%BB%8B%E7%BB%8D-Eureka-Ribbon-Nacos%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>æ¨èå»æˆ‘çš„åšå®¢å›­çœ‹ï¼Œå› ä¸ºä¸€äº›åŸå› ä¸èƒ½è¿œç¨‹è°ƒç”¨å®ƒçš„å›¾ç‰‡åœ°å€:<a href="http://cnblogs.com/hepingan">http://cnblogs.com/hepingan</a></p><h2 id="å¾®æœåŠ¡ä»‹ç»"><a href="#å¾®æœåŠ¡ä»‹ç»" class="headerlink" title="å¾®æœåŠ¡ä»‹ç»"></a>å¾®æœåŠ¡ä»‹ç»</h2><p>ç”¨äºå¼€å‘å¤§å‹é¡¹ç›®æ—¶ï¼Œå°†æ‰€æœ‰ä»£ç éƒ½æ”¾åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä¼šå¢åŠ å‹åŠ›ï¼Œè€Œä¸”å•ä½“æ¶æ„çš„å¹¶å‘æ•°ä¹Ÿæœ‰é™ï¼Œå ç”¨çš„çº¿ç¨‹å¤šçš„æ—¶å€™å°±ä¸è¡Œäº†ã€‚è¿™æ—¶å°±éœ€è¦ç”¨åˆ°å¾®æœåŠ¡åˆ†å¸ƒå¼å¼€å‘ã€‚</p><p>å•ä½“æ¶æ„ï¼ˆmonolithic structureï¼‰ï¼šé¡¾åæ€ä¹‰ï¼Œæ•´ä¸ªé¡¹ç›®ä¸­æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸­å¼€å‘ï¼›é¡¹ç›®éƒ¨ç½²æ—¶éœ€è¦å¯¹æ‰€æœ‰æ¨¡å—ä¸€èµ·ç¼–è¯‘ã€æ‰“åŒ…ï¼›é¡¹ç›®çš„æ¶æ„è®¾è®¡ã€å¼€å‘æ¨¡å¼éƒ½éå¸¸ç®€å•,å½“é¡¹ç›®è§„æ¨¡è¾ƒå°æ—¶ï¼Œè¿™ç§æ¨¡å¼ä¸Šæ‰‹å¿«ï¼Œéƒ¨ç½²ã€è¿ç»´ä¹Ÿéƒ½å¾ˆæ–¹ä¾¿ï¼Œå› æ­¤æ—©æœŸå¾ˆå¤šå°å‹é¡¹ç›®éƒ½é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚</p><p>ä½†éšç€é¡¹ç›®çš„ä¸šåŠ¡è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œå›¢é˜Ÿå¼€å‘äººå‘˜ä¹Ÿä¸æ–­å¢åŠ ï¼Œå•ä½“æ¶æ„å°±å‘ˆç°å‡ºè¶Šæ¥è¶Šå¤šçš„é—®é¢˜ï¼š</p><ul><li><strong>å›¢é˜Ÿåä½œæˆæœ¬é«˜</strong>ï¼šè¯•æƒ³ä¸€ä¸‹ï¼Œä½ ä»¬å›¢é˜Ÿæ•°åä¸ªäººåŒæ—¶åä½œå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œç”±äºæ‰€æœ‰æ¨¡å—éƒ½åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œä¸åŒæ¨¡å—çš„ä»£ç ä¹‹é—´ç‰©ç†è¾¹ç•Œè¶Šæ¥è¶Šæ¨¡ç³Šã€‚æœ€ç»ˆè¦æŠŠåŠŸèƒ½åˆå¹¶åˆ°ä¸€ä¸ªåˆ†æ”¯ï¼Œä½ ç»å¯¹ä¼šé™·å…¥åˆ°è§£å†³å†²çªçš„æ³¥æ½­ä¹‹ä¸­ã€‚</li><li><strong>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½</strong>ï¼šä»»ä½•æ¨¡å—å˜æ›´éƒ½éœ€è¦å‘å¸ƒæ•´ä¸ªç³»ç»Ÿï¼Œè€Œç³»ç»Ÿå‘å¸ƒè¿‡ç¨‹ä¸­éœ€è¦å¤šä¸ªæ¨¡å—ä¹‹é—´åˆ¶çº¦è¾ƒå¤šï¼Œéœ€è¦å¯¹æ¯”å„ç§æ–‡ä»¶ï¼Œä»»ä½•ä¸€å¤„å‡ºç°é—®é¢˜éƒ½ä¼šå¯¼è‡´å‘å¸ƒå¤±è´¥ï¼Œå¾€å¾€ä¸€æ¬¡å‘å¸ƒéœ€è¦æ•°ååˆ†é’Ÿç”šè‡³æ•°å°æ—¶ã€‚</li><li><strong>ç³»ç»Ÿå¯ç”¨æ€§å·®</strong>ï¼šå•ä½“æ¶æ„å„ä¸ªåŠŸèƒ½æ¨¡å—æ˜¯ä½œä¸ºä¸€ä¸ªæœåŠ¡éƒ¨ç½²ï¼Œç›¸äº’ä¹‹é—´ä¼šäº’ç›¸å½±å“ï¼Œä¸€äº›çƒ­ç‚¹åŠŸèƒ½ä¼šè€—å°½ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´å…¶å®ƒæœåŠ¡ä½å¯ç”¨ã€‚</li></ul><p>å¾®æœåŠ¡æ¶æ„ï¼Œé¦–å…ˆæ˜¯æœåŠ¡åŒ–ï¼Œå°±æ˜¯å°†å•ä½“æ¶æ„ä¸­çš„åŠŸèƒ½æ¨¡å—ä»å•ä½“åº”ç”¨ä¸­æ‹†åˆ†å‡ºæ¥ï¼Œç‹¬ç«‹éƒ¨ç½²ä¸ºå¤šä¸ªæœåŠ¡ã€‚åŒæ—¶è¦æ»¡è¶³ä¸‹é¢çš„ä¸€äº›ç‰¹ç‚¹ï¼š</p><ul><li><strong>å•ä¸€èŒè´£</strong>ï¼šä¸€ä¸ªå¾®æœåŠ¡è´Ÿè´£ä¸€éƒ¨åˆ†ä¸šåŠ¡åŠŸèƒ½ï¼Œå¹¶ä¸”å…¶æ ¸å¿ƒæ•°æ®ä¸ä¾èµ–äºå…¶å®ƒæ¨¡å—ã€‚</li><li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒã€è¿ç»´äººå‘˜ï¼Œå›¢é˜Ÿäººå‘˜è§„æ¨¡ä¸è¶…è¿‡10äººï¼ˆ2å¼ æŠ«è¨èƒ½å–‚é¥±ï¼‰</li><li><strong>æœåŠ¡è‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²ï¼Œè®¿é—®è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚å¹¶ä¸”è¦åšå¥½æœåŠ¡éš”ç¦»ï¼Œé¿å…å¯¹å…¶å®ƒæœåŠ¡äº§ç”Ÿå½±å“</li></ul><p>SpringCloudä¾æ‰˜äºSpringBootçš„è‡ªåŠ¨è£…é…èƒ½åŠ›ï¼Œå¤§å¤§é™ä½äº†å…¶é¡¹ç›®æ­å»ºã€ç»„ä»¶ä½¿ç”¨çš„æˆæœ¬ã€‚å¯¹äºæ²¡æœ‰è‡ªç ”å¾®æœåŠ¡ç»„ä»¶èƒ½åŠ›çš„ä¸­å°å‹ä¼ä¸šï¼Œä½¿ç”¨SpringCloudå…¨å®¶æ¡¶æ¥å®ç°å¾®æœåŠ¡å¼€å‘å¯ä»¥è¯´æ˜¯æœ€åˆé€‚çš„é€‰æ‹©äº†ï¼ <a href="https://spring.io/projects/spring-cloud#overview">Spring Cloud</a></p><p>ç›®å‰SpringCloudæœ€æ–°ç‰ˆæœ¬ä¸º<code>2022.0.x</code>ç‰ˆæœ¬ï¼Œå¯¹åº”çš„SpringBootç‰ˆæœ¬ä¸º<code>3.x</code>ç‰ˆæœ¬ï¼Œä½†å®ƒä»¬å…¨éƒ¨ä¾èµ–äºJDK17ï¼Œç›®å‰åœ¨ä¼ä¸šä¸­ä½¿ç”¨ç›¸å¯¹è¾ƒå°‘ã€‚</p><table><thead><tr><th>SpringCloudç‰ˆæœ¬</th><th>SpringBootç‰ˆæœ¬</th></tr></thead><tbody><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2022.0-Release-Notes">2022.0.x</a> aka Kilburn</td><td>3.0.x</td></tr><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2021.0-Release-Notes">2021.0.x</a> aka Jubilee</td><td>2.6.x, 2.7.x (Starting with 2021.0.3)</td></tr><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes">2020.0.x</a> aka Ilford</td><td>2.4.x, 2.5.x (Starting with 2020.0.3)</td></tr><tr><td><a href="https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-Hoxton-Release-Notes">Hoxton</a></td><td>2.2.x, 2.3.x (Starting with SR5)</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Greenwich-Release-Notes">Greenwich</a></td><td>2.1.x</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Finchley-Release-Notes">Finchley</a></td><td>2.0.x</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Edgware-Release-Notes">Edgware</a></td><td>1.5.x</td></tr><tr><td><a href="https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Dalston-Release-Notes">Dalston</a></td><td>1.5.x</td></tr></tbody></table><p>å› æ­¤ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨æ¬¡æ–°ç‰ˆæœ¬ï¼šSpring Cloud 2021.0.xä»¥åŠSpring Boot 2.7.xç‰ˆæœ¬ã€‚JDKä¸º11</p><p>å¾®æœåŠ¡çš„ä¸€äº›æ¨¡å—ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230925163714657-1190611405.png" alt="img"></p><p><strong>æœ¬é¡¹ç›®çš„æºæ–‡ä»¶ä½¿ç”¨çš„æ˜¯é»‘é©¬ç¨‹åºå‘˜çš„2021ç‰ˆSpringCloudå¾®æœåŠ¡æ•™ç¨‹çš„èµ„æ–™ï¼ï¼ï¼springcloudç‰ˆæœ¬ä¸ºHoxton,springbootç‰ˆæœ¬ä¸º2.3.9</strong></p><p>ä¸€ä¸ªæŸ¥çœ‹è‡ªå·±é¡¹ç›®springbootå’Œspringç‰ˆæœ¬çš„æµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">springVersion</span> <span class="operator">=</span> SpringVersion.getVersion();</span><br><span class="line">        <span class="type">String</span> <span class="variable">springBootVersion</span> <span class="operator">=</span> SpringBootVersion.getVersion();</span><br><span class="line">        System.out.println(<span class="string">&quot;Springç‰ˆæœ¬:&quot;</span>+springVersion+<span class="string">&quot;\nSpringBootç‰ˆæœ¬:&quot;</span>+springBootVersion);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡æ‹†åˆ†"><a href="#æœåŠ¡æ‹†åˆ†" class="headerlink" title="æœåŠ¡æ‹†åˆ†"></a>æœåŠ¡æ‹†åˆ†</h2><p>åŸåˆ™ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230925163901663-1322525584.png" alt="img"></p><p>è·¨æ¨¡å—çš„æŸ¥è¯¢ä¸åŒæ•°æ®åº“çš„ä¾‹å­ï¼š</p><p>é€šè¿‡åœ¨orderé‡ŒæŸ¥è¯¢orderidè¿”å›orderçš„æ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬userçš„æ•°æ®ï¼Œç„¶è€Œuser-serverçš„æ•°æ®åº“å’Œæ¨¡å—éƒ½æ˜¯ä¸order-serverå•ç‹¬åˆ†å¼€çš„ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°RestTemplateå’Œå®ƒçš„getForObjectæ–¹æ³•äº†ã€‚</p><p>OrderApplicationï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºRestTemplateå¹¶æ³¨å…¥bean</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>OderService:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Order <span class="title function_">queryOrderById</span><span class="params">(Long orderId)</span> &#123;</span><br><span class="line">        <span class="comment">// 1.æŸ¥è¯¢è®¢å•</span></span><br><span class="line">        <span class="type">Order</span> <span class="variable">order</span> <span class="operator">=</span> orderMapper.findById(orderId);</span><br><span class="line">        <span class="comment">// 2.åˆ©ç”¨RestTemplateå‘é€httpè¯·æ±‚ï¼ŒæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        String url= <span class="string">&quot;http://userservice/user/&quot;</span>+ order.getUserId();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> restTemplate.getForObject(url, User.class);</span><br><span class="line">        <span class="comment">// 3.å°è£…useråˆ°Order</span></span><br><span class="line">        order.setUser(user);</span><br><span class="line">        <span class="comment">// 4.è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a>Eureka</h2><p> <strong>Eurekaä¸æ¶ˆè´¹è€…å’Œæä¾›è€…çš„å…³ç³»</strong></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230927114336542-915395969.png" alt="img"></p><p>Eureka é‡‡ç”¨ CSï¼ˆClient&#x2F;Serverï¼Œå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨ï¼‰ æ¶æ„ï¼Œå®ƒåŒ…æ‹¬ä»¥ä¸‹ä¸¤å¤§ç»„ä»¶ï¼š</p><ul><li><strong>Eureka Server</strong>ï¼šEureka æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œä¸»è¦ç”¨äºæä¾›æœåŠ¡æ³¨å†ŒåŠŸèƒ½ã€‚å½“å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå°†è‡ªå·±çš„æœåŠ¡æ³¨å†Œåˆ° Eureka Serverã€‚Eureka Server ç»´æŠ¤äº†ä¸€ä¸ªå¯ç”¨æœåŠ¡åˆ—è¡¨ï¼Œå­˜å‚¨äº†æ‰€æœ‰æ³¨å†Œåˆ° Eureka Server çš„å¯ç”¨æœåŠ¡çš„ä¿¡æ¯ï¼Œè¿™äº›å¯ç”¨æœåŠ¡å¯ä»¥åœ¨ Eureka Server çš„ç®¡ç†ç•Œé¢ä¸­ç›´è§‚çœ‹åˆ°ã€‚</li><li><strong>Eureka Client</strong>ï¼šEureka å®¢æˆ·ç«¯ï¼Œé€šå¸¸æŒ‡çš„æ˜¯å¾®æœåŠ¡ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡ï¼Œä¸»è¦ç”¨äºå’Œ Eureka Server è¿›è¡Œäº¤äº’ã€‚åœ¨å¾®æœåŠ¡åº”ç”¨å¯åŠ¨åï¼ŒEureka Client ä¼šå‘ Eureka Server å‘é€å¿ƒè·³ï¼ˆé»˜è®¤å‘¨æœŸä¸º 30 ç§’ï¼‰ã€‚è‹¥ Eureka Server åœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ª Eureka Client çš„å¿ƒè·³ï¼ŒEureka Server å°†å®ƒä»å¯ç”¨æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ï¼ˆé»˜è®¤ 90 ç§’ï¼‰ï¼Œè¿™å°±ç¡®ä¿äº†è°ƒç”¨æœåŠ¡çš„ç¨³å®šå®‰å…¨æ€§ï¼Œç¡®è®¤é‚£ä¸ªserveræœåŠ¡æ²¡æœ‰æ­»ã€‚</li></ul><h3 id="æ­å»ºEurekaæœåŠ¡"><a href="#æ­å»ºEurekaæœåŠ¡" class="headerlink" title="æ­å»ºEurekaæœåŠ¡"></a>æ­å»ºEurekaæœåŠ¡</h3><p>æ–°å»ºä¸€ä¸ªMavené¡¹ç›®æ¨¡å—(eureka-server)ï¼Œåœ¨pomæ–‡ä»¶é‡Œæ·»åŠ eurekaæœåŠ¡ç«¯çš„åæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†åœ¨mainé‡Œé¢åˆ›å»ºä¸€ä¸ªå¯åŠ¨ç±»ï¼Œå¯åŠ¨ç±»ä¸ŠåŠ ä¸Š@EnableEurekaServerå’Œ@SpringBootApplicationæ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EurekaApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(EurekaApplication.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ application.ymlé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10086</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eurekaserver</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å¯åŠ¨eurekaå¯åŠ¨ç±»ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥localhost:10086å±•ç¤ºå‡ºspring Eurekaçš„ç½‘ç«™æ­å»ºæˆåŠŸ</p><h3 id="Eurekaæ³¨å†Œä¸­å¿ƒ"><a href="#Eurekaæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="Eurekaæ³¨å†Œä¸­å¿ƒ"></a>Eurekaæ³¨å†Œä¸­å¿ƒ</h3><p>åœ¨user-serviceå’Œorder-serviceé¡¹ç›®æ¨¡å—é‡Œçš„pomé‡Œæ·»åŠ clientçš„åæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>user-serviceå’Œorder-serviceé‡Œçš„application.ymlæ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">user/orderservice</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></table></figure><p>å†å¤åˆ¶ä¸€ä¸ªUserApplicationï¼Œåœ¨ä¿®æ”¹é€‰é¡¹é‡Œæ‰¾åˆ°æ·»åŠ VMé€‰é¡¹ï¼Œè¾“å…¥-Dserver.port&#x3D;8082ï¼Œæ„æ€å°±æ˜¯æŠŠå®ƒçš„ç«¯å£å·è®¾ç½®ä¸º8082ï¼Œè¿™æ˜¯IDEAçš„é«˜çº§åŠŸèƒ½ã€‚</p><p>è¿™æ—¶Spring Eurekaçš„ç½‘ç«™ä¸Šå®ä¾‹çš„UserServiceçš„æ•°é‡å°±å˜æˆ2äº†ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230930020603915-1448394445.png" alt="img"></p><p><strong>æœåŠ¡å‘ç°</strong></p><p>ç›´æ¥åœ¨RestTemplateä¸Šæ·»åŠ @LoadBalancedæ³¨è§£</p><h2 id="Ribbon"><a href="#Ribbon" class="headerlink" title="Ribbon"></a>Ribbon</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230930013636348-538629772.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230930014758836-492230024.png" alt="img"></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230930015134293-714300039.png" alt="img"></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>æ–¹æ³•ä¸€ï¼šé’ˆå¯¹orderæœåŠ¡çš„å…¨éƒ¨</p><p>åœ¨OrderApplicationé‡Œæ·»åŠ è´Ÿè½½å‡è¡¡çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> IRule <span class="title function_">randomRule</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RandomRule</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å†å»å¤šæ¬¡è®¿é—®æŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å‘ç°UserApplicationçš„ä¸¤ä¸ªå®ä¾‹éƒ½æœ‰è¢«è®¿é—®çš„æ—¥å¿—ã€‚</p><p>æ–¹æ³•äºŒï¼šé’ˆå¯¹ç‰¹å®šæœåŠ¡</p><p>åœ¨application.ymlé‡Œæ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span> <span class="comment">#è´Ÿè½½å‡è¡¡è§„åˆ™</span></span><br></pre></td></tr></table></figure><h3 id="é¥¥é¥¿åŠ è½½"><a href="#é¥¥é¥¿åŠ è½½" class="headerlink" title="é¥¥é¥¿åŠ è½½"></a>é¥¥é¥¿åŠ è½½</h3><p>Ribbonçš„é»˜è®¤ä¸ºæ‡’åŠ è½½ï¼Œç¬¬ä¸€æ¬¡åŠ è½½åä¼šå­˜åœ¨å†…å­˜ä¸­ï¼Œä¹‹åå†åŠ è½½å°±ä¸ç”¨åŠ è½½äº†ã€‚è€Œé¥¥é¥¿åŠ è½½ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶å°±åŠ è½½äº†ï¼Œç¬¬ä¸€æ¬¡è®¿é—®éƒ½ä¸ç”¨åŠ è½½äº†ã€‚</p><p>åœ¨application.ymlé‡Œæ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">eager-load:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#å¼€å¯é¥¥é¥¿åŠ è½½</span></span><br><span class="line">    <span class="attr">clients:</span>  <span class="comment">#æŒ‡å®šæœåŠ¡åç§°</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">userservice</span></span><br></pre></td></tr></table></figure><h2 id="Nacos"><a href="#Nacos" class="headerlink" title="Nacos"></a>Nacos</h2><h3 id="å®‰è£…å’Œå…¥é—¨"><a href="#å®‰è£…å’Œå…¥é—¨" class="headerlink" title="å®‰è£…å’Œå…¥é—¨"></a>å®‰è£…å’Œå…¥é—¨</h3><p>Eurekaçš„å‡çº§ç‰ˆï¼Œè€Œä¸”è¿˜æ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œæ”¯æŒå›½äº§~githubä¸Šå¯ä»¥ä¸‹è½½ï¼Œé»‘é©¬çš„èµ„æ–™é‡Œä¹Ÿæœ‰ï¼Œæˆ‘é€‰ç”¨çš„ç‰ˆæœ¬æ˜¯2.2.3</p><p>nacosä¼šå ç”¨8848ç«¯å£ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼‰</p><p>è¿›å…¥binç›®å½•ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤å³å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startup.cmd -m standalone</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š<a href="http://127.0.0.1:8848/nacos%E5%8D%B3%E5%8F%AF%EF%BC%8C%E9%BB%98%E8%AE%A4%E7%9A%84%E8%B4%A6%E5%8F%B7%E5%92%8C%E5%AF%86%E7%A0%81%E9%83%BD%E6%98%AFnacos">http://127.0.0.1:8848/nacoså³å¯ï¼Œé»˜è®¤çš„è´¦å·å’Œå¯†ç éƒ½æ˜¯nacos</a></p><p>æ›´è¯¦ç»†çš„æ•™ç¨‹å‚è€ƒï¼šNacos å®‰è£…æ•™ç¨‹ï¼ˆå²ä¸Šæœ€è¯¦ç»†ä¿å§†çº§æ•™ç¨‹ï¼‰_nacoså®‰è£…-CSDNåšå®¢</p><p>çˆ¶å·¥ç¨‹çš„pomé‡Œå¼•å…¥nacosï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ï¼ˆuser-serverå’Œorder-serverï¼‰å¼•å…¥å®¢æˆ·ç«¯ä¾èµ–ï¼Œå¹¶å»æ‰åŸæ¥çš„eurekaä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- nacoså®¢æˆ·ç«¯ä¾èµ–åŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹application.yml:å°†åŸæ¥çš„eurekaé…ç½®æ³¨é‡Šæ‰ï¼Œå†åœ¨spring:ä¸‹æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cloud:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å®Œåè®°å¾—é‡æ–°ç¼–è¯‘è¿è¡Œä¸‹pom.xmlï¼Œç„¶åå†å¯åŠ¨é¡¹ç›®ï¼Œè¿›å…¥localhost:8848:</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230930154848724-793005629.png" alt="img"></p><h3 id="æœåŠ¡é›†ç¾¤ï¼ŒNacosè´Ÿè½½å‡è¡¡å’Œç¯å¢ƒéš”ç¦»"><a href="#æœåŠ¡é›†ç¾¤ï¼ŒNacosè´Ÿè½½å‡è¡¡å’Œç¯å¢ƒéš”ç¦»" class="headerlink" title="æœåŠ¡é›†ç¾¤ï¼ŒNacosè´Ÿè½½å‡è¡¡å’Œç¯å¢ƒéš”ç¦»"></a>æœåŠ¡é›†ç¾¤ï¼ŒNacosè´Ÿè½½å‡è¡¡å’Œç¯å¢ƒéš”ç¦»</h3><blockquote><p>é€šå¸¸ä¸€ä¸ªæœåŠ¡ç«¯å£æ–­äº†éƒ½æ˜¯å…ˆåœ¨æœ¬åœ°æ›¿æ¢å¦ä¸€ä¸ªæœåŠ¡ï¼Œè€Œä¸æ˜¯å»å…¶ä»–ipè°ƒç”¨æœåŠ¡ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨<strong>é›†ç¾¤</strong>æ¥åŒºåˆ«ä¸åŒçš„åœ°åŸŸIPäº†ã€‚æ·»åŠ æœåŠ¡é›†ç¾¤å±æ€§ï¼š</p></blockquote><p>åœ¨nacos:ä¸‹æ·»åŠ :</p><p>discovery:<br>â€ƒâ€ƒcluster-name: SH</p><p>è¿™æ—¶è¿™ä¸ªé¡¹ç›®é›†ç¾¤å°±å±äºSHäº†ã€‚</p><blockquote><p>æœ‰äº†é›†ç¾¤å°±å¯ä»¥ä¿®æ”¹<strong>è´Ÿè½½å‡è¡¡</strong>äº†ï¼Œæˆ‘è¦æƒ³orderçš„é›†ç¾¤å‘userå¯¹åº”çš„é›†ç¾¤ä¼˜å…ˆè¯·æ±‚ï¼ˆæ¯”å¦‚æˆ‘çš„orderé…ç½®çš„é›†ç¾¤ä¸ºé‡åº†ï¼Œé‚£æˆ‘å‘é€çš„è¯·æ±‚å°±ä¼˜å…ˆä»é‡åº†é›†ç¾¤çš„userä¸­è·å–ï¼‰ã€‚å°†order&#x2F;application.ymlåŸæ¥çš„ribboné…ç½®ä¿®æ”¹ä¸ºï¼š</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.NacosRule</span> <span class="comment">#è´Ÿè½½å‡è¡¡è§„åˆ™</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ ¹æ®æƒé‡è´Ÿè½½å‡è¡¡</strong>ï¼Œæœ‰äº›æ€§èƒ½å¥½çš„ç«¯å£æœåŠ¡å°±å¯ä»¥å¤šæ‰¿æ‹…å‡ æ¬¡è¯·æ±‚ï¼Œå·®çš„å°±å°‘ä¸€äº›ï¼Œè¿™æ—¶å°±éœ€è¦è®¾ç½®æƒé‡äº†ã€‚åœ¨Nacosæ§åˆ¶å°é‡ŒæœåŠ¡å®ä¾‹é‡Œçš„è¯¦ç»†æ‰¾åˆ°ä¸€ä¸ªç«¯å£æœåŠ¡çš„ç¼–è¾‘ï¼Œé‡Œé¢å¯ä»¥ä¿®æ”¹æƒé‡ï¼š</p></blockquote><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001011022136-631236056.png" alt="img"></p><blockquote><p><strong>ç¯å¢ƒéš”ç¦»ï¼Œ</strong>å°±æ˜¯éš”ç¦»ä¸åŒç‰ˆæœ¬å’ŒæœåŠ¡çš„ä¸œè¥¿ï¼Œè®¾è®¡ä¸­å¯ä»¥ç”¨å¯ä»¥ä¸ç”¨ã€‚å…ˆæ–°å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œï¼ˆNacosé»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ªpublicçš„å‘½åç©ºé—´ï¼‰ï¼š</p></blockquote><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001012526788-2003910688.png" alt="img"></p><p>ç„¶åå†åœ¨orderçš„application.ymlé‡Œé…ç½®å‘½åç©ºé—´IDï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacos ip</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">CQ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">devKaiFaHuanJing</span></span><br></pre></td></tr></table></figure><p>è¿™æ—¶ç”¨orderå†å»è¯·æ±‚å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬å·²ç»æ˜¯ä¸¤ä¸ªä¸–ç•Œçš„äººäº†â€¦â€¦</p><p><strong>Nacosæ³¨å†Œä¸­å¿ƒåŸç†</strong></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001013538553-303888488.png" alt="img"></p><h2 id="Nacosé…ç½®ç®¡ç†"><a href="#Nacosé…ç½®ç®¡ç†" class="headerlink" title="Nacosé…ç½®ç®¡ç†"></a>Nacosé…ç½®ç®¡ç†</h2><p>ç®€å•è¯´å°±æ˜¯æ–¹ä¾¿ç®¡ç†é…ç½®ï¼Œå‡å¦‚ä»¥åè¦ä¿®æ”¹ applicationçš„é…ç½®ï¼Œå°±ä¸è¦ä¸€ä¸ªä¸€ä¸ªå»ä¿®æ”¹äº†ï¼Œç›´æ¥ç»Ÿä¸€ä¿®æ”¹è€Œä¸”è¿˜ä¸éœ€è¦é‡å¯ï¼Œç›´æ¥å°±æ˜¯çƒ­æ›´æ–°ã€‚</p><p>åœ¨Nacosé…ç½®ç®¡ç†çš„é…ç½®åˆ—è¡¨é‡Œæ–°å»ºä¸€ä¸ªé…ç½®å¹¶å‘å¸ƒï¼šï¼ˆIDå‘½åä¹Ÿæ˜¯æœ‰è§„çŸ©çš„ï¼Œçœ‹ç­‰ä¸‹çš„ä»£ç å°±çŸ¥é“äº†ï¼‰</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001015149646-717876467.png" alt="img"></p><p>å¯¹äº†ä¸Šå›¾çš„dateformatå‰é¢çš„ç©ºæ ¼æ‰“å¤šäº†ï¼Œåªæœ‰ä¸¤ä¸ªï¼Œæˆ‘æ‰¾äº†ä¸€ä¸‹åˆçš„bugã€‚</p><p>é…ç½®è·å–æ­¥éª¤ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202310/3018339-20231001015542637-1091654083.png" alt="img"></p><p>æ‰€ä»¥å…ˆåœ¨recouresåˆ›å»ºbootstrap.ymlï¼Œå¯åŠ¨springbootæ—¶é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§ä¼šé«˜äºapplication.yml(PS:åœ¨springcloud çš„ç‰ˆæœ¬é«˜äº2020.xæ—¶ä¼šé»˜è®¤ç¦ç”¨bootstrapï¼Œéœ€è¦å…ˆåœ¨pomé‡Œå¼•å…¥spring-cloud-alibaba-bootstrap çš„ä¾èµ–)ã€‚å…ˆåœ¨userservice é‡Œå¼•å…¥mavenåæ ‡ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        nacosçš„é…ç½®ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨bootstrap.ymlé‡Œé…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">userservice</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment">#nacosåœ°å€</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment">#æ–‡ä»¶åç¼€å</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨UserControlleré‡Œé¢ç¼–å†™ä¸€æ®µæ—¶é—´æ˜¾ç¤ºçš„æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;pattern.dateformat&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/now&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">now</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æ ¼å¼åŒ–è¿”å›å½“å‰æ—¶é—´</span></span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>é€šè¿‡@Value è¯»å–é…ç½®æ—¶å®ç°çƒ­æ›´æ–°ï¼š</strong>å¦‚æœæ˜¯é€šè¿‡ @Value æ¥è¯»å–é…ç½®çš„ï¼Œæ­¤æ—¶åªéœ€åœ¨ä½¿ç”¨ @Value æ³¨å…¥çš„å˜é‡æ‰€åœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ @RefreshScope å³å¯ï¼Œæ­¤æ—¶ä½ åœ¨ nacos é…ç½®ä¸­å¿ƒä¿®æ”¹é…ç½®å¹¶å‘å¸ƒåï¼Œå¯ä»¥å‘ç°æœåŠ¡èƒ½è‡ªåŠ¨æ¥æ”¶åˆ°ä¸€äº›æ›´æ–°ä¿¡æ¯ï¼Œç±»ä¼¼ä¸‹å›¾ï¼Œæ­¤æ—¶ä¹Ÿå°±å®ç°äº†é…ç½®çƒ­æ›´æ–°ï¼Œæ­¤æ—¶å†è®¿é—®å¾®æœåŠ¡çš„æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„ä¿¡æ¯å·²ç»å‘ç”Ÿäº†æ”¹å˜ã€‚æˆ–è€…ä½¿ç”¨ @ConfigurationProperties æ¥è¯»å–é…ç½®æ—¶ï¼Œå¾®æœåŠ¡è¯»å–é…ç½®ä¸­å¿ƒçš„é…ç½®å¯ä»¥è‡ªåŠ¨å®ç°çƒ­æ›´æ–°ï¼Œæ— éœ€è¿›è¡Œå…¶ä»–æ“ä½œã€‚</p><h3 id="nacos-é›†ç¾¤æ­å»º"><a href="#nacos-é›†ç¾¤æ­å»º" class="headerlink" title="nacos é›†ç¾¤æ­å»º"></a>nacos é›†ç¾¤æ­å»º</h3><p>åœ¨æµ‹è¯•ç¯å¢ƒä¸‹å¯ä»¥ä»¥å•ä½“æ¨¡å¼å¯åŠ¨ nacos ï¼Œä½†æ˜¯ Nacos åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹éƒ½æ˜¯éƒ¨ç½²ä¸ºé›†ç¾¤çŠ¶æ€çš„ã€‚</p><p>æ­å»ºé›†ç¾¤çš„åŸºæœ¬æ­¥éª¤ï¼š</p><ol><li>æ­å»ºæ•°æ®åº“ï¼Œåˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„</li><li>ä¸‹è½½nacoså®‰è£…åŒ…ï¼Œä¿®æ”¹nacosé…ç½®ï¼Œå¯åŠ¨nacosé›†ç¾¤</li><li>å¯åŠ¨nginxä½œä¸ºåå‘ä»£ç†</li></ol><p>ä¸‹é¢æˆ‘ä»¬æ­å»ºä¸€ä¸ªä»¥ Nginx ä½œä¸ºè´Ÿè½½å‡è¡¡ï¼Œnacos æœ‰ä¸‰ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œä¸‰ä¸ªnacosèŠ‚ç‚¹çš„ ip éƒ½æ˜¯ 127.0.0.1ï¼Œç«¯å£åˆ†åˆ«ä¸º8845ã€8846ã€8847ã€‚æ¶æ„å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://img2.imgtp.com/2024/02/07/GxWymVkg.png" alt="img"></p><p>Nacos é»˜è®¤æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å†…åµŒæ•°æ®åº“ Derby ä¸­çš„ï¼Œè¯¥æ•°æ®åº“ä¸å±äºç”Ÿäº§å¯ç”¨çš„æ•°æ®åº“ï¼Œå®˜æ–¹æ¨èçš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨å¸¦æœ‰ä¸»ä»çš„é«˜å¯ç”¨æ•°æ®åº“é›†ç¾¤ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬åªä»¥å•ç‚¹çš„æ•°æ®åº“ä¸ºä¾‹æ¥æ­å»ºã€‚é¦–å…ˆæ–°å»ºä¸€ä¸ª mysql æ•°æ®åº“ï¼Œå‘½åä¸ºnacosï¼Œè€Œåå¯¼å…¥ä¸‹é¢çš„SQLï¼š</p><p>MySQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  `c_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_use` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `effect` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c_schema` text,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info&#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_aggr   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_aggr` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `datum_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;datum_id&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å†…å®¹&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;å¢åŠ ç§Ÿæˆ·å­—æ®µ&#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_beta   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_beta` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `beta_ips` <span class="type">varchar</span>(<span class="number">1024</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;betaIps&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_beta&#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_info_tag   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_info_tag` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `tag_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_id&#x27;</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;content&#x27;</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;md5&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  `src_user` text COMMENT <span class="string">&#x27;source user&#x27;</span>,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;source ip&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_info_tag&#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = config_tags_relation   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `config_tags_relation` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `tag_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_name&#x27;</span>,</span><br><span class="line">  `tag_type` <span class="type">varchar</span>(<span class="number">64</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tag_type&#x27;</span>,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;data_id&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;group_id&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;config_tag_relation&#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = group_capacity   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `group_capacity` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤&#x27;</span>,</span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨é‡&#x27;</span>,</span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_group_id` (`group_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = his_config_info   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `his_config_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">64</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `nid` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `data_id` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `group_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `app_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;app_name&#x27;</span>,</span><br><span class="line">  `content` longtext <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `md5` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `src_user` text,</span><br><span class="line">  `src_ip` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `op_type` <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`nid`),</span><br><span class="line">  KEY `idx_gmt_create` (`gmt_create`),</span><br><span class="line">  KEY `idx_gmt_modified` (`gmt_modified`),</span><br><span class="line">  KEY `idx_did` (`data_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;å¤šç§Ÿæˆ·æ”¹é€ &#x27;</span>;</span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span></span><br><span class="line"><span class="comment">/*   è¡¨åç§° = tenant_capacity   */</span></span><br><span class="line"><span class="comment">/******************************************/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_capacity` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;Tenant ID&#x27;</span>,</span><br><span class="line">  `quota` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `usage` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨é‡&#x27;</span>,</span><br><span class="line">  `max_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_aggr_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°&#x27;</span>,</span><br><span class="line">  `max_aggr_size` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,</span><br><span class="line">  `max_history_count` <span class="type">int</span>(<span class="number">10</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,</span><br><span class="line">  `gmt_create` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `tenant_info` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">  `kp` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;kp&#x27;</span>,</span><br><span class="line">  `tenant_id` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_id&#x27;</span>,</span><br><span class="line">  `tenant_name` <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;tenant_name&#x27;</span>,</span><br><span class="line">  `tenant_desc` <span class="type">varchar</span>(<span class="number">256</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;tenant_desc&#x27;</span>,</span><br><span class="line">  `create_source` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;create_source&#x27;</span>,</span><br><span class="line">  `gmt_create` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `gmt_modified` <span class="type">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span><br><span class="line">  KEY `idx_tenant_id` (`tenant_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin COMMENT<span class="operator">=</span><span class="string">&#x27;tenant_info&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `users` (</span><br><span class="line">    `username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    `password` <span class="type">varchar</span>(<span class="number">500</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `enabled` <span class="type">boolean</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `roles` (</span><br><span class="line">    `username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `role` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">UNIQUE</span> INDEX `idx_user_role` (`username` <span class="keyword">ASC</span>, `role` <span class="keyword">ASC</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `permissions` (</span><br><span class="line">    `role` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `resource` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    `action` <span class="type">varchar</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">UNIQUE</span> INDEX `uk_role_permission` (`role`,`resource`,`action`) <span class="keyword">USING</span> BTREE</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> users (username, password, enabled) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;</span>, <span class="literal">TRUE</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> roles (username, role) <span class="keyword">VALUES</span> (<span class="string">&#x27;nacos&#x27;</span>, <span class="string">&#x27;ROLE_ADMIN&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-nacos"><a href="#é…ç½®-nacos" class="headerlink" title="é…ç½® nacos"></a>é…ç½® nacos</h3><p>ä¸‹è½½ nacos å®‰è£…åŒ…å¹¶è§£å‹åå³å®‰è£…å®Œæˆï¼Œä¸‹é¢è¿›è¡Œ nacos é›†ç¾¤çš„é…ç½®ã€‚</p><p>è¿›å…¥ nacos å®‰è£…ç›®å½•çš„ conf ç›®å½•ä¸‹ï¼Œå¤åˆ¶é…ç½®æ–‡ä»¶ cluster.conf.example å¹¶é‡å‘½åä¸º cluster.confï¼Œç»™æ–‡ä»¶ cluster.conf æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><ol><li>127.0.0.1:8845</li><li>127.0.0.1.8846</li><li>127.0.0.1.8847</li></ol><p>ç±»ä¼¼å¦‚ä¸‹ï¼š</p><p><img src="https://img2022.cnblogs.com/blog/1424359/202204/1424359-20220427225047487-144604821.png" alt="img"></p><p>ç„¶åç»§ç»­ä¿®æ”¹ conf&#x2F;application.properties æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å†…æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><ol><li>spring.datasource.platform&#x3D;mysql</li><li></li><li>db.num&#x3D;1</li><li></li><li>db.url.0&#x3D;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;nacos?characterEncoding&#x3D;utf8&amp;connectTimeout&#x3D;1000&amp;socketTimeout&#x3D;3000&amp;autoReconnect&#x3D;true&amp;useUnicode&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;UTC</li><li>db.user.0&#x3D;root</li><li>db.password.0&#x3D;123456</li></ol><p>ä»¥æ­¤ä¸€ä¸ª nacos èŠ‚ç‚¹å°±å·²ç»é…ç½®å®Œæˆï¼Œåªéœ€å°† nacos å¤åˆ¶ä¸‰ä»½ï¼Œç„¶ååˆ†åˆ«ä¿®æ”¹ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­çš„application.propertiesï¼Œå°† server.port åˆ†åˆ«ä¿®æ”¹ä¸º 8845ã€8846ã€8847 å³å¯ã€‚</p><p>åˆ†åˆ«å¯åŠ¨è¿™ä¸‰ä¸ª nacos èŠ‚ç‚¹å³å¯ï¼Œç›´æ¥åŒå‡» bin&#x2F;startup.cmd æ–‡ä»¶å³å¯å¯åŠ¨ï¼Œå¯åŠ¨ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://img2022.cnblogs.com/blog/1424359/202204/1424359-20220427230643716-927279712.png" alt="img"></p><h3 id="å¯åŠ¨Nginxä½œä¸ºåå‘ä»£ç†"><a href="#å¯åŠ¨Nginxä½œä¸ºåå‘ä»£ç†" class="headerlink" title="å¯åŠ¨Nginxä½œä¸ºåå‘ä»£ç†"></a>å¯åŠ¨Nginxä½œä¸ºåå‘ä»£ç†</h3><p>ä¸Šè¿°æ­¥éª¤ä¸­å¯åŠ¨ nacos é›†ç¾¤åï¼Œå³å¯å¯åŠ¨ä¸€ä¸ª Nginx ä½œä¸ºåå‘ä»£ç†ï¼Œnacos å®¢æˆ·ç«¯éœ€è¦è®¿é—®è¿æ¥ nacos æœåŠ¡ç«¯æ—¶ï¼Œåªéœ€è®¿é—® Nginx çš„æœåŠ¡å³å¯ã€‚</p><p>Nginx é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">upstream</span> <span class="string">nacos-cluster</span> &#123;</span><br><span class="line">    <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8845;</span></span><br><span class="line">    <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8846;</span></span><br><span class="line">    <span class="string">server</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8847;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">    <span class="string">listen</span>       <span class="number">80</span><span class="string">;</span></span><br><span class="line">    <span class="string">server_name</span>  <span class="string">localhost;</span></span><br><span class="line">    <span class="string">location</span> <span class="string">/nacos</span> &#123;</span><br><span class="line">        <span class="string">proxy_pass</span> <span class="string">http://nacos-cluster;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—® <a href="http://localhost/nacos">http://localhost/nacos</a> å³å¯è®¿é—®åˆ° nacos é›†ç¾¤ï¼ŒNginx ä¼šå°†æ¥æ”¶åˆ°çš„è¯·æ±‚è´Ÿè½½å‡è¡¡åˆ°ä¸‰ä¸ª nacos èŠ‚ç‚¹å½“ä¸­ã€‚</p><p>æ¯”å¦‚ nacos èŠ‚ç‚¹éœ€è®¿é—® nacos é›†ç¾¤æ—¶ï¼Œé¡¹ç›®é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:80</span> <span class="comment"># Nacosåœ°å€</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springcloudå¾®æœåŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javawebå­¦ä¹ ç¬”è®°ã€é¡¹ç›®å®æˆ˜ã€‘ï¼ˆå››ï¼‰</title>
      <link href="/2023/08/14/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%91%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>/2023/08/14/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%91%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p>**<br>**è¡¥å……@ RequestBodyæ³¨è§£ï¼š<a href="https://blog.csdn.net/justry_deng/article/details/80972817">@RequestBodyçš„ä½¿ç”¨_justry_dengçš„åšå®¢-CSDNåšå®¢</a>ï¼Œå››ç§è¯·æ±‚æ–¹å¼çš„åŒºåˆ«ï¼š<a href="https://blog.csdn.net/weixin_56921066/article/details/118608143">æ€»ç»“getã€putã€postã€deleteçš„åŒºåˆ«å’Œç”¨æ³•_get post put delete_äº‘åº„clouderçš„åšå®¢-CSDNåšå®¢</a></p><p><img src="https://img2023.cnblogs.com/blog/3018339/202309/3018339-20230913134045711-1468266646.png" alt="img"></p><p><strong>æŸ¥è¯¢å‘˜å·¥</strong></p><p>è·Ÿä¹‹å‰æŸ¥è¯¢éƒ¨é—¨ä¸€æ ·çš„ï¼Œç›´æ¥EmpControllerå†™@GetMapping,Integer idï¼ŒEmp emp&#x3D;empService.getById(id);success(emp),ç„¶ååé¢å°±æ ¹æ®ideaçš„æç¤ºéå¸¸ç®€å•ã€‚è¡¥å……ä¸€ä¸‹@RequestBodyæ³¨è§£æ˜¯å°†æ•°æ®å˜ä¸ºjsonæ ¼å¼çš„ã€‚</p><p><strong>ä¿®æ”¹å‘˜å·¥</strong></p><p>åœ¨æŸ¥è¯¢å‘˜å·¥ç•Œé¢æ˜¾ç¤ºå‡ºæ¥çš„ä¿®æ”¹æ•°æ®</p><p>@PutMapping+@RequestBody(jsonæ ¼å¼æ•°æ®ä¼ é€’)+updateæ•°æ®åº“è¯­å¥+Serviceå±‚è‡ªåŠ¨è¡¥å……æ›´æ–°æ—¶é—´å˜é‡ã€‚</p><p>XMLä¸­SQLè¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id=&quot;update&quot;&gt;</span><br><span class="line">update emp</span><br><span class="line">&lt;set&gt;</span><br><span class="line">&lt;if test=&quot;username != null and username != &#x27;&#x27;&quot;&gt;</span><br><span class="line">username = #&#123;username&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;password != null and password != &#x27;&#x27;&quot;&gt;</span><br><span class="line">password = #&#123;password&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;name != null and name != &#x27;&#x27;&quot;&gt;</span><br><span class="line">name = #&#123;name&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;gender != null&quot;&gt;</span><br><span class="line">gender = #&#123;gender&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;image != null and image != &#x27;&#x27;&quot;&gt;</span><br><span class="line">image = #&#123;image&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;job != null&quot;&gt;</span><br><span class="line">job = #&#123;job&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;entrydate != null&quot;&gt;</span><br><span class="line">entrydate = #&#123;entrydate&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;deptId != null&quot;&gt;</span><br><span class="line">dept_id = #&#123;deptId&#125;,</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;updateTime != null&quot;&gt;</span><br><span class="line">update_time = #&#123;updateTime&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/set&gt;</span><br><span class="line">where id = #&#123;id&#125;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ–‡ä»¶</strong></p><p><strong>æ–¹å¼ä¸€ï¼š</strong></p><p>è¿˜æ˜¯ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œç”±äºä¸€ä¸ªä¸€ä¸ªåœ¨ç±»é‡Œé¢æ”¹å‚æ•°å¾ˆéš¾æ‰¾ï¼Œæ‰€ä»¥å°±ç›´æ¥å°†å‚æ•°å®šä¹‰åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢æ–¹ä¾¿ä¿®æ”¹ï¼Œæ¯”å¦‚OSSçš„accessKeyId,accessKeySecretï¼Œå°±ç”¨SpringBootè‡ªå·±ç”Ÿæˆçš„application.propertiesæ‹¿æ¥é…ç½®ï¼Œæ¯”å¦‚æˆ‘è¦é…ç½®é˜¿é‡Œäº‘Accessçš„ID:</p><p>application.propertiesé‡Œé¢ï¼šaliyun.oss.accessKeyId&#x3D;xxxxxxxx</p><p>ç„¶åå†åœ¨AliOSSutilsç±»é‡Œé¢å°†å®šä¹‰çš„accessKeyIdçš„å€¼å»æ‰ï¼Œå¹¶åœ¨ä¸Šé¢åŠ ä¸Š@Value(â€œ${aliyun.oss.accessKeyId}â€)</p><p><strong>æ–¹å¼äºŒï¼š</strong></p><p>ä½¿ç”¨ymlè¿›è¡Œé…ç½®ï¼Œåœ¨resourcesæ–‡ä»¶å¤¹ä¸‹application.ymlæ–‡ä»¶ï¼Œymlé…ç½®æ—¶éœ€è¦ç¼©è¿›ï¼Œæ¯”å¦‚æˆ‘è¦é…ç½®æœåŠ¡å™¨ç«¯å£å·ï¼š</p><p>server:<br>port: 9000</p><p><strong>@ConfigurationPropertiesæ³¨è§£</strong></p><p>å°±æ˜¯ä¸ç”¨ä¸€ä¸ªä¸€ä¸ªå†™@Valueæ³¨è§£äº†ï¼Œä½†æ˜¯æ²¡å¤šå¤§ç”¨é™¤éå˜é‡å¾ˆå¤šã€‚æ–¹æ³•å°±æ˜¯åœ¨å¯¹åº”ç±»çš„åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªç±»ï¼Œé‡Œé¢å†å®šä¹‰privateå˜é‡å¹¶åŠ ä¸Š@Date,@Component,@ConfigurationProperties(prefix &#x3D; â€œaliyun.ossâ€)è¿™é‡Œçš„prefixé‡Œé¢å†™é…ç½®æ–‡ä»¶é‡Œé¢çš„æœ€åä¸€ä¸ªé€—å·(æˆ–ymlé‡Œé¢çš„å†’å·)çš„å‰é¢çš„ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œé…ç½®çš„æ˜¯AliOSSUtilsé‡Œé¢çš„bucketNameï¼Œç„¶åå†åœ¨AliOSSUtilsé‡Œé¢å»æ‰åŸæ¥çš„ bucketNameå¹¶åŠ ä¸Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private AliOSSProperties aliOSSProperties;</span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨æ–¹æ³•é‡Œå®šä¹‰String bucketName&#x3D;aliOSSProperties.getBucketName();</p><h2 id="â€”-ç™»å½•ç³»ç»Ÿâ€”"><a href="#â€”-ç™»å½•ç³»ç»Ÿâ€”" class="headerlink" title="â€”-ç™»å½•ç³»ç»Ÿâ€”-"></a>â€”-<strong>ç™»å½•ç³»ç»Ÿ</strong>â€”-</h2><p>åœ¨Controllerå±‚åˆ›å»ºä¸€ä¸ª LoginControllerç±»ä¸“é—¨ç”¨æ¥ç™»å½•ï¼Œé‡Œé¢åŠ ä¸ŠåŸºæœ¬çš„@RestControllerç­‰æ³¨è§£ï¼Œç„¶åç™»å½•è¯·æ±‚æ–¹å¼ä¸ºPOSTï¼Œéœ€è¦ä¼ é€’Empçš„å‚æ•°ï¼Œå°±Emp e&#x3D;empService.login(emp);æœ€åè¿”å›å€¼ä¸º:(ç„¶åè·Ÿä»¥å‰ä¸€æ ·ä¾æ ·ç”»è‘«èŠ¦)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return e!=null?Result.success():Result.error(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;);</span><br></pre></td></tr></table></figure><p>EmpMapperé‡Œé¢çš„Selectè¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Select(&quot;select *from emp where username=#&#123;username&#125; and password=#&#123;password&#125;&quot;)</span><br></pre></td></tr></table></figure><h2 id="â€”ç™»å½•æ ¡éªŒâ€”"><a href="#â€”ç™»å½•æ ¡éªŒâ€”" class="headerlink" title="â€”ç™»å½•æ ¡éªŒâ€”"></a>â€”<strong>ç™»å½•æ ¡éªŒ</strong>â€”</h2><p>é˜²æ­¢ç™»å½•åå†æ¬¡ç™»å½•ä¸ç”¨è¾“å¯†ç ï¼Œå°±éœ€è¦ç™»å½•æ ¡éªŒã€‚ä½¿ç”¨ç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯å¯ä»¥ä¸ç”¨åœ¨æ¯ä¸ªæ¥å£éƒ½å†™ ifè¯­å¥ï¼Œ</p><p><strong>ä¼šè¯æŠ€æœ¯</strong>ï¼šç”¨æˆ·æ‰“å¼€æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨ï¼Œä¼šè¯å»ºç«‹ï¼Œç›´åˆ°ä¸€æ–¹æ–­å¼€è¿æ¥ï¼Œä¼šè¯ç»“æŸï¼Œåœ¨ä¸€æ¬¡ä¼šè¯ä¸­å¯ä»¥åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº”ã€‚</p><p><strong>ä¼šè¯è·Ÿè¸ª</strong>ï¼šç»´æŠ¤æµè§ˆå™¨çŠ¶æ€çš„æ–¹æ³•ï¼ŒæœåŠ¡å™¨éœ€è¦è¯†åˆ«å¤šæ¬¡è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€æµè§ˆå™¨ï¼Œä»¥ä¾¿åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ®ã€‚</p><p>ä¼šè¯è·Ÿè¸ªæŠ€æœ¯é˜²æ­¢ç™½é›ªï¼Œç›´æ¥ä¸å­¦åŸå§‹çš„Cookieå’ŒSessionæ–¹å¼ï¼Œç›´æ¥å­¦<strong>JWTä»¤ç‰ŒæŠ€æœ¯</strong>ã€‚</p><hr><p>Mavenæ¥å£ä¸‹è½½:<a href="https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt/0.9.1">Maven Repository: io.jsonwebtoken Â» jjwt Â» 0.9.1 (mvnrepository.com)</a></p><p>JWTå®˜ç½‘ï¼š<a href="https://jwt.io/">JSON Web Tokens â€“ jwt.io</a></p><p>å…ˆæ¥çœ‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testJWT()&#123;</span><br><span class="line">Map&lt;String, Object&gt; cliams=new HashMap&lt;&gt;();</span><br><span class="line">cliams.put(&quot;id&quot;,1);</span><br><span class="line">cliams.put(&quot;name&quot;,&quot;ä½•å¹³å®‰&quot;);</span><br><span class="line">String jwt=Jwts.builder()</span><br><span class="line">.signWith(SignatureAlgorithm.HS256,&quot;hepingan&quot;)//ç­¾åç®—æ³•</span><br><span class="line">.setClaims(cliams)//è‡ªå®šä¹‰å†…å®¹</span><br><span class="line">.setExpiration(new Date(System.currentTimeMillis()+3600*100))//è®¾ç½®ä»¤ç‰Œæœ‰æ•ˆæœŸä¸º1h</span><br><span class="line">.compact();</span><br><span class="line">System.out.println(jwt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªsignWithå‚æ•°ç›´æ¥è¾“HS256å›è½¦è‡ªåŠ¨ç”Ÿæˆ,è¿™æ˜¯JWTå®˜ç½‘æä¾›çš„ç®—æ³•ç”Ÿæˆï¼Œä¹Ÿæœ‰å…¶ä»–ç±»å‹çš„ç®—æ³•çœ‹å®˜ç½‘äº†ï¼Œåé¢é‚£ä¸ªæ˜¯<strong>å¯†é’¥</strong>ã€‚</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/U3616IJQLXH1VYYW.png" alt="img"></p><p>setClaimsé‡Œé¢è¾“å…¥è‡ªå®šä¹‰å†…å®¹ï¼Œå¯ä»¥æ˜¯Mapé›†åˆï¼Œç„¶åç®—æ³•ä¼šè‡ªåŠ¨å°†ä»–è½¬æ¢æˆå­—ç¬¦ï¼ŒsetExpirationè®¾ç½®ä»¤ç‰Œæœ‰æ•ˆæœŸï¼Œæœ€ååŠ ä¸Š.compact();è¾“å‡ºåç»“æœå¤åˆ¶åˆ°JWTå®˜ç½‘å°±å¯ä»¥è§£ç äº†ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/AQGNZO73OI7DCBLI67Y-1024x344.png" alt="img"></p><p>åœ¨Javaä»£ç é‡Œé¢è§£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testParseJWT()&#123;</span><br><span class="line">Claims claims= Jwts.parser()</span><br><span class="line">.setSigningKey(&quot;hepingan&quot;)//å¯†é’¥</span><br><span class="line">.parseClaimsJws(&quot;eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoi5L2V5bmz5a6JIiwiaWQiOjEsImV4cCI6MTY5Mjk3MjYxOH0.gJmcR4cuPNWU9hmuLXm8ucpAJFqZNTe_oqstc0Cb-9k&quot;)</span><br><span class="line">.getBody();</span><br><span class="line">System.out.println(claims);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨JWTè‡ªå¸¦çš„Claimsç±»æ¥è¾“å‡ºæ•°æ®ï¼Œ ç¬¬ä¸€ä¸ªæ˜¯å¯†é’¥ï¼Œç„¶åæ˜¯ç ï¼ŒgetBodyæ˜¯è·å–æ•´ä¸ªç ï¼ˆgetHeaderæ˜¯è·å–ç®—æ³•æ–¹æ³•ï¼‰ã€‚</p><p><strong>åº”ç”¨åˆ°é¡¹ç›®ä¸­</strong></p><p>åœ¨utilsè½¯ä»¶åŒ…ä¸‹ç²˜è´´ä¸‹é¢çš„ä»£ç ï¼šï¼ˆå°±æ˜¯åˆšåˆšå†™çš„ä¸œè¥¿ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import io.jsonwebtoken.Claims;</span><br><span class="line">import io.jsonwebtoken.Jwts;</span><br><span class="line">import io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.Map;</span><br><span class="line">public class JwtUtils &#123;</span><br><span class="line"></span><br><span class="line">private static String signKey = &quot;itheima&quot;;</span><br><span class="line">private static Long expire = 43200000L;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * ç”ŸæˆJWTä»¤ç‰Œ</span><br><span class="line"> * @param claims JWTç¬¬äºŒéƒ¨åˆ†è´Ÿè½½ payload ä¸­å­˜å‚¨çš„å†…å®¹</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line"> public static String generateJwt(Map&lt;String, Object&gt; claims)&#123;</span><br><span class="line">String jwt = Jwts.builder()</span><br><span class="line">.addClaims(claims)</span><br><span class="line">.signWith(SignatureAlgorithm.HS256, signKey)</span><br><span class="line">.setExpiration(new Date(System.currentTimeMillis() + expire))</span><br><span class="line">.compact();</span><br><span class="line">return jwt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * è§£æJWTä»¤ç‰Œ</span><br><span class="line"> * @param jwt JWTä»¤ç‰Œ</span><br><span class="line"> * @return JWTç¬¬äºŒéƒ¨åˆ†è´Ÿè½½ payload ä¸­å­˜å‚¨çš„å†…å®¹</span><br><span class="line"> */</span><br><span class="line"> public static Claims parseJWT(String jwt)&#123;</span><br><span class="line">Claims claims = Jwts.parser()</span><br><span class="line">.setSigningKey(signKey)</span><br><span class="line">.parseClaimsJws(jwt)</span><br><span class="line">.getBody();</span><br><span class="line">return claims;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå†åœ¨ä¹‹å‰çš„login æ¥å£æ”¹æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/login&quot;)</span><br><span class="line">public Result login(@RequestBody Emp emp)&#123;</span><br><span class="line">log.info(&quot;å‘˜å·¥ç™»å½•ï¼š&#123;&#125;&quot;,emp);</span><br><span class="line">Emp e=empService.login(emp);</span><br><span class="line"></span><br><span class="line">if(e!=null)&#123;</span><br><span class="line">Map&lt;String, Object&gt; claims=new HashMap&lt;&gt;();</span><br><span class="line">claims.put(&quot;id&quot;,emp.getId());</span><br><span class="line">claims.put(&quot;name&quot;,emp.getName());</span><br><span class="line"></span><br><span class="line">String jwt=JwtUtils.generateJwt(claims);</span><br><span class="line">return Result.success(jwt);</span><br><span class="line">&#125;</span><br><span class="line">return Result.error(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åœ¨ä»¥åæ¯ä¸€æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šå…ˆçœ‹ JWTä»¤ç‰Œï¼ŒæŒ‰F12â€“&gt;ç½‘ç»œâ€“&gt;è¯·æ±‚â€“&gt;depté‡Œæ‰¾åˆ°Tokenå°±å¯ä»¥çœ‹åˆ°ä»¤ç‰Œäº†ã€‚</p><h2 id="â€”Filterâ€”"><a href="#â€”Filterâ€”" class="headerlink" title="â€”Filterâ€”"></a><strong>â€”Filterâ€”</strong></h2><p>è¿‡æ»¤å™¨ï¼Œå¯ä»¥æŠŠè¯·æ±‚æ‹¦æˆªä¸‹æ¥ï¼Œåªæœ‰ç»è¿‡è¿‡æ»¤å™¨æ‰èƒ½è¯·æ±‚ã€‚ï¼ˆå°±æ˜¯ç½‘ç»œå®‰å…¨ç±»çš„ï¼‰</p><p>å…ˆå®šä¹‰ä¸€ä¸ª Filterç±»ï¼Œç„¶ååŠ ä¸Š@WebFilteræ³¨è§£ï¼Œé…ç½®æ‹¦æˆªèµ„æºè·¯å¾„ï¼Œå¼•å¯¼ç±»ï¼ˆå¯åŠ¨ç±»ï¼‰åŠ ä¸Š@ServletComponentScanæ³¨è§£å¼€å¯Servletç»„ä»¶æ”¯æŒã€‚</p><p>Filter ç±»å•ç‹¬åˆ›å»ºä¸ªåŒ…åœ¨top.hepinganä¸‹å§,implementsçš„Filterè®°ä½è¦é€‰ servlet,(import jakarta.servlet.*;)ç„¶åç›´æ¥å®ç°ä¸‰ä¸ªæ–¹æ³•ã€‚</p><p>@WebFilter(urlPatterns &#x3D; â€œ&#x2F;*â€)æ˜¯æŒ‡æ‹¦æˆªå…¨éƒ¨è¯·æ±‚ã€‚ç„¶åé™åˆ¶è¿è¡Œå†å»è¯·æ±‚ç›´æ¥å…¨éƒ¨æ‹¦æˆªäº†ã€‚</p><p>æ‰€ä»¥å°±éœ€è¦æ·»åŠ æ”¾è¡Œæ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filterChain.doFilter(servletRequest,servletResponse);//æ”¾è¡Œ</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªWEBç¨‹åºå¯ä»¥æœ‰å¤šä¸ªfilterï¼Œæ‰§è¡Œå¾ªåºæ ¹æ®ç±»å‹é¡ºåºï¼ˆA,B,Câ€¦æ’ä¸‹å»ï¼‰ã€‚</p><p><strong>åº”ç”¨åˆ°æ¡ˆä¾‹å½“ä¸­å»ï¼š</strong></p><p>å…ˆçœ‹æºç ï¼ˆç±»åœ¨filterè½¯ä»¶åŒ…ä¸‹ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br><span class="line">@WebFilter(urlPatterns = &quot;/*&quot;)</span><br><span class="line">public class LoginCheckFilter implements Filter &#123;</span><br><span class="line">@Override</span><br><span class="line">public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123;</span><br><span class="line">HttpServletRequest request=(HttpServletRequest) servletRequest;</span><br><span class="line">HttpServletResponse response=(HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">//è·å–è¯·æ±‚url</span><br><span class="line"> String url= request.getRequestURL().toString();</span><br><span class="line">log.info(&quot;è¯·æ±‚çš„url:&quot;+url);</span><br><span class="line"></span><br><span class="line">//åˆ¤æ–­urlæ˜¯å¦å­˜åœ¨loginï¼Œå¦‚æœæœ‰æ”¾è¡Œ</span><br><span class="line"> if (url.contains(&quot;login&quot;))&#123;</span><br><span class="line">log.info(&quot;ç™»å½•æ“ä½œï¼Œæ”¾è¡Œ...&quot;);</span><br><span class="line">filterChain.doFilter(request,response);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨</span><br><span class="line"> String jwt=request.getHeader(&quot;token&quot;);</span><br><span class="line">if(!StringUtils.hasLength(jwt))&#123;</span><br><span class="line">log.info(&quot;è¯·æ±‚å¤´tokenä¸ºç©ºï¼Œè¿”å›æœªç™»å½•çš„ä¿¡æ¯&quot;);</span><br><span class="line">Result error=Result.error(&quot;NOT_LOGIN&quot;);</span><br><span class="line">String notLogin=JSONObject.toJSONString(error);</span><br><span class="line">response.getWriter().write(notLogin);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è§£æ token</span><br><span class="line"> try &#123;</span><br><span class="line">JwtUtils.parseJWT(jwt);</span><br><span class="line">&#125;catch (Exception e)&#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">log.info(&quot;è§£æä»¤ç‰Œå¤±è´¥ï¼Œè¿”å›æœªç™»å½•é”™è¯¯ä¿¡æ¯&quot;);</span><br><span class="line">Result error=Result.error(&quot;NOT_LOGIN&quot;);</span><br><span class="line">String notLogin=JSONObject.toJSONString(error);</span><br><span class="line">response.getWriter().write(notLogin);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log.info(&quot;ä»¤ç‰Œåˆæ³•ï¼Œæ”¾è¡Œ&quot;);</span><br><span class="line">filterChain.doFilter(request,response);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆè·å–è¯·æ±‚çš„urlï¼Œå°±æ˜¯è¯·æ±‚æ–¹æ³•çš„httpsåœ°å€ï¼Œç„¶åè§£æé‡Œé¢æœ‰æ²¡æœ‰loginï¼Œå› ä¸ºç™»å½•æ“ä½œä¸ç”¨è§£æä»¤ç‰Œå°±ç›´æ¥æ”¾è¡Œï¼Œç„¶åè§£æä»¤ç‰Œå¤´æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è§£ææ•´ä¸ªä»¤ç‰Œï¼Œå¦‚æœä»¤ç‰Œåˆæ³•å°±æ”¾è¡Œã€‚é”™è¯¯åˆ™ç»™å‰ç«¯è¿”å›â€NOT_LOGINâ€.</p><h2 id="â€”Interceptorâ€“"><a href="#â€”Interceptorâ€“" class="headerlink" title="â€”Interceptorâ€“"></a><strong>â€”Interceptorâ€“</strong></h2><p>æ‹¦æˆªå™¨ï¼Œè·Ÿè¿‡æ»¤å™¨å·®ä¸å¤šçš„ï¼Œç”¨æ¥åŠ¨æ€æ‹¦æˆªæ§åˆ¶å™¨çš„æ‰§è¡Œã€‚</p><p><strong>å¿«é€Ÿå…¥é—¨</strong></p><p>å…ˆå®šä¹‰æ‹¦æˆªå™¨ï¼šåˆ›å»ºç±»ï¼šInterceptor.LoginCheckInterceptorï¼Œæ¥å£ï¼šHandlerInterceptorï¼Œç„¶åæŒ‰crtrl+Oé‡å†™å…¨éƒ¨æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ˜¯<em>ç›®æ ‡èµ„æºæ–¹æ³•è¿è¡Œå‰æ”¾è¡Œ</em>ï¼Œç¬¬äºŒä¸ªæ˜¯<em>æ ‡èµ„æºæ–¹æ³•è¿è¡Œåè¿è¡Œ</em>ï¼Œç¬¬ä¸‰ä¸ªæ˜¯<em>è§†å›¾æ¸²æŸ“å®Œæ¯•åè¿è¡Œï¼Œæœ€åè¿è¡Œ</em>ã€‚ç„¶åå†åœ¨top.hepinganä¸‹åˆ›å»ºç±»ï¼šconfig.WebConfigï¼Œé‡Œé¢æ¥å£ï¼šWebMvcConfiguerï¼Œç„¶åå®ç°æ–¹æ³•ï¼šaddInterceptorsï¼Œç„¶åæ³¨å†Œä¸€ä¸ªæ‹¦æˆªå™¨:private LoginCheckInterceptor loginCheckInterceptor;ç„¶åå†åœ¨å®ç°æ–¹æ³•é‡Œé¢æ”¹ä¸ºï¼šregistry.addInterceptor(loginCheckInterceptor).addPathPatterns(â€œ&#x2F;**â€);</p><p>æ³¨æ„åœ¨Interceptoré‡Œé¢è°ƒç”¨å…¨éƒ¨è¯·æ±‚ä¸º&#x2F;**ï¼ŒFilteré‡Œé¢ä¸º&#x2F;*ï¼Œç„¶åå°†ä¹‹å‰çš„ Filterçš„@WebFilteræ³¨é‡Šæ‰é˜²æ­¢å†²çªï¼Œæœ€åå¯åŠ¨é¡¹ç›®ï¼Œå°±ä¹‹å‰Filteré‚£ä¸ª loginè¯·æ±‚å‘é€å°±okã€‚</p><p><em><strong>æ‹¦æˆªè·¯å¾„</strong></em>ï¼šâ€˜&#x2F;*â€™ä¸ºä¸€çº§è·¯å¾„ï¼Œåªèƒ½æ‹¦æˆª&#x2F;dept,&#x2F;empçš„è¯·æ±‚ï¼Œ&#x2F;dept&#x2F;1å°±ä¸èƒ½æ‹¦æˆªã€‚â€™&#x2F;**â€™ä¸ºå…¨éƒ¨æ‹¦æˆªï¼Œå•¥éƒ½èƒ½åŒ¹é…ã€‚&#x2F;depts&#x2F;**åˆ™æ˜¯&#x2F;deptsä¸‹çš„å…¨éƒ¨è·¯å¾„ï¼Œ&#x2F;depts&#x2F;*åˆ™æ˜¯deptsä¸‹çš„ä¸€çº§è·¯å¾„ã€‚</p><p>Filterä¸Interceptorçš„å…³ç³»ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/1233962503__91f4fbebd7ae560a910ff5dcacbb50c3_304711970_58124816930802402_0_wifi_0-1024x576.jpg" alt="img"></p><p><strong>å®æ“åˆ°é¡¹ç›®</strong></p><p>åªä¿®æ”¹Interceptorçš„ç¬¬ä¸€ä¸ªå®ç°æ–¹æ³•ï¼šè·ŸFilterçš„å·®ä¸å¤šï¼Œå…ˆå¤åˆ¶è¿‡æ¥ç„¶åå»æ‰å®šä¹‰çš„Httpçš„å˜é‡ï¼Œç„¶åæ”¾è¡Œå°±æŠŠreturnå€¼è®¾ä¸ºtrueï¼Œä¸æ”¾è¡Œè®¾ç½®ä¸ºfalseã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">@Override//ç›®æ ‡èµ„æºæ–¹æ³•è¿è¡Œå‰æ”¾è¡Œ</span><br><span class="line">public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;</span><br><span class="line">System.out.println(&quot;preHandle...&quot;);</span><br><span class="line">//è·å–è¯·æ±‚url</span><br><span class="line"> String url= request.getRequestURL().toString();</span><br><span class="line">log.info(&quot;è¯·æ±‚çš„url:&quot;+url);</span><br><span class="line"></span><br><span class="line">//åˆ¤æ–­urlæ˜¯å¦å­˜åœ¨loginï¼Œå¦‚æœæœ‰æ”¾è¡Œ</span><br><span class="line"> if (url.contains(&quot;login&quot;))&#123;</span><br><span class="line">log.info(&quot;ç™»å½•æ“ä½œï¼Œæ”¾è¡Œ...&quot;);</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨</span><br><span class="line"> String jwt=request.getHeader(&quot;token&quot;);</span><br><span class="line">if(!StringUtils.hasLength(jwt))&#123;</span><br><span class="line">log.info(&quot;è¯·æ±‚å¤´tokenä¸ºç©ºï¼Œè¿”å›æœªç™»å½•çš„ä¿¡æ¯&quot;);</span><br><span class="line">Result error=Result.error(&quot;NOT_LOGIN&quot;);</span><br><span class="line">String notLogin= JSONObject.toJSONString(error);</span><br><span class="line">response.getWriter().write(notLogin);</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è§£æ token</span><br><span class="line"> try &#123;</span><br><span class="line">JwtUtils.parseJWT(jwt);</span><br><span class="line">&#125;catch (Exception e)&#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">log.info(&quot;è§£æä»¤ç‰Œå¤±è´¥ï¼Œè¿”å›æœªç™»å½•é”™è¯¯ä¿¡æ¯&quot;);</span><br><span class="line">Result error=Result.error(&quot;NOT_LOGIN&quot;);</span><br><span class="line">String notLogin=JSONObject.toJSONString(error);</span><br><span class="line">response.getWriter().write(notLogin);</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">log.info(&quot;ä»¤ç‰Œåˆæ³•ï¼Œæ”¾è¡Œ&quot;);</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å†å»è®¿é—®ç½‘å€å°±ç›´æ¥è¿”å›åˆ°ç™»å½•ç•Œé¢äº†ã€‚</p><h2 id="â€”å¼‚å¸¸å¤„ç†â€”"><a href="#â€”å¼‚å¸¸å¤„ç†â€”" class="headerlink" title="â€”å¼‚å¸¸å¤„ç†â€”"></a><strong>â€”å¼‚å¸¸å¤„ç†â€”</strong></h2><p>ç›®å‰å­˜åœ¨çš„å¼‚å¸¸ï¼šå¾€æ–°å¢éƒ¨é—¨æ–°å¢ç›¸åŒçš„åå­—çš„éƒ¨é—¨ï¼Œä¼šå‘ç°æµè§ˆå™¨æ²¡ååº”ï¼ˆåŸå› å°±æ˜¯SQLè¯­å¥åˆ›å»ºnameçš„æ—¶å€™å·²è®¾ç½®ä¸ºuniqueï¼Œä¸èƒ½é‡å¤ï¼‰ã€‚</p><p>è¿™æ—¶å°±å¾€top.hepinganåŒ…ä¸‹åˆ›å»ºç±»Exception.GlobalExceptionï¼Œç„¶åé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@RestControllerAdvice</span><br><span class="line">public class GlobalException &#123;</span><br><span class="line">@ExceptionHandler(Exception.class)</span><br><span class="line">public Result ex(Exception exception)&#123;</span><br><span class="line">exception.printStackTrace();</span><br><span class="line">return Result.error(&quot;æ“ä½œå¤±è´¥ï¼Œè¯·è”ç³»ä½•å¹³å®‰~&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Exception.classæ˜¯æŒ‡æ•è·å…¨éƒ¨å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥æ”¹æˆå…¶ä»–çš„ä»€ä¹ˆIOExå•¥çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javawebå­¦ä¹ ç¬”è®°ã€é¡¹ç›®å®æˆ˜ã€‘ï¼ˆä¸‰ï¼‰</title>
      <link href="/2023/07/22/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%91%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2023/07/22/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E3%80%91%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p>ç§‘æ™®ä¸€ä¸‹htppså„ç§é”™è¯¯ä»£ç ï¼š<a href="https://zhuanlan.zhihu.com/p/31674574">å¸¸è§HTTPé”™è¯¯ä»£ç å¤§å…¨ â€“ çŸ¥ä¹ (zhihu.com)</a></p><p><strong>ç¯å¢ƒæ­å»º&#x2F;åŸºç¡€å‡†å¤‡</strong></p><p>åˆ›å»ºå¦‚ä¸‹çš„æ–‡ä»¶</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/651JE8D9C1GZSO.png" alt="img"></p><p>é…ç½®MySQLæ•°æ®åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">-- éƒ¨é—¨ç®¡ç†</span><br><span class="line">create table dept(</span><br><span class="line">    id int unsigned primary key auto_increment comment &#x27;ä¸»é”®ID&#x27;,</span><br><span class="line">    name varchar(10) not null unique comment &#x27;éƒ¨é—¨åç§°&#x27;,</span><br><span class="line">    create_time datetime not null comment &#x27;åˆ›å»ºæ—¶é—´&#x27;,</span><br><span class="line">    update_time datetime not null comment &#x27;ä¿®æ”¹æ—¶é—´&#x27;</span><br><span class="line">) comment &#x27;éƒ¨é—¨è¡¨&#x27;;</span><br><span class="line">insert into dept (id, name, create_time, update_time) values(1,&#x27;å­¦å·¥éƒ¨&#x27;,now(),now()),(2,&#x27;æ•™ç ”éƒ¨&#x27;,now(),now()),(3,&#x27;å’¨è¯¢éƒ¨&#x27;,now(),now()), (4,&#x27;å°±ä¸šéƒ¨&#x27;,now(),now()),(5,&#x27;äººäº‹éƒ¨&#x27;,now(),now());</span><br><span class="line">-- å‘˜å·¥ç®¡ç†(å¸¦çº¦æŸ)</span><br><span class="line">create table emp (</span><br><span class="line">  id int unsigned primary key auto_increment comment &#x27;ID&#x27;,</span><br><span class="line">  username varchar(20) not null unique comment &#x27;ç”¨æˆ·å&#x27;,</span><br><span class="line">  password varchar(32) default &#x27;123456&#x27; comment &#x27;å¯†ç &#x27;,</span><br><span class="line">  name varchar(10) not null comment &#x27;å§“å&#x27;,</span><br><span class="line">  gender tinyint unsigned not null comment &#x27;æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³&#x27;,</span><br><span class="line">  image varchar(300) comment &#x27;å›¾åƒ&#x27;,</span><br><span class="line">  job tinyint unsigned comment &#x27;èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ&#x27;,</span><br><span class="line">  entrydate date comment &#x27;å…¥èŒæ—¶é—´&#x27;,</span><br><span class="line">  dept_id int unsigned comment &#x27;éƒ¨é—¨ID&#x27;,</span><br><span class="line">  create_time datetime not null comment &#x27;åˆ›å»ºæ—¶é—´&#x27;,</span><br><span class="line">  update_time datetime not null comment &#x27;ä¿®æ”¹æ—¶é—´&#x27;</span><br><span class="line">) comment &#x27;å‘˜å·¥è¡¨&#x27;;</span><br><span class="line">INSERT INTO emp</span><br><span class="line">(id, username, password, name, gender, image, job, entrydate,dept_id, create_time, update_time) VALUES</span><br><span class="line">(1,&#x27;jinyong&#x27;,&#x27;123456&#x27;,&#x27;é‡‘åº¸&#x27;,1,&#x27;1.jpg&#x27;,4,&#x27;2000-01-01&#x27;,2,now(),now()),</span><br><span class="line">(2,&#x27;zhangwuji&#x27;,&#x27;123456&#x27;,&#x27;å¼ æ— å¿Œ&#x27;,1,&#x27;2.jpg&#x27;,2,&#x27;2015-01-01&#x27;,2,now(),now()),</span><br><span class="line">(3,&#x27;yangxiao&#x27;,&#x27;123456&#x27;,&#x27;æ¨é€&#x27;,1,&#x27;3.jpg&#x27;,2,&#x27;2008-05-01&#x27;,2,now(),now()),</span><br><span class="line">(4,&#x27;weiyixiao&#x27;,&#x27;123456&#x27;,&#x27;éŸ¦ä¸€ç¬‘&#x27;,1,&#x27;4.jpg&#x27;,2,&#x27;2007-01-01&#x27;,2,now(),now()),</span><br><span class="line">(5,&#x27;changyuchun&#x27;,&#x27;123456&#x27;,&#x27;å¸¸é‡æ˜¥&#x27;,1,&#x27;5.jpg&#x27;,2,&#x27;2012-12-05&#x27;,2,now(),now()),</span><br><span class="line">(6,&#x27;xiaozhao&#x27;,&#x27;123456&#x27;,&#x27;å°æ˜­&#x27;,2,&#x27;6.jpg&#x27;,3,&#x27;2013-09-05&#x27;,1,now(),now()),</span><br><span class="line">(7,&#x27;jixiaofu&#x27;,&#x27;123456&#x27;,&#x27;çºªæ™“èŠ™&#x27;,2,&#x27;7.jpg&#x27;,1,&#x27;2005-08-01&#x27;,1,now(),now()),</span><br><span class="line">(8,&#x27;zhouzhiruo&#x27;,&#x27;123456&#x27;,&#x27;å‘¨èŠ·è‹¥&#x27;,2,&#x27;8.jpg&#x27;,1,&#x27;2014-11-09&#x27;,1,now(),now()),</span><br><span class="line">(9,&#x27;dingminjun&#x27;,&#x27;123456&#x27;,&#x27;ä¸æ•å›&#x27;,2,&#x27;9.jpg&#x27;,1,&#x27;2011-03-11&#x27;,1,now(),now()),</span><br><span class="line">(10,&#x27;zhaomin&#x27;,&#x27;123456&#x27;,&#x27;èµµæ•&#x27;,2,&#x27;10.jpg&#x27;,1,&#x27;2013-09-05&#x27;,1,now(),now()),</span><br><span class="line">(11,&#x27;luzhangke&#x27;,&#x27;123456&#x27;,&#x27;é¹¿æ–å®¢&#x27;,1,&#x27;11.jpg&#x27;,5,&#x27;2007-02-01&#x27;,3,now(),now()),</span><br><span class="line">(12,&#x27;hebiweng&#x27;,&#x27;123456&#x27;,&#x27;é¹¤ç¬”ç¿&#x27;,1,&#x27;12.jpg&#x27;,5,&#x27;2008-08-18&#x27;,3,now(),now()),</span><br><span class="line">(13,&#x27;fangdongbai&#x27;,&#x27;123456&#x27;,&#x27;æ–¹ä¸œç™½&#x27;,1,&#x27;13.jpg&#x27;,5,&#x27;2012-11-01&#x27;,3,now(),now()),</span><br><span class="line">(14,&#x27;zhangsanfeng&#x27;,&#x27;123456&#x27;,&#x27;å¼ ä¸‰ä¸°&#x27;,1,&#x27;14.jpg&#x27;,2,&#x27;2002-08-01&#x27;,2,now(),now()),</span><br><span class="line">(15,&#x27;yulianzhou&#x27;,&#x27;123456&#x27;,&#x27;ä¿è²èˆŸ&#x27;,1,&#x27;15.jpg&#x27;,2,&#x27;2011-05-01&#x27;,2,now(),now()),</span><br><span class="line">(16,&#x27;songyuanqiao&#x27;,&#x27;123456&#x27;,&#x27;å®‹è¿œæ¡¥&#x27;,1,&#x27;16.jpg&#x27;,2,&#x27;2007-01-01&#x27;,2,now(),now()),</span><br><span class="line">(17,&#x27;chenyouliang&#x27;,&#x27;123456&#x27;,&#x27;é™ˆå‹è°…&#x27;,1,&#x27;17.jpg&#x27;,NULL,&#x27;2015-03-21&#x27;,NULL,now(),now());</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°SQLè¯­å¥é‡Œé¢çš„deptå’Œempçš„å˜é‡ï¼Œå°±åˆ†åˆ«åœ¨pojoé‡Œçš„Dept and Empé‡Œå®šç†å¯¹åº”çš„ç§æœ‰å‹å˜é‡ï¼Œå‘½åè§„åˆ™ä¸ºé©¼å³°å‹ï¼Œå¹¶æ·»åŠ ä¸Šlombokæ³¨è§£çœç•¥ç®€å•æ–¹æ³•ã€‚</p><p>é…ç½®application.propertiesæ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#é©±åŠ¨ç±»åç§°</span><br><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">#æ•°æ®åº“è¿æ¥çš„url</span><br><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/tlias</span><br><span class="line">#è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">#è¿æ¥æ•°æ®åº“çš„å¯†ç </span><br><span class="line">spring.datasource.password=1234</span><br><span class="line">#é…ç½®mybatisçš„æ—¥å¿—, æŒ‡å®šè¾“å‡ºåˆ°æ§åˆ¶å°</span><br><span class="line">mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span><br><span class="line">#å¼€å¯mybatisçš„é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„å¼€å…³ a_column ------&gt; aCloumn</span><br><span class="line">mybatis.configuration.map-underscore-to-camel-case=true</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨Restfulå¼€å‘è§„èŒƒ</strong>ï¼Œ<strong>å‰ç«¯è¯·æ±‚æ–¹å¼ï¼š</strong></p><p><a href="https://localhost:8080/users/1">https://localhost:8080/users/1</a> (GET:æŸ¥è¯¢idä¸º1çš„ç”¨æˆ·ï¼›DELECTï¼šåˆ é™¤idä¸º1çš„ç”¨æˆ·)</p><p><a href="https://localhost:8080/users">https://localhost:8080/users</a> ï¼ˆPOST:æ–°å¢&#x2F;ä¿®æ”¹ç”¨æˆ·ï¼‰</p><p>Resultç±»ï¼šç”¨ä½œäºç»Ÿä¸€çš„æ•°æ®æ“ä½œå“åº”çš„è¿”å›ç±»å‹ï¼Œçœ‹ä»£ç å°±æ‡‚äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">public class Result &#123;</span><br><span class="line">private Integer code;//å“åº”ç ï¼Œ1 ä»£è¡¨æˆåŠŸ; 0 ä»£è¡¨å¤±è´¥</span><br><span class="line">private String msg; //å“åº”ä¿¡æ¯ æè¿°å­—ç¬¦ä¸²</span><br><span class="line">private Object data; //è¿”å›çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">//å¢åˆ æ”¹ æˆåŠŸå“åº”</span><br><span class="line">public static Result success()&#123;</span><br><span class="line">return new Result(1,&quot;success&quot;,null);</span><br><span class="line">&#125;</span><br><span class="line">//æŸ¥è¯¢ æˆåŠŸå“åº”</span><br><span class="line">public static Result success(Object data)&#123;</span><br><span class="line">return new Result(1,&quot;success&quot;,data);</span><br><span class="line">&#125;</span><br><span class="line">//å¤±è´¥å“åº”</span><br><span class="line">public static Result error(String msg)&#123;</span><br><span class="line">return new Result(0,msg,null);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ·»åŠ æŸ¥è¯¢ç³»ç»Ÿ</strong></p><p>åŸå§‹è®°å½•æ—¥å¿—æ–¹å¼ï¼šprivate static Logger <em>log</em>&#x3D; LoggerFactory.<em>getLogger</em>(DeptController.class);æœ‰äº†lombokå¯ä»¥ç›´æ¥åœ¨Controllerç±»ä¸Šä½¿ç”¨Slf4jæ³¨è§£æ¥è‡ªåŠ¨åˆ›å»ºlogæ—¥å¿—ï¼›</p><p>åŸå§‹æŒ‡å®šå€¼å’Œè¯·æ±‚æ–¹æ³•ï¼š@RequestMapping(value &#x3D; â€œ&#x2F;deptâ€,method &#x3D; RequestMethod.GET) &#x2F;&#x2F;æŒ‡å®šè¯·æ±‚æ–¹å¼ä¸ºGETï¼›ç›´æ¥æ–°çš„æ³¨è§£ï¼š**@GetMapping**(â€œ&#x2F;deptâ€) &#x2F;&#x2F;ç›´æ¥ä½¿ç”¨Get&#x2F;Post&#x2F;â€¦Mappingå°±å¯ä»¥çœç•¥methodåé¢çš„ã€‚Javaåƒæ˜¯é¢å‘æ³¨è§£ç¼–ç¨‹â€¦</p><p>DeptControllerç±»ï¼šé€šè¿‡å‰ç«¯è¯·æ±‚GETå‹çš„deptsæŒ‡ä»¤ï¼Œè°ƒç”¨Resultç±»å‹çš„ listæ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªDeptServicelmplç±»çš„list()æ–¹æ³•çš„é›†åˆç”¨äºè¾“å‡ºï¼Œå¹¶å°†ç»“æœè¿”å›ç»™å‰ç«¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private DeptServicelmpl deptService;</span><br><span class="line"></span><br><span class="line">@GetMapping(&quot;/depts&quot;)   /**ç›´æ¥ä½¿ç”¨Get/Post/...Mappingå°±å¯ä»¥çœç•¥methodåé¢çš„*/</span><br><span class="line">    public Result list()&#123;</span><br><span class="line">        log.info(&quot;æŸ¥è¯¢å…¨éƒ¨éƒ¨é—¨æ•°æ®&quot;);</span><br><span class="line"></span><br><span class="line">        List&lt;Dept&gt; deptList=deptService.list();</span><br><span class="line">        return Result.success(deptList);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>DeptServiceæ¥å£é‡Œé¢ï¼šå®šä¹‰äº†ä¸€ä¸ªDeptç±»çš„é›†åˆçš„æ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Dept&gt; list();</span><br></pre></td></tr></table></figure><p>DeptServicelmplæ¥å£ç±»ï¼šé‡æ–°list()æ–¹æ³•ï¼Œé‡Œé¢è¿”å›DepMapperç±»çš„list()æ–¹æ³•çš„ç»“æœã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class DeptServicelmpl implements DeptService &#123;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">private DeptMapper deptMapper;</span><br><span class="line">@Override</span><br><span class="line">public List&lt;Dept&gt; list() &#123;</span><br><span class="line">return deptMapper.list();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>DeptMapperæ¥å£ï¼šlist()æ–¹æ³•ä¸ºè°ƒç”¨SQLçš„selectæŸ¥è¯¢è¯­å¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface DeptMapper &#123;</span><br><span class="line">@Select(&quot;select *from dept&quot;)</span><br><span class="line">List&lt;Dept&gt; list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´å°±æ˜¯è¦ç†Ÿæ‚‰ä¸‰å±‚æ¶æ„ï¼Œå±‚å±‚å¥—å¨ƒï¼ŒControllerç±»è°ƒç”¨Serviceç±»ï¼ŒServiceç±»å†è°ƒç”¨Mapperç±»çš„æ–¹æ³•ï¼Œç„¶åè¯¥æ–¹æ³•åˆè¿”å›ç»™Serviceï¼Œå†è¿”å›ç»™Controllerï¼Œæœ€åè¿”å›ç»™å‰ç«¯ã€‚ç”¨postmanå¯ä»¥è¾“å…¥<a href="https://localhost:8080/depts%E6%B5%8B%E8%AF%95%E4%B8%8B%E5%93%8D%E5%BA%94%E3%80%82">https://localhost:8080/deptsæµ‹è¯•ä¸‹å“åº”ã€‚</a></p><p><strong>å‰åç«¯è”è°ƒ</strong></p><p>é¦–å…ˆä¸‹è½½è¯¥é¡¹ç›®çš„å‰ç«¯æ–‡ä»¶ï¼š<a href="https://pan.baidu.com/s/1w0b-MJ33WhzNEwXNgB9EKw?pwd=1234%EF%BC%8C%E6%8F%90%E5%8F%96%E7%A0%81%EF%BC%9A1234">https://pan.baidu.com/s/1w0b-MJ33WhzNEwXNgB9EKw?pwd=1234ï¼Œæå–ç ï¼š1234</a></p><p>å°†zipè§£å‹åˆ°ä¸€ä¸ªå…¨è‹±æ–‡è·¯å¾„çš„æ–‡ä»¶å¤¹ï¼Œå¹¶æ‰“å¼€é‡Œé¢çš„exeæ–‡ä»¶ï¼Œæ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨å¦‚æœæœ‰è¿™ä¸ªç¨‹åºåœ¨åå°è¯´æ˜å°±è¿è¡ŒæˆåŠŸäº†ï¼Œè¯¥ç¨‹åºä¼šè‡ªåŠ¨å ç”¨ä¸€ä¸ª90ç«¯å£ã€‚æ‰“å¼€æµè§ˆå™¨è¾“å…¥localhost:90ï¼Œç‚¹å‡»éƒ¨é—¨ç®¡ç†ï¼Œå¦‚æœæœ‰ç»“æœè¯´æ˜å°±æˆåŠŸäº†ï¼å¯ä»¥æ‰“å¼€F12æŸ¥çœ‹ç½‘ç»œï¼Œæ˜¯é€šè¿‡Tomcatå°†90ç«¯å£è½¬æ¢ä¸º8080ç«¯å£çš„ã€‚</p><p><strong>åˆ é™¤éƒ¨é—¨ç³»ç»Ÿ</strong></p><p>åˆ é™¤æ–¹æ³•å°±éœ€è¦å‰ç«¯è¯·æ±‚æ—¶é™„ä¸Šä¸€ä¸ªidäº†ï¼Œä¸”è¿”å›ç»™å‰ç«¯çš„æ•°æ®ä¸éœ€è¦æ—¥å¿—ï¼ˆdateï¼‰ï¼Œæ‰€æœ‰å°±ç”¨Resultè¿”å›ç±»ä¸­çš„successæ— å‚æ–¹æ³•äº†ã€‚</p><p>ä¸€æ ·çš„ï¼ŒControllerå±‚ï¼šè¿™é‡Œçš„**@PathVariable**æ³¨è§£æ˜¯ç”¨äºä¼ é€’ä¸Šé¢çš„{id}çš„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@DeleteMapping(&quot;/depts/&#123;id&#125;&quot;)</span><br><span class="line">public Result delete(@PathVariable Integer id)&#123;</span><br><span class="line">log.info(&quot;æ ¹æ®idåˆ é™¤éƒ¨é—¨:&#123;&#125;&quot;,id);</span><br><span class="line">deptService.delect(id);</span><br><span class="line">return Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>DeptServiceæ¥å£ï¼šå®šä¹‰ä¸€ä¸ªæœ‰å‚çš„æ–¹æ³•ï¼ˆidï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void delect(Integer id);</span><br></pre></td></tr></table></figure><p>DeptServicelmplç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void delect(Integer id)&#123;</span><br><span class="line">deptMapper.delectById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>DeptMapperç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Delete(&quot;delete from dept where id=#&#123;id&#125;&quot;)</span><br><span class="line">void delectById(Integer id);</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹å°±æ˜¯å¥—å¨ƒâ€¦..ä¼šäº†ä¸€ä¸ªå…¶ä»–çš„å‡ ä¹ä¹Ÿå°±å…¨ä¼šã€‚<strong>è¯·æ±‚æ–¹å¼æ˜¯DELECTäº†æ³¨æ„å“¦~</strong></p><p><strong>æ–°å¢éƒ¨é—¨</strong></p><p>è¯·æ±‚å‚æ•°å°±ä¸€ä¸ªéƒ¨é—¨åå­—ï¼Œå› ä¸ºidæ˜¯è‡ªåŠ¨ç”Ÿæˆï¼Œcreate_timeå’Œupdate_timeä¹Ÿæ˜¯æ ¹æ®åˆ›å»ºæ—¶é—´ç”Ÿæˆã€‚è¯·æ±‚ç±»å‹ä¸ºPOSTã€‚</p><p>Controller:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(&quot;/depts&quot;)</span><br><span class="line">public Result add(@RequestBody Dept dept)&#123;</span><br><span class="line">log.info(&quot;æ·»åŠ éƒ¨é—¨:&#123;&#125;&quot;,dept);</span><br><span class="line">deptService.add(dept);</span><br><span class="line">return Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Service:(æ¥å£çœäº†)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void add(Dept dept) &#123;</span><br><span class="line">dept.setCreateTime(LocalDateTime.now());</span><br><span class="line">dept.setUpdateTime(LocalDateTime.now());</span><br><span class="line">deptMapper.insert(dept);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mapper:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Insert(&quot;INSERT INTO dept (name, create_time, update_time) value (#&#123;name&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;)&quot;)</span><br><span class="line">void insert(Dept dept);</span><br></pre></td></tr></table></figure><p>postmanæˆ‘è¿™æ ·ç¼–è¾‘ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/W0PM@33WI70VTXL_6.png" alt="img"></p><p><strong>åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½</strong></p><p>ç”±äºèµ·å§‹ç´¢å¼•æœ‰å˜åŒ–(ï¼ˆé¡µç -1ï¼‰*æ¯é¡µå±•ç¤ºè®°å½•æ•° )ï¼Œæ‰€ä»¥éœ€è¦å‰ç«¯ä¼ é€’ä¸€ä¸ªé¡µç æ•°ï¼Œå¦å¤–å‰ç«¯è¿˜éœ€è¦ä¼ é€’â€˜æ¯é¡µå±•ç¤ºè®°å½•æ•°â€™çš„å‚æ•°ã€‚</p><p>å…ˆåœ¨pojoé‡Œåˆ›å»ºä¸ªPageBeanç±»ç”¨äºå®šä¹‰å‚æ•°ï¼Œå°±è·Ÿä¹‹å‰çš„Deptä¸€æ ·ï¼Œéœ€è¦æ·»åŠ ä¸Š@Dateç­‰æ³¨è§£ã€‚å®šä¹‰çš„å˜é‡:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">private Long total;//æ€»è®°å½•æ•°</span><br><span class="line">private List rows;//æ•°æ®åˆ—è¡¨</span><br></pre></td></tr></table></figure><p>å…ˆåœ¨Controllerç±»å®šä¹‰@GetMappingçš„æ–¹æ³•ï¼Œå› ä¸ºè¦ä¼ é€’å‚æ•°æ‰€ä»¥å°±è¦ç”¨æœ‰å‚çš„å˜›ï¼Œå‚æ•°å°±è¿™ä¹ˆå®šä¹‰ï¼š@RequestParamæ³¨è§£æ›¿ä»£äº†åŸå§‹çš„ifè¯­å¥ï¼Œç›´æ¥æ·»åŠ é»˜è®¤å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@RequestParam(defaultValue = &quot;1&quot;) Integer page,@RequestParam(defaultValue = &quot;10&quot;) Integer pageSize</span><br></pre></td></tr></table></figure><p>EmpControllerç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(&quot;/emps&quot;)</span><br><span class="line">public Result page(@RequestParam(defaultValue = &quot;1&quot;) Integer page,</span><br><span class="line">                   @RequestParam(defaultValue = &quot;10&quot;) Integer pageSize)&#123;</span><br><span class="line">log.info(&quot;åˆ†é¡µæŸ¥è¯¢,å‚æ•°ï¼š&#123;&#125;,&#123;&#125;&quot;,page,pageSize);</span><br><span class="line">PageBean pageBean=empService.page(page,pageSize);</span><br><span class="line">return Result.success(pageBean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>EmpServiceImplæ¥å£ç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public PageBean page(Integer page, Integer pageSize) &#123;</span><br><span class="line">Long count=empMapper.count();</span><br><span class="line">Integer start=(page-1)*pageSize;</span><br><span class="line">List&lt;Emp&gt; empList=empMapper.page(start,pageSize);</span><br><span class="line">//å°è£…PageBeanå¯¹è±¡</span><br><span class="line">PageBean pageBean=new PageBean(count,empList);</span><br><span class="line">return pageBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>EmpMapperæ¥å£ï¼šä¸€ä¸ªæ˜¯æŸ¥è¯¢é¡µç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Select(&quot;Select count(*) from emp&quot;)</span><br><span class="line">public Long count();</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæ˜¯æŸ¥è¯¢å½“å‰é¡µçš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Select(&quot;SELECT *from emp limit #&#123;start&#125;,#&#123;pagesize&#125;&quot;)</span><br><span class="line">public List&lt;Emp&gt; page(Integer start,Integer pagesize);</span><br></pre></td></tr></table></figure><p><strong>PageHelperåˆ†é¡µæ’ä»¶ï¼š</strong></p><p>ç›®çš„å°±æ˜¯ç®€åŒ–Mapperæ¥å£å’ŒServiceå±‚çš„ä»£ç ã€‚ä¸‹è½½ï¼š<a href="https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper-spring-boot-starter/1.4.6">Maven Repository: com.github.pagehelper Â» pagehelper-spring-boot-starter Â» 1.4.6 (mvnrepository.com)</a></p><p>Mapperå°±åªå†™ï¼šä¸ç”¨ä»€ä¹ˆlimitè¿˜è¦å†™ä¸¤ä¸ªæŸ¥è¯¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Select(&quot;SELECT *from emp&quot;)</span><br><span class="line">public List&lt;Emp&gt; list();</span><br></pre></td></tr></table></figure><p>EmpServiceImplæ¥å£ç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public PageBean page(Integer page, Integer pageSize) &#123;</span><br><span class="line">PageHelper.startPage(page,pageSize);</span><br><span class="line">List&lt;Emp&gt; empList=empMapper.list();</span><br><span class="line">Page&lt;Emp&gt; p=(Page&lt;Emp&gt;)empList;</span><br><span class="line">//å°è£…PageBeanå¯¹è±¡</span><br><span class="line">PageBean pageBean=new PageBean(p.getTotal(),p.getResult());</span><br><span class="line">return pageBean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„ç±»éƒ½ä¸€æ ·ã€‚</p><p><strong>æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</strong></p><p>æŸ¥è¯¢æ¡ä»¶ï¼šæ¨¡ç³ŠæŸ¥è¯¢çš„åå­—ï¼Œç²¾ç¡®æŸ¥è¯¢çš„æ€§åˆ«ï¼Œbetweenä¸­é—´æŸ¥è¯¢çš„å…¥èŒæ—¥æœŸï¼šeg.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">where name like concat(&#x27;%&#x27;, &#x27;å¼ &#x27;, &#x27;%&#x27;)</span><br><span class="line">and gender = 1</span><br><span class="line">and entrydate between &#x27;2000-01-01&#x27; and &#x27;2010-01-01&#x27;</span><br><span class="line">order by update_time desc</span><br></pre></td></tr></table></figure><p>EmpControllerç±»é‡Œé¢æŸ¥è¯¢æ–¹æ³•å†æ·»åŠ 4ä¸ªå˜é‡ï¼šString name,Short gender,@DateTimeFormat(pattern &#x3D; â€œyyyy-MM-ddâ€) LocalDate begin,@DateTimeFormat(pattern &#x3D; â€œyyyy-MM-ddâ€) LocalDate endï¼Œå…¶ä»–åœ°æ–¹çš„çœ‹IDEAæç¤ºä¿®æ”¹å°±è¡Œã€‚Serviceé‡Œä¹Ÿè¦æ·»åŠ è¿™å››ä¸ªå˜é‡ã€‚</p><p>EmpServiceImplæ¥å£ç±»é‡Œé¢è¦æ³¨æ„çš„æ˜¯list()é‡Œé¢åªéœ€è¦è¿™æ–°å¢çš„å››ä¸ªå˜é‡ï¼Œå› ä¸ºMySQLæŸ¥è¯¢è¯­å¥é‡Œé¢ç”¨ä¸åˆ°pageå’ŒpageSizeè¿™ä¸¤ä¸ªå˜é‡ã€‚Mapperæ¥å£ï¼špublic List<Emp> list(String name, Short gender, LocalDate begin, LocalDate end);å¯ä»¥çœ‹å‡ºæ˜¯ä½¿ç”¨äº†XMLæ˜ å°„æ–‡ä»¶æ‰æ²¡å†™@Selcetï¼ŒXMLæ–‡ä»¶é‡Œé¢çš„SQLæŸ¥è¯¢è¯­å¥ï¼ˆä½ç½®å°±åœ¨resourcesé‡Œé¢çš„top&#x2F;hepingan&#x2F;mapperï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;top.hepingan.mapper.EmpMapper&quot;&gt;</span><br><span class="line">&lt;select id=&quot;list&quot; resultType=&quot;top.hepingan.pojo.Emp&quot;&gt;</span><br><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">&lt;where&gt;</span><br><span class="line">&lt;if test=&quot;name!=null&quot;&gt;</span><br><span class="line">name like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">and gender = #&#123;gender&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;begin!=null and end!=null&quot;&gt;</span><br><span class="line">and entrydate between #&#123;begin&#125; and #&#123;end&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/where&gt;</span><br><span class="line">order by update_time desc </span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢è¯­å¥ï¼š<a href="http://localhost:8080/emps?page=1&pagesize=10&name=%E5%BC%A0&gender=1&begin=2000-01-01&end=2010-01-01">http://localhost:8080/emps?page=1&amp;pagesize=10&amp;name=å¼ &amp;gender=1&amp;begin=2000-01-01&amp;end=2010-01-01</a></p><p><strong>åˆ é™¤æ“ä½œ</strong></p><p>å‰ç«¯è¯·æ±‚å‚æ•°ï¼š&#x2F;emp&#x2F;{ids}ï¼Œè¯·æ±‚æ–¹å¼ï¼šDELECT</p><p>åˆ›å»º@DeleteMapping(â€œemps&#x2F;{ids}â€)æ³¨è§£çš„æ–¹æ³•delete(@PathVariable List<Integer> ids)ã€‚ç„¶åç›´æ¥è°ƒç”¨empServiceçš„delete(ids)æ–¹æ³•ï¼Œç‚¹å‡»æŠ¥é”™çš„ç›´æ¥åœ¨Serviceé‡Œç”Ÿæˆä»£ç ï¼Œæ¥å£ç±»é‡Œé¢çš„é‡å†™å°±ä¸€è¡ŒempMapper.delete(ids);ç„¶åå†ç‚¹æŠ¥é”™çš„ç›´æ¥åœ¨Mapperé‡Œåˆ›å»ºå¥½ä»£ç ï¼Œæœ€åå†åœ¨XMLæ–‡ä»¶ç¼–å†™åˆ é™¤çš„ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;delete id=&quot;delete&quot;&gt;</span><br><span class="line">delete</span><br><span class="line">from emp</span><br><span class="line">where id in</span><br><span class="line">&lt;foreach collection=&quot;ids&quot; item=&quot;id&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;</span><br><span class="line">#&#123;id&#125;</span><br><span class="line">&lt;/foreach&gt;</span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure><p>å—¯å­¦ä¼šäº†ä¸€ç§æ–¹æ³•å…¶ä»–çš„éƒ½ç®€å•ã€‚</p><p><strong>æ–°å¢å‘˜å·¥æ“ä½œ</strong></p><p>å‰ç«¯è¯·æ±‚æ–¹å¼post,jsonæ ¼å¼è¾“å…¥ï¼Œè¦æ±‚æœ‰image,username,name,gender,job,entrydate,deptIdã€‚</p><p>æ•°æ®æ¯”è¾ƒå¤šï¼Œä¹‹å‰åˆ›å»ºçš„Empå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œç”±äºæ˜¯jsonæ ¼å¼ï¼Œæ‰€ä»¥å°±éœ€è¦æ·»åŠ @RequestBodyæ³¨è§£ï¼Œè°ƒç”¨Serviceçš„æ–¹æ³•ï¼Œåˆ›å»ºServiceæ–¹æ³•ï¼Œæ¥å£ç±»å®šä¹‰åŸºç¡€çš„create_time and update_timeï¼Œè°ƒç”¨Mapperçš„æ–¹æ³•ï¼Œè¿™é‡Œçš„Mapperé‡Œçš„æ·»åŠ æ–¹æ³•å°±ä¸ç”¨XMLæ˜ å°„äº†ï¼Œç›´æ¥:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Insert(&quot;INSERT INTO emp(username, name, gender, image, job, entrydate, dept_id, create_time, update_time)&quot; +</span><br><span class="line">&quot;value (#&#123;username&#125;,#&#123;name&#125;,#&#123;gender&#125;,#&#123;image&#125;,#&#123;job&#125;,#&#123;entrydate&#125;,#&#123;deptId&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;)&quot;)</span><br><span class="line">void insert(Emp emp);</span><br></pre></td></tr></table></figure><p><strong>ä¸Šä¼ æ–‡ä»¶</strong></p><p><strong>ä¸Šä¼ åˆ°æœ¬åœ°å­˜å‚¨</strong></p><p>åœ¨resources&#x2F;staticé‡Œé¢åˆ›å»ºupload.htmlæ–‡ä»¶ï¼Œé‡Œé¢ç¼–å†™ï¼šå‰ç«¯æ–‡ä»¶ä¸ç”¨ç®¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;ä¸Šä¼ æ–‡ä»¶&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">å§“å: &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;</span><br><span class="line">å¹´é¾„: &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;&lt;br&gt;</span><br><span class="line">å¤´åƒ: &lt;input type=&quot;file&quot; name=&quot;image&quot;&gt;&lt;br&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>å†åœ¨Controlleré‡Œé¢åˆ›å»ºä¸€ä¸ªUploadControllerç±»ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br><span class="line">@RestController</span><br><span class="line">public class UploadController &#123;</span><br><span class="line">@PostMapping(&quot;/upload&quot;)</span><br><span class="line">public Result upload(String name, Integer age, MultipartFile image)&#123;</span><br><span class="line">log.info(&quot;ä¸Šä¼ æ–‡ä»¶ï¼š&#123;&#125;,&#123;&#125;,&#123;&#125;&quot;,name,age,image);</span><br><span class="line">return Result.success();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MultipartFile å‡½æ•°å°±ä¸Šä¼ æ–‡ä»¶çš„æ ¼å¼ã€‚è¿™é‡Œå®šä¹‰çš„å˜é‡åè¦å’Œå‰ç«¯ç»™çš„åå­—ä¸€æ ·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ•…äº‹ï¼ˆå¤§ä¸€ä¸‹ï¼‰</title>
      <link href="/2023/07/15/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%80%E4%B8%8B%EF%BC%89/"/>
      <url>/2023/07/15/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%80%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>å¤§ä¸€ä¸‹å­¦æœŸæˆ‘ä¾¿åŒ–ç”ŸæˆITç¨‹åºè®¾è®¡å¤§ç‹ï¼Œè¿™æ‰æ˜¯ç å†œç”Ÿæ´»çš„å¼€å§‹ï¼<br>åˆšåˆšå¼€å­¦æ—¶å¼€å§‹åœ¨ææˆ‘çš„Blenderï¼Œä½†åæ¥åˆ·åˆ°äº†unityæ¸¸æˆå¼€å‘è¿™ä¸ªæ–°ä¸–ç•Œå¤§é—¨ï¼Œå¯¹äº†å¯’å‡çš„æ—¶å€™æˆ‘è¿˜ç©è¿‡è™šå¹»5ï¼Œä½†æ˜¯æˆ‘çš„ç”µè„‘çœŸçš„å¤ªç‚¸äº†ï¼Œå¸¦ä¸åŠ¨ï¼Œç›´æ¥åˆ äº†ã€‚æ“ä½œè·Ÿæˆ‘çš„Blenderè¿˜æ˜¯æœ‰å¾ˆå¤šç›¸ä¼¼çš„ï¼Œä½†æ˜¯å°±æ˜¯éœ€è¦æ•²ä»£ç äº†ï¼Œç—›è‹¦å¼€å§‹ï¼Œä¸€å¼€å§‹æ˜¯æ‹¿c++æ¥å†™çš„ï¼Œæ¯•ç«Ÿä¸Šå­¦æœŸå­¦çš„cè¯­è¨€ï¼Œè¿™å­¦æœŸçš„javaçš®éƒ½æ²¡æ‘¸åˆ°ã€‚ä½†æ˜¯è¿™ä¸ªc++æ˜¯é«˜éš¾åº¦çš„å•Šï¼Œè€Œä¸”æˆ‘c++ä¹Ÿåªå­¦äº†åŸºç¡€å‡½æ•°å’Œè¯­æ³•ï¼Œå†™è¿™äº›è¿˜æ˜¯éœ€è¦é«˜çº§å‡½æ•°å’Œunityè‡ªå¸¦çš„å‡½æ•°åº“è¦å­¦ä¹ ï¼Œæˆ‘å°±æŠ„äº†æŠ„ç½‘ä¸Šçš„ä»£ç ï¼Œä½†æ˜¯è¿˜æ˜¯å¾ˆéš¾ï¼Œæ¯•ç«Ÿæ–‡ä»¶ä½ç½®å’Œç»‘å®šå…³ç³»ä¹Ÿæ˜¯ç»•è„‘å­çš„ï¼Œç®€ç®€å•å•åšäº†ä¸ªFPSæ¸¸æˆå°±å†ä¹Ÿæ²¡åŠ¨è¿‡äº†â€¦..<br>çœŸæ­£æœ‰æˆå°±çš„äº‹æƒ…æ¥äº†ï¼Œé‚£å°±æ˜¯webå‰ç«¯å¼€å‘ï¼è¿„ä»Šä¸ºæ­¢è‡ªå­¦å­¦å¾—æœ€å¥½çš„ä¸€ä¸ªæŠ€èƒ½ï¼Œè¿™ä¸ªç½‘ç«™å°±æ˜¯è¿™ä¹ˆæ¥çš„ã€‚å…¶å®webå‰ç«¯ä¹Ÿæ²¡å­¦å¤šå°‘ï¼ŒæŠŠhtmlå­¦å®Œäº†ï¼Œcsså­¦äº†ä¸€äº›å¤šï¼ŒJavaScriptæ²¡åŠ¨ï¼Œæœ€æ‡Šæ¼çš„å°±æ˜¯æœåŠ¡å™¨ç½‘ç«™æ­å»ºäº†ï¼Œæ•´ä¸ªè¿‡ç¨‹èŠ±äº†æˆ‘ä¸€ä¸ªæœˆæ—¶é—´ï¼Œå»çœ‹çœ‹æˆ‘ä¹‹å‰å†™çš„ç½‘ç«™æ­å»ºæµç¨‹åˆ†äº«å°±çŸ¥é“æœ‰å¤šéº»çƒ¦äº†ã€‚ä½†æœ€åéƒ½æˆåŠŸäº†ï¼Œè¿™æ¡è·¯æˆ‘èµ°ä¸‹æ¥äº†â€¦.<br>ä¹‹åæ‘†çƒ‚äº†ï¼Œåˆ°5æœˆä»½åº•æ—¶æˆ‘äº†è§£äº†æ•°æ®åº“ï¼Œå­¦ä¹ äº†ä¸ªåŸºç¡€ï¼Œåæ¥æˆ‘ä»¬è¦æ±‚åšæœŸæœ«javaè¯¾ç¨‹è®¾è®¡ï¼Œå¾ˆå¤šäººéƒ½æƒ³åˆ°äº†ä»€ä¹ˆç®¡ç†ç³»ç»Ÿï¼Œå¯æ˜¯åˆ¶ä½œè¿™ç§ç®¡ç†ç³»ç»Ÿéœ€è¦ç”¨åˆ°æ•°æ®åº“ï¼Œå˜¿å˜¿å˜¿ï¼Œæˆ‘è¿™å°±ä¸å¤šäº†ä¸ªå­¦ä¹ MYSQLæ•°æ®åº“çš„ç†ç”±äº†å—ï¼Œæˆ‘å°±åˆå­¦äº†ä¸ªä¸€å‘¨ï¼Œä¹Ÿæ²¡å­¦å¤šå°‘ï¼ŒæŠŠé‚£äº›å¿…è¦çš„è¯­å¥èƒŒä¸‹æ¥äº†ã€‚ç„¶åå°±äº²æ‰‹æ•²äº†300å¤šè¡Œçš„ä»£ç ï¼Œä¹Ÿæ˜¯æ•²äº†2å¤©çš„æ ·å­ï¼Œæ¯•ç«Ÿæ˜¯ç¬¬ä¸€æ¬¡æ‰‹æ•²MYSQLä¸javaçš„è¿æ¥ä»£ç ï¼Œç­”è¾©ä¸Šæˆ‘è¿˜ç°åœºæ‰‹æ•²ä»£ç ç»™è€å¸ˆçœ‹ï¼Œè¯æ˜æ˜¯æˆ‘è‡ªå·±ä¼šçš„ï¼Œè¿˜é—®æˆ‘æ•°æ®åº“æ˜¯æ€ä¹ˆä¼šçš„ï¼Œæˆ‘è¯´è‡ªå­¦çš„ï¼Œæœç„¶å°±ç»™æˆ‘äº†ä¸ªé«˜åˆ†ï¼Œç­ä¸Šç¬¬ä¸€å“¦ï½ï¼Œè¿˜è®©æˆ‘æœ‰ä¸ªå®¤å‹ç™½å«–äº†è¿™ä¸ªé«˜åˆ†ã€‚ä½†æ˜¯æˆ‘è¿™ä¸ªæœŸæœ«è®¾è®¡æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ²¡æœ‰ç•Œé¢è®¾è®¡ï¼Œæˆ‘æ‰“ç®—åœ¨æš‘å‡æŠŠè¿™ä¸ªç»™å­¦äº†ã€‚<br>è‡³äºè¿™ä¸ªæš‘å‡å¹²ä»€ä¹ˆï¼Œæˆ‘æ‰“ç®—æ¥ç‚¹å°å•å­æ¥è€è€ï¼Œç„¶åæä¸ªå…¬ä¼—å·å’Œè½¯ä»¶ï¼Œå¼„ä¸ªâ€œè‡ªåŠ¨æŒ–çŸ¿æœºâ€ï¼Œç„¶ååœ¨è‡ªåª’ä½“å¹³å°ä¸Šå®£ä¼ å®£ä¼ ï¼Œäº‰å–ä¸‹å­¦æœŸä¸ç”¨ç®¡å®ƒå°±å¯ä»¥å¬åˆ°å¾®ä¿¡æ”¶æ¬¾åˆ°è´¦çš„å£°éŸ³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javawebå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
      <link href="/2023/07/15/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2023/07/15/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p><strong>â€”Mybatisâ€”</strong></p><p>ä¸€æ¬¾æŒä¹…å±‚æ¡†æ¶ï¼Œç®€åŒ–JDBCã€‚</p><p><strong>è®¤è¯†ä½¿ç”¨MybatisæŸ¥è¯¢mysqlæ•°æ®åº“ä¸­çš„è¡¨çš„ä¿¡æ¯</strong>ï¼š</p><p>åˆ›å»ºMyBatiså·¥ç¨‹ï¼šIDEAåˆ›å»ºspingå·¥ç¨‹ï¼Œåœ¨SQLä¸­é€‰æ‹©Mybatis Framworkå’ŒMysql Driverã€‚è¿æ¥æ•°æ®åº“ï¼Œå†åœ¨mainè½¯ä»¶åŒ…ä¸‹æ–°å»ºä¸€ä¸ªç±»ï¼Œæˆ‘çš„ç±»åå«User,é‡Œé¢ç¼–å†™æŸ¥è¯¢çš„è¡¨çš„æ‰€æœ‰æ•°æ®çš„å˜é‡åï¼Œä¾‹å¦‚æˆ‘è¦æŸ¥è¯¢hhæ•°æ®åº“ä¸­çš„studentè¡¨ï¼Œå†…å®¹æœ‰ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/4AWGHBI_8DHB7CRATDH.png" alt="img"></p><p>æˆ‘å°±éœ€è¦å®šä¹‰å¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">private String name;</span><br><span class="line">private Integer schoolid;</span><br><span class="line">private String password;</span><br><span class="line">private Integer score;</span><br><span class="line">private String sex;</span><br><span class="line">private Integer id;</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜è¦åˆ›å»ºgetter,setter,toStringå’Œæ„é€ å‡½æ•°ã€‚ç„¶ååœ¨Mybatisè‡ªåŠ¨åˆ›å»ºçš„mainä¸‹çš„resouresä¸‹çš„application.propertiesé‡Œç¼–å†™ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.datasource.url=jdbc:mysql://localhost:3306/hh#è¿™é‡Œè®°å¾—æ¢è‡ªå·±çš„æ•°æ®åº“å</span><br><span class="line">spring.datasource.username=root</span><br><span class="line">spring.datasource.password=1234#è¿™é‡Œä¹Ÿè¦æ¢</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±ä¸ç”¨å†™JDBCé‡Œé¢é‚£ä¸€å¤§å †è¿æ¥ä»£ç äº†ã€‚ç„¶åå†åœ¨mainé‡Œé¢åˆ›å»ºä¸€ä¸ª<strong>æ¥å£</strong>ï¼šmapper.UserMapperï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒ…åï¼‰ï¼Œè¿™å°±ç›¸å½“äºä¸‰å±‚ç±»é‡Œé¢çš„Daoç±»ï¼Œå½“åšä¸€ä¸ªå®¹å™¨ä»£ç†å®ç°ç±»å¯¹è±¡ï¼Œé‡Œé¢ç¼–å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Mapper//è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆè¯¥æ¥å£çš„å®ç°ç±»å¯¹è±¡ï¼ˆä»£ç†å¯¹è±¡ï¼‰ã€‚å¹¶ä¸”å°†è¯¥å¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†</span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line">@Select(&quot;select *from student&quot;)</span><br><span class="line">public List&lt;User&gt; list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªæŠ€å·§å¯ä»¥é€‰ä¸­mysqlè¯­å¥å³é”®æ˜¾ç¤ºä¸Šä¸‹æ–‡å†é€‰æ‹©æ·»åŠ &#x2F;ç¼–è¾‘æ³¨å…¥è¯­è¨€ï¼Œç„¶åé€‰æ‹©Mysqlï¼Œå°±å¯ä»¥æç¤ºç¼–å†™MySQLçš„è¯­æ³•äº†ã€‚é‡Œé¢ç„¶åæ‰“å¼€teståŒ…é‡Œè‡ªåŠ¨åˆ›å»ºçš„é‚£ä¸ªç±»ï¼Œé‡Œé¢ç¼–å†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest//springbootæ•´åˆå•å…ƒæµ‹è¯•çš„æ³¨è§£</span><br><span class="line">class MybatisStudyApplicationTests &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserMapper userMapper;</span><br><span class="line">    @Test</span><br><span class="line">    public void testListUser() &#123;</span><br><span class="line">        List&lt;User&gt; userList=userMapper.list();</span><br><span class="line">        userList.stream().forEach(user -&gt;&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ­¤ç±»å°±å¯ä»¥çœ‹åˆ°studentè¡¨çš„æ•°æ®ä»¥é›†åˆå½¢å¼å±•ç¤ºå•¦~</p><p><strong>æ•°æ®åº“è¿æ¥æ± </strong>ï¼š</p><p>è·Ÿçº¿ç¨‹æ± å·®ä¸å¤šçš„ä¸œè¥¿ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç”¨æˆ·è®¿é—®æ•°æ®åº“ï¼Œæ‰€ä»¥å°±ç›´æ¥åˆ›å»ºä¸€ä¸ªæ± æ¥æé«˜æ€§èƒ½ï¼Œè€Œä¸”è¿˜å¯ä»¥è®©é•¿æ—¶é—´ä¸è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·çš„è¿æ¥æ–­å¼€ï¼Œè…¾å‡ºç©ºé—´æ¥ã€‚</p><p>springé»˜è®¤çš„æ•°æ®åº“è¿æ¥æ± ï¼šhikari</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/P8RJX55OXLYHH@NBEB0-1024x82.png" alt="img"></p><p>æˆ–è€…åˆ‡æ¢é˜¿é‡Œå·´å·´çš„Druidæ•°æ®åº“è¿æ¥æ± ï¼šå…ˆä¸‹è½½jarç„¶åæ·»åŠ åˆ°é¡¹ç›®ä¸­<a href="https://mvnrepository.com/artifact/com.alibaba/druid/1.2.8">Maven Repository: com.alibaba Â» druid Â» 1.2.8 (mvnrepository.com)</a>ï¼Œç„¶ååœ¨pom.xmlä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.2.8&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>lombokå·¥å…·åŒ…ï¼šä¸ç”¨å†™ä»€ä¹ˆsetter,getter,toString,equle,hashCodeå•¥çš„ï¼Œç›´æ¥ä¸€ä¸ª@Dataæ³¨è§£æå®š,å¦å¤–æ— å‚æœ‰å‚åˆ†åˆ«ä¸ºï¼š@NoArgsConstructor,@AllArgsConstructor</p><p>ä¸‹è½½jarï¼š<a href="https://mvnrepository.com/artifact/org.projectlombok/lombok/1.18.24">Maven Repository: org.projectlombok Â» lombok Â» 1.18.24 (mvnrepository.com)</a>ï¼Œç„¶åå¯¼å…¥é¡¹ç›®å¹¶åœ¨pom.xmlè¾“å…¥ï¼ˆä¸ç”¨å†™ versionï¼Œspringboot ä¼šè‡ªåŠ¨ç®¡ç†ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>â€”MybatisåŸºç¡€æ“ä½œâ€”</strong></p><p>ä½¿ç”¨Mybatiså¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æ“ä½œï¼šeg:åœ¨mainä¸‹è‡ªåŠ¨ç”Ÿæˆçš„åŒ…ä¸‹åˆ›å»ºMapper.EmpMapperï¼ˆè¿™åªæ˜¯æˆ‘çš„åå­—ï¼‰çš„æ¥å£ç±»ï¼Œæ­¤æ¥å£æ·»åŠ @Mapperæ³¨è§£ï¼Œåˆ›å»ºä¸€ä¸ªæ–¹æ³•ç”¨ä½œäºå¢&#x2F;åˆ &#x2F;æ”¹ï¼Œå¹¶ä¸”æ·»åŠ ä¸Šæ³¨è§£ï¼Œå¢åˆ æ”¹çš„æ³¨è§£åˆ†åˆ«ä¸º@Insert,@Delect,@Updateï¼Œåœ¨æ³¨è§£æ—è¾¹çš„æ‹¬å·è¾“å…¥è¦è¿è¡Œçš„Mysqlè¯­å¥ï¼Œå»ºè®®ä½¿ç”¨é¢„ç¼–è¯‘SQLï¼Œéœ€è¦æŠŠå‚æ•°çš„å€¼æ”¹ä¸º#{XXX}ï¼ˆå¦ä¸€ç§æ—¶${xxx}ï¼Œè¿™ç§å°±æ˜¯ç›´æ¥æ‹¼æ¥åœ¨MySQLè¯­å¥ä¸Šäº†ï¼Œè€Œéå‰é¢çš„#æ˜¯å¼•å…¥å‚æ•°ï¼‰çš„æ ·å­ï¼Œç›¸å½“äºä»¥å‰å†™JDBCçš„â€?â€ï¼Œç„¶åå†åœ¨æ–¹æ³•é‡Œå®šä¹‰å¯¹åº”ç±»å‹çš„å‚æ•°ã€‚å†åœ¨testæµ‹è¯•ç±»é‡Œé¢å®šä¹‰ä¸€ä¸ªç§æœ‰çš„EmpMapperå¼•ç”¨æ•°æ®ç±»å‹çš„å˜é‡ï¼Œå¹¶æ·»åŠ ä¸Š@Autowiredçš„æ³¨è§£ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–¹æ³•å†è°ƒç”¨EmpMapperé‡Œé¢çš„å¢åˆ æ”¹æ–¹æ³•ï¼šempmapper.delect(ä¹‹å‰å®šä¹‰çš„å‚æ•°)ã€‚</p><p>å¦‚æœé¢„ç¼–è¯‘é‡Œé¢çš„å‚æ•°è¿‡å¤šï¼Œæ¯”å¦‚å¢åŠ ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªEmpï¼ˆä¹Ÿæ˜¯æˆ‘è‡ªå·±å–çš„ï¼‰ç±»ç”¨äºå®šä¹‰é‡Œé¢çš„å˜é‡ï¼Œç„¶åå†åœ¨å¢åŠ æ–¹æ³•çš„å‚æ•°ç›´æ¥åˆ›å»ºè¿™ä¸ªç±»çš„å˜é‡ã€‚æ³¨æ„åˆ›å»ºçš„å˜é‡åè¦å’Œ#{XXX}é‡Œçš„ä¸€æ ·ã€‚æŸ¥è¯¢çš„è¯å°±ç›´æ¥æä¸ªé›†åˆæ¥è¾“å‡ºå§ï¼Œå› ä¸ºæœ‰å¯èƒ½æœ‰å¤šä¸ªç»“æœã€‚</p><p>Empç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">public class Emp &#123;</span><br><span class="line">private String name;</span><br><span class="line">private Short gender;</span><br><span class="line">private LocalDate enterday;</span><br><span class="line">private String image;</span><br><span class="line">private LocalDateTime createTime;</span><br><span class="line">private LocalDateTime updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Mapperæ¥å£ç±»é‡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Insert(&quot;INSERT INTO mybatis.emp(name, gender, enterday, image, create_time, update_time) &quot; +</span><br><span class="line">&quot;VALUES (#&#123;name&#125;,#&#123;gender&#125;,#&#123;enterday&#125;,#&#123;image&#125;,#&#123;createTime&#125;,#&#123;updateTime&#125;)&quot;)</span><br><span class="line">public void insert(Emp emp);</span><br></pre></td></tr></table></figure><p>testç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testInsert()&#123;</span><br><span class="line">Emp emp=new Emp();</span><br><span class="line">emp.setName(&quot;hepingan&quot;);</span><br><span class="line">emp.setGender((short) 1);</span><br><span class="line">emp.setEnterday(LocalDate.of(2023,8,2));</span><br><span class="line">emp.setImage(&quot;1.jpg&quot;);</span><br><span class="line">emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line">emp.setCreateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">empmapper.insert(emp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>XMLæ˜ å°„æ–‡ä»¶</strong></p><p>XMLæ˜ å°„æ–‡ä»¶åç§°è¦ä¸Mapperæ¥å£åä¸€æ ·ï¼Œå¹¶ä¸”å°†XMLæ–‡ä»¶å’ŒMapperæ¥å£æ”¾ç½®åœ¨ç›¸åŒåŒ…ä¸‹ï¼ˆåŒåŒ…åŒåï¼‰ï¼Œåœ¨resourcesä¸‹åˆ›å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹å°±è¡Œäº†ï¼Œåˆ›å»ºç›®å½•ç›´æ¥è¾“å…¥com&#x2F;example&#x2F;mapperå°±è¡Œäº†ã€‚æ–°å»ºçš„XMLæ–‡ä»¶è¾“å…¥ï¼šï¼ˆå¯ä»¥åœ¨mybatisä¸­æ–‡ç½‘æŸ¥çœ‹ï¼š<a href="https://mybatis.net.cn/getting-started.html">å…¥é—¨_MyBatisä¸­æ–‡ç½‘</a>ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;&lt;mapper&gt;&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><p>namespaceä¸Mapperæ¥å£å…¨é™å®šåï¼ˆæ–‡ä»¶è·¯å¾„ï¼‰ä¸€è‡´ï¼Œæˆ‘çš„æ˜¯top.hepingan.mapper.EmpMapperï¼›</p><p>ä¾‹å¦‚æˆ‘è¦æ‰§è¡ŒselectæŸ¥è¯¢è¯­å¥æˆ‘å°±éœ€è¦åœ¨<mapper>é‡Œç¼–å†™ï¼šï¼ˆç§‘æ™®ä¸‹MySQLçš„è¯­æ³•ï¼šæ¡ä»¶like concat(â€˜%â€™,â€™xxxâ€™,â€™%â€™)å°±æ˜¯æŒ‡å’Œxxxé•¿å¾—åƒçš„ä¸œè¥¿ï¼Œæ¯”å¦‚æˆ‘æŸ¥è¯¢æ¡ä»¶ä¸ºâ€™ä½•â€™ï¼Œé‚£ä¹ˆç»“æœå°±å¯ä»¥æ˜¾å‡ºâ€™ä½•å¹³å®‰â€™ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;list&quot; resultMap=&quot;com.example.pojo.Emp&quot;&gt;</span><br><span class="line">select *from hh.emp where emp.work like concat(&#x27;%&#x27;,#&#123;work&#125;,&#x27;%&#x27;)</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>idä¸Mapperæ¥å£ä¸­çš„æ–¹æ³•åä¸€è‡´ï¼Œå¹¶ä¿æŒè¿”å›ç±»å‹ä¸€è‡´ï¼ŒresultMapå°±æ˜¯å•æ¡è®°å½•é”å°è£…çš„ç±»å‹ï¼Œæ¯”å¦‚æˆ‘Empmapperé‡Œé¢æœ‰ä¸ªæ–¹æ³•ä¸ºpublic List<Emp> list(String work);é‚£ä¹ˆresultMapå°±æ˜¯Empã€‚</p><p>â€”<strong>åŠ¨æ€SQL</strong>â€”</p><p>å¦‚æœæœç´¢æ—¶åªè¾“å…¥äº†ä¸€ä¸ªæ¡ä»¶ï¼Œä½†æ˜¯SQLè¯­å¥æœ¬èº«æœ‰å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œå…¶ä»–çš„æŸ¥è¯¢æ¡ä»¶å°±ä¼šä¸ºç©ºï¼Œå°±ä¼šå‡ºé”™ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°ifæ ‡ç­¾ã€‚</p><p>ç»“æ„ï¼š&lt;if test&#x3D;â€name !&#x3D;nullâ€&gt;name like concat(â€˜%â€™,â€™#{name},â€™%â€™) </if>ï¼Œæ„æ€å°±æ˜¯å¦‚æœnameè¾“å…¥çš„å‚æ•°å€¼ä¸ºç©ºå°±æ²¡æœ‰æ ‡ç­¾é‡Œé¢çš„è¯­å¥ã€‚</p><p>egï¼šç”¨name,gender,enterdayä¸‰ä¸ªå‚æ•°æŸ¥è¯¢empä¸­çš„æ•°æ®ã€‚è¿™é‡Œçš„whereä¹Ÿè¦ç”¨æ ‡ç­¾æ˜¯ä¸ºäº†é˜²æ­¢ä¸‰æ¡æ•°æ®éƒ½ä¸ºnullæˆ–ç¬¬ä¸€æ¡æ•°æ®ä¸ºnullå¯¼è‡´whereï¼Œandå¤šä½™ã€‚è€Œwhereæ ‡ç­¾å°±å¯ä»¥è‡ªåŠ¨é™¤æ‰è¯¥éšæ‚£ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=&quot;select&quot;&gt;</span><br><span class="line">select * from emp</span><br><span class="line">&lt;where&gt;</span><br><span class="line">&lt;if test=&quot;name !=null&quot;&gt;</span><br><span class="line">name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;gender !=null&quot;&gt;</span><br><span class="line">and gender =#&#123;gender&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;if test=&quot;begin !=null and end !=null&quot;&gt;</span><br><span class="line">and enterday between #&#123;begin&#125; and #&#123;end&#125;</span><br><span class="line">&lt;/if&gt;</span><br><span class="line">&lt;/where&gt;</span><br><span class="line">order by update_time</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p><strong><foreach>æ ‡ç­¾</strong>ï¼šæœ‰ç‚¹åƒéå†ï¼Œæ¯”å¦‚æ‰¹é‡åˆ é™¤æ“ä½œã€‚å„ä¸ªå‚æ•°ï¼š</p><p>collection:éå†çš„é›†åˆæˆ–æ•°ç»„<br>item:éå†å‡ºæ¥çš„æ¯ä¸ªå…ƒç´ ï¼ˆåå­—éšä¾¿ï¼‰<br>separator:åˆ†éš”ç¬¦<br>open:èµ·å§‹ç¬¦<br>close:ç»“æŸç¬¦</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javawebå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/2023/07/02/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/07/02/IT%E7%AC%94%E8%AE%B0/java/Javaweb%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p> <strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p><em>webå‰ç«¯çš„å­¦ä¹ æ¨èåœ°æ–¹ï¼š</em><a href="https://www.w3school.com.cn/">w3school åœ¨çº¿æ•™ç¨‹</a></p><p>åˆ†äº«ä¸ªè®°ç¬”è®°çš„å¥½å·¥å…·åŠ ç ´è§£ï¼šTyporaï¼š<a href="https://www.cnblogs.com/hackettt/p/16335288.html">typoraä¸‹è½½å’Œç ´è§£ï¼ˆä»…ä¾›å­¦ä¹ ï¼‰ â€“ hackettt â€“ åšå®¢å›­ (cnblogs.com)</a></p><h2 id="â€”-JavaScriptâ€”"><a href="#â€”-JavaScriptâ€”" class="headerlink" title="â€”-JavaScriptâ€”-"></a><strong>â€”-JavaScriptâ€”-</strong></h2><p>æœ€åŸºç¡€çš„è¾“å‡ºè¯­å¥ï¼šalert(â€œxxxâ€);</p><p>æ§åˆ¶å°è¾“å‡ºï¼šconsole.log(xxx);</p><p>å®šä¹‰å˜é‡ï¼švar a&#x3D;xxx; â€“<strong>æ•°æ®ç±»å‹</strong>ï¼šnumber:æ•°å­—ï¼Œstring,booleanä¸å¤šè¯´ï¼Œnull:å¯¹è±¡ä¸ºç©ºï¼Œundefined:å£°æ˜çš„å˜é‡æœªåˆå§‹åŒ–æ—¶ã€‚è·å–æ•°æ®ç±»å‹å¯ä»¥ç”¨xxx.typeOfçš„æ–¹æ³•-JSæœ‰ç‚¹åƒpythonä¸ç”¨å®šä¹‰æ•°æ®ç±»å‹ã€‚</p><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆç›¸å½“äºJavaä¸­çš„æ–¹æ³•ï¼‰ï¼šfunction xxx(a,b){}&#x2F;&#x2F;å˜é‡ä¸ç”¨å®šä¹‰æ•°æ®ç±»å‹</p><p>è°ƒç”¨å‡½æ•°ï¼švar result&#x3D;xxx(x,y);å¹¶è¾“å‡ºï¼šalert(xxx);</p><p>å¦ä¸€ç§æ–¹æ³•å®šä¹‰å‡½æ•°ï¼švar æ–¹æ³•å&#x3D;function(å‚æ•°â€¦){}</p><p><strong>JSåŸºç¡€å¯¹è±¡ï¼š</strong></p><p>æ•°ç»„ï¼šArrayï¼ˆæ•°ç»„çš„å…ƒç´ å¯ä»¥ä¸ºç©ºï¼‰ã€‚è·å–æ•°ç»„é•¿åº¦ï¼š.lengthã€‚ä¸€äº›æ–¹æ³•ï¼šforEach()ï¼šéå†æ•°ç»„ä¸­çš„æ¯ä¸ª<strong>æœ‰å€¼çš„å…ƒç´ </strong>ï¼ˆæ™®é€šforå¾ªç¯ç©ºçš„ä¹Ÿè¦éå†ï¼‰ï¼Œå¹¶è°ƒç”¨ä¸€æ¬¡ä¼ å…¥çš„å‡½æ•°ã€‚push()ï¼šå°†æ–°å…ƒç´ æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚splice()ï¼šä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ ã€‚</p><p>ES6ç®­å¤´å‡½æ•°ï¼ˆç›¸å½“äºJavaä¸­çš„Lambdaï¼‰ï¼š</p><p>arr2.forEach(e &#x3D;&gt; {</p><p>â€‹    console.log(e);</p><p>  });</p><p>å­—ç¬¦ä¸²å¯¹è±¡ï¼šStringã€‚åˆ›å»ºæ–¹æ³•ï¼švar xxx&#x3D;new String(â€œâ€¦â€)æˆ–ç›´æ¥var xxx&#x3D;â€â€¦â€ã€‚è·å–é•¿åº¦ï¼š.lengthã€‚ä¸€äº›æ–¹æ³•ï¼šcharAtï¼šstr.charAt(2);è·å–strä¸‹æ ‡ä¸º2çš„å­—ç¬¦;;;è·å–æŒ‡å®šå­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®:str.indexof(â€œxxxâ€);;;å»æ‰å­—ç¬¦ä¸²ä¸­çš„å·¦å³çš„ç©ºæ ¼:trim</p><h2 id="â€”Mavenâ€”"><a href="#â€”Mavenâ€”" class="headerlink" title="â€”Mavenâ€”"></a><strong>â€”Mavenâ€”</strong></h2><p>mavenå®˜ç½‘ï¼š<a href="https://maven.apache.org/">Maven â€“ Welcome to Apache Maven</a></p><p>é˜¿é‡Œäº‘mavené…ç½®ä¸‹è½½ï¼šJDK11çš„å»ºè®®ç”¨3.6.1:<a href="https://archive.apache.org/dist/maven/maven-3/3.6.1/binaries/">Index of &#x2F;dist&#x2F;maven&#x2F;maven-3&#x2F;3.6.1&#x2F;binaries (apache.org)</a>ï¼Œé€‰æ‹©<a href="https://archive.apache.org/dist/maven/maven-3/3.6.1/binaries/apache-maven-3.6.1-bin.zip">apache-maven-3.6.1-bin.zip</a>ã€‚JDK17çš„å»ºè®®ç”¨3.8.1ï¼š<a href="https://archive.apache.org/dist/maven/maven-3/3.8.1/binaries/">Index of &#x2F;dist&#x2F;maven&#x2F;maven-3&#x2F;3.8.1&#x2F;binaries (apache.org)</a>ï¼Œä¹Ÿæ˜¯é€‰æ‹©<a href="https://archive.apache.org/dist/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.zip">apache-maven-3.8.1-bin.zip</a></p><p>å®‰è£…ä¸é…ç½®æ–¹æ³•ï¼ˆå‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/m0_53692627/article/details/128822560">MAVENçš„å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼ˆè¶…è¯¦ç»†ç‰ˆï¼‰_mavenå®‰è£…åŠé…ç½®æ•™ç¨‹_Coder_19zflçš„åšå®¢-CSDNåšå®¢</a>ï¼‰ï¼š</p><p>è§£å‹æˆæ–‡ä»¶å¤¹æ‰“å¼€confæ–‡ä»¶å¤¹ï¼Œç”¨IDEAç­‰è¿è¡Œsetting.xmlæ–‡ä»¶ï¼Œå†åœ¨55è¡Œä»£ç å¤„æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š<localRepository>Path</localRepository>ã€‚å…¶ä¸­pathä¸ºä½ å­˜æ”¾mavençš„respone(å“åº”)çš„æ–‡ä»¶å¤¹ï¼Œå»ºè®®å°±åœ¨apache-mavenæ–‡ä»¶å¤¹é‡Œé¢æ–°å»ºä¸ªæ–‡ä»¶å¤¹ã€‚</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/BAAI2IEK4QPCUVRQAM.png" alt="img"></p><p>ç„¶åé…ç½®é˜¿é‡Œäº‘ç§æœåœ°å€ï¼Œè¯¦ç»†æ–¹æ³•ï¼š<a href="https://blog.csdn.net/weixin_44296929/article/details/103564657">Mavenä»“åº“é…ç½®é˜¿é‡Œäº‘ç§æœåœ°å€_nexus-aliyunåœ°å€_ä½ å¥½åƒå¾ˆå¥½åƒaçš„åšå®¢-CSDNåšå®¢</a></p><p>ï¼ˆMaven3.6.1çš„éœ€è¦æ·»åŠ ï¼Œ3.8.1çš„éœ€è¦ä¿®æ”¹ï¼‰ï¼šæ‰“å¼€setting.xmlï¼Œæ‰¾åˆ°<code>&lt;mirrors&gt;&lt;/mirrors&gt;</code>æ ‡ç­¾<br>åœ¨æ ‡ç­¾ä¸­å¢åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">&lt;id&gt; alimaven&lt;/id&gt;</span><br><span class="line">&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">&lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨æ·»åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œæ–¹æ³•å°±æ˜¯å…ˆæ–°å»ºä¸€ä¸ªMAVEN_HOMEï¼ˆmavenæ–‡ä»¶åœ°å€ï¼‰çš„ç³»ç»Ÿå˜é‡ï¼Œåœ°å€å°±æ˜¯apache-maven-3.6.1è§£å‹mavençš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç„¶åå†åœ¨Pathç³»ç»Ÿå˜é‡ä¸­æ–°å»ºåå«%MAVEN_HOME%\binå°±è¡Œäº†ã€‚</p><p>æ‰“å¼€windowsç»ˆç«¯è¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -v    // æŸ¥çœ‹mavenç‰ˆæœ¬å·</span><br></pre></td></tr></table></figure><p>å¯¼å…¥Mavenå·¥ç¨‹ï¼šæ–‡ä»¶â€“&gt;é¡¹ç›®ç»“æ„â€“&gt;æ¨¡å—â€“&gt;â€+â€œå·â€“&gt;æ–°å»ºæ¨¡å—ã€‚</p><p>Mavençš„ä¸‰ä¸ªåæ ‡ï¼šgroupId(ç»„ç»‡ID)ï¼ŒartifactId(å·¥ç¨‹ID)ï¼Œversion(ç‰ˆæœ¬)</p><p><strong>Mavenä¾èµ–ç®¡ç†ï¼š</strong></p><p><strong>é…ç½®</strong>ï¼šåœ¨pom.xmlä¸­ç¼–å†™<denpendencies>æ ‡ç­¾ï¼Œå†ç¼–å†™<denpendency>å›è½¦å°±è‡ªåŠ¨ç”Ÿæˆäº†ã€‚è¾“å…¥Mavençš„ä¸‰åæ ‡å°±å¯ä»¥ä¾èµ–Mavenåº“äº†ï¼ŒMavenä»“åº“å¤§å…¨ï¼š<a href="https://mvnrepository.com/">Maven Repository: Search&#x2F;Browse&#x2F;Explore (mvnrepository.com)</a></p><p><strong>ä¼ é€’</strong>ï¼šMaven-project2ä¾èµ–äº†Maven-project1çš„èµ„æºï¼ŒMaven-project1åˆä¾èµ–äº†MavenStudyçš„èµ„æº</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/F6DE4OE@09GGOD588KP.png" alt="img"></p><p><strong>èŒƒå›´</strong>(scope)ï¼š<scope>xxx</scope></p><table><thead><tr><th>scopeå€¼</th><th>ä¸»ç¨‹åºmain</th><th>æµ‹è¯•ç¨‹åºtest</th><th>æ‰“åŒ…package</th><th>èŒƒä¾‹</th></tr></thead><tbody><tr><td>compileï¼ˆé»˜è®¤ï¼‰</td><td>Y</td><td>Y</td><td>Y</td><td>log4j</td></tr><tr><td>test</td><td>â€“</td><td>Y</td><td>â€“</td><td>junit</td></tr><tr><td>provided</td><td>Y</td><td>Y</td><td>â€“</td><td>servlet-api</td></tr><tr><td>runtime</td><td>â€“</td><td>Y</td><td>Y</td><td>jdbcé©±åŠ¨</td></tr></tbody></table><p><strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>ä¸€èˆ¬åŒ…æ‹¬cleanæ¸…é™¤è¿è¡Œçš„targetæ–‡ä»¶â€“&gt;compileæ¢å¤ç”Ÿæˆtargetæ–‡ä»¶â€“&gt;testæµ‹è¯•â€“&gt;packageæ‰“åŒ…â€“&gt;installå®‰è£…</p><h2 id="â€”Webåç«¯å¼€å‘å…¥é—¨â€”"><a href="#â€”Webåç«¯å¼€å‘å…¥é—¨â€”" class="headerlink" title="â€”Webåç«¯å¼€å‘å…¥é—¨â€”"></a><strong>â€”Webåç«¯å¼€å‘å…¥é—¨â€”</strong></h2><p><strong>â€”SpringBootåŸºç¡€â€”</strong></p><p>springå®˜ç½‘ï¼š<a href="https://spring.io/">Spring | Home</a> Springå«é‡‘é‡ï¼šç°åœ¨çš„æ¯ä¸ªJAVAé¡¹ç›®99%éƒ½æœ‰ï¼ï¼ï¼</p><p>åœ¨IDEAåˆ›å»ºä¸€ä¸ªSPring Initializré¡¹ç›®ï¼ŒURLå…ˆç”¨åŸå§‹çš„start.spring.ioï¼ŒJDKå»ºè®®ç”¨17ï¼Œç±»å‹é€‰Mavenï¼ˆç‰ˆæœ¬æˆ‘ç”¨çš„3.6.1ï¼‰ï¼Œç»„ç»‡å•¥çš„æœ‰å°±å†™ä½ çš„ï¼Œç‚¹ä¸‹ä¸€æ­¥é€‰æ‹© Webä¸­çš„Spring webï¼ŒSpringBootç‰ˆæœ¬3.0.0ä»¥ä¸Šçš„JDK11ç”¨ä¸äº†ã€‚åˆ›å»ºæˆåŠŸï¼</p><p>åœ¨æµè§ˆå™¨ä¸­è°ƒç”¨RequestMappingåè¾“å‡ºHello World!ï¼šåœ¨src&#x2F;main&#x2F;java&#x2F;ç»„ç»‡ååŒ…&#x2F;åˆ›å»ºä¸€ä¸ªè½¯ä»¶åŒ…å†åˆ›å»ºä¸€ä¸ªJavaç±»ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/08/F@@2_UUBSVBZTAFL.png" alt="img"></p><p>å†åœ¨é‡Œé¢ç¼–å†™ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line">@RestController</span><br><span class="line">public class c1 &#123;</span><br><span class="line">@RequestMapping(&quot;/hello&quot;)</span><br><span class="line">public String hello()&#123;</span><br><span class="line">System.out.println(&quot;Hello!&quot;);</span><br><span class="line">return &quot;Hello~&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†è¿è¡Œè‡ªåŠ¨ç”Ÿæˆçš„SpringBootStudynewApplicationç±»ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼šlocalhost:8080&#x2F;helloã€‚å¤§åŠŸå‘Šæˆï¼</p><p>SpringBootå†…åµŒTomcatæœåŠ¡å™¨å“¦~</p><p>DispatcherServletï¼šå‰ç«¯æ§åˆ¶å™¨</p><p><strong>postman</strong>ä¸‹è½½åŠ æ±‰åŒ–æ•™ç¨‹ï¼š<a href="https://blog.csdn.net/qq_37368607/article/details/129832802">postmanä¸‹è½½ä¸æ±‰åŒ–(é™„ç›´æ¥ä¸‹è½½é“¾æ¥)_postmanæ±‰åŒ–åŒ…ä¸‹è½½_å°é›ªé›ª7777çš„åšå®¢-CSDNåšå®¢</a></p><p>postmançš„ä½¿ç”¨ï¼šæ–°å»ºä¸€ä¸ªå·¥ä½œåŒºï¼Œå†åœ¨URLè¾“å…¥ä½ çš„localhoståœ°å€ï¼Œå†sendå°±å¯ä»¥ç›´æ¥è¿”å›å€¼ã€‚</p><h3 id="â€”è¯·æ±‚å‚æ•°â€”"><a href="#â€”è¯·æ±‚å‚æ•°â€”" class="headerlink" title="â€”è¯·æ±‚å‚æ•°â€”"></a><strong>â€”è¯·æ±‚å‚æ•°â€”</strong></h3><p><strong>ç®€å•å‚æ•°ï¼š</strong></p><p>åˆ›å»ºä¸€ä¸ªJAVAç±»ç¼–å†™ä¸‹é¢ä»£ç ï¼ˆåˆ›å»ºä½ç½®å°±ä¸å¤šè¯´äº†ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class RequestController &#123;</span><br><span class="line">@RequestMapping(&quot;/simpleParam&quot;)</span><br><span class="line">public String simpleParm(HttpServletRequest request)&#123;</span><br><span class="line">String name= request.getParameter(&quot;name&quot;);</span><br><span class="line">String ageStr= request.getParameter(&quot;age&quot;);</span><br><span class="line">int age=Integer.parseInt(ageStr);</span><br><span class="line">System.out.println(name+&quot;:&quot;+age);</span><br><span class="line">return &quot;OK&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åœ¨postmançš„URLä¸­è¾“å…¥<a href="https://localhost:8080/simpleParam?name=hepingan&age=19%E3%80%82%E5%8F%91%E9%80%81%E5%B0%B1%E5%8F%AF%E4%BB%A5%E5%9C%A8IDEA%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%9C%8B%E5%88%B0hepingan:19%EF%BC%8C%E8%BF%99%E6%98%AF%E8%BF%9C%E5%8F%A4%E6%96%B9%E5%BC%8F%EF%BC%8C%E4%B8%8B%E9%9D%A2%E6%97%B6SpringBoot%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9A">https://localhost:8080/simpleParam?name=hepingan&amp;age=19ã€‚å‘é€å°±å¯ä»¥åœ¨IDEAæ§åˆ¶å°çœ‹åˆ°hepingan:19ï¼Œè¿™æ˜¯è¿œå¤æ–¹å¼ï¼Œä¸‹é¢æ—¶SpringBootçš„æ–¹å¼ï¼š</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;simpleParam2&quot;)</span><br><span class="line">public String simpleParam2(String name,Integer age)&#123;</span><br><span class="line">System.out.println(name+&quot;:&quot;+age);</span><br><span class="line">return &quot;OK&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å®ä½“å‚æ•°"><a href="#å®ä½“å‚æ•°" class="headerlink" title="å®ä½“å‚æ•°"></a>å®ä½“å‚æ•°</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å®ä½“å‚æ•°</span><br><span class="line">*@RequestMapping(&quot;Pojo&quot;) public String Pojo(User user)&#123; System.*out*.println(user); return &quot;Ok&quot;; &#125;</span><br></pre></td></tr></table></figure><p>Userç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> age; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(String age)</span> &#123; <span class="built_in">this</span>.age = age; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Address <span class="title function_">getAddress</span><span class="params">()</span> &#123; <span class="keyword">return</span> address; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(Address address)</span> &#123; <span class="built_in">this</span>.address = address; &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span> <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> + <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> + <span class="string">&quot;, age=&#x27;&quot;</span> + age + <span class="string">&#x27;\&#x27;&#x27;</span> + <span class="string">&quot;, address=&quot;</span> + address + <span class="string">&#x27;&#125;&#x27;</span>; &#125; &#125;</span><br></pre></td></tr></table></figure><p>Addressç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;` `<span class="keyword">private</span> String province;` `<span class="keyword">private</span> String city;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getProvince</span><span class="params">()</span> &#123;` `<span class="keyword">return</span> province;` `&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProvince</span><span class="params">(String province)</span> &#123;` `<span class="built_in">this</span>.province = province;` `&#125;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getCity</span><span class="params">()</span> &#123;` `<span class="keyword">return</span> city;` `&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCity</span><span class="params">(String city)</span> &#123;` `<span class="built_in">this</span>.city = city;` `&#125;</span><br><span class="line"><span class="meta">@Override</span>` `<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;` `<span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +` `<span class="string">&quot;province=&#x27;&quot;</span> + province + <span class="string">&#x27;\&#x27;&#x27;</span> +` `<span class="string">&quot;, city=&#x27;&quot;</span> + city + <span class="string">&#x27;\&#x27;&#x27;</span> +` `<span class="string">&#x27;&#125;&#x27;</span>;` `&#125;` `&#125;</span><br></pre></td></tr></table></figure><h5 id="æ•°ç»„é›†åˆå‚æ•°"><a href="#æ•°ç»„é›†åˆå‚æ•°" class="headerlink" title="æ•°ç»„é›†åˆå‚æ•°"></a>æ•°ç»„é›†åˆå‚æ•°</h5><p>å°±æ˜¯ç”¨æ•°ç»„æˆ–é›†åˆçš„å½¢å¼æ¥å­˜å‚¨å˜›~</p><p>egï¼š<a href="http://localhost:8080/arrayParam?hobby=sing&hobby=dance&hobby=java%EF%BC%9Bhttp://localhost:8080/listParam?hobby=sing&hobby=dance&hobby=java%EF%BC%9B">http://localhost:8080/arrayParam?hobby=sing&amp;hobby=dance&amp;hobby=javaï¼›http://localhost:8080/listParam?hobby=sing&amp;hobby=dance&amp;hobby=javaï¼›</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//æ•°ç»„å‚æ•°</span><br><span class="line">@RequestMapping(&quot;arrayParam&quot;)</span><br><span class="line">public String arraylistParam(String[] hobby)&#123;</span><br><span class="line">System.out.println(Arrays.toString(hobby));</span><br><span class="line">return &quot;Ok&quot;;</span><br><span class="line">&#125;</span><br><span class="line">//é›†åˆå‚æ•°</span><br><span class="line">@RequestMapping(&quot;listParam&quot;)</span><br><span class="line">public String listParam(@RequestParam List&lt;String&gt; hobby)&#123;</span><br><span class="line">System.out.println(hobby);</span><br><span class="line">return &quot;Ok&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ—¥æœŸå‚æ•°å’ŒJSONå‚æ•°</strong></p><p>æ—¥æœŸè¦æŒ‰æ ¼å¼å†™ï¼ˆyyyy-MM-dd HH:mm:ssï¼‰ï¼Œä¸ç„¶postmanä¼šæŠ¥400ï¼›jsonå‚æ•°å°±æ˜¯è¾“å…¥çš„æ•°æ®éœ€è¦æŒ‰ç…§å¯¹åº”çš„æ•°æ®æ ¼å¼å¡«å†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//dateæ—¥æœŸå‚æ•°</span><br><span class="line">@RequestMapping(&quot;dataParam&quot;)</span><br><span class="line">public String dataParam(@DateTimeFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;) LocalDateTime updateTime)&#123;</span><br><span class="line">System.out.println(updateTime);</span><br><span class="line">return &quot;Ok&quot;;</span><br><span class="line">&#125;</span><br><span class="line">//jsonå‚æ•°</span><br><span class="line">@RequestMapping(&quot;jsonParam&quot;)</span><br><span class="line">public String jsonParam(@RequestBody User user)&#123;</span><br><span class="line">System.out.println(user);</span><br><span class="line">return &quot;Ok&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è·¯å¾„å‚æ•°</strong></p><p>ä½¿ç”¨@PathVariableæ³¨è§£ï¼Œæ–¹å¼å¦‚ä¸‹ï¼ŒURL_egï¼š<a href="http://localhost:8080/path/10/hepingan">http://localhost:8080/path/10/hepingan</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/path/&#123;id&#125;/&#123;name&#125;&quot;)</span><br><span class="line">public String pathParam2(@PathVariable Integer id,@PathVariable String name)&#123;</span><br><span class="line">System.out.println(id+&quot;,&quot;+name);</span><br><span class="line">return &quot;OK&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="â€”åˆ†å±‚è§£è—•â€”"><a href="#â€”åˆ†å±‚è§£è—•â€”" class="headerlink" title="â€”åˆ†å±‚è§£è—•â€”"></a><strong>â€”åˆ†å±‚è§£è—•</strong>â€”</h2><p><strong>ä¸‰å±‚æ¶æ„</strong></p><p>å‰ç«¯è¯·æ±‚â€“&gt;Controllerå±‚æ¥æ”¶è¯·æ±‚ï¼Œå“åº”æ•°æ®â€“&gt;Serviceå±‚é€»è¾‘å¤„ç†â€“&gt;Daoå±‚æ•°æ®è®¿é—®ã€‚</p><p>æ·»åŠ IDCçš„æ³¨è§£ï¼šåœ¨ç±»å¤–é¢ï¼š@Componentï¼Œåœ¨ç±»é‡Œé¢ï¼š @Autowiredï¼Œä½œç”¨å°±æ˜¯ä¸ºäº†ä¸é‡å¤ä¿®æ”¹å¯¹è±¡å•¥çš„ï¼Œæš‚æ—¶æ²¡å•¥å¤§ç”¨åé¢å†å­¦â€¦</p><p><strong>IDC&#x2F;DIå…¥é—¨</strong></p><p>IOC(inversion of control)ï¼Œå¯¹è±¡çš„åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè‡ªèº«ç§»åˆ°å¤–éƒ¨ï¼ˆå®¹å™¨ï¼‰ï¼Œè¿™ç§æ€æƒ³æˆä¸ºæ§åˆ¶åè½¬ï¼›DI(dependency injection)ï¼Œå®¹å™¨ä¸ºåº”ç”¨ç¨‹åºæä¾›è¿è¡Œæ—¶ï¼Œæ‰€ä¾èµ–çš„èµ„æºï¼Œç§°ä¸ºä¾èµ–æ³¨å…¥ï¼›Beanå¯¹è±¡ï¼šIOCå®¹å™¨ä¸­åˆ›å»ºå’Œç®¡ç†çš„å¯¹è±¡ã€‚</p><p>å…ˆåœ¨Serviceå±‚å’ŒDaoå±‚ä¸Šè¾“å…¥@Componentæ³¨è§£ï¼Œè¡¨ç¤ºå°†å½“å‰ç±»äº¤ç»™IOCå®¹å™¨ï¼Œæˆä¸ºIOCå®¹å™¨ä¸­çš„beanï¼›ä¸ºControllerå’ŒServiceæ³¨å…¥è¿è¡Œæ—¶ä¾èµ–çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨å¯¹è±¡ä¸Šæ·»åŠ  @AutoWiredæ³¨è§£ï¼›</p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaweb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç²¾é€šJavaå­¦ä¹ ä¹‹è·¯ï¼ˆå››ï¼‰</title>
      <link href="/2023/06/28/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
      <url>/2023/06/28/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><h2 id="â€”å¹¶å‘åŒ…â€”"><a href="#â€”å¹¶å‘åŒ…â€”" class="headerlink" title="â€”å¹¶å‘åŒ…â€”"></a><strong>â€”å¹¶å‘åŒ…â€”</strong></h2><p>å¤§å‹ä¼ä¸šå¼€å‘æ‰ç”¨ï¼Œæˆ‘Javaå­¦å¾—å·®ä¸å¤šä»¥åå†æ¥å­¦ï¼Œä¸»è¦æ˜¯æœ‰ç‚¹éš¾ï¼Œæ²¡å­¦æ³›å‹ä¸é›†åˆâ€¦</p><p>ç»ƒæ‰‹çš„ConcurrentHashMap:</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import java.util.HashMap;import java.util.Hashtable;import java.util.concurrent.ConcurrentHashMap;public class bingfa &#123;public static HashMap&lt;String,String&gt; *maps*=new HashMap&lt;&gt;();// public static Map&lt;String,String&gt; maps=new Hashtable&lt;&gt;();public static void main(String[] args) &#123;Runnable r1=new MyRunnable();Thread t1=new Thread(r1,&quot;çº¿ç¨‹1&quot;);Thread t2=new Thread(r1,&quot;çº¿ç¨‹2&quot;);t1.start();t2.start();try &#123;t1.join();//è®©t1è·‘å®Œ,ä¸»çº¿ç¨‹ä¸èƒ½ç«äº‰t1çš„CPUt2.join();//è®©t2è·‘å®Œ,ä¸»çº¿ç¨‹ä¸èƒ½ç«äº‰t2çš„CPU&#125; catch (InterruptedException e) &#123;throw new RuntimeException(e);&#125;System.*out*.println(&quot;å…ƒç´ ä¸ªæ•°:&quot;+*maps*.size());&#125;static class MyRunnable implements Runnable&#123;@Overridepublic void run() &#123;for(int i=1;i&lt;=500000;i++)&#123;bingfa.*maps*.put(Thread.*currentThread*().getName()+i,Thread.*currentThread*().getName()+i);&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure></blockquote><h2 id="â€”Mapé›†åˆâ€”"><a href="#â€”Mapé›†åˆâ€”" class="headerlink" title="â€”Mapé›†åˆâ€”"></a><strong>â€”Mapé›†åˆâ€”</strong></h2><p>Mapé›†åˆç‰¹ç‚¹ï¼šæ— åºæ€§ï¼Œä¸é‡å¤æ€§ï¼ˆåé¢é‡å¤çš„é”®å¯¹åº”çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„æ•´ä¸ªå…ƒç´ ï¼‰ï¼Œæ— ç´¢å¼•çš„ï¼Œå¯¹å€¼æ— è¦æ±‚éƒ½å¯ä»¥ä¸ºnullã€‚ä¸€ä¸ªå…ƒç´ çš„ç»„æˆä¸ºé”®å’Œå€¼ï¼Œä¸€ä¸ªé”®å¯¹åº”ä¸€ä¸ªå€¼ï¼Œå°±åƒåœ°å›¾ä¸Šä¸€ä¸ªåœ°æ–¹å¯¹åº”ä¸€ä¸ªåœ°ç‚¹åå­—ï¼Œæ‰€ä»¥å«Mapé›†åˆã€‚</p><p>HashMapï¼šæ— åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼Œå€¼ä¸åšè¦æ±‚ã€‚ç»å…¸çš„ç”¨å¾—æœ€å¤šã€‚</p><p>LinkedHashMapï¼šæœ‰åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼Œå€¼ä¸åšè¦æ±‚ã€‚</p><p>TreeMapï¼šæµ®ç‚¹å‹çš„å¤§å°æ¯”è¾ƒæŒ‰ç…§è‡ªå·±çš„æ’åºï¼Œä¸é‡å¤ï¼Œæ— ç´¢å¼•ï¼Œå€¼ä¸åšè¦æ±‚ã€‚</p><p>Mapçš„åˆ›å»ºï¼šMap&lt;å¼•ç”¨æ•°æ®ç±»å‹,å¼•ç”¨æ•°æ®ç±»å‹&gt; map&#x3D;new HashMap&#x2F;LinkedHashMap&#x2F;TreeMap&lt;&gt;();ps:å¼•ç”¨æ•°æ®ç±»å‹å¯ä»¥æ˜¯å…¶ä»–ç±»åçš„å“¦~</p><p>æ·»åŠ æ•°æ®:map.put(xx,xx);</p><p>åˆ é™¤ç‰¹å®šå…ƒç´ ï¼šmap.remove(é”®);åˆ é™¤å…¨éƒ¨å…ƒç´ å°±ç›´æ¥map.clear();</p><p>åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªé”®ï¼šmap.containsKey(é”®);</p><p>åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªå€¼ï¼šmap.containsValue(å€¼);</p><p>å°†maps2çš„æ‰€æœ‰å…ƒç´ å…¨éƒ¨ä»åˆ°mapsä¸­ï¼šmap.putAll(maps2);</p><p>è·å–å¯¹åº”é”®çš„å€¼ï¼šmap.get(é”®);</p><p>Set<String> keys&#x3D;map.keySet();&#x2F;&#x2F;è·å–å…¨éƒ¨é”®çš„é›†åˆ,Setæ— åºä¸é‡å¤<br>for (String key: keys){<br>System.<em>out</em>.println(key);<br>}<br>Collection<Integer> values&#x3D;map.values();&#x2F;&#x2F;å› ä¸ºå€¼å¯èƒ½æœ‰é‡å¤ï¼Œæ‰€ä»¥ç”¨Collectioné›†åˆ<br>for (Integer value: values){<br>System.<em>out</em>.println(value+â€,â€+map.size());<br>}</p><p><strong>éå†æ–¹æ³•ï¼š</strong></p><p>éå†æ–¹å¼1ï¼šé”®æ‰¾å€¼(keyçš„å€¼ä¸ºString,valueçš„ç±»å‹ä¸ºInteger)ï¼šfor(String key:maps.keySet()){Integer value &#x3D;maps.get(key);System.out.println(key+â€&#x3D;â€+value)};</p><p>éå†æ–¹å¼2ï¼šé”®å€¼å¯¹æ–¹å¼è·å–ï¼šç›¸è¾ƒäºé”®æ‰¾å€¼æ›´åŠ é¢å‘å¯¹è±¡ï¼Œä½†ä»£ç å¤æ‚ï¼Œå®ƒæ˜¯æŠŠé”®å€¼å¯¹å½“æˆä¸€ä¸ªæ•´ä½“éå†ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä½¿ç”¨foreacéå†ï¼šfor(è¢«éå†é›†åˆçš„å…ƒç´ ç±»å‹ å˜é‡ ï¼šé›†åˆåç§°){â€¦};æœ‰ç‚¹åƒpythonçš„å­—å…¸ï¼Œåˆ›å»ºæ–¹æ³•ï¼šSet&lt;Map.Entry&lt;String,Integer&gt;&gt; xxx&#x3D;maps.entrySet();</p><p>éå†æ–¹å¼3ï¼ˆæœ€ç®€å•çš„ï¼‰ï¼šk,våªæ˜¯ä¸ªéšä¾¿å®šä¹‰çš„å˜é‡ï¼Œåå­—ä¹±å–éƒ½è¡Œ</p><p>maps.forEach((k,v) -&gt;{<br>System.<em>out</em>.println(k+â€â€“&gt;â€+v);<br>});</p><h2 id="â€”-ç½‘ç»œé€šä¿¡â€”"><a href="#â€”-ç½‘ç»œé€šä¿¡â€”" class="headerlink" title="â€”-ç½‘ç»œé€šä¿¡â€”-"></a><strong>â€”-ç½‘ç»œé€šä¿¡â€”-</strong></h2><p>C&#x2F;Sç»“æ„çš„è½¯ä»¶å¼€å‘ï¼šå®¢æˆ·éœ€è¦ä¸‹è½½å®¢æˆ·ç«¯ï¼Œä¸€æ›´æ–°å®¢æˆ·ç«¯ä¹Ÿè¦æ›´æ–°ã€‚<br>B&#x2F;Sç»“æ„è½¯ä»¶å¼€å‘ï¼šç±»ä¼¼äºç½‘ä¸Šå¼€å‘ï¼Œå®¢æœä¸ç”¨ä¸‹å®¢æœç«¯ã€‚<br>ç½‘ç»œé€šä¿¡ä¸‰è¦ç´ ï¼šåè®®ï¼ŒIPåœ°å€ï¼Œç«¯å£å·ã€‚<br>åè®®å°±æ˜¯è®¡ç®—æœºç½‘ç»œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡å¿…é¡»äº‹å…ˆçº¦å®šå’Œå½¼æ­¤éµå®ˆçš„é€šä¿¡è§„åˆ™ï¼Œä¸€èˆ¬æœ‰HTTP,FTP,TCP,UDP,SSH,SMTP.<br>IPåœ°å€ï¼šInternet Protocol Addressäº’è”ç½‘åè®®åœ°å€ã€‚æœ‰IPv4å’ŒIPv6.</p><p>IPv4:4ä¸ªå­—èŠ‚ï¼Œ32ä½ç»„æˆ<br>ç«¯å£ï¼šå¦‚æœè¯´IPç›¸å½“äºä¸€ä¸ªé…’åº—ï¼Œç«¯å£å°±ç›¸å½“äºé…’åº—çš„æˆ¿é—´å·ã€‚ç«¯å£å–å€¼èŒƒå›´ï¼š0~65535.æ¯”å¦‚æµè§ˆå™¨çš„ç«¯å£å·å°±æ˜¯80ã€‚<br>æŸ¥çœ‹è‡ªå·±çš„ipï¼šåœ¨cmdå‘½ä»¤æ¿è¾“å…¥ipconfigï¼Œå°è¯•è¿æ¥:ping ipåœ°å€æˆ–ç½‘ç«™åŸŸåã€‚<br>è·å–æœ¬åœ°åœ°å€å¯¹è±¡ï¼š(å¦‚æœæ˜¯å…¬ç½‘IPå°±ä¼šä¼˜å…ˆè¾“å‡ºå…¬ç½‘IPï¼Œæ²¡æœ‰å°±æ˜¯æœ¬åœ°IP)<br>Inet4Address ip &#x3D; (Inet4Address) Inet4Address.getLocalHost();<br>    System.out.println(ip.getHostName());<br>    System.out.println(ip.getHostAddress());<br>è·å–ç½‘ç«™çš„ipåœ°å€ï¼šInetAddress ip2&#x3D;InetAddress.getByName(â€œ<a href="http://www.hepingan.topâ€/">www.hepingan.topâ€</a>);<br>    System.out.println(ip2.getHostName());<br>    System.out.println(ip2.getHostAddress());<br>æµ‹è¯•è¿æ¥ï¼šInetAddress ip3&#x3D;InetAddress.getByName(â€œ<a href="http://www.baidu.comâ€/">www.baidu.comâ€</a>);<br>    System.out.println(ip3.isReachable(5000));&#x2F;&#x2F;ping<br>ç›¸å½“äºping xxxï¼Œåœ¨è§„å®šæ—¶é—´å†…è¿æ¥ï¼ŒæˆåŠŸè¾“å‡ºtrueï¼Œå¤±è´¥false</p><p><strong>UDPé€šä¿¡ï¼š</strong></p><p>ä¸æœåŠ¡ç«¯ä¼ è¾“ä¿¡æ¯ä¸éœ€è¦è¿›è¡Œäº¤æ‰‹ï¼Œæ‰€ä»¥ä¸æ€ä¹ˆå®‰å…¨ï¼Œä½†å¯ä»¥ç”¨ä½œå¼€å‘å®æ—¶é€šè®¯ç­‰ã€‚<br>åˆ›å»ºé›†è£…ç®±çš„å‚æ•°ï¼šDatagramPacket packet &#x3D;new DatagramPacket(æ•°æ®åŒ…ï¼Œæ•°æ®åŒ…çš„é•¿åº¦ï¼Œã€IPåœ°å€ã€‘ï¼Œã€ç«¯å£å·ã€‘)ï¼›å‘é€çš„å®¢æˆ·ç«¯è¦å†™ã€ã€‘å†…çš„ï¼Œæ¥å—çš„æœåŠ¡ç«¯ä¸ç”¨å†™ã€‚<br>åˆ›å»ºæ¥æ”¶å’Œå‘é€æ•°æ®çš„ç å¤´ï¼šDataSocket socket &#x3D;new DataSocket();<br>(å®¢æˆ·ç«¯)å‘é€æ•°æ®ï¼šsocket.send(packet);<br>(æœåŠ¡ç«¯)æ¥æ”¶æ•°æ®ï¼šsocket.receive(packet);<br>å…³é—­ç å¤´ï¼šsocket.close();</p><p><strong>TCPé€šä¿¡</strong>(é‡ç‚¹):</p><p>ä¸€èˆ¬webç½‘ç«™éƒ½æ˜¯ç”¨çš„TCP&#x2F;IPåè®®ã€‚<br>TCP&#x2F;IPåè®® &#x3D;&#x3D;&gt; Transfer Control Protocol &#x3D;&#x3D;&gt; ä¼ è¾“æ§åˆ¶åè®®<br>TCP&#x2F;IPåè®®çš„ç‰¹ç‚¹<br>* é¢å‘è¿æ¥çš„åè®®<br>* åªèƒ½ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å‘é€æ•°æ®ç»™æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå¯ä»¥ç»™å®¢æˆ·ç«¯å“åº”æ•°æ®ã€‚<br>* é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œè¿æ¥æˆåŠŸå½¢æˆæ•°æ®ä¼ è¾“é€šé“ã€‚<br>* é€šè¿‡å››æ¬¡æŒ¥æ‰‹æ–­å¼€è¿æ¥<br>* åŸºäºIOæµè¿›è¡Œæ•°æ®ä¼ è¾“<br>* ä¼ è¾“æ•°æ®å¤§å°æ²¡æœ‰é™åˆ¶<br>* å› ä¸ºé¢å‘è¿æ¥çš„åè®®ï¼Œé€Ÿåº¦æ…¢ï¼Œä½†æ˜¯æ˜¯å¯é çš„åè®®ã€‚</p><p>å®¢æˆ·ç«¯çš„å¼€å‘æµç¨‹ï¼š<br>1.å®¢æˆ·ç«¯è¦è¯·æ±‚äºæœåŠ¡ç«¯çš„socketç®¡é“è¿æ¥ã€‚<br>2.ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµ<br>3.é€šè¿‡å­—èŠ‚è¾“å‡ºæµç»™æœåŠ¡ç«¯å†™å‡ºæ•°æ®ã€‚<br>æœåŠ¡ç«¯çš„å¼€å‘æµç¨‹ï¼š<br>1.æ³¨å†Œç«¯å£ã€‚<br>2.æ¥æ”¶å®¢æˆ·ç«¯çš„Socketç®¡é“è¿æ¥ã€‚<br>3.ä»socketé€šä¿¡ç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å…¥æµã€‚<br>4.ä»å­—èŠ‚è¾“å…¥æµä¸­è¯»å–å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®ã€‚<br>å°ç»“ï¼š<br>1.å®¢æˆ·ç«¯ç”¨Socketè¿æ¥æœåŠ¡ç«¯ã€‚Socket socket&#x3D;new Socket(ip,port)<br>2.æœåŠ¡ç«¯ç”¨ServerSocketæ³¨å†Œç«¯å£ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„Socketè¿æ¥ã€‚ServerSocket ss&#x3D;new ServerSocket(port);<br>3.é€šä¿¡æ˜¯å¾ˆä¸¥æ ¼çš„ï¼Œå¯¹æ–¹æ€ä¹ˆå‘ï¼Œä½ å°±åº”è¯¥æ€ä¹ˆæ”¶ï¼Œå¯¹æ–¹å‘å¤šå°‘ä½ å°±åªèƒ½æ”¶å¤šå°‘ã€‚<br>4.å®ç°çš„é¢å‘è¿æ¥çš„socketç«¯åˆ°ç«¯çš„é€šä¿¡ç®¡é“ï¼Œä¸€æ–¹å¦‚æœå‡ºç°å¯¹è±¡ï¼Œå¦ä¸€æ–¹ä¼šå‡ºç°å¼‚å¸¸ï¼</p><p><strong>2023æœ€æ–°IOä¼ è¾“æ–¹æ³•ï¼š</strong>ä½¿ç”¨DataI&#x2F;OStreamæ•°æ®è¾“å…¥è¾“å‡ºæµè¿›è¡Œä¼ è¾“ï¼Œå¯¹DataStreamå¯¹è±¡ä½¿ç”¨writeUTFå’ŒreadUTFè¿›è¡Œå°±æ”¶å‘é€å’Œè¯»å†™ã€‚å°±ä¸ç”¨ç”¨byteäº†</p><p><strong>æ€»çš„æ–¹æ³•</strong>å°±æ˜¯å®¢æˆ·ç«¯å…ˆåˆ›å»ºSocketç®¡é“ç”¨äºæ•°æ®çš„ä¼ è¾“ç®¡é“ï¼Œéœ€è¦è¾“å…¥ä¼ è¾“çš„IPåœ°å€å’Œç«¯å£ï¼Œå†åˆ›å»ºOutputStreamå¯¹è±¡ä»Socketç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµï¼Œç„¶åç”¨DataOutputStreamåŒ…è£…æˆé«˜çº§çš„æ•°æ®è¾“å‡ºæµï¼Œæœ€åç”¨writeUTF(msg)å°±å¯ä»¥å‘é€æ¶ˆæ¯äº†ã€‚æœåŠ¡ç«¯å…ˆæ³¨å†Œä¸€ä¸ªç«¯å£å·ï¼šServerSocket ss&#x3D;new ServerSocket(ç«¯å£å·)ï¼Œç„¶å<strong>ç­‰å¾…</strong>è¿æ¥ç®¡é“Socket socket &#x3D;ss.accept()ï¼Œå†åˆ›å»ºInputStreamå¹¶ä½¿ç”¨DataInputStreamæ‰“åŒ…æˆæ•°æ®è¾“å…¥æµï¼Œæœ€ååˆ›å»ºä¸ªStringç±»å‹å˜é‡ä½¿ç”¨readUTF()è¯»å†™æ•°æ®å°±è¡Œäº†ã€‚</p><p><strong>volatile</strong>ç±»å‹å˜é‡<em>ç”¨äºè§£å†³å¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«å˜é‡æ˜¯ä¼šå‡ºç°ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡å€¼åå…¶ä»–çº¿ç¨‹çœ‹ä¸åˆ°æœ€æ–°çš„çº¿ç¨‹å€¼ã€‚</em></p><p><strong>TCPé€šä¿¡å®ç°å¤šä¸ªå®¢æœç«¯å’ŒæœåŠ¡ç«¯å‘æ¶ˆæ¯</strong>ï¼ˆæœªä½¿ç”¨çº¿ç¨‹æ± çš„ï¼‰ï¼šå­¦å®Œç½‘ç»œé€šä¿¡èƒ½å†™å‡ºä¸‹é¢çš„å°±å¯ä»¥æ¯•ä¸šäº†~</p><p><strong>å®¢æˆ·ç«¯ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package new_TCPstudy;</span><br><span class="line"></span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.OutputStream;</span><br><span class="line">import java.net.InetAddress;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.net.UnknownHostException;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public class Client &#123;</span><br><span class="line">public static void main(String[] args) throws IOException &#123;</span><br><span class="line">System.out.println(&quot;å®¢æœç«¯å¯åŠ¨&quot;);</span><br><span class="line">Socket socket=new Socket(InetAddress.getLocalHost(),9999);</span><br><span class="line">//ä»socketç®¡é“ä¸­å¾—åˆ°ä¸€ä¸ªå­—èŠ‚è¾“å‡ºæµ</span><br><span class="line">OutputStream OutputStream=socket.getOutputStream();</span><br><span class="line">//åŒ…è£…æˆé«˜çº§çš„æ•°æ®è¾“å‡ºæµ</span><br><span class="line">DataOutputStream dataOutputStream=new DataOutputStream(OutputStream);</span><br><span class="line">Scanner scanner=new Scanner(System.in);</span><br><span class="line">while (true)&#123;</span><br><span class="line">System.out.println(&quot;è¯·è¯´ï¼š&quot;);</span><br><span class="line">String msg=scanner.nextLine();</span><br><span class="line">//è¾“å…¥exité€€å‡ºå®¢æˆ·ç«¯</span><br><span class="line">if(&quot;exit&quot;.equals(msg))&#123;</span><br><span class="line">System.out.println(&quot;é€€å‡ºå®¢æœç«¯...&quot;);</span><br><span class="line">dataOutputStream.close();</span><br><span class="line">socket.close();</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">dataOutputStream.writeUTF(msg);</span><br><span class="line">dataOutputStream.flush();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æœåŠ¡ç«¯ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">package new_TCPstudy;</span><br><span class="line"></span><br><span class="line">import java.io.*;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"></span><br><span class="line">public class Server &#123;</span><br><span class="line">public static void main(String[] args) throws IOException &#123;</span><br><span class="line">System.out.println(&quot;æœåŠ¡ç«¯ï¼Œå¯åŠ¨ï¼&quot;);</span><br><span class="line">//ä¸ºæœåŠ¡ç«¯æ³¨å†Œç«¯å£</span><br><span class="line">ServerSocket ss=new ServerSocket(9999);</span><br><span class="line">//åˆ›å»ºç®¡é“ç­‰å¾…æ¥æ”¶è¿æ¥</span><br><span class="line">while (true)&#123;</span><br><span class="line">Socket socket=ss.accept();</span><br><span class="line">System.out.println(socket.getInputStream()+&quot;ä¸Šçº¿äº†~&quot;);</span><br><span class="line">new ServerThread(socket).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">public static class ServerThread extends Thread&#123;</span><br><span class="line">private Socket socket;</span><br><span class="line">public ServerThread(Socket socket)&#123;</span><br><span class="line">this.socket=socket;</span><br><span class="line">&#125;</span><br><span class="line">@Override</span><br><span class="line">public void run() &#123;</span><br><span class="line">try &#123;</span><br><span class="line">InputStream inputStream=socket.getInputStream();</span><br><span class="line">//åŒ…è£…æˆé«˜çº§çš„æ•°æ®è¾“å…¥æµ</span><br><span class="line">DataInputStream dataInputStream=new DataInputStream(inputStream);</span><br><span class="line">while (true)&#123;</span><br><span class="line">String msg=dataInputStream.readUTF();</span><br><span class="line">System.out.println(&quot;æ”¶åˆ°æ¥è‡ª&quot;+socket.getRemoteSocketAddress()+&quot;çš„æ¶ˆæ¯ï¼š&quot;+msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;catch (Exception e)&#123;</span><br><span class="line">System.out.println(socket.getRemoteSocketAddress()+&quot;ä¸‹çº¿äº†&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Mapé›†åˆå­¦ä¹ æ—¶çš„ä»£ç ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">import java.sql.Connection;</span><br><span class="line">import java.util.*;</span><br><span class="line">public class MapDemo &#123;</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">Map&lt;String ,Integer&gt; maps=new HashMap&lt;&gt;();</span><br><span class="line">Map&lt;String,Integer&gt; maps2=new LinkedHashMap&lt;&gt;();</span><br><span class="line">Map&lt;String,Integer&gt; maps3=new TreeMap&lt;&gt;();</span><br><span class="line">System.out.println(maps2.isEmpty());//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºé›†åˆï¼Œæ˜¯åˆ™è¿”å›true,åä¹‹</span><br><span class="line">maps.put(&quot;food&quot;,5);</span><br><span class="line">maps.clear();//æ¸…ç©º</span><br><span class="line">maps2.put(&quot;long&quot;,15);</span><br><span class="line">maps.put(&quot;doll&quot;,1);</span><br><span class="line">maps.put(&quot;Huawei&quot;,2);</span><br><span class="line">maps.put(&quot;doll&quot;,10);//åé¢çš„æŠŠå‰é¢çš„è¦†ç›–äº†</span><br><span class="line">maps.put(&quot;iphone&quot;,2);</span><br><span class="line">maps.put(null,null);</span><br><span class="line">maps.put(&quot;people&quot;,8);</span><br><span class="line">maps.putAll(maps2);//å°†maps2çš„æ‰€æœ‰å…ƒç´ å…¨éƒ¨ä»åˆ°mapsä¸­</span><br><span class="line">maps.remove(&quot;people&quot;);//åˆ é™¤ç‰¹å®šå…ƒç´ </span><br><span class="line">Integer value1 =maps.get(null);//è·å–nullçš„å€¼</span><br><span class="line"></span><br><span class="line">System.out.println(maps);</span><br><span class="line">System.out.println(maps.get(&quot;iphone&quot;)+&quot;,&quot;+value1);//è¾“å‡ºiphoneçš„å€¼å’Œ nullçš„å€¼</span><br><span class="line"></span><br><span class="line">Set&lt;String&gt; keys=maps.keySet();//è·å–å…¨éƒ¨é”®çš„é›†åˆ,Setæ— åºä¸é‡å¤</span><br><span class="line">for (String key: keys)&#123;</span><br><span class="line">Integer value=maps.get(key);//è·å–å¯¹åº”é”®çš„å€¼</span><br><span class="line">System.out.println(key+&quot;=&quot;+value);</span><br><span class="line">&#125;</span><br><span class="line">Collection&lt;Integer&gt; values=maps.values();//å› ä¸ºå€¼å¯èƒ½æœ‰é‡å¤ï¼Œæ‰€ä»¥ç”¨Collectioné›†åˆ</span><br><span class="line">for (Integer value: values)&#123;</span><br><span class="line">for(String key:maps.keySet())&#123;</span><br><span class="line">if(value==maps.get(key))&#123;</span><br><span class="line">System.out.println(value+&quot;å€¼çš„æœ‰&quot;+key);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(maps.size());// mapsçš„å¤§å°</span><br><span class="line"></span><br><span class="line">Set&lt;Map.Entry&lt;String,Integer&gt;&gt; entries=maps.entrySet();//é”®å€¼å¯¹æ–¹å¼</span><br><span class="line">System.out.println(entries);</span><br><span class="line">for (Map.Entry&lt;String, Integer&gt; entry : entries) &#123;</span><br><span class="line">String key=entry.getKey();</span><br><span class="line">Integer value=entry.getValue();</span><br><span class="line">System.out.println(key+&quot;--&gt;&quot;+value);</span><br><span class="line">&#125;</span><br><span class="line">//æœ€ç®€å•çš„éå†æ–¹æ³•</span><br><span class="line">maps.forEach((k,v) -&gt;&#123;</span><br><span class="line">System.out.println(k+&quot;--&gt;&quot;+v);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å•¤é…’é—®é¢˜ï¼ˆé€’å½’æ€è·¯ï¼‰</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å•¤é…’é—®é¢˜ï¼šBeer: 2/bottle,4 hats can change a beer,2 empty bottle can change a beer,question:how many bottle can 10 rmb drink?</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">bbb</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> totalNumber;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> lastBottles;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> lastHats;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;ä½ å¸¦äº†å¤šå°‘é’±ï¼š&quot;</span>);</span><br><span class="line">buy(sc.nextInt());</span><br><span class="line">System.out.println(<span class="string">&quot;ä½ èƒ½å–&quot;</span>+totalNumber+<span class="string">&quot;ç“¶&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;å‰©ä½™ç“¶å­æ•°ï¼š&quot;</span>+lastBottles);</span><br><span class="line">System.out.println(<span class="string">&quot;å‰©ä½™ç›–å­æ•°ï¼š&quot;</span>+lastHats);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">buy</span><span class="params">(<span class="type">int</span> money)</span>&#123;</span><br><span class="line">totalNumber+=money/<span class="number">2</span>;</span><br><span class="line">lastBottles+=money/<span class="number">2</span>;</span><br><span class="line">lastHats+=money/<span class="number">2</span>;</span><br><span class="line"><span class="type">int</span> newNumber=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(lastBottles&gt;=<span class="number">2</span>)&#123;</span><br><span class="line">newNumber+=lastBottles/<span class="number">2</span>;</span><br><span class="line">lastBottles=lastBottles%<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(lastHats&gt;=<span class="number">4</span>)&#123;</span><br><span class="line">newNumber+=lastHats/<span class="number">4</span>;</span><br><span class="line">lastHats=lastHats%<span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (newNumber&gt;<span class="number">0</span>)&#123;</span><br><span class="line">buy(newNumber*<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java swingå’ŒFXç•Œé¢UI</title>
      <link href="/2023/06/23/IT%E7%AC%94%E8%AE%B0/java/swing%E7%95%8C%E9%9D%A2UI/"/>
      <url>/2023/06/23/IT%E7%AC%94%E8%AE%B0/java/swing%E7%95%8C%E9%9D%A2UI/</url>
      
        <content type="html"><![CDATA[<p>JAVAFX ä¸JAVA Swingçš„åŒºåˆ«ä¸æ¨èï¼š<a href="https://blog.csdn.net/apy29/article/details/126965053">å­¦ä¹ Javaç•Œé¢ç¼–ç¨‹æ˜¯é€‰æ‹©Swingè¿˜æ˜¯JavaFXï¼Ÿ_javafx swing_è±è¿ªå¨œçš„æ­Œå£°çš„åšå®¢-CSDNåšå®¢</a></p><p><strong>swingä¸­ä¸€äº›åŸºç¡€å‡½æ•°ä»‹ç»ï¼š</strong></p><table><thead><tr><th>JButton</th><th>æŒ‰é’®ï¼ŒæŒ‰é’®å¯ä»¥å¸¦ä¸€äº›å›¾ç‰‡æˆ–æ–‡å­—</th></tr></thead><tbody><tr><td>JCheckBox</td><td>å¤é€‰æ¡†</td></tr><tr><td>JComBox</td><td>ä¸‹æ‹‰åˆ—è¡¨æ¡†ï¼Œå¯ä»¥åœ¨ä¸‹æ‹‰æ˜¾ç¤ºåŒºåŸŸæ˜¾ç¤ºå¤šä¸ªé€‰é¡¹</td></tr><tr><td>JFrame</td><td>æ¡†æ¶ç±»</td></tr><tr><td>JDialog</td><td>å¯¹è¯æ¡†</td></tr><tr><td>JLabel</td><td>æ ‡ç­¾ç»„ä»¶</td></tr><tr><td>JRadioButton</td><td>å•é€‰æŒ‰é’®</td></tr><tr><td>JList</td><td>èƒ½å¤Ÿåœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºä¸€ç³»åˆ—æ¡ç›®çš„ç»„ä»¶</td></tr><tr><td>JTextField</td><td>æ–‡æœ¬æ¡†</td></tr><tr><td>JPasswordField</td><td>å¯†ç æ¡†</td></tr><tr><td>JTextArea</td><td>æ–‡æœ¬åŒºåŸŸ</td></tr><tr><td>JOptionPane</td><td>ä¸€äº›é¢æ¿</td></tr></tbody></table><p><strong>ä¸‹é¢é‡ç‚¹æ¥å­¦ä¹ JAVAFXï¼ï¼ï¼</strong>ä¸ºä»€ä¹ˆé€‰æ‹©JAVAFXä¸æ˜¯Swingï¼Œå› ä¸ºæˆ‘ä¼šcss HTML5å‰ç«¯ä»£ç çš„ç¼–å†™ï¼ŒJAVAFXæ˜¯å¯ä»¥æ”¯æŒå‰ç«¯ä»£ç çš„ï¼Œè€Œä¸”æ ‡å‡†çš„JAVAåº“ä¸­å°±åŒ…å«JAVAFXçš„å‡½æ•°åº“ï¼Œä½†æ˜¯ä¸ä¼šwebå‰ç«¯ä»£ç çš„å»ºè®®è¿˜æ˜¯å»å­¦ä¹  Swingï¼Œå› ä¸ºSwingå•åœ¨IDEAä¸­çš„è¡¨ç°æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œè¿è¡Œä¹Ÿæ¯”JAVAFXå¿«ã€‚swingå¤§ä½¬å¯¹javafxä¸swingçš„å¯¹æ¯”å’Œå†™çš„swingæˆå“å±•ç¤ºï¼š<a href="https://www.zhihu.com/question/37236236">Javaå†™GUIç”¨swingè¿˜æ˜¯JavaFXå‘¢ï¼Ÿ â€“ çŸ¥ä¹ (zhihu.com)</a></p><p>é…ç½®JavaFXç¯å¢ƒæ•™ç¨‹ï¼š<a href="https://blog.csdn.net/ooblack/article/details/116797407">IDEAå®‰è£…JavaFx_idea javafxå®‰è£…_Sout xzaçš„åšå®¢-CSDNåšå®¢</a></p><p>å‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼š</p><p>â€‹â€”å›¾ç‰‡æš‚æ—¶æ‰¾ä¸åˆ°äº†~â€”</p><p>åœ¨è¿è¡Œä¸­é€‰æ‹©ç¼–è¾‘é…ç½®ï¼Œç‚¹å‡»ä¿®æ”¹é€‰é¡¹æ‰¾åˆ°æ·»åŠ VMé€‰é¡¹ï¼Œåœ¨VMé€‰é¡¹è¿™æ è¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--module-path=&quot;C:\Users\PC\Desktop\è€ç¨‹åºå‘˜äº†\javafx-sdk-20.0.1\lib&quot; --add-modules=javafx.controls,javafx.fxml</span><br></pre></td></tr></table></figure><p>å°†ä¸Šé¢C:\Users\PC\Desktop\è€ç¨‹åºå‘˜äº†\javafx-sdk-20.0.1\libæ›¿æ¢æˆä½ è‡ªå·±çš„è§£å‹è·¯å¾„å°±è¡Œã€‚</p><p>ä¸è¿‡å¦‚æœä½ æ²¡æœ‰è¿™ä¸ªsample.fxmlæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä½ ä¸æ˜¯åˆ›å»ºçš„JavaFxé¡¹ç›®ï¼Œä½ åˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ™®é€šçš„JavaSEé¡¹ç›®ï¼Œä½ ç”¨è¿™ä¸ªé¡¹ç›®æ¥å†™JavaFXï¼Œå°±åº”è¯¥åŠ å…¥çš„å‚æ•°æ˜¯<code>--module-path=&quot;C:\Users\PC\Desktop\è€ç¨‹åºå‘˜äº†\javafx-sdk-20.0.1\lib&quot; --add-modules=javafx.controls</code></p><p>å‚æ•°åŠ å…¥å®Œæ¯•ä¹‹åç‚¹å‡»applyï¼Œç„¶åå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†</p><hr><p>JavaFXè¿è¡Œæ—¶æ‰“å¼€çª—å£çš„ä¸€ä¸ªæ ‡å‡†æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javafx.application.Application;<span class="keyword">import</span> javafx.fxml.FXMLLoader;<span class="keyword">import</span> javafx.scene.Parent;<span class="keyword">import</span> javafx.scene.Scene;<span class="keyword">import</span> javafx.stage.Stage;<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> <span class="keyword">extends</span> <span class="title class_">Application</span> &#123;<span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">(Stage primaryStage)</span> <span class="keyword">throws</span> Exception&#123;primaryStage.setTitle(<span class="string">&quot;JAVAFXæµ‹è¯•&quot;</span>);primaryStage.show();&#125;<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;launch(args);&#125;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ•°æ®åº“å­¦ä¹ ï¼ˆä¸€ï¼‰</title>
      <link href="/2023/05/12/IT%E7%AC%94%E8%AE%B0/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/05/12/IT%E7%AC%94%E8%AE%B0/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ä»¥åˆ†å·ç»“å°¾åŠ å›è½¦ä¸ºä¸€ä¸ªå‘½ä»¤</p><p>show databases;&#x2F;&#x2F;å±•ç¤ºæ‰€æœ‰æ•°æ®åº“</p><p>create database xxx;&#x2F;&#x2F;åˆ›å»ºæ–°çš„æ•°æ®åº“</p><p>create database if not exists xxx;&#x2F;&#x2F;æ£€æŸ¥æ˜¯å¦åˆ›å»ºXXXæ•°æ®åº“ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºï¼Œæœ‰åˆ™ä¸åˆ›å»º</p><p>create database default charset (å­—èŠ‚å¤§å°);&#x2F;&#x2F;åˆ›å»ºæŒ‡å®šå­—èŠ‚å¤§å°çš„æ•°æ®åº“</p><p>drop database xxx;&#x2F;&#x2F;åˆ é™¤æ•°æ®åº“</p><p>use xxx;&#x2F;&#x2F;ä½¿ç”¨xxxæ•°æ®åº“</p><p>select database();&#x2F;&#x2F;æŸ¥è¯¢å½“å‰æ•°æ®åº“</p><p>show tables;&#x2F;&#x2F;æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨</p><p>desc xxx;&#x2F;&#x2F;æŸ¥è¯¢å½“å‰æ‰€æœ‰è¡¨å†…çš„è¡¨å</p><p>show create table xxx&#x2F;&#x2F;æŸ¥è¯¢æŒ‡å®šè¡¨çš„å»ºè¡¨è¯­å¥</p><p>create table xxx (</p><p>xxx æ•°æ®ç±»å‹(int,varchar,doubleâ€¦.) [comment â€˜æ³¨é‡Šâ€™],&#x2F;&#x2F;æœ€åä¸€ä¸ªæ•°æ®ä¸åŠ é€—å·ï¼</p><p>)[comment â€˜æ³¨é‡Šâ€™];</p><p>&#x2F;&#x2F;åœ¨å½“å‰æ•°æ®åº“åˆ›å»ºxxxåå­—çš„è¡¨,åœ¨MYSQLä¸­String&#x3D;varchar(å­—ç¬¦ä¸²é•¿åº¦ï¼‰</p><p>eg:create table hepingan(</p><p>id int comment â€˜ç¼–å·â€™,</p><p>name varchar(50) comment â€˜å§“åâ€™&#x2F;&#x2F;æœ€åä¸€ä¸ªæ•°æ®ä¸åŠ é€—å·</p><p>)comment â€˜ä½•å¹³å®‰çš„è¡¨â€™;</p><p>drop table [if exists]xxx;&#x2F;&#x2F;åˆ é™¤è¡¨[å¦‚æœå­˜åœ¨åˆ™åˆ ,ä¸å­˜åœ¨ä¹Ÿä¸æŠ¥é”™]</p><p>truncate table xxx;&#x2F;&#x2F;åˆ é™¤è¡¨å¹¶é‡æ–°åˆ›å»º</p><hr><p>MYSQLä¸­æ•°æ®</p><p>Eg:grade double(4,1) unsigned&#x2F;&#x2F;åˆ›å»ºæœ€å¤§é•¿åº¦ä¸º4ï¼Œå°æ•°ä½æ•°ä¸º1çš„æ— è´Ÿæ•°çš„åå«gradeçš„æ•°æ®ç±»å‹ï¼ˆ4ä½:100.0,999.9ï¼‰</p><p>name char(10);name2 varchar(10);&#x2F;&#x2F;å®šé•¿char,å˜é•¿varchar,åŒºåˆ«ï¼šå®šé•¿æ— è®ºè¾“å¤šå°‘éƒ½æ˜¯10ä¸ªå­—èŠ‚æ€§èƒ½å¥½ï¼Œå˜é•¿è¾“å¤šå°‘å°±æ˜¯å¤šå°‘å­—èŠ‚æ€§èƒ½è¾ƒå·®ï¼Œè¶…è¿‡æ‹¬å·å†…çš„å­—èŠ‚å°±æŠ¥é”™</p><p>time date comment â€˜æ—¥æœŸâ€™</p><p>tips:æ•°æ®åº“â€“&gt;è¡¨åâ€“&gt;å­—æ®µå</p><hr><p>alter table [è¡¨å] add [å­—æ®µå] <a href="%E9%95%BF%E5%BA%A6">ç±»å‹</a> (comment â€˜ â€˜);&#x2F;&#x2F;å‘[è¡¨å]ä¸­æ·»åŠ å­—æ®µ</p><p>alter table [è¡¨å] modify [å­—æ®µå] [æ–°æ•°æ®ç±»å‹](comment â€˜ â€˜);&#x2F;&#x2F;ä¿®æ”¹å­—æ®µåæ•°æ®ç±»å‹</p><p>alter table [è¡¨å] change [åŸæ¥çš„å­—æ®µå] [æ–°çš„å­—æ®µå] <a href="%E9%95%BF%E5%BA%A6">ç±»å‹</a> (comment â€˜ â€˜);&#x2F;&#x2F;ä¿®æ”¹æŒ‡å®šå­—æ®µå</p><p>alter table [è¡¨å] drop [å­—æ®µå];&#x2F;&#x2F;åˆ é™¤å­—æ®µå</p><p>alter table [è¡¨å] rename to [æ–°çš„è¡¨å];&#x2F;&#x2F;ä¿®æ”¹è¡¨å</p><p>insert into [è¡¨å] (å­—æ®µå1ï¼Œå­—æ®µå2â€¦) values(å€¼1ï¼Œå€¼2â€¦);&#x2F;&#x2F;ç»™æŒ‡å®šå­—æ®µæ·»åŠ æ•°æ®</p><p>select *from [è¡¨å];&#x2F;&#x2F;æŸ¥è¯¢è¡¨æ ¼æ•°æ®</p><p>select [å­—æ®µå1],[å­—æ®µå2] from [è¡¨å] where [å­—æ®µå2] between [å€¼1] and [å€¼2];&#x2F;&#x2F;æŸ¥è¯¢å­—æ®µå2çš„å€¼åœ¨å€¼1å’Œå€¼2ä¹‹é—´çš„å­—æ®µå1</p><p>Eg:select name money from employee where money between 1000 and 2000;&#x2F;&#x2F;æŸ¥è¯¢moneyåœ¨1000åˆ°2000çš„é›‡å‘˜çš„åå­—</p><p><strong>å‚è€ƒåŸæ–‡ï¼š</strong><a href="https://blog.csdn.net/qq_52050769/article/details/118095034">Javaè¿æ¥mysqlæ•°æ®åº“æ–¹æ³•åŠä»£ç ï¼ˆjdbcï¼‰_jdbcè¿æ¥æ•°æ®åº“_å…ˆå…»åªçŒ«çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/pan_junbiao/article/details/86626741">JDBCæ•°æ®åº“é©±åŠ¨çš„ä¸‹è½½ã€å®‰è£…ä¸è¿æ¥_jdbcé©±åŠ¨ä¸‹è½½_pan_junbiaoçš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/Mouer__/article/details/120647217">IDEAä½¿ç”¨JDBCè¿æ¥MySQLæ•°æ®åº“è¯¦ç»†æ•™ç¨‹_ä¼Šæœ¨å­æ›¦çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/Royalic/article/details/119604763">è¶…è¯¦ç»†çš„Ideaä¸MySQLçš„è¿æ¥ï¼ˆä»å…¥é—¨åˆ°ç²¾é€šï¼‰_idea æ€ä¹ˆåŠ å…¥mysql_åŸæ¥å¦‚æ­¤å‘€çš„åšå®¢-CSDNåšå®¢</a></p><hr><p>IDEAè¿æ¥æ•°æ®åº“æ–¹æ³•ï¼šå…ˆä¸‹è½½mysqlå®˜æ–¹çš„connectionè¿æ¥åŒ…ï¼ˆåœ°å€ï¼š<a href="https://dev.mysql.com/downloads/connector/j/?os=26">MySQL :: Download Connector&#x2F;J</a>ï¼‰ï¼Œé€‰æ‹©Platform Independentä¸‹è½½ï¼Œç‰ˆæœ¬ä¸ä¸€æ ·é©±åŠ¨æ•°æ®åº“çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·ï¼Œä½†ä¹Ÿåªæœ‰ä¸¤ç§ä»£ç ã€‚ä¸‹è½½è§£å‹åé€‰æ‹©jaræ–‡ä»¶ï¼Œæ‰“å¼€IDEAï¼Œé€‰æ‹©æ–‡ä»¶â€“&gt;æ–°å»ºâ€“&gt;æ•°æ®åº“â€“&gt;mysql.</p><p>è¾“å…¥ç”¨æˆ·ï¼ˆrootï¼‰å’Œå¯†ç åç‚¹å‡»æµ‹è¯•è¿æ¥</p><p>ç‚¹å‡»é©±åŠ¨ç¨‹åºé€‰æ‹©Mysql,ç‚¹å‡»â€œ+â€é€‰æ‹©åˆšåˆšä¸‹è½½å¥½çš„jaræ–‡ä»¶ï¼Œç„¶åç¡®å®šï¼Œå°±å¯ä»¥åœ¨é¡¹ç›®æ çœ‹åˆ°å¤–éƒ¨åº“é‡Œå¤šäº†mysql-connecterçš„æ–‡ä»¶ï¼Œè¯´æ˜â€œç¡¬ä»¶â€ä¸Šçš„å°±æå®šäº†ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯ä»£ç æ—¶é—´ï¼Œä¹Ÿæ˜¯ç ”ç©¶äº†å¥½ä¹…ï¼Œç›´æ¥ä¸Šæˆå“ï¼š</p><h4 id="æºä»£ç ï¼š"><a href="#æºä»£ç ï¼š" class="headerlink" title="æºä»£ç ï¼š"></a><strong>æºä»£ç ï¼š</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;`</span><br><span class="line">`<span class="keyword">import</span> java.sql.DriverManager;`</span><br><span class="line">`<span class="keyword">import</span> java.sql.SQLException;``<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ceshi3</span> &#123; <span class="comment">// åˆ›å»ºç±»`</span></span><br><span class="line">`Connection con; <span class="comment">// å£°æ˜Connectionå¯¹è±¡`</span></span><br><span class="line">`<span class="keyword">public</span> <span class="keyword">static</span> String user;`</span><br><span class="line">`<span class="keyword">public</span> <span class="keyword">static</span> String password;`</span><br><span class="line">`<span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123; <span class="comment">// å»ºç«‹è¿”å›å€¼ä¸ºConnectionçš„æ–¹æ³•`</span></span><br><span class="line">`<span class="keyword">try</span> &#123; <span class="comment">// åŠ è½½æ•°æ®åº“é©±åŠ¨ç±»`</span></span><br><span class="line">`Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);`</span><br><span class="line">`System.out.println(<span class="string">&quot;æ•°æ®åº“é©±åŠ¨åŠ è½½æˆåŠŸ&quot;</span>);`</span><br><span class="line">`&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;`</span><br><span class="line">`e.printStackTrace();`</span><br><span class="line">`&#125;`</span><br><span class="line">`user = <span class="string">&quot;root&quot;</span>;**<span class="comment">//æ•°æ®åº“ç™»å½•å**`</span></span><br><span class="line">`password = <span class="string">&quot;123456&quot;</span>;**<span class="comment">//å¯†ç **`</span></span><br><span class="line">`<span class="keyword">try</span> &#123; <span class="comment">// é€šè¿‡è®¿é—®æ•°æ®åº“çš„URLè·å–æ•°æ®åº“è¿æ¥å¯¹è±¡`</span></span><br><span class="line">`con = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/hh?useSSL=true&quot;</span>, user, password);**<span class="comment">//è¿™é‡Œéå¸¸å¼ºè°ƒï¼ï¼ï¼hhåªæ˜¯æˆ‘çš„æ•°æ®åº“åï¼Œè¦å†™è‡ªå·±çš„tableï¼ï¼ï¼**</span></span><br><span class="line">System.out.println(<span class="string">&quot;æ•°æ®åº“è¿æ¥æˆåŠŸ&quot;</span>);`</span><br><span class="line">`&#125; <span class="keyword">catch</span> (SQLException e) &#123;`</span><br><span class="line">`e.printStackTrace();`</span><br><span class="line">`&#125;`</span><br><span class="line">`<span class="keyword">return</span> con; <span class="comment">// æŒ‰æ–¹æ³•è¦æ±‚è¿”å›ä¸€ä¸ªConnectionå¯¹è±¡`</span></span><br><span class="line">`&#125;`</span><br><span class="line">`<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123; <span class="comment">// ä¸»æ–¹æ³•ï¼Œæµ‹è¯•è¿æ¥`</span></span><br><span class="line">`<span class="type">ceshi3</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ceshi3</span>(); <span class="comment">// åˆ›å»ºæœ¬ç±»å¯¹è±¡`</span></span><br><span class="line">`c.getConnection(); <span class="comment">// è°ƒç”¨è¿æ¥æ•°æ®åº“çš„æ–¹æ³•`</span></span><br><span class="line">`&#125;`</span><br><span class="line">`&#125;`</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç²¾é€šJavaå­¦ä¹ ä¹‹è·¯ï¼ˆä¸‰ï¼‰</title>
      <link href="/2023/05/12/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2023/05/12/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p>JDK 17 APIä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://doc.qzxdp.cn/jdk/17/zh/api/index.html">Java17ä¸­æ–‡æ–‡æ¡£ â€“ APIå‚è€ƒæ–‡æ¡£ â€“ å…¨æ ˆè¡ŒåŠ¨æ´¾ (qzxdp.cn)</a></p><p>è¯´è¯´è‡ªå·±çš„è¯ï¼šJavaçš„åŸºç¡€å’Œä¸€äº›è¿›é˜¶æˆ‘å·²ç»å­¦å®Œäº†ï¼ŒæŠŠjavaå­¦å®Œåªæ˜¯ç›¸å½“äºåœ¨è‹±è¯­ä¸­å­¦ä¼šè¯»24ä¸ªå­—æ¯ï¼Œè¿˜æœ‰è®¸å¤šæ¨¡å—éœ€è¦å­¦ä¹ ã€‚ç°åœ¨æˆ‘åœ¨æƒ³æ˜¯ç»§ç»­å­¦javaå¼€å‘æ¡†æ¶è¿˜æ˜¯pythonå¤§æ•°æ®ï¼Œæ¯•ç«Ÿæˆ‘çš„ä¸“ä¸šæ˜¯æ•°æ®ç§‘å­¦ä¸å¤§æ•°æ®æŠ€æœ¯ï¼Œå­¦äº†javaæ¡†æ¶æ­å»ºå†å­¦ä¸‹JavaWebæˆ‘å°±å¯ä»¥ç›´æ¥å»é¢è¯•ä¸Šç­äº†ï¼Œè€Œä¸”JavaWebä¸­çš„Mysqlï¼ŒJDBC,HTML,CSSæˆ‘å·²ç»å­¦å®Œäº†ï¼Œé˜¿å·´é˜¿å·´é˜¿å·´â€¦..ä½†æ˜¯pythonå­¦äº†ä¸ä»…å¯ä»¥æå¤§æ•°æ®è¿˜å¯ä»¥æai,ä½†æ˜¯aiå°±ä¸šå°±æ¯”è¾ƒéš¾äº†ã€‚ä¹‹å‰è¿˜å‡†å¤‡å­¦C++å»ææ¸¸æˆå¼€å‘ï¼Œç®—äº†ï¼Œé‚£åˆæ˜¯ä¸ªæ–°çš„å¤§é¢†åŸŸâ€¦.ä¸è¿‡ä¸æ…Œæˆ‘è¿˜æ˜¯å¤§äºŒï¼Œæš‘å‡å…ˆæŠŠä¸‹å­¦ä¹ è¦å­¦çš„pythonç»™å­¦äº†ï¼Œç„¶åå»ç©ç©aiæˆ–è€…æ•°æ®æŒ–æ˜ï¼Œäº‰å–è‡ªå·±æä¸ªâ€œæŒ–çŸ¿æœºâ€ï¼Œè¿™å¯æ˜¯æˆ‘è‡ªå·±æ”¾å‡æ—¶çš„æ‰¿è‹¥ï¼</p><hr><p><strong>â€“å¼‚å¸¸å¤„ç†â€“</strong></p><p>å¼‚å¸¸æ£€æµ‹åŸºæœ¬ç»“æ„ï¼štry{è¦æ£€æŸ¥çš„ä»£ç }catch(Exception e){å‡ºé”™æ—¶æŠ›å‡ºçš„ä»£ç }<br>ä¸€ä¸ªä¾‹å­è®²è¿°å¼‚å¸¸ï¼Œè¾“å…¥çš„intç±»å‹å˜é‡ageé”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸ï¼š<br><code>import java.util.Scanner;</code></p><p><code>public class xiancheng &#123;  public static void main(String[] args) &#123;    while (true) &#123;      try &#123;        Scanner sc = new Scanner(System.in);        System.out.println(&quot;è¯·è¾“å…¥ä½ çš„å¹´é¾„:&quot;);        int age = sc.nextInt();        System.out.println(&quot;ä½ çš„å¹´é¾„æ˜¯ï¼š&quot; + age);        break;      &#125; catch (Exception e) &#123;        System.err.println(&quot;ä½ TMå†ä¹±è¾“è¯•è¯•???&quot;);//errè¡¨ç¤ºé”™è¯¯è¾“å‡ºï¼Œè¾“å‡ºæ—¶ä¼šçº¢è‰²å­—ä½“æ˜¾ç¤º      &#125;    &#125;  &#125;&#125;</code><br>è¿è¡Œç»“æœï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/JJP1RWDQFVW5CVCQYCS.png" alt="img"></p><p><strong>â€“çº¿ç¨‹</strong>â€”</p><p>å¤šçº¿ç¨‹ï¼ˆå¹¶å‘ç¼–ç¨‹ï¼‰<br>å¹¶å‘æ€§ï¼šå¦‚æœCPUæ˜¯å•æ ¸çš„ï¼Œå…¶å®ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è¢«æ‰§è¡Œï¼ŒCPUä¼šåˆ†æ—¶åˆ‡æ¢æ¯ä¸ªè¿›ç¨‹ï¼Œå› ä¸ºåˆ‡æ¢çš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ‰€ä»¥ä»¥ä¸ºåŒæ—¶åœ¨è¿›è¡Œã€‚næ ¸å°±æ˜¯å¯ä»¥åŒæ—¶æ‰§è¡Œnä¸ªè¿›ç¨‹ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œè¿™å°±æ˜¯å¤šçº¿ç¨‹ã€‚</p><p>åˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹æ³•ï¼š<br>1ï¼Œå®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿Threadçº¿ç¨‹ç±»ï¼Œé‡å†™run()æ–¹æ³•,åˆ›å»ºçº¿ç¨‹å¯¹è±¡è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹ã€‚<br>2ï¼Œå®šä¹‰ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ç±»å®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œåˆ›å»ºçº¿ç¨‹ä»»åŠ¡å¯¹è±¡ï¼ŒæŠŠçº¿ç¨‹ä»»åŠ¡å¯¹è±¡åŒ…è£…æˆçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹<br>3ï¼Œå®ç°Callableæ¥å£ï¼ˆæ‰©å±•ï¼‰</p><p><strong>Threadç±»ï¼š</strong></p><p>å¤šçº¿ç¨‹ç®€å•æ¡ˆä¾‹ï¼šmainæ–¹æ³•å’Œrunæ–¹æ³•æŠ¢å•æ ¸çš„cpuï¼š<br><code>public class xiancheng &#123;  public static void main(String[] args) &#123;    xiancheng2 THREAD =new xiancheng2();    THREAD.start();    for(int i=0;i&lt;100;i++)&#123;      System.out.println(&quot;mainçº¿ç¨‹è¾“å‡º&quot;+i);    &#125;  &#125;  static class xiancheng2 extends Thread&#123;    @Override    public void run()&#123;      for(int i=0;i&lt;100;i++)&#123;        System.out.println(&quot;å­çº¿ç¨‹è¾“å‡º&quot;+i);      &#125;    &#125;  &#125;</code></p><p><code>&#125;</code><br>è¿è¡Œç»“æœï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/QR5VZD9E7KTWDZF99PU0.png" alt="img"></p><p>å¯ä»¥çœ‹åˆ°è·‘çš„æ— è§„åˆ™ï¼Œå°±æ˜¯å› ä¸º<strong>ä¸¤ä¸ªçº¿ç¨‹åœ¨æŠ¢ä¸€ä¸ªCPU</strong></p><p>Runnableæ¥å£å°±æ˜¯Threadçš„é«˜çº§ç‰ˆï¼ŒCallable&lt;&gt;åˆæ˜¯Runnableçš„é«˜çº§ç‰ˆ,Runnableçš„ä¸»è¦ä½œç”¨æ˜¯ç©ºå‡ºçˆ¶ç±»æ¥ï¼ŒCallable&lt;&gt;çš„ä¸»è¦ä½œç”¨æ˜¯å¢åŠ è¿”å›å€¼çš„(return),çº¿ç¨‹çš„å†…å®¹å»ºè®®ç›´æ¥çœ‹ä»£ç ï¼Œé‡Œé¢æœ‰äº²æ‰‹å†™çš„æ³¨é‡Šï¼Œå¥½ç†è§£äº›</p><p>â€”<strong>çº¿ç¨‹å®‰å…¨é—®é¢˜æ¨¡æ‹Ÿé¡¹ç›®è®­ç»ƒ</strong>â€”</p><p>å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å–é’±ï¼ˆå³ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å…±äº«ä¸€ä¸ªèµ„æºï¼‰ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/LAZM86BMSNTNO6LALP5ZF.png" alt="img"></p><p>å°±ä¼šäº§ç”Ÿå¦‚ä¸‹æƒ…å†µï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/0E6XR6YN1_GPDQ01FMS1.png" alt="img"></p><p>è¿™å°±éœ€è¦ä¸€ä¸ªä¸€ä¸ªæ’é˜Ÿæ¥å–ï¼Œå³æŠŠå…±äº«èµ„æºè¿›è¡Œä¸Šé”ï¼Œè®©æ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œï¼Œè¿™æ—¶å°±éœ€è¦è°ƒç”¨synchronized(é”å¯¹è±¡){&#x2F;&#x2F;è®¿é—®å…±äº«èµ„æºçš„ä»£ç }æ¥å®ç°ï¼Œè¿™é‡Œçš„é”å¯¹è±¡å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œå³ï¼š<img src="http://www.hepingan.top/wp-content/uploads/2023/07/CCM785XKI6F0LGSP5F.png" alt="img"></p><p><strong>â€”çº¿ç¨‹æ± â€”</strong></p><p>ä¸ºé˜²æ­¢çº¿ç¨‹çš„è¿‡å¤šï¼ˆå› ä¸ºä¸€ä¸ªäººå¯¹è±¡å°±è¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼‰ï¼Œå°±è¯ç”Ÿäº†çº¿ç¨‹æ± ï¼Œæ— éœ€åˆ›å»ºçº¿ç¨‹é”€æ¯çº¿ç¨‹ï¼Œé™ä½èµ„æºæ¶ˆè€—ï¼Œåœ¨çº¿ç¨‹æ± ä¸­æ”¾ä¸€äº›å›ºå®šçš„çº¿ç¨‹ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå¤šä¸ªä»»åŠ¡ã€‚</p><p>åˆ›å»ºçº¿ç¨‹æ± ï¼šExecutorService pools &#x3D;Executors.<em>newFixedThreadPool</em>(çº¿ç¨‹æ± æ•°é‡);</p><p>åˆ›å»ºçº¿ç¨‹ï¼šThread&#x2F;Runnable xxx &#x3D;new MyThread&#x2F;MyRunnable();&#x2F;&#x2F;è¿™é‡Œçš„Myæ˜¯è‡ªå·±çš„çº¿ç¨‹ç±»å</p><p>è°ƒç”¨çº¿ç¨‹æ± ï¼špools.submit(xxx);</p><p>Callableæ¥å£çš„çº¿ç¨‹çš„çº¿ç¨‹æ± è°ƒç”¨ï¼š<br>Future&lt;æ•°æ®ç±»å‹&gt; å¯¹è±¡åç§° &#x3D;çº¿ç¨‹æ± .submit(new Callableæ¥å£ç±»(å˜é‡n));<br>Callableç±»ï¼šstatic class MyCallable implements Callable{æœ‰å‚æ„é€ å˜é‡nâ€¦}</p><p>volatileå…³é”®å­—ï¼š<br>é—®é¢˜ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«å˜é‡æ˜¯ä¼šå‡ºç°ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡å€¼åå…¶ä»–çº¿ç¨‹çœ‹ä¸åˆ°æœ€æ–°çš„çº¿ç¨‹å€¼ã€‚<br>ä¾‹å­ï¼š<br>@Override<br>  public void run(){<br>    try {<br>      Thread.sleep(1000);<br>    } catch (InterruptedException e) {<br>      throw new RuntimeException(e);<br>    }<br>    flag&#x3D;true;<br>    System.out.println(â€œflag is become TRUEâ€);<br>  }<br>VolatileDemo v1&#x3D;new VolatileDemo();<br>    &#x2F;&#x2F;å­çº¿ç¨‹ä¿®æ”¹flagçš„å€¼<br>    v1.start();<br>    &#x2F;&#x2F;ä¸»çº¿ç¨‹<br>    while (true){<br>      if(v1.isFlag()){<br>        System.out.println(â€œGoing..â€);<br>      }<br>    }<br>è¿™æ—¶æ§åˆ¶å°ä¸ä¼šè¾“å‡ºGoingâ€¦å› ä¸ºä¸»çº¿ç¨‹ç›´æ¥æ‹¿çš„æ˜¯ä¸€å¼€å§‹çš„false,å¹¶ä¸æ˜¯ç»è¿‡å­çº¿ç¨‹ä¿®æ”¹è¿‡åçš„true</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/1CB@EFAKIE1H0PV0@K-1024x461.jpg" alt="img"></p><p>è§£å†³åŠæ³•ï¼š1ï¼ŒåŠ é”sysnchronized(xxx.class){}ï¼Œå› ä¸ºåŠ é”ä¼šæ¸…ç©ºå·¥ä½œå†…å®¹ï¼Œè¯»å–æœ€æ–°çš„å†…å­˜å‡ºæ¥ã€‚2ï¼Œç›´æ¥ç»™å˜é‡åŠ ä¸Švolatileä¿®é¥°ï¼Œvolatileä¿®é¥°åï¼Œä¸€æ—¦è¿™ä¸ªå˜é‡æ”¹å˜ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½å¯ä»¥è¯»å–æœ€æ–°å€¼ã€‚volatileå˜é‡çš„æµç¨‹å›¾ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/6FEDEWL0AMJ8UCHYUFP-1024x461.jpg" alt="img"></p><p>ä¸€ä¸ªæ–¹å¼æ˜¯æ¸…ç©ºå†è¯»å–ï¼Œä¸€ä¸ªç›´æ¥ä¿®æ”¹</p><p><strong>â€”åŸå­æ€§ä¸åŸå­ç±»â€”</strong></p><p>åŸå­æ€§ï¼ˆå°±æ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰<br>é—®é¢˜ï¼šå‡å¦‚è½¬è´¦ç»™åˆ«äººï¼Œå¦‚æœè½¬è´¦å¤±è´¥æŠ¥é”™ï¼Œä½†æ˜¯å¯¹æ–¹é’±è¿™ä¸ªå˜é‡å·²ç»å˜äº†ã€‚</p><p>å¯ä»¥ç”¨ä¸‹é¢è¿™äº›ä»£ç æ¥æµ‹è¯•ï¼Œæœ‰æ—¶å€™å°±ä¸ä¼šåŠ åˆ°10000</p><p>@Override<br>public void run() {<br>for(int i&#x3D;1;i&lt;&#x3D;100;i++){<br>count++;<br>System.*out*.println(â€œcount&#x3D;&#x3D;&gt;â€+count);<br>}<br>}</p><p>Runnable r1&#x3D;new MyRunnable();<br>for(int i&#x3D;1;i&lt;&#x3D;100;i++){<br>&#x2F;&#x2F;å¯åŠ¨100ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œ100æ¬¡ä»»åŠ¡<br>new Thread(r1).start();<br>}</p><p>volatileåªèƒ½ä¿è¯å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼Œç›´æ¥ç”¨synchonizedåŠ é”ï¼Œé”ä½ä»»åŠ¡ç»“æŸåå†è¿›è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œã€‚<br>ç”±äºåŠ é”æœºåˆ¶æ€§èƒ½å·®ï¼ˆå› ä¸ºæ˜¯ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œï¼Œä¼šå µå¡çº¿ç¨‹ï¼‰ï¼Œæ‰€ä»¥å°±è¯ç”Ÿäº†<strong>åŸå­ç±»</strong>ã€‚åˆ›å»ºåŸå­ï¼›ç±»å¯¹è±¡ï¼šAtomicInteger xxx&#x3D;new AtomicInteger();<br>è¾“å‡ºåŸå­ç±»ç»“æœï¼šxxx.incrementAndGet()ã€‚åŸç†æ˜¯å…ˆè¿›è¡Œä»»åŠ¡å†å–ç»“æœ</p><p>åŸå­ç±»çš„CASæœºåˆ¶ä»‹ç»ï¼šå°±æ˜¯å¤šä¸ªçº¿ç¨‹ä¼šå…ˆåŒæ—¶è¿›è¡Œä»»åŠ¡ï¼Œç„¶åä¸€ä¸ªçº¿ç¨‹çš„ç»“æœä¼šä¼˜å…ˆè¿”å›æœ€æ–°å€¼åˆ°åŸæ¥å¼€å§‹æ‹¿çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹ä¼šå†æ¬¡æ£€æµ‹åŸæ¥å¼€å§‹æ‹¿çš„å€¼ï¼Œå¦‚æœå‘ç°å…¶å€¼ä¸æœ€å¼€å§‹å–çš„å€¼ä¸ä¸€æ ·åˆ™ä¼šæŠ¥åºŸåˆšåˆšæ‰§è¡Œçš„å€¼å†æ‹¿æ–°çš„å€¼è¿›è¡Œä»»åŠ¡ã€‚</p><p><strong>çº¿ç¨‹å­¦ä¹ æ—¶çš„ä»£ç </strong></p><p>import java.util.concurrent.Callable;<br>import java.util.concurrent.Future;<br>import java.util.concurrent.FutureTask;</p><p>public class xiancheng {<br>static class MyThread extends Thread{<br>public MyThread(String name){<br>&#x2F;&#x2F;public Thread(String name):çˆ¶ç±»çš„æœ‰å‚æ„é€ å™¨<br>super(name);<br>}<br>public MyThread(){}</p><p>@Override<br>public void run(){<br>for(int i&#x3D;0;i&lt;10;i++){<br>System.<em>out</em>.println(Thread.<em>currentThread</em>().getName()+â€è¾“å‡ºâ€+i);<br>&#x2F;&#x2F;currrentThreadä¸ºè·å–å½“å‰æ‰§è¡Œçš„çº¿ç¨‹<br>}<br>}<br>}</p><p>static class MyRunnable implements Runnable{<br><em>&#x2F;</em>*<br>*** Runnable<strong>æ¥å£ä¼˜ç‚¹ï¼šæ‹¥æœ‰</strong>Runnable<strong>çš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œçº¿ç¨‹ä»»åŠ¡ç±»</strong>(MyRunnable)<strong>åªæ˜¯å®ç°</strong>Runnable<strong>æ¥å£ï¼Œè¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–ç±»</strong>(Thread<strong>ç±»æ˜¯ç»§æ‰¿çš„å¾—å˜›</strong>)<br>**** *åŒä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡å¯¹è±¡å¯ä»¥è¢«åŒ…è£…æˆå¤šä¸ªçº¿ç¨‹å¯¹è±¡ï¼ˆæ„æ€å°±æ˜¯å¯ä»¥åˆ†ç±»ï¼‰<br>**** *é€‚åˆå¤šä¸ªç›¸åŒç¨‹åºä»£ç çš„çº¿ç¨‹å»å…±äº«åŒä¸€ä¸ªèµ„æº<br>**** *çº¿ç¨‹æ± å¯ä»¥æ”¾å…¥å®ç°<strong>Runnable</strong>æˆ–<strong>Callable</strong>çº¿ç¨‹ä»»åŠ¡å¯¹è±¡<br>***&#x2F;<br>*@Override<br>public void run() {<br>for (int i&#x3D;0;i&lt;5;i++){<br>System.<em>out</em>.println(Thread.<em>currentThread</em>().getName()+â€è¾“å‡ºâ€+i);&#x2F;&#x2F;currentThreadæ–¹æ³•ä¸ºè·å–å½“å‰çº¿ç¨‹<br>}<br>}<br>}</p><p>static class MyCallable implements Callable<String>{<br>&#x2F;&#x2F;è¿™ä¸ªCallableæ¥å£ä¹Ÿéœ€è¦é‡å†™ï¼Œä¸è¿‡ä¸æ˜¯runæ–¹æ³•å’¯<br>@Override<br>public String call() throws Exception {<br>int sum&#x3D;0;<br>for(int i&#x3D;0;i&lt;10;i++){<br>System.<em>out</em>.println(Thread.<em>currentThread</em>().getName()+â€è¾“å‡ºâ€+i);<br>sum+&#x3D;i;<br>}<br>System.<em>out</em>.println(Thread.<em>currentThread</em>().getName()+â€æ‰§è¡Œç»“æœä¸ºâ€+sum);<br>return null;<br>}<br>}</p><p>public static void main(String[] args) throws InterruptedException {</p><p>Thread THREAD &#x3D;new MyThread();&#x2F;&#x2F;æ— å‚æ„é€ çš„çº¿ç¨‹<br>THREAD.start();<br>THREAD.setName(â€œä¸€å·çº¿ç¨‹â€);&#x2F;&#x2F;è®¾ç½®çº¿ç¨‹åå­—,é»˜è®¤ä¸ºThread-0<br>System.<em>out</em>.println(THREAD.getName());&#x2F;&#x2F;è·å–çº¿ç¨‹åå­—</p><p>Thread THREAD2 &#x3D; new MyThread(â€œäºŒå·çº¿ç¨‹â€);&#x2F;&#x2F;æœ‰å‚æ„é€ çš„çº¿ç¨‹<br>THREAD2.start();</p><p>Runnable TARGET&#x3D;new MyRunnable();&#x2F;&#x2F;å¤šæ€çš„å†™æ³•ï¼Œå‰é¢å†™æ¥å£ï¼Œåé¢å†™æ¥å£ç±»åï¼Œè¿™å‡ ä¸ªçº¿ç¨‹éƒ½æ˜¯è¿™ä¹ˆå†™<br>Thread THREAD3&#x3D; new Thread(TARGET,â€ä¸‰å·çº¿ç¨‹â€);<br><em>&#x2F;</em>*<br>*** Thread<strong>ç±»ä¸­å­˜åœ¨</strong>public Thread(Runnable target)<strong>å’Œ</strong>public Thread(Runnable target,String name)<em>*çš„æ„é€ æ–¹æ³•<br>**** *æ‰€ä»¥è¦å…ˆåˆ›å»º**Runnable</em><em>çš„å¯¹è±¡</em>*,**æŠŠçº¿ç¨‹ä»»åŠ¡å¯¹è±¡åŒ…è£…æˆçº¿ç¨‹å¯¹è±¡ï¼Œä¸”å¯ä»¥æŒ‡å®šçº¿ç¨‹åç§°<br>***&#x2F;<br>*THREAD3.start();</p><p>new Thread(new Runnable() {<br>@Override<br>public void run() {<br>for(int i&#x3D;0;i&lt;5;i++){<br>System.<em>out</em>.println(Thread.<em>currentThread</em>().getName()+â€è¾“å‡ºâ€+i);<br>}<br>System.<em>out</em>.println(Thread.<em>currentThread</em>().getName()+â€è¾“å‡ºå®Œæ¯•â€);<br>}<br>}).start();&#x2F;&#x2F;åŒ¿åå†…éƒ¨ç±»å†™æ³•</p><p>Callable<String> CALL &#x3D;new MyCallable();&#x2F;&#x2F;åˆ›å»ºCallableä»»åŠ¡å¯¹è±¡<br>FutureTask<String> TASK &#x3D;new FutureTask<String>(CALL);<br>*&#x2F;*<em><strong>æŠŠ</strong>Callable</em><em>ä»»åŠ¡å¯¹è±¡åŒ…è£…æˆä¸€ä¸ªæœªæ¥ä»»åŠ¡å¯¹è±¡<br>*** â€“public FutureTask(Callable</em><em><v></em> *callable)<br>**** *æœªæ¥å¯¹è±¡å°±æ˜¯ä¸ª<strong>Runnable</strong>çº¿ç¨‹å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥è¢«åŒ…è£…æˆçº¿ç¨‹å¯¹è±¡<br>**** *æœªæ¥ä»»åŠ¡å¯¹è±¡å¯ä»¥å†çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå»å¾—åˆ°çº¿ç¨‹æ‰§è¡Œç»“æœ<br>***&#x2F;<br>*Thread THREAD4 &#x3D;new Thread(TASK,â€å››å·çº¿ç¨‹â€);&#x2F;&#x2F;åˆ›å»ºThreadçº¿ç¨‹å¯¹è±¡<br>THREAD4.start();<br>&#x2F;&#x2F;ä¸‹é¢çš„tryæ˜¯å–çº¿ç¨‹æ‰§è¡Œçš„ç»“æœï¼Œå¦‚æœæ²¡æœ‰è·‘å®Œï¼Œå°±ä¼šè®©å‡ºCPUç­‰çº¿ç¨‹æ‰§è¡Œç»“æŸå†å–ç»“æœ<br>try {<br>String rs&#x3D; TASK.get();<br>System.<em>out</em>.println(rs);<br>}catch (Exception e){<br>e.printStackTrace();<br>}</p><p>Thread m &#x3D;Thread.<em>currentThread</em>();&#x2F;&#x2F;currentThreadè·å–å½“å‰çº¿ç¨‹ï¼Œè¿™ä¸ªä»£ç åœ¨å“ªä¸ªçº¿ç¨‹å°±æ˜¯é‚£ä¸ªçº¿ç¨‹ï¼Œè¿™é‡Œæ˜¯mainçº¿ç¨‹<br><em>&#x2F;</em>*<br>**** <em>å› ä¸ºåœ¨<strong>Thread</strong>ç±»ä¸­ï¼Œ<strong>currentThread</strong>çš„æ–¹æ³•ä¸º<strong>static</strong>ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨å¯¹è±¡æˆ–ç±»åè°ƒç”¨<br>**** <em>åŸ</em></em>:public static Thread currentThread(){â€¦}<br>***&#x2F;<br>*m.setName(â€œæœ€å¼ºçº¿ç¨‹â€);&#x2F;&#x2F;é»˜è®¤ä¸ºmain<br>System.<em>out</em>.println(m.getName());<br>for(int i&#x3D;0;i&lt;10;i++){<br>System.<em>out</em>.println(â€œmainçº¿ç¨‹è¾“å‡ºâ€+i);<br>}</p><p>&#x2F;&#x2F;sleepé—´éš”æ–¹æ³•<br>for (int i&#x3D;0;i&lt;5;i++){<br>System.<em>out</em>.println(i);<br>try {<br>Thread.<em>sleep</em>(1000);&#x2F;&#x2F;éš”1000mså†è¾“å‡ºæ•°æ®,åŠ ä¸Šforå°±æ˜¯æ¯éš”1sè¾“å‡ºä¸€ä¸ªæ•°æ®<br>} catch (InterruptedException e) {<br>e.printStackTrace();<br>}<br>}<br>}</p><p>}</p><p><strong>çº¿ç¨‹å®‰å…¨é—®é¢˜å®æˆ˜ä»£ç </strong></p><p><em><strong>è´¦æˆ·ä¿¡æ¯ç±»</strong>+<strong>å®ç°ä¸»ç±»ï¼š</strong></em></p><p>package xianchenganquan;</p><p>public class zhanghu {<br>private String card;<br>private double money;</p><p>public zhanghu() {</p><p>}<br>public zhanghu(String card, double money) {<br>this.card &#x3D; card;<br>this.money &#x3D; money;<br>}<br>public void drawMoney(double money) {<br>String name &#x3D; Thread.<em>currentThread</em>().getName();<br>synchronized (â€œéšä¾¿â€) {<br>if (this.money &gt;&#x3D; money) {&#x2F;&#x2F;å·¦è¾¹çš„moneyæ˜¯è´¦æˆ·çš„ï¼Œå³è¾¹çš„æ˜¯å–çš„é’±<br>System.<em>out</em>.println(â€œä½™é¢è¶³å¤Ÿï¼Œå°Šæ•¬çš„â€ + name + â€œå·²ä¸ºä½ å–å‡ºâ€ + money);<br>this.money -&#x3D; money;<br>System.<em>out</em>.println(name + â€œå–å®Œé’±åï¼Œâ€ + card + â€œå¡è¿˜å‰©â€ + this.money);<br>} else {<br>System.<em>out</em>.println(name + â€œæ¥å–é’±ï¼Œä½™é¢ä¸è¶³â€);<br>}<br>}<br>}<br>public String getCard() {<br>return card;<br>}</p><p>public void setCard(String card) {<br>this.card &#x3D; card;<br>}</p><p>public double getMoney() {<br>return money;<br>}</p><p>public void setMoney(double money) {<br>this.money &#x3D; money;<br>}</p><p>public static void main(String[] args) {<br>&#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªå…±äº«å–é’±è´¦æˆ·<br>zhanghu people1 &#x3D;new zhanghu(â€œICBCâ€,10000);<br>&#x2F;&#x2F;åˆ›å»ºä¸¤ä¸ªThreadå¯¹è±¡æ¨¡æ‹Ÿçº¿ç¨‹å–é’±<br>Thread HEPNGAN &#x3D; new xianchenganquan.DrawThread(â€œä½•å¹³å®‰â€,people1);<br>HEPNGAN.start();<br>Thread HEHAO &#x3D;new xianchenganquan.DrawThread(â€œä½•æµ©â€,people1);<br>HEHAO.start();<br>}<br>}</p><p><em><strong>DrawThreadç±»</strong>ï¼š</em></p><p>package xianchenganquan;</p><p>public class DrawThread extends Thread{<br>private zhanghu zh;<br>public DrawThread(){}<br>public DrawThread(String name,zhanghu zh){<br>super(name);&#x2F;&#x2F;è°ƒç”¨Threadçˆ¶ç±»ä¸­çš„name<br>this.zh&#x3D;zh;<br>}</p><p>@Override<br>public void run(){<br>zh.drawMoney(10000);<br>}<br>}</p><p><strong>çº¿ç¨‹æ± å­¦ä¹ ä»£ç </strong></p><p>import java.util.concurrent.*;</p><p>public class ThreadPools {<br>public static Object <em>ziyuan1</em>&#x3D;new Object();&#x2F;&#x2F;åˆ›å»ºèµ„æº<br>public static Object <em>ziyuan2</em>&#x3D;new Object();</p><p>public static void main(String[] args) {</p><p>new Thread(new Runnable() {<br>@Override<br>public void run() {<br>synchronized (<em>ziyuan1</em>){&#x2F;&#x2F;æ­»é”ä»£ç å½¢å¼ä¸Šé€šå¸¸è¦è¿›è¡Œé”çš„åµŒå¥—è®¿é—®<br>System.<em>out</em>.println(â€œçº¿ç¨‹1å ç”¨èµ„æº1ï¼Œè¯·æ±‚èµ„æº2â€);<br>try {<br>Thread.<em>sleep</em>(1000);<br>} catch (InterruptedException e) {<br>throw new RuntimeException(e);<br>}<br>synchronized (<em>ziyuan2</em>){<br>System.<em>out</em>.println(â€œçº¿ç¨‹1æˆåŠŸå ç”¨èµ„æº2â€);<br>}<br>}<br>}<br>}).start();</p><p>new Thread(new Runnable() {<br>@Override<br>public void run() {<br>synchronized (<em>ziyuan2</em>){<br>System.<em>out</em>.println(â€œçº¿ç¨‹2å ç”¨èµ„æº2ï¼Œè¯·æ±‚èµ„æº1â€);<br>try {<br>Thread.<em>sleep</em>(1000);&#x2F;&#x2F;å…ˆç¡1s<br>} catch (InterruptedException e) {<br>throw new RuntimeException(e);<br>}<br>synchronized (<em>ziyuan1</em>){<br>System.<em>out</em>.println(â€œçº¿ç¨‹2æˆåŠŸå ç”¨èµ„æº1â€);<br>}<br>}<br>}<br>}).start();<br>&#x2F;&#x2F;åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå›ºå®šæ•°é‡ä¸º3<br>ExecutorService pools &#x3D;Executors.<em>newFixedThreadPool</em>(3);<br>Runnable target&#x3D; new MyRunnable();<br>pools.submit(target);<br>pools.submit(target);<br>pools.submit(target);<br>pools.submit(target);</p><p>pools.shutdown();&#x2F;&#x2F;ç­‰è¿è¡Œç»“æŸåå…³é—­çº¿ç¨‹æ± <br>&#x2F;&#x2F;Callableçš„çº¿ç¨‹æ± <br>ExecutorService pools2 &#x3D;Executors.<em>newFixedThreadPool</em>(3);<br>Future<String> t1 &#x3D;pools2.submit(new MyCallable(100));<br>Future<String> t2 &#x3D;pools2.submit(new MyCallable(200));<br>Future<String> t3 &#x3D;pools2.submit(new MyCallable(300));<br>Future<String> t4 &#x3D;pools2.submit(new MyCallable(400));</p><p>try {<br>String rs1&#x3D;t1.get();<br>String rs2&#x3D;t2.get();<br>String rs3&#x3D;t3.get();<br>String rs4&#x3D;t4.get();<br>System.<em>out</em>.println(rs1);<br>System.<em>out</em>.println(rs2);<br>System.<em>out</em>.println(rs3);<br>System.<em>out</em>.println(rs4);<br>}catch (Exception e){<br>e.printStackTrace();<br>}</p><p>}<br>private static class MyRunnable implements Runnable{<br>@Override<br>public void run() {<br>for (int i &#x3D; 1; i &lt; 3; i++) {<br>System.*out*.println(Thread.*currentThread*().getName() + â€œâ€“&gt;â€ + i);<br>}<br>}<br>}<br>static class MyCallable implements Callable{<br>private int n;<br>public MyCallable(int n){<br>this.n&#x3D;n;<br>}</p><p>@Override<br>public Object call() throws Exception {<br>int sum&#x3D;0;<br>for (int i&#x3D;1;i&lt;n;i++){<br>sum&#x3D;sum+i;<br>}<br>return Thread.<em>currentThread</em>().getName()+â€ç»“æœä¸ºâ€+sum;<br>}<br>}<br>}</p><p><strong>volatileå’ŒåŸå­ç±»å­¦ä¹ ä»£ç </strong></p><p><code>import java.util.concurrent.atomic.AtomicInteger;</code></p><p><code>//é—®é¢˜ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«å˜é‡æ˜¯ä¼šå‡ºç°ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å˜é‡å€¼åå…¶ä»–çº¿ç¨‹çœ‹ä¸åˆ°æœ€æ–°çš„çº¿ç¨‹å€¼ã€‚</code><br><code>public class VolatileDemo extends Thread&#123;</code><br><code>private volatile boolean flag=false;</code></p><p><code>public boolean isFlag()/*å¸ƒå°”å˜é‡çš„getæ–¹æ³•ä¸ºis*/ &#123;</code><br><code>return flag;</code><br><code>&#125;</code></p><p><code>public void setFlag(boolean flag) &#123;</code><br><code>this.flag = flag;</code><br><code>&#125;</code><br><code>@Override</code><br><code>public void run()&#123;</code><br><code>try &#123;</code><br><code>Thread.*sleep*(1000);</code><br><code>&#125; catch (InterruptedException e) &#123;</code><br><code>throw new RuntimeException(e);</code><br><code>&#125;</code><br><code>flag=true;</code><br><code>System.*out*.println(â€œflag is become TRUEâ€);</code><br><code>&#125;</code></p><p><code>public static void main(String[] args) &#123;</code><br><code>VolatileDemo v1=new VolatileDemo();</code><br><code>//å­çº¿ç¨‹ä¿®æ”¹flagçš„å€¼</code><br><code>v1.start();</code><br><code>//ä¸»çº¿ç¨‹</code><br><code>synchronized (VolatileDemo.class)&#123;</code><br><code>if(v1.isFlag())&#123;</code><br><code>System.*out*.println(â€œGoing..â€);</code><br><code>&#125;</code><br><code>&#125;</code><br><code>Runnable r1=new MyRunnable();</code><br><code>for(int i=1;i&lt;=100;i++)&#123;</code><br><code>//å¯åŠ¨100ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œ100æ¬¡ä»»åŠ¡</code><br><code>new Thread(r1).start();</code><br><code>&#125;</code></p><p><code>//åŸå­ç±»çš„æ–¹æ³•</code><br><code>Runnable r2=new MyRunnable2();</code><br><code>for(int i=1;i&lt;=100;i++)&#123;</code><br><code>new Thread(r2).start();</code><br><code>&#125;</code><br><code>&#125;</code><br><code>static class MyRunnable implements Runnable&#123;</code><br><code>private volatile int count;</code><br><code>@Override</code><br><code>public void run() &#123;</code><br><code>for(int i=1;i&lt;=100;i++)&#123;</code><br><code>count++;</code><br><code>System.*out*.println(â€œcount==&gt;â€+count);</code><br><code>&#125;</code><br><code>&#125;</code></p><p><code>&#125;</code><br><code>static class MyRunnable2 implements Runnable&#123;</code><br><code>private AtomicInteger atomicInteger=new AtomicInteger();</code><br><code>@Override</code><br><code>public void run() &#123;</code><br><code>try &#123;</code><br><code>Thread.*sleep*(2000);</code><br><code>&#125; catch (InterruptedException e) &#123;</code><br><code>throw new RuntimeException(e);</code><br><code>&#125;</code><br><code>for (int i = 1; i &lt;= 100; i++) &#123;</code><br><code>System.*out*.println(â€œcount===&gt;â€ + atomicInteger.incrementAndGet());</code><br><code>&#125;</code><br><code>&#125;</code><br><code>&#125;</code><br><code>&#125;</code></p>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç²¾é€šJavaå­¦ä¹ ä¹‹è·¯ï¼ˆäºŒï¼‰</title>
      <link href="/2023/04/24/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2023/04/24/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p>â€”<strong>æŠ½è±¡ç±»ä¸æ¥å£â€”</strong></p><p>-&gt;æŠ½è±¡ç±»çš„æŠ½è±¡æ¦‚å¿µï¼šçˆ¶ç±»çŸ¥é“å­ç±»ä¸€å®šè¦å¹²å˜›ï¼Œä½†æ˜¯æ¯ä¸ªå­ç±»å®Œæˆçš„éƒ½ä¸ä¸€æ ·ï¼Œå­ç±»ä»¥åä¹Ÿåªä¼šç”¨é‡å†™çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆçˆ¶ç±»çš„è¯¥åŠŸèƒ½å°±å¯ä»¥å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»é‡å†™è°ƒç”¨å­ç±»è‡ªå·±</p><p>-&gt;çˆ¶ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•åœ¨å­ç±»ä¸­å¿…é¡»è¢«å…¨éƒ¨é‡å†™ï¼Œæˆ–è€…æŠŠè¿™ä¸ªå­ç±»ä¹Ÿå†™æˆæŠ½è±¡ç±»ã€‚<br>æŠ½è±¡ç±»å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯å½“æ¯çŒªç”Ÿå­©å­ï¼Œå°±æ˜¯æ‹¿æ¥è¢«ç»§æ‰¿çš„</p><p>-&gt;æ¥å£interface,æ˜¯æ›´åŠ å½»åº•çš„æŠ½è±¡ï¼Œç”¨äºè§„èŒƒæ€æƒ³ï¼Œå­ç±»å¿…é¡»å®ç°æ¥å£çš„å…¨éƒ¨æŠ½è±¡æ–¹æ³•</p><p>-&gt;å®ç°æ¥å£çš„ç±»ç§°ä¸ºå®ç°ç±»<br>æ¥å£ä¸­æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ä¹Ÿæ˜¯å…¨éƒ¨è¦é‡å†™</p><p>-&gt;æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿æ¥å£<br>æ¥å£ä¸­æ²¡æœ‰æ„é€ å™¨ï¼Œä¸èƒ½åˆ›å»ºå¯¹è±¡</p><p>ç±»æœ‰5å¤§æˆåˆ†ï¼šæˆå‘˜å˜é‡ï¼Œæ–¹æ³•ï¼Œæ„é€ å™¨ï¼Œä»£ç å—ï¼Œå†…éƒ¨ç±»<br>é™æ€ä»£ç å—ä¼˜å…ˆä¼šä¸ç±»æ‰§è¡Œä¸€æ¬¡ï¼Œå¯ç”¨äºåˆå§‹åŒ–æ“ä½œï¼Œå®ä¾‹ä»£ç å—ç”¨äºæ‰§è¡Œå®ä¾‹å¯¹è±¡ï¼Œå¯ç”¨äºåˆå§‹åŒ–å®ä¾‹èµ„æºã€‚</p><p>â€“<strong>final-</strong></p><p>**<br>**finalï¼ˆæœ€ç»ˆï¼‰ï¼šä¿®é¥°ç±»ï¼Œè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿äº†ï¼Œå®é™…å¼€å‘ä¸­æ²¡æ€ä¹ˆç”¨<br>finalä¿®é¥°æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸èƒ½è¢«é‡å†™<br>finalä¿®é¥°å˜é‡ï¼Œå˜é‡æœ‰ä¸”åªèƒ½èµ‹å€¼ä¸€æ¬¡<br>finalé™æ€å˜é‡ä¹Ÿå¯ä»¥ç”¨ é™æ€ä»£ç å—èµ‹å€¼ï¼š</p><p><img src="http://www.hepingan.top/wp-content/uploads/2023/07/A8NUL7VN0RQ1_IWWA3O.png" alt="img"></p><p>å•ä¾‹è®¾è®¡æ¨¡å¼ï¼šä¸€ä¸ªç±»æ°¸è¿œåªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå°±åƒè™šæ‹Ÿæœºï¼Œä»»åŠ¡ç®¡ç†å™¨ï¼Œæœ‰äº›åªèƒ½å¼€ä¸€ä¸ªçª—å£çš„æ¸¸æˆã€‚<br>é¥¿æ±‰å•ä¾‹è®¾è®¡æ¨¡å¼ï¼šé€šè¿‡ç±»è·å–å•ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è±¡å°±å·²ç»æå‰åšå¥½äº†</p><p>â€”<strong>xmlæ–‡ä»¶</strong>â€”</p><p>xmlï¼ˆå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰æ–‡ä»¶ç”¨äºæ•°æ®äº¤æ¢ï¼Œæ•°æ®ä¼ è¾“ï¼›é…ç½®æ–‡ä»¶ï¼›æ•°æ®å­˜å‚¨ï¼›<br>xmlæ–‡ä»¶å…ƒç´ : å£°æ˜ï¼ˆæŠ¬å¤´ï¼‰ï¼š<?xml version=â€1.0â€³ encoding=â€UTF-8â€³ ?><br>å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰ï¼ˆä¸€ä¸ªXMLæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ï¼Œå°±æ˜¯æœ€å¤§çš„é‚£ä¸ªï¼‰ï¼Œå±æ€§ï¼Œæ³¨é‡Šï¼Œå®ä½“å­—ç¬¦ï¼ŒCDATAå­—ç¬¦æ•°æ®åŒºï¼Œå¤„ç†æŒ‡ä»¤ã€‚å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰ï¼ˆä¸€ä¸ªXMLæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾ï¼Œå°±æ˜¯æœ€å¤§çš„é‚£ä¸ªï¼‰ï¼Œå±æ€§(id&#x3D;?,desc&#x3D;?)ï¼Œæ³¨é‡Š()ï¼Œå®ä½“å­—ç¬¦(è½¬ä¹‰å­—ç¬¦)ï¼ŒCDATAå­—ç¬¦æ•°æ®åŒºï¼Œå¤„ç†æŒ‡ä»¤ï¼ˆå°±æ˜¯cssï¼‰ã€‚</p><p>xmlä¸­çš„è½¬ä¹‰å­—ç¬¦ï¼š<br>&lt;ä¸º&lt;&gt;ä¸º&gt; â€œä¸º&quot;â€™ä¸º&apos;&amp;ä¸º&amp;</p><p>htmlæ˜¯ç”¨æ¥æ˜¾ç¤ºæ•°æ®çš„ï¼›xmlæ˜¯ç”¨æ¥æè¿°æ•°æ®ã€å­˜æ”¾æ•°æ®çš„ï¼Œxmlä¸æ˜¯HTMLçš„æ›¿ä»£å“ï¼Œxmlå’Œhtmlæ˜¯ä¸¤ç§ä¸åŒç”¨é€”çš„è¯­è¨€ã€‚ XML ä¸æ˜¯è¦æ›¿æ¢ HTMLï¼›å®é™…ä¸ŠXML å¯ä»¥è§†ä½œå¯¹ HTML çš„è¡¥å……ã€‚XML å’ŒHTML çš„ç›®æ ‡ä¸åŒHTML çš„è®¾è®¡ç›®æ ‡æ˜¯æ˜¾ç¤ºæ•°æ®å¹¶é›†ä¸­äºæ•°æ®å¤–è§‚ï¼Œè€ŒXMLçš„è®¾è®¡ç›®æ ‡æ˜¯æè¿°æ•°æ®å¹¶é›†ä¸­äºæ•°æ®çš„å†…å®¹,XMLæ˜¯ä¸€ç§è·¨å¹³å°çš„ï¼Œä¸è½¯ã€ç¡¬ä»¶æ— å…³çš„ï¼Œå¤„ç†ä¸ä¼ è¾“ä¿¡æ¯çš„å·¥å…·ã€‚</p><p><em>è¿™è¾¹å»ºè®®ç›´æ¥ä¸Šä»£ç ï¼Œé‡Œé¢æœ‰æ³¨é‡Šå¥½äº†è§£çœ‹äº›ï¼Œå¤åˆ¶åˆ°è‡ªå·±çš„IDEå»çœ‹å§</em></p><p><strong>æŠ½è±¡ç±»å­¦ä¹ ä»£ç ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class chouxiang &#123;static abstract class Animal&#123;public abstract void run();//æŠ½è±¡æ–¹æ³•public abstract void eat();&#125;//çˆ¶ç±»å®šä¹‰ä¸ºæŠ½è±¡çš„static abstract class Dog extends Animal&#123;@Overridepublic void run()&#123;System.*out*.println(&quot;ç‹—è·‘æ­¥&quot;);&#125;&#125;static class Cat extends Animal&#123;@Override//å¿…é¡»é‡å†™æŠ½è±¡ç±»çš„å…¨éƒ¨æ–¹æ³•ï¼Œä¸ç„¶è¿™ä¸ªç±»ä¹Ÿè¦è¢«å†™æˆæŠ½è±¡ç±»public void run()&#123;System.*out*.println(&quot;çŒ«è·‘æ­¥&quot;);&#125;@Overridepublic void eat()&#123;System.*out*.println(&quot;çŒ«åƒé¥­&quot;);&#125;&#125;public static void main(String[] args) &#123;Cat cat =new Cat();cat.eat();cat.run();//æŠ½è±¡ç±»ä¸èƒ½åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯ä¸€å®šæœ‰æ„é€ å™¨*/**</span><br><span class="line">åè¯æ³•è¯æ˜:å¦‚æœèƒ½åˆ›å»º:Animal an =new Animal();</span><br><span class="line">an.run();è¿™æ—¶è¿™ä¸ªæ–¹æ³•å°±è·‘ä¸äº†ï¼Œå› ä¸ºæ²¡æœ‰å®šä¹‰</span><br><span class="line">æˆ–è€…ç›´æ¥è¯´ï¼šæŠ½è±¡ç±»æœ¬æ¥å°±æ˜¯æŠ½è±¡ï¼ŒæŠ½è±¡å°±ä¸èƒ½å…·ä½“åŒ–ï¼›</span><br><span class="line">\*/</span><br><span class="line">*//æŠ½è±¡ç±»ä¼˜ç‚¹å¯ä»¥å¾—åˆ°æ‹¥æœ‰æŠ½è±¡æ–¹æ³•çš„èƒ½åŠ›&#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>æ¥å£å­¦ä¹ ä»£ç ï¼š</strong></p><p>æ¥å£ç±»ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface jiekou &#123;public abstract void run();//æ ‡ç°æ˜¯å› ä¸ºæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•é»˜è®¤å°±æ˜¯public abstractï¼Œæ‰€ä»¥å¯ä»¥çœç•¥ä¸å†™å‰é¢çš„void eat();public static final String *name* = &quot;sb&quot;;//å¸¸é‡,è¿è¡Œè¿‡ç¨‹ä¸­ä¸è®¸æ›´æ”¹//æ¥å£ä¸­å¸¸é‡å¯ä»¥çœå»public static finalclass cl1&#123;public void hit()&#123;System.*out*.println(&quot;çˆ¶ç±»æ‰“&quot;);&#125;&#125;interface inter&#123;default void hit()&#123;System.*out*.println(&quot;æ¥å£æ‰“&quot;);&#125;&#125;class cl2 extends cl1 implements inter&#123;//ç»§æ‰¿åœ¨å‰æ¥å£åœ¨åï¼Œç»§æ‰¿ä¸ºäº²çˆ¹ï¼Œæ¥å£ä¸ºå¹²çˆ¹public static void main(String[] args) &#123;cl2 cc =new cl2();cc.hit();//è¿è¡Œå‡ºæ¥æ˜¯çˆ¶ç±»çš„æ–¹æ³•&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">jiekou2</span>&#123;<span class="keyword">void</span> <span class="title function_">go</span><span class="params">()</span>;&#125;<span class="keyword">interface</span> <span class="title class_">jiekou3</span> <span class="keyword">extends</span> <span class="title class_">jiekou4</span>,jiekou5&#123;</span><br><span class="line">    <span class="comment">//æ¥å£ç»§æ‰¿æ¥å£ï¼Œç›®çš„ä¹Ÿæ˜¯çœç©ºé—´</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">set</span><span class="params">()</span>;&#125;<span class="keyword">interface</span> <span class="title class_">jiekou4</span>&#123;<span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span>;&#125;<span class="keyword">interface</span> <span class="title class_">jiekou5</span>&#123;<span class="keyword">void</span> <span class="title function_">abab</span><span class="params">()</span>;&#125;<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">shixianlei</span> <span class="keyword">implements</span> <span class="title class_">jiekou</span>,jiekou2,jiekou3&#123;<span class="keyword">private</span> String name;<span class="keyword">private</span> <span class="type">int</span> age;<span class="keyword">public</span> <span class="title function_">shixianlei</span><span class="params">(String name,<span class="type">int</span> age)</span>&#123;<span class="built_in">this</span>.name=name;<span class="built_in">this</span>.age=age;&#125;<span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;System.*out*.println(name+<span class="string">&quot;è·‘&quot;</span>);&#125;</span><br><span class="line">                                                                                                                            <span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;&#125;<span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">go</span><span class="params">()</span> &#123;&#125;<span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">()</span> &#123;&#125;<span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span> &#123;&#125;<span class="meta">@Overridepublic</span> <span class="keyword">void</span> <span class="title function_">abab</span><span class="params">()</span> &#123;&#125;&#125;</span><br></pre></td></tr></table></figure><p><strong>xmlå­¦ä¹ çš„ä»£ç :</strong></p><?xml version="1.0" encoding="UTF-8" ?><!--å£°æ˜ï¼ˆæŠ¬å¤´ï¼‰--><?xml-stylesheet type="text/css" href="./xml.css" ?><!--å¯¼å…¥CSSæ ·å¼--><!--å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰--><person><name>ä½•å¹³å®‰</name><age>19</age><sex>boy</sex><box><start></start></box><Sql>select *from student where id &lt; 123 &amp;&amp; age &gt; 18</Sql></person><p><strong>ä»£ç å—å­¦ä¹ æ—¶å€™çš„ä»£ç ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">daimakuai</span> &#123;<span class="keyword">private</span> <span class="keyword">final</span> String name;<span class="keyword">static</span> &#123;System.*out*.println(<span class="string">&quot;é™æ€ä»£ç å—,å…ˆæ‰§è¡Œä¸€æ¬¡&quot;</span>);&#125;&#123;System.*out*.println(<span class="string">&quot;å®ä¾‹ä»£ç å—æ‰§è¡Œä¸€æ¬¡&quot;</span>);name=<span class="string">&quot;ä½•å¹³å®‰&quot;</span>;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;System.*out*.println(<span class="string">&quot;ä¸»æ–¹æ³•æ‰§è¡Œä¸€æ¬¡&quot;</span>);daimakuai d1=<span class="keyword">new</span> <span class="title class_">daimakuai</span>();<span class="comment">//æ‰§è¡Œå®ä¾‹ä»£ç å—System.*out*.println(d1.name);*buy*(12);&#125;final double r=3.14;public static final double *s*;static &#123;*s*=123;&#125;//é™æ€ä»£ç å—èµ‹å€¼//r=23;//finalå˜é‡è¢«ç¬¬äºŒæ¬¡èµ‹å€¼ï¼ŒæŠ¥é”™public static void buy(final double w)&#123;//w=15;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç²¾é€šJavaå­¦ä¹ ä¹‹è·¯ï¼ˆä¸€ï¼‰</title>
      <link href="/2023/04/02/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/04/02/IT%E7%AC%94%E8%AE%B0/java/%E7%B2%BE%E9%80%9AJava%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>æœ¬æ–‡ç« çš„å›¾ç‰‡ç”±äºæ˜¯å¤©é¦™å›­1.0çš„ä½†æ˜¯è¿‡æœŸäº†å›¾ç‰‡å°±æŸ¥çœ‹ä¸äº†ï¼Œå°±å½“æˆ‘è‡ªå·±çš„ä¸€ä¸ªçºªå¿µäº†å§~</strong></p><p><strong>å‘½è¿çš„é½¿è½®å¼€å§‹è½¬åŠ¨~</strong></p><p><img src="https://img-hh.oss-cn-hangzhou.aliyuncs.com/undefined0eb18691092e66fd4d69f0ad8d944188.jpg" alt="img"></p><p>Javaä¸‰å¤§ç‰¹å¾ï¼šå°è£…ï¼Œç»§æ‰¿å’Œå¤šæ€<br>æˆå‘˜å˜é‡ï¼šé™æ€æˆå‘˜å˜é‡(static)å’Œå®ä¾‹æˆå‘˜å˜</p><p><img src="https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/web_photos/4N%24V%601%28_K9Y1J_3NA%5DWFS3M.png" alt="img"></p><p>è®¿é—®æ–¹æ³•ï¼šç±»å.é™æ€æˆå‘˜å˜é‡ï¼›å¯¹è±¡.å®ä¾‹æˆå‘˜å˜é‡ï¼›å¯¹è±¡.é™æ€æˆå‘˜å˜é‡ï¼›ï¼ˆç¬¬ä¸‰ä¸ªä¸æ¨èï¼‰</p><p><img src="https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/web_photos/CKUS0%5D9%609DVER%25GNU6P0~7V.png" alt="img"></p><p>å¥—è¯ï¼šé™æ€çš„éƒ½å¯ä»¥è®¿é—®ï¼Œå®ä¾‹çš„åªèƒ½å®ä¾‹çš„è®¿é—®</p><p>ç»§æ‰¿ä¸­å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ„é€ æ–¹æ³•,eg:çˆ¶ç±»ï¼špublic People(int age){this.age&#x3D;age},å­ç±»å°±ä¸èƒ½ç»§æ‰¿è¿™ä¸ª<br>@Overrideæ³¨é‡Šçš„ç”¨æ³•</p><p><img src="https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/web_photos/Z%40ASH_5XZ%29%29%280%40LWSR6Z%7DM7.png" alt="img"><img src="https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/web_photos/D%40W%7DZHRM11TD%29%29CS%28%28%25ZB_A.png" alt="img"></p><p>å­ç±»é‡å†™æ–¹æ³•çš„ä¿®é¥°ç¬¦è¦æ¯”çˆ¶ç±»çš„æ›´å¤§æˆ–ä¸€æ ·ï¼ŒEGï¼šçˆ¶ç±»ï¼šprotected,å­ç±»ï¼špublic;<br>å­ç±»é‡å†™æ–¹æ³•çš„è¿”å›å€¼ç±»å‹è¦æ¯”çˆ¶ç±»å°æˆ–ä¸€æ ·ï¼ŒRG:çˆ¶ç±»ï¼špublic object run(){},å­ç±»:public Integer run(){};<br>ç»§æ‰¿åçš„å…¨éƒ¨ï¼ˆæœ‰å‚å’Œæ— å‚ï¼‰æ„é€ å™¨ä¸€å®šä¼šå…ˆè®¿é—®çˆ¶ç±»çš„æ— å‚æ„é€ å™¨ï¼Œå†æ‰§è¡Œå­ç±»è‡ªå·±çš„æ„é€ å™¨ï¼›<br>å­ç±»çš„æ„é€ å™¨ç¬¬ä¸€è¡Œéƒ½æœ‰ä¸€ä¸ªsuper();è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ•°æ„é€ </p><p>ä½•å¹³å®‰ 18:44:36</p><p>å¼•ç”¨ç±»å‹ä½œä¸ºæ–¹æ³•çš„å‚æ•°å’Œæ–¹æ³•çš„è¿”å›å€¼ï¼š<br>å…ˆé€šè¿‡ç±»è¿›è¡Œåˆ›å»ºå¯¹è±¡</p><p><img src="https://picture-hepingan.oss-cn-hangzhou.aliyuncs.com/web_photos/QIXE%25X%5DY%7B%24K_FVMYDKBLT4H.png" alt="img"></p><p>å¼•ç”¨ç±»å‹ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼š</p><p><img src="https://images.cnblogs.com/cnblogs_com/blogs/773443/galleries/2338409/t_230823191130_AD(JA%7DKOE%5B6_A38XG_WEGH5.png" alt="img"></p><p>å¼•ç”¨ç±»å‹ä½œä¸ºæ•°æ®ç±»å‹(è¿”å›å€¼)åˆ›å»ºæ–¹æ³•ï¼š</p><p><img src="https://images.cnblogs.com/cnblogs_com/blogs/773443/galleries/2338409/t_230823191129_C" alt="img">~16XZP%60_PPPJ0VD(<a href="mailto:&#84;&#x5f;&#74;&#x40;&#86;&#x2e;&#112;&#110;&#x67;">&#84;&#x5f;&#74;&#x40;&#86;&#x2e;&#112;&#110;&#x67;</a>)</p><p>ï¼Œå› ä¸ºéœ€è¦return è¿”å›å€¼ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚intç­‰åŸºæœ¬æ•°æ®ç±»å‹</p><p>ä¸‰ç§æ–¹æ³•è®¾ç½®å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡:</p><p><img src="https://images.cnblogs.com/cnblogs_com/blogs/773443/galleries/2338409/t_230823191130_9S" alt="img">7YN~PROH73V5ROF0K3WH.png)</p><p>c3ç±»éœ€è¦æ·»åŠ æœ‰å‚çš„æ„é€ æ–¹æ³•ï¼ˆç‰¹åˆ«çš„å¼•ç”¨ç±»å‹æ·»åŠ æ–¹å¼ï¼šAddress addressï¼‰,è¿˜è¦æœ‰getter and setterè®¾ç½®è¿™ä¸‰ä¸ªå˜é‡(ä¸¤ä¸ªåŸºæœ¬ç±»å‹å˜é‡å’Œä¸€ä¸ªæˆå‘˜ç±»å‹å˜é‡)<br>Addressç±»ï¼š</p><p><img src="https://img2023.cnblogs.com/blog/3018339/202308/3018339-20230824031449085-805741147.png" alt="img"></p><p>ï¼Œå½“ç„¶äº†ä¹Ÿè¦æ·»åŠ ä¸‰ä¸ªå˜é‡çš„getterå’Œsetteræ–¹æ³•</p><p><strong>æˆå‘˜å˜é‡å’Œæ–¹æ³•å­¦ä¹ æ—¶å€™çš„ä»£ç ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">public class class1 &#123;</span><br><span class="line">private String name;</span><br><span class="line">private int age;</span><br><span class="line">private boolean sex;//å®ä¾‹æˆå‘˜å˜é‡ï¼Œå±äºç±»çš„å¯¹è±¡ï¼Œéœ€è¦æ·»åŠ å¯¹è±¡è¿›è¡Œè®¿é—®</span><br><span class="line">public static String schoolname=&quot;ä½•å¹³å®‰la&quot;;//é™æ€æˆå‘˜å˜é‡ï¼Œå±äºç±»æœ¬èº«ï¼Œå¯ç”¨ç±»åç›´æ¥è®¿é—®</span><br><span class="line">public class1()&#123;</span><br><span class="line">&#125;</span><br><span class="line">public class1(String name, int age, boolean sex) &#123;</span><br><span class="line">this.name = name;</span><br><span class="line">this.age = age;</span><br><span class="line">this.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">public static void speakname()&#123;</span><br><span class="line">System.out.println(&quot;å‘œå“ˆå“ˆå“ˆ&quot;+schoolname);</span><br><span class="line">&#125;</span><br><span class="line">public String getName() &#123;</span><br><span class="line">return name;</span><br><span class="line">&#125;</span><br><span class="line">public void setName(String name) &#123;</span><br><span class="line">this.name = name;</span><br><span class="line">&#125;</span><br><span class="line">public int getAge() &#123;</span><br><span class="line">return age;</span><br><span class="line">&#125;</span><br><span class="line">public void setAge(int age) &#123;</span><br><span class="line">this.age = age;</span><br><span class="line">&#125;</span><br><span class="line">public boolean isSex() &#123;</span><br><span class="line">return sex;</span><br><span class="line">&#125;</span><br><span class="line">public void setSex(boolean sex) &#123;</span><br><span class="line">this.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">public void speak()&#123;</span><br><span class="line">System.out.println(&quot;name:&quot;+this.name+&quot;,age:&quot;+age+&quot;,sex:&quot;+this.sex);</span><br><span class="line">&#125;</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">class1 zbj =new class1();</span><br><span class="line">zbj.setName(&quot;çŒªå…«æˆ’&quot;);</span><br><span class="line">System.out.println(zbj.schoolname);</span><br><span class="line">class1.speakname();//ç±»å.é™æ€æ–¹æ³•</span><br><span class="line">speakname();//åŒä¸€ä¸ªç±»ä¸­è®¿é—®é™æ€æ–¹æ³•å¯ä»¥ä¸å†™ç±»å</span><br><span class="line">zbj.speak();//å¯¹è±¡.å®ä¾‹æ–¹æ³•</span><br><span class="line">zbj.speakname();//å¯¹è±¡.é™æ€æ–¹æ³•ï¼ˆä¸æ¨èï¼‰</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»§æ‰¿å­¦ä¹ æ—¶å€™çš„ä»£ç ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">public class c2 &#123;</span><br><span class="line">public static void main(String[] args)&#123;</span><br><span class="line">c2 c =new c2();</span><br><span class="line">People p1= new People();</span><br><span class="line">Student s1=new Student();</span><br><span class="line">s1.study();</span><br><span class="line">&#125;</span><br><span class="line">static class People &#123;</span><br><span class="line">public People()&#123;</span><br><span class="line">System.out.println(&quot;äºº&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public String name;</span><br><span class="line">public static void swim()&#123;</span><br><span class="line">System.out.println(&quot;æ¸¸æ³³&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public void eat()&#123;</span><br><span class="line">System.out.println(&quot;åƒé¥­&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public void run()&#123;</span><br><span class="line">System.out.println(&quot;è·‘æ­¥&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">static class Student extends People&#123;</span><br><span class="line">public Student()&#123;</span><br><span class="line">// super(); æ­¤å¤„å†™ä¸å†™éƒ½ä¸€æ ·</span><br><span class="line">System.out.println(&quot;å­¦ç”Ÿ&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public void study()&#123;</span><br><span class="line">System.out.println(&quot;å­¦ä¹ &quot;);</span><br><span class="line">eat();//è°ƒç”¨å­ç±»çš„eat</span><br><span class="line">super.eat();//è°ƒç”¨çˆ¶ç±»çš„eat</span><br><span class="line">//superå¯ä»¥åœ¨å®ä¾‹æ–¹æ³•ä¸­è°ƒç”¨å­ç±»ä¸­è¢«é‡å†™çš„æ–¹æ³•</span><br><span class="line">&#125;</span><br><span class="line">@Override//åŠ ä¸Šæ³¨è§£åå¯ä»¥æ£€æŸ¥çˆ¶ç±»çš„æ–¹æ³•æ˜¯å¦å†™é”™ï¼Œæ³¨é‡Šç‰¹ç‚¹å¯è¯»æ€§å¥½ï¼Œå®‰å…¨ï¼Œä¼˜é›…~</span><br><span class="line">public void eat()&#123;</span><br><span class="line">System.out.println(&quot;å­¦ç”Ÿåƒçš„å¤š&quot;);//æ–¹æ³•é‡å†™</span><br><span class="line">&#125;</span><br><span class="line">// @Override</span><br><span class="line">//æ­¤å¤„æ–¹æ³•åä¸çˆ¶ç±»çš„ä¸ä¸€æ ·ï¼ŒæŠ¥é”™æç¤º</span><br><span class="line">public void run1()&#123;</span><br><span class="line">System.out.println(&quot;å­¦ç”Ÿè·‘æ­¥&quot;);</span><br><span class="line">&#125;</span><br><span class="line">public int id;</span><br><span class="line">// @Override</span><br><span class="line">public static void swim()&#123;</span><br><span class="line">&#125;//é™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™,å› ä¸ºé™æ€æ–¹æ³•åªèƒ½ç”¨äºè‡ªå·±çš„ç±»ï¼Œä¸èƒ½é‡å†™,å•ç‹¬å†™ä¸€æ ·çš„æ–¹æ³•ç›¸å½“äºå†™äº†ä¸ªæ–°çš„é™æ€æ–¹æ³•ï¼Œè€Œä¸æ˜¯é‡å†™</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¼•ç”¨æˆå‘˜å˜é‡çš„ä»£ç ï¼š</strong></p><p>ä¸»:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">public class c3 &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    private Address address;</span><br><span class="line"></span><br><span class="line">    public c3(String name, int age, Address address) &#123;</span><br><span class="line"></span><br><span class="line">this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">        this.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">    public c3()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line"></span><br><span class="line">this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Address getAddress() &#123;</span><br><span class="line">        return address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAddress(Address address) &#123;</span><br><span class="line">        this.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Dog jinmao =new Dog();</span><br><span class="line">        go(jinmao,1);</span><br><span class="line">        //ä¸‰ç§æ–¹æ³•åˆ›é€ å¯¹è±¡</span><br><span class="line">        c3 hh = new c3();</span><br><span class="line">        hh.setName(â€œä½•å¹³å®‰â€);</span><br><span class="line">        hh.setAge(18);</span><br><span class="line">        hh.setAddress(new Address(â€œå¤©é¦™å›­â€,22,33));//è®¾ç½®Address</span><br><span class="line"></span><br><span class="line">        c3 hly= new c3(â€œä½•å…­ä¸€â€,12,new Address(â€œå˜‰åå›­â€,12,34));//æœ‰å‚æ„é€ å‡½æ•°</span><br><span class="line"></span><br><span class="line">        c3 ch = new c3();</span><br><span class="line">        ch.setName(â€œé™ˆå¯’â€);</span><br><span class="line">        ch.setAge(19);</span><br><span class="line">        Address addr =new Address(â€œå˜‰åå›­â€,12,23);//å¯ä»¥æ–°å»ºä¸€ä¸ªåˆ›å»ºAddress</span><br><span class="line">        ch.setAddress(addr);</span><br><span class="line">        Address add1=ch.getAddress();</span><br><span class="line">        System.out.println(ch.getName()+â€ä½åœ¨â€+add1.getName()+â€,ä»Šå¹´â€+ch.getAge()+â€å²äº†ï¼Œåœ°å€åæ ‡ï¼šâ€+add1.getX()+â€,â€+add1.getY());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public static void go(Dog a,int op)&#123;//å¼•ç”¨ç±»å‹ä½œä¸ºæ–¹æ³•çš„å‚æ•°</span><br><span class="line">        System.out.println(â€œå¼€å§‹â€);</span><br><span class="line">        a.run();</span><br><span class="line">        System.out.println(â€œç»“æŸâ€);</span><br><span class="line">    &#125;</span><br><span class="line">    public void eat(int age,String name)&#123;</span><br><span class="line">        this.age=age;</span><br><span class="line"></span><br><span class="line">this.name=name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static Dog createDog()&#123;</span><br><span class="line">        Dog taidi = new Dog();//åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚ä¸‹é¢çš„intå’Œbooleanç±»å‹ï¼Œå› ä¸ºéœ€è¦è¿”å›å€¼</span><br><span class="line">        return taidi;</span><br><span class="line">    &#125;</span><br><span class="line">    //å¼•ç”¨ç±»å‹ä½œä¸ºè¿”å›å€¼</span><br><span class="line">    public static int madeDog()&#123;</span><br><span class="line">        int abc=1;</span><br><span class="line">        return abc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static boolean sexDog()&#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    //é€šè¿‡å¼•ç”¨ç±»å‹åˆ›å»ºæ–¹æ³•</span><br><span class="line">    static class Dog&#123;</span><br><span class="line">        public void run()&#123;</span><br><span class="line">            System.out.println(â€œç‹—è·‘æ­¥â€);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //åˆ›å»ºç±»</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Addressç±»:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class Address &#123;</span><br><span class="line">private String name;</span><br><span class="line">private double x;</span><br><span class="line">private double y;</span><br><span class="line">public Address(String name, double x, double y) &#123;</span><br><span class="line">this.name = name;</span><br><span class="line">this.x = x;</span><br><span class="line">this.y = y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public String getName() &#123;</span><br><span class="line">return name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void setName(String name) &#123;</span><br><span class="line">this.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public double getX() &#123;</span><br><span class="line">return x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void setX(double x) &#123;</span><br><span class="line">this.x = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public double getY() &#123;</span><br><span class="line">return y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void setY(double y) &#123;</span><br><span class="line">this.y = y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ITç¬”è®° </category>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„æ•…äº‹ï¼ˆå¤§ä¸€ä¸Šï¼‰</title>
      <link href="/2023/02/03/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%80%E4%B8%8A%EF%BC%89/"/>
      <url>/2023/02/03/%E6%88%91%E7%9A%84%E7%B2%BE%E5%8D%8E/%E6%88%91%E7%9A%84%E6%95%85%E4%BA%8B%EF%BC%88%E5%A4%A7%E4%B8%80%E4%B8%8A%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ä½ æ„¿æ„å¬æˆ‘çš„æ•…äº‹å—ï¼Ÿæ„¿æ„çš„è¯æˆ‘å¯ä»¥é™ªä½ æ‘†ä¸€æ¡ŒèŒ¶æ°´ç“œå­ç»†è°ˆâ€¦.</p><p>æˆ‘çš„å½±è§†åŠ¨ç”»åæœŸå’ŒITç¨‹åºè®¾è®¡çš„æ•…äº‹â€¦<br>é«˜è€ƒå®Œåæˆ‘æ„Ÿè§‰æˆ‘çš„å¿ƒå°±å½»åº•è¢«æ•å¼€ï¼Œä»¥å‰å­¦ä¹ åªèƒ½å­¦ä¹ å›ºå®šçš„ç§‘ç›®å­¦ç§‘ï¼Œéƒ½æ˜¯æˆ‘æä¸èµ·å…´è¶£çš„ç©æ„å„¿ï¼Œç°åœ¨æˆ‘å¯ä»¥é€‰æ‹©æˆ‘å–œæ¬¢çš„ä¸œè¥¿äº†ã€‚ä½†æ˜¯æ–¹å‘å¤ªå¤šï¼Œä¸€å¼€å§‹è¢«å¶ç„¶åˆ·åˆ°çš„è§†é¢‘å‰ªè¾‘å¹¿å‘Šæ¨é”€ï¼Œçœ‹å®ƒåˆæ˜¯å…è´¹çš„ï¼Œå°±æŠ¥äº†åå¬äº†ä¸¤èŠ‚è¯¾ï¼Œä½†æ˜¯ç¬¬ä¸‰å¤©å®ƒå°±éœ€è¦æ”¶é’±äº†ï¼Œæœç„¶éƒ½æ˜¯èµ„æœ¬å®¶ï¼Œæˆ‘å°±å»è‡ªå­¦äº†PRå’ŒAEï¼Œå¤§æ¦‚ä¹Ÿå°±å­¦äº†ä¸€å‘¨ï¼ŒæŒæ¡äº†äº›åŸºæœ¬æ“ä½œï¼Œå®Œå…¨è¾¾ä¸åˆ°æ¥å•çš„è¦æ±‚ã€‚<br>ä¹‹åæˆ‘å°±ä¸€ç›´æ‘†çƒ‚ï¼Œæš‘å‡æˆ‘æ²‰è¿·äºä¸€æ¬¾åä¸ºåŸç¥çš„æ¸¸æˆï¼Œè§‰å¾—åœ¨è¿™ä¸ªè™šæ‹Ÿä¸–ç•Œé‡Œéå¸¸è‡ªç”±(å½“ç„¶è§’è‰²é•¿å¾—ä¹ŸæŒºå¥½çœ‹çš„)ï¼Œæˆ‘å°±å–œæ¬¢åœ¨bç«™åˆ·ä¸€äº›äºŒåˆ›è§†é¢‘ï¼Œæ„Ÿè§‰éƒ½å¥½å‰å®³éå¸¸ä»¤æˆ‘éœ‡æƒŠï¼Œå¤©é©¬è¡Œç©ºçš„éœ‡æ’¼å¤§ä½œçš„ï¼Œæˆ‘å°±å¼€å§‹å¯¹è¿™äº›å¥½å¥‡ï¼Œäº†è§£ä¸€ä¸‹åå¤§è‡´å¯ä»¥é€šè¿‡ä¸‰ç»´å’ŒäºŒç»´ä¸¤ç§æ–¹æ³•å‘ˆç°ç»™è§‚ä¼—ï¼Œæˆ‘å°±å»è‡ªå­¦äº†Blenderè¿™ä¸ª3Då…¨èƒ½è½¯ä»¶ï¼Œå‘ç°å®ƒåŠŸèƒ½çœŸçš„å¾ˆå¼ºå¤§ï¼Œç°åœ¨å¥½å¤šéƒ½æ‘¸ä¸æ¸…ï¼Œæœ€å¼€å§‹æ˜¯å­¦ä¹ è½¯ä»¶çš„æ“ä½œï¼Œç„¶åå¼€å§‹å­¦ä¹ ç®€å•å»ºæ¨¡ï¼Œå‘ç°å»ºæ¨¡è¿™ç©æ„å„¿çœŸçš„æ‹—å£ï¼Œåæ¥çŸ¥é“æ¸²æŸ“è¿™ä¸ªä¸œè¥¿å’Œç½‘ä¸Šæœ‰å…è´¹çš„æ¨¡å‹æä¾›ä¸‹è½½ï¼Œå°±æ”¾å¼ƒå»ºæ¨¡å¼€å§‹å­¦ä¹ åæœŸåŠ¨ä½œå’Œç”»é¢æ¸²æŸ“ï¼Œæˆ‘å‘ç°è¿˜æŒºå¥½ç©ï¼Œå°±å­¦ä¹ äº†å¥½ä¹…ï¼Œæ¨¡å‹å°±æ˜¯åŸç¥é‡Œçš„äººç‰©ï¼ŒåŠ¨ä½œä¹Ÿæ˜¯å¥—ç”¨çš„ï¼Œå°±æ¸²æŸ“æ˜¯è‡ªå·±æçš„ï¼Œè™½ç„¶æå‡ºæ¥å’Œå¤§ä½¬ä»¬çš„å·®è·å¾ˆå¤§ï¼Œä½†æ˜¯åˆ«ææˆ‘å½“æ—¶æœ‰å¤šå¼€å¿ƒäº†ã€‚<br>åæ¥æˆ‘åˆæ¡èµ·ä¹‹å‰çš„å½±è§†å‰ªè¾‘ï¼Œä¸‹è½½äº†å¿…å¤‡çš„PSè½¯ä»¶ï¼Œå­¦ä¹ äº†ä¸€äº›åŸºç¡€æ“ä½œåå°±è¿æ¥äº†å¤§å­¦å¼€å­¦â€¦<br>å¼€å­¦å‘ç”Ÿäº†å¾ˆå¤šäº‹å°±ä¸è°ˆäº†ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦æ¥è®²è®²æˆ‘å·ç‹çš„æ•…äº‹ã€‚å¼€å­¦åæˆ‘æ˜¯å…ˆç»§ç»­ç©æˆ‘çš„Blender,å®¤å‹éƒ½è¿˜æŒºæ–°å¥‡æˆ‘è¿™ä¸ªæ–°å¥‡ç©æ„å„¿çš„ï¼Œæˆ‘ä¹Ÿæœ‰ç§ä»–äººä¸çŸ¥åªæˆ‘çŸ¥çš„æ²¾æ²¾è‡ªå–œã€‚åæ¥å¯ä»¥åˆ¶ä½œå‡ºä¸€äº›ç®€å•çš„mmdåŠ¨ç”»ï¼Œä½†æ˜¯æˆ‘çš„ç”µè„‘çœŸçš„å¾ˆçƒ‚ï¼Œæ‰“CFéƒ½æœ‰ç‚¹å¡çš„é‚£ç§ï¼Œæˆ‘å¤§ä¸‰æ‰“ç®—ä¹°ä¸ªæ–°çš„å°å¼ç”µè„‘ï¼Œæ¸²æŸ“ä¸ªåŠ¨ç”»è¦åŠå¤©(çœŸåŠå¤©)ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘åšå¾—å¾ˆnbï¼Œå‘åˆ°bç«™ï¼Œä¸€çœ‹æ’­æ”¾é‡500éƒ½æ²¡æœ‰ï¼Œæ‰“å‡»äº†æˆ‘å¾ˆå¤šï¼Œæ²¡äº‹æˆ‘çŸ¥é“æœ‰é™æµé™åˆ¶çš„ï¼Œå¤§ä½¬éƒ½æ˜¯è¦æ…¢æ…¢æ¥çš„ã€‚<br>11æœˆä»½ï¼Œç–«æƒ…å°æ ¡å°å¯ï¼Œæˆ‘åˆæ¡èµ·æˆ‘çš„AEå’ŒPrï¼Œå°è¯•å¼€å§‹äºŒç»´åŠ¨ç”»çš„åˆ›ä½œï¼Œå­¦ä¹ äº†å°†ä¸€å¼ å›¾ç‰‡å˜æˆåŠ¨æ€å›¾ç‰‡çš„æ“ä½œï¼Œè¿™ä¸ªæ˜¯æˆ‘å½±è§†åŠ¨ç”»è®¾è®¡é‡Œé¢å­¦å¾—ç®—æ¯”è¾ƒå¤´ç–¼çš„ä¸€ä¸ªå†…å®¹ï¼Œä¸è¿‡è¿˜æ˜¯æˆåŠŸäº†ï¼Œåˆ¶ä½œäº†åŸç¥æ•£æ­¥çš„åŠ¨å›¾ï¼Œæœ€åå–å¾—äº†å®Œç¾çš„èƒœåˆ©ï¼Œè·å¾—2.5wæ’­æ”¾é‡ï¼Œ<br>3200çš„ç‚¹èµé‡å’Œå¥½å¤šçš„æ”¶è—æŠ•å¸ï¼Œä¹Ÿå› æ­¤æœ‰äººæ¥æ‰¾æˆ‘åˆä½œï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„å•å­ï¼Œè™½ç„¶åªæœ‰ç®€ç®€å•å•çš„15å…ƒï¼Œä½†åˆ«è¯´å¾®ä¿¡æ”¯ä»˜åˆ°è´¦çš„é‚£ä¸€åˆ»æˆ‘å·®ç‚¹è¹¦èµ·æ¥äº†ï¼Œæˆ‘æŠŠå®ƒç»™æˆ‘çš„çˆ¸å¦ˆçœ‹ï¼Œæˆ‘è‡ªç„¶ä¹Ÿæ”¶åˆ°äº†ä¸å°‘æ­£åé¦ˆã€‚ä¹‹åæˆ‘å°±æ”¾å¼€äº†åˆ›ä½œï¼Œä¸€å¤©ä¸‰å¼ åŠ¨å›¾ï¼Œä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œçƒ­åº¦éƒ½æ˜¯çŸ­å‘¨æœŸçš„ï¼Œä¹‹åå°±å†ä¹Ÿæ²¡ç»“æœå•äº†â€¦<br>æ”¾å‡äº†ï¼Œæˆ‘çš„å¤§ä¸€ä¸Šå­¦æœŸç»“æŸäº†â€¦.<br>å¯’å‡æ”¾å¾—æ¯”è¾ƒæ—©ï¼Œåœ¨æ”¾å‡ä¹‹å‰æˆ‘å°±åœ¨ç½‘ä¸Šä¹°äº†ä¸€å—100å¤šçš„æ•°ä½æ¿ï¼Œå‡†å¤‡åœ¨å¯’å‡å­¦å®Œæ•°ä½æ¿ç»˜ç”»ç„¶åè¿›è¡ŒåŸç”»åˆ›ä½œï¼Œå› ä¸ºä¹‹å‰çš„åŠ¨å›¾åˆ›ä½œéƒ½æ˜¯å·çš„åˆ«äººçš„å›¾ï¼Œå·å¤šäº†æ€»æ˜¯ä¸å¥½çš„ã€‚æˆ‘å…´è‡´å‹ƒå‹ƒçš„å­¦äº†ä¸¤ä¸‰å¤©ï¼Œç»“æœå› ä¸ºæ²¡æœ‰åŠæ—¶çš„æ­£åé¦ˆåˆç»ˆæ­¢äº†ï¼Œå°±å¼€å§‹æ¯å¤©æ‰“æ¸¸æˆäº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰æ¯å¤©åœ¨å­¦ã€‚åæ¥ç–«æƒ…å…¨é¢çˆ†å‘ï¼Œå‘†åœ¨å®¶é‡Œä¹Ÿä¼šè¢«é˜³ï¼Œå…¨å‘˜é˜³äº†ä¸ªé˜³ï¼Œå®¶äººéƒ½é­äº†ï¼Œåˆ«æé‚£å‡ å¤©ç—›è‹¦çš„æ—¥å­äº†ï¼Œæ•´å¤©å°±åƒæ­»çŒªçš®å­æ”¾åœ¨ç«å †é‡Œçƒ¤ï¼Œç™½å¤©æ™šä¸Šéƒ½åœ¨ç¡ï¼Œå‘¼å¸ä¸åˆ°å¤–é¢çš„ç©ºæ°”ã€‚ç—…å¥½ä¹‹åæˆ‘ä¹Ÿæ²¡æœ‰å¿ƒæ€å­¦ä¹ äº†ï¼Œå°±æƒ³æ”¾è‚†çš„æŠŠæˆ‘è¿™å‡ å¤©æ²¡ç©å¤Ÿçš„æ¸¸æˆç»™æ‰“äº†ï¼Œä¹‹åçš„å¯’å‡æˆ‘å°±å†ä¹Ÿæ²¡å­¦ä¹ è¿‡äº†â€¦..æ•´å¤©åªåšä¸¤ä»¶äº‹:å®ˆåº—ï¼Œæ‰“æ¸¸æˆã€‚<br>å°±è¿™æ ·æ··åˆ°äº†å¼€å­¦ï¼Œæˆ‘çš„å½±è§†åŠ¨ç”»åæœŸä¹Ÿå°±æä¸€æ®µè½äº†â€¦â€¦<br>å¤§ä¸€ä¸‹å­¦æœŸæ¥äº†â€¦â€¦</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ç²¾å </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æˆ‘çš„æ•…äº‹ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
